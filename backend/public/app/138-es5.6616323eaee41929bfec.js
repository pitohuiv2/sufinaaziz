!function(){function e(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function i(e,i){for(var t=0;t<i.length;t++){var a=i[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{"+kyB":function(t,a,n){"use strict";n.r(a),n.d(a,"SettingLoginUserModule",function(){return N});var o=n("ofXK"),l=n("tyNb"),r=n("7zfz"),s=n("fXoL"),b=n("EJUL"),c=n("U+s4"),p=n("G0w9"),u=n("ujBT"),d=n("dPl2"),g=n("7kUa"),m=n("rEr+"),h=n("arFO"),f=n("3Pt+"),v=n("7CaW"),k=n("jIHw"),P=n("xlun"),Q=n("/RsI"),w=n("V5BG"),M=n("Q4Mo"),x=n("Ji6n"),y=n("PU9F");function C(e,i){if(1&e){var t=s.Sb();s.Qb(0,"div",39),s.Qb(1,"button",40),s.Yb("click",function(){return s.yc(t),s.bc().tambah()}),s.Pb(),s.Pb()}}function U(e,i){if(1&e&&(s.Qb(0,"th",43),s.Jc(1),s.Lb(2,"p-sortIcon",44),s.Pb()),2&e){var t=i.$implicit;s.Fc("width: ",t.width,""),s.jc("pSortableColumn",t.field),s.xb(1),s.Lc(" ",t.header," "),s.xb(1),s.jc("field",t.field)}}function S(e,i){if(1&e&&(s.Qb(0,"tr"),s.Lb(1,"th",41),s.Hc(2,U,3,6,"th",42),s.Pb()),2&e){var t=i.$implicit;s.xb(2),s.ic("ngForOf",t)}}function T(e,i){if(1&e&&(s.Qb(0,"td"),s.Jc(1),s.Pb()),2&e){var t=i.$implicit,a=s.bc().$implicit;s.Fc("width: ",t.width,""),s.xb(1),s.Lc(" ",a[t.field]," ")}}function I(e,i){if(1&e){var t=s.Sb();s.Qb(0,"tr"),s.Qb(1,"td",41),s.Qb(2,"button",45),s.Yb("click",function(){s.yc(t);var e=i.$implicit;return s.bc().editUser(e)}),s.Pb(),s.Qb(3,"button",46),s.Yb("click",function(){s.yc(t);var e=i.$implicit;return s.bc().hapusUser(e)}),s.Pb(),s.Pb(),s.Hc(4,T,2,4,"td",47),s.Pb()}if(2&e){var a=i.columns;s.xb(4),s.ic("ngForOf",a)}}function F(e,i){if(1&e){var t=s.Sb();s.Qb(0,"div",50),s.Qb(1,"p-checkbox",51),s.Yb("ngModelChange",function(e){s.yc(t);var a=i.$implicit;return s.bc(2).item.mapRuangan[a.id]=e}),s.Pb(),s.Qb(2,"label",52),s.Jc(3),s.Pb(),s.Pb()}if(2&e){var a=i.$implicit,n=s.bc(2);s.xb(1),s.jc("inputId",a.id),s.ic("ngModel",n.item.mapRuangan[a.id]),s.xb(1),s.jc("for",a.id),s.xb(1),s.Lc(" ",a.namaruangan,"")}}function J(e,i){if(1&e&&(s.Qb(0,"div",48),s.Hc(1,F,4,4,"div",49),s.cc(2,"filter"),s.Pb()),2&e){var t=s.bc();s.xb(1),s.ic("ngForOf",s.ec(2,1,t.listRuangan,t.searchText))}}function L(e,i){if(1&e){var t=s.Sb();s.Qb(0,"div",50),s.Qb(1,"p-checkbox",53),s.Yb("ngModelChange",function(e){s.yc(t);var a=i.$implicit;return s.bc(2).item.mapModul[a.idCheck]=e}),s.Pb(),s.Qb(2,"label",52),s.Jc(3),s.Pb(),s.Pb()}if(2&e){var a=i.$implicit,n=s.bc(2);s.xb(1),s.jc("inputId",a.idCheck),s.ic("ngModel",n.item.mapModul[a.idCheck]),s.xb(1),s.jc("for",a.idCheck),s.xb(1),s.Lc(" ",a.namemodul,"")}}function Y(e,i){if(1&e&&(s.Qb(0,"div",48),s.Hc(1,L,4,4,"div",49),s.cc(2,"filter"),s.Pb()),2&e){var t=s.bc();s.xb(1),s.ic("ngForOf",s.ec(2,1,t.listModul,t.searchText2))}}function H(e,i){if(1&e){var t=s.Sb();s.Qb(0,"button",54),s.Yb("click",function(){return s.yc(t),s.bc().simpanUser()}),s.Pb(),s.Qb(1,"button",55),s.Yb("click",function(){return s.yc(t),s.bc().pop_User=!1}),s.Pb()}if(2&e){var a=s.bc();s.ic("disabled",a.isSimpan)}}var K,j,R,_=function(){return[5,10,25,50]},O=function(){return["namauser","namalengkap","kelompokuser"]},B=function(){return{width:"900px",minWidth:"900px"}},$=[{path:"",component:(K=function(){function t(i,a,n,o,l,r,s,b,c){e(this,t),this.apiService=i,this.authService=a,this.confirmationService=n,this.messageService=o,this.cacheHelper=l,this.dateHelper=r,this.alertService=s,this.route=b,this.router=c,this.item={mapModul:[],mapRuangan:[],mapModul2:[]},this.pop_User=!1,this.isSimpan=!1,this.indexTab=0,this.searchText="",this.searchText2="",this.listModul=[],this.listRuangan=[],this.ruanganDef=[],this.modulDef=[]}var a,n,o;return a=t,(n=[{key:"ngOnInit",value:function(){this.loadColumn(),this.loadCombo(),this.loadData()}},{key:"loadCombo",value:function(){var e=this;this.apiService.get("sysadmin/general/get-combo-user").subscribe(function(i){e.d_KelompokUser=i.kelompokuser,e.d_Profile=i.profile;for(var t=0;t<i.modulaplikasi.length;t++){var a=i.modulaplikasi[t];a.name=a.modulaplikasi,a.idCheck=parseFloat(a.id+".10"),a.namemodul="Modul - "+a.modulaplikasi}for(var n=0;n<i.ruangan.length;n++){var o=i.ruangan[n];o.name=o.namaruangan}e.listRuangan=i.ruangan,e.listModul=i.modulaplikasi,e.item.profile=i.profile[0]})}},{key:"loadData",value:function(){var e=this;this.apiService.get("sysadmin/general/get-daftar-user").subscribe(function(i){for(var t=0;t<i.data.length;t++)i.data[t].no=t+1;e.dataSource=i.data,e.d_LoginUser=i.data})}},{key:"loadColumn",value:function(){this.column=[{field:"no",header:"No",width:"40px"},{field:"namauser",header:"Nama User",width:"200px"},{field:"namalengkap",header:"Pegawai",width:"250px"},{field:"kelompokuser",header:"Kelompok User",width:"150px"}]}},{key:"editUser",value:function(e){var i=e;this.item.idlogin=i.id,this.item.namaUser=i.namauser,this.item.kelompokUser={id:i.objectkelompokuserfk,kelompokuser:i.kelompokuser},this.item.pegawai={id:i.objectpegawaifk,namalengkap:i.namalengkap},this.pop_User=!0}},{key:"hapusUser",value:function(e){var i=this;this.apiService.post("sysadmin/general/delete-new-user",{id:e.id}).subscribe(function(e){i.loadData()})}},{key:"tambah",value:function(){this.pop_User=!0,this.clearUser()}},{key:"simpanUser",value:function(){var e=this;null!=this.item.namaUser?null!=this.item.kataKunciPass?this.item.kataKunciPass==this.item.kataKunciConfirm?null!=this.item.kelompokUser?null!=this.item.pegawai?null!=this.item.profile?this.apiService.post("sysadmin/general/save-new-user",{id:null!=this.item.idlogin?this.item.idlogin:"",katasandi:this.item.kataKunciPass,namauser:this.item.namaUser,objectkelompokuserfk:this.item.kelompokUser.id,objectpegawaifk:this.item.pegawai.id,waktuberakhir:null,kdprofile:this.item.profile.id}).subscribe(function(i){e.pop_User=!1,e.loadData(),e.clearUser()}):this.alertService.error("Info","Profile User Harus di isi"):this.alertService.error("Info","Pegawai Harus di isi"):this.alertService.error("Info","Kelompok User Harus di isi"):this.alertService.error("Info","Kata Sandi tidak sama"):this.alertService.error("Info","Kata Sandi Harus di isi"):this.alertService.error("Info","Nama User Harus di isi")}},{key:"clearUser",value:function(){delete this.item.idlogin,delete this.item.namaUser,delete this.item.kelompokUser,delete this.item.pegawai,delete this.item.kataKunciPass,delete this.item.kataKunciConfirm}},{key:"filterPegawai",value:function(e){var i=this;this.apiService.get("sysadmin/general/get-pegawai-part?namalengkap="+e.query).subscribe(function(e){i.d_Pegawai=e})}},{key:"handleChangeTab",value:function(e){this.indexTab=e.index,this.loadData()}},{key:"clearFilter",value:function(){this.searchText=""}},{key:"clearFilter2",value:function(){this.searchText2=""}},{key:"saveMapRuangan",value:function(){if(null!=this.item.loginUser)if(0!=this.item.mapRuangan.length){for(var e=Object.keys(this.item.mapRuangan),i=[],t=e.length-1;t>=0;t--)1==this.item.mapRuangan[e[t]]&&i.push({ruanganid:parseInt(e[t])});this.apiService.post("sysadmin/general/save-map-login-to-ruangan",{loginid:this.item.loginUser.id,ruangan:i}).subscribe(function(e){})}else this.alertService.warn("Info","Belum ada ruangan yang dipilih");else this.alertService.warn("Info","Login User belum dipilih")}},{key:"changeUser",value:function(e){var i=this;this.item.mapModul=[],this.item.mapRuangan=[],null!=e.value&&(this.apiService.get("sysadmin/general/get-map-loginruangan?loginuseridfk="+e.value.id).subscribe(function(e){i.item.mapRuangan=[],i.alertService.info("Info",e.length+" Ruangan Terpilih");for(var t=0;t<e.length;t++)i.item.mapRuangan[e[t].ruanganidfk]=!0}),this.apiService.get("sysadmin/general/get-map-loginmodul?loginuseridfk="+e.value.id).subscribe(function(e){i.item.mapModul=[],i.alertService.info("Info",e.length+" Modul Terpilih");for(var t=0;t<e.length;t++){var a=e[t];a.idCheck=parseFloat(a.objectmodulaplikasifk+".10"),i.item.mapModul[a.idCheck]=!0}}))}},{key:"saveModul",value:function(){if(null!=this.item.loginUser){for(var e=Object.keys(this.item.mapModul),i=[],t=e.length-1;t>=0;t--)if(1==this.item.mapModul[e[t]]){var a=e[t].split(".");i.push({objectmodulaplikasifk:parseInt(a[0])})}0!=i.length?this.apiService.post("sysadmin/general/save-map-login-to-modul",{objectloginuserfk:this.item.loginUser.id,details:i}).subscribe(function(e){}):this.alertService.warn("Info","Belum ada Modul yang dipilih")}else this.alertService.warn("Info","Login User belum dipilih")}}])&&i(a.prototype,n),o&&i(a,o),t}(),K.\u0275fac=function(e){return new(e||K)(s.Jb(b.a),s.Jb(b.b),s.Jb(r.a),s.Jb(r.h),s.Jb(c.a),s.Jb(p.a),s.Jb(u.a),s.Jb(l.a),s.Jb(l.f))},K.\u0275cmp=s.Db({type:K,selectors:[["app-setting-login-user"]],features:[s.wb([r.a])],decls:83,vars:45,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-grid"],[1,"p-col-12","p-md-12"],[3,"onChange"],["header","Login User","leftIcon","fa fa-users"],[1,"p-col-12","p-md-4"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Pencarian ",3,"input"],[1,"p-col-12"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","globalFilterFields","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Mapping User","leftIcon","pi pi-sitemap"],["for","input",1,"label"],["placeholder","Login User","optionLabel","namauser",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],[1,"p-col-12","p-md-6"],["header","Map To Ruangan",3,"toggleable"],["pInputText","","type","text","placeholder","Filter",3,"ngModel","ngModelChange"],[1,"p-col-12","p-md-1"],["pButton","","type","button","icon","pi pi-times","pTooltip","Clear Filter",1,"p-button","p-button-danger","p-mr-2",3,"click"],["class","p-grid","style","overflow: auto; height: 250px;padding: 20px;",4,"ngIf"],[1,"p-grid",2,"margin-top","10px"],[1,"p-col-12","p-md-2","p-md-offset-10"],["pButton","","type","button","icon","pi pi-save","label","Simpan",1,"p-button","p-mr-2",3,"click"],["header","Map To Modul",3,"toggleable"],["header","Tambah User ",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"p-fluid","p-grid"],["header","Detail User",3,"toggleable"],["type","text","pInputText","","placeholder","Nama User ",3,"ngModel","ngModelChange"],["type","password","pInputText","","placeholder","Kata Sandi ",3,"ngModel","ngModelChange"],["type","password","pInputText","","placeholder","Ulangi Kata Sandi ",3,"ngModel","ngModelChange"],["placeholder","Profile","optionLabel","namalengkap","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange"],["placeholder","Kelompok User","optionLabel","kelompokuser","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange"],["field","namalengkap","placeholder","Pegawai","appendTo","body",3,"ngModel","suggestions","dropdown","ngModelChange","completeMethod"],["pTemplate","footer"],[1,"p-d-flex"],["type","button","pButton","","pRipple","","icon","pi pi-plus","pTooltip","Tambah ","tooltipPosition","bottom",1,"p-button-success","p-mr-2",3,"click"],[2,"width","80px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],["pButton","","type","button","icon","pi pi-user-edit","pTooltip","Edit ","label","",1,"p-button-rounded","p-mr-2",3,"click"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus ","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"],[1,"p-grid",2,"overflow","auto","height","250px","padding","20px"],["class","p-col-12 p-field-checkbox",4,"ngFor","ngForOf"],[1,"p-col-12","p-field-checkbox"],["binary","true","name","group1",3,"ngModel","inputId","ngModelChange"],[3,"for"],["binary","true",3,"ngModel","inputId","ngModelChange"],["pButton","","icon","pi pi-save","label","Simpan",1,"p-button","p-button-success","p-mr-2",3,"disabled","click"],["pButton","","icon","fa fa-refresh","label","Batal",1,"p-button","p-mr-2",3,"click"]],template:function(e,i){if(1&e){var t=s.Sb();s.Qb(0,"div",0),s.Qb(1,"div",1),s.Qb(2,"h4"),s.Jc(3,"Setting Login User"),s.Pb(),s.Qb(4,"div",2),s.Qb(5,"div",3),s.Qb(6,"p-tabView",4),s.Yb("onChange",function(e){return i.handleChangeTab(e)}),s.Qb(7,"p-tabPanel",5),s.Qb(8,"div",2),s.Qb(9,"div",6),s.Qb(10,"span",7),s.Lb(11,"i",8),s.Qb(12,"input",9),s.Yb("input",function(e){return s.yc(t),s.wc(15).filterGlobal(e.target.value,"contains")}),s.Pb(),s.Pb(),s.Pb(),s.Qb(13,"div",10),s.Qb(14,"p-table",11,12),s.Yb("selectionChange",function(e){return i.selectedGrid=e}),s.Hc(16,C,2,0,"ng-template",13),s.Hc(17,S,3,1,"ng-template",14),s.Hc(18,I,5,1,"ng-template",15),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(19,"p-tabPanel",16),s.Qb(20,"div",2),s.Qb(21,"div",3),s.Qb(22,"div",2),s.Qb(23,"div",6),s.Qb(24,"label",17),s.Jc(25,"Login User"),s.Pb(),s.Qb(26,"p-dropdown",18),s.Yb("ngModelChange",function(e){return i.item.loginUser=e})("onChange",function(e){return i.changeUser(e)}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(27,"div",19),s.Qb(28,"p-panel",20),s.Qb(29,"div",2),s.Qb(30,"div",6),s.Qb(31,"span",7),s.Lb(32,"i",8),s.Qb(33,"input",21),s.Yb("ngModelChange",function(e){return i.searchText=e}),s.Pb(),s.Pb(),s.Pb(),s.Qb(34,"div",22),s.Qb(35,"button",23),s.Yb("click",function(){return i.clearFilter()}),s.Pb(),s.Pb(),s.Hc(36,J,3,4,"div",24),s.Pb(),s.Qb(37,"div",25),s.Qb(38,"div",26),s.Qb(39,"button",27),s.Yb("click",function(){return i.saveMapRuangan()}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(40,"div",19),s.Qb(41,"p-panel",28),s.Qb(42,"div",2),s.Qb(43,"div",6),s.Qb(44,"span",7),s.Lb(45,"i",8),s.Qb(46,"input",21),s.Yb("ngModelChange",function(e){return i.searchText2=e}),s.Pb(),s.Pb(),s.Pb(),s.Qb(47,"div",22),s.Qb(48,"button",23),s.Yb("click",function(){return i.clearFilter2()}),s.Pb(),s.Pb(),s.Hc(49,Y,3,4,"div",24),s.Pb(),s.Qb(50,"div",25),s.Qb(51,"div",26),s.Qb(52,"button",27),s.Yb("click",function(){return i.saveModul()}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(53,"p-dialog",29),s.Yb("visibleChange",function(e){return i.pop_User=e}),s.Qb(54,"div",30),s.Qb(55,"div",3),s.Qb(56,"p-panel",31),s.Qb(57,"div",2),s.Qb(58,"div",6),s.Qb(59,"label",17),s.Jc(60,"Nama User "),s.Pb(),s.Qb(61,"input",32),s.Yb("ngModelChange",function(e){return i.item.namaUser=e}),s.Pb(),s.Pb(),s.Qb(62,"div",6),s.Qb(63,"label",17),s.Jc(64,"Kata Sandi "),s.Pb(),s.Qb(65,"input",33),s.Yb("ngModelChange",function(e){return i.item.kataKunciPass=e}),s.Pb(),s.Pb(),s.Qb(66,"div",6),s.Qb(67,"label",17),s.Jc(68,"Ulangi Kata Sandi "),s.Pb(),s.Qb(69,"input",34),s.Yb("ngModelChange",function(e){return i.item.kataKunciConfirm=e}),s.Pb(),s.Pb(),s.Qb(70,"div",6),s.Qb(71,"label",17),s.Jc(72,"Profile"),s.Pb(),s.Qb(73,"p-dropdown",35),s.Yb("ngModelChange",function(e){return i.item.profile=e}),s.Pb(),s.Pb(),s.Qb(74,"div",6),s.Qb(75,"label",17),s.Jc(76,"Kelompok User"),s.Pb(),s.Qb(77,"p-dropdown",36),s.Yb("ngModelChange",function(e){return i.item.kelompokUser=e}),s.Pb(),s.Pb(),s.Qb(78,"div",6),s.Qb(79,"label",17),s.Jc(80,"Pegawai"),s.Pb(),s.Qb(81,"p-autoComplete",37),s.Yb("ngModelChange",function(e){return i.item.pegawai=e})("completeMethod",function(e){return i.filterPegawai(e)}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Hc(82,H,2,1,"ng-template",38),s.Pb()}2&e&&(s.xb(14),s.ic("columns",i.column)("value",i.dataSource)("selection",i.selectedGrid)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",s.mc(42,_))("paginator",!0)("pageLinks",5)("globalFilterFields",s.mc(43,O)),s.xb(12),s.ic("options",i.d_LoginUser)("ngModel",i.item.loginUser)("filter",!0)("showClear",!0),s.xb(2),s.ic("toggleable",!0),s.xb(5),s.ic("ngModel",i.searchText),s.xb(3),s.ic("ngIf",i.listRuangan.length>0),s.xb(5),s.ic("toggleable",!0),s.xb(5),s.ic("ngModel",i.searchText2),s.xb(3),s.ic("ngIf",i.listModul.length>0),s.xb(4),s.Ec(s.mc(44,B)),s.ic("visible",i.pop_User)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!0),s.xb(3),s.ic("toggleable",!0),s.xb(5),s.ic("ngModel",i.item.namaUser),s.xb(4),s.ic("ngModel",i.item.kataKunciPass),s.xb(4),s.ic("ngModel",i.item.kataKunciConfirm),s.xb(4),s.ic("options",i.d_Profile)("ngModel",i.item.profile)("filter",!0)("showClear",!0),s.xb(4),s.ic("options",i.d_KelompokUser)("ngModel",i.item.kelompokUser)("filter",!0)("showClear",!0),s.xb(4),s.ic("ngModel",i.item.pegawai)("suggestions",i.d_Pegawai)("dropdown",!0))},directives:[d.b,d.a,g.a,m.h,r.k,h.a,f.g,f.h,v.a,f.a,k.b,P.a,o.l,Q.a,w.a,M.a,o.k,m.g,m.f,x.a],pipes:[y.a],styles:[".p-field-checkbox[_ngcontent-%COMP%], .p-field-radiobutton[_ngcontent-%COMP%]{margin-bottom:0;display:flex;align-items:center}"]}),K)}],D=((j=function i(){e(this,i)}).\u0275mod=s.Hb({type:j}),j.\u0275inj=s.Gb({factory:function(e){return new(e||j)},imports:[[l.j.forChild($)],l.j]}),j),G=n("PCNd"),N=((R=function i(){e(this,i)}).\u0275mod=s.Hb({type:R}),R.\u0275inj=s.Gb({factory:function(e){return new(e||R)},imports:[[o.b,D,G.a]]}),R)}}])}();