(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"/VK3":function(e,t,i){"use strict";i.r(t),i.d(t,"DaftarPasienFarmasiModule",function(){return N});var a=i("ofXK"),n=i("tyNb"),l=i("7zfz"),s=i("1zoS"),r=i("wd/R"),o=i("fXoL"),d=i("EJUL"),p=i("U+s4"),c=i("G0w9"),b=i("ujBT"),h=i("Nf9I"),g=i("eO1q"),u=i("3Pt+"),m=i("7kUa"),f=i("Ji6n"),w=i("xlun"),P=i("jIHw"),k=i("rEr+"),v=i("/RsI"),C=i("arFO");function M(e,t){if(1&e&&(o.Qb(0,"th",35),o.Jc(1),o.Lb(2,"p-sortIcon",36),o.Pb()),2&e){const e=t.$implicit;o.Fc("width: ",e.width,""),o.jc("pSortableColumn",e.field),o.xb(1),o.Lc(" ",e.header," "),o.xb(1),o.jc("field",e.field)}}function R(e,t){if(1&e&&(o.Qb(0,"tr"),o.Qb(1,"th",33),o.Jc(2,"Aksi"),o.Pb(),o.Hc(3,M,3,6,"th",34),o.Pb()),2&e){const e=t.$implicit;o.xb(3),o.ic("ngForOf",e)}}function Q(e,t){if(1&e&&(o.Qb(0,"td"),o.Jc(1),o.Pb()),2&e){const e=t.$implicit,i=o.bc().$implicit;o.Fc("width: ",e.width,""),o.xb(1),o.Lc(" ",i[e.field]," ")}}function D(e,t){if(1&e){const e=o.Sb();o.Qb(0,"tr",37),o.Qb(1,"td",33),o.Qb(2,"button",38),o.Yb("click",function(){o.yc(e);const i=t.$implicit;return o.bc().transaksiLayanan2(i)}),o.Pb(),o.Qb(3,"button",39),o.Yb("click",function(){o.yc(e);const i=t.$implicit;return o.bc().popUpInputObat2(i)}),o.Pb(),o.Pb(),o.Hc(4,Q,2,4,"td",40),o.Pb()}if(2&e){const e=t.columns,i=t.rowIndex;o.ic("pSelectableRow",t.$implicit)("pSelectableRowIndex",i),o.xb(4),o.ic("ngForOf",e)}}function x(e,t){1&e&&(o.Qb(0,"td"),o.Lb(1,"div",43),o.Pb())}function y(e,t){if(1&e&&(o.Qb(0,"tr",41),o.Hc(1,x,2,0,"td",42),o.Pb()),2&e){const e=t.columns;o.xb(1),o.ic("ngForOf",e)}}function Y(e,t){if(1&e){const e=o.Sb();o.Qb(0,"p-button",44),o.Yb("click",function(){return o.yc(e),o.bc().cariFilter()}),o.Pb(),o.Qb(1,"p-button",45),o.Yb("click",function(){return o.yc(e),o.bc().clearFilter()}),o.Pb()}}const T=function(){return[5,10,25,50]},I=function(){return{width:"450px",minWidth:"450px"}},S=function(){return{width:"50vw"}},A=[{path:"",component:(()=>{class e{constructor(e,t,i,a,n,l,r,o,d){this.apiService=e,this.authService=t,this.confirmationService=i,this.messageService=a,this.cacheHelper=n,this.dateHelper=l,this.alertService=r,this.route=o,this.router=d,this.pencarian="",this.item={},this.listKriteria=[{name:"Semua",id:"1"},{name:"Masih Dirawat",id:"2"}],this.page=s.b.get().page,this.rows=s.b.get().rows}ngOnInit(){this.dataLogin=this.authService.dataLoginUser,this.kelUser=this.dataLogin.kelompokUser.kelompokUser,this.dateNow=new Date,this.item.tglAwal=r(this.dateNow).format("YYYY-MM-DD 00:00"),this.item.tglAkhir=r(this.dateNow).format("YYYY-MM-DD 23:59"),this.item.jmlRows=50,this.column=[{field:"no",header:"No",width:"65px"},{field:"tglregistrasi",header:"Tgl Registrasi",width:"140px"},{field:"norm",header:"No RM",width:"80px"},{field:"noregistrasi",header:"Noregistrasi",width:"125px"},{field:"namapasien",header:"Nama Pasien",width:"250px"},{field:"namakelas",header:"Kelas",width:"100px"},{field:"namaruangan",header:"Ruangan",width:"180px"},{field:"namadokter",header:"Dokter",width:"180px"},{field:"kelompokpasien",header:"Tipe Pasien",width:"120px"},{field:"namarekanan",header:"Penjamin",width:"120px"},{field:"tglpulang",header:"Tgl Pulang",width:"140px"},{field:"jenispelayanan",header:"Jenis Pelayanan",width:"140px"},{field:"kelasditanggung",header:"Kls Ditanggung",width:"180px"},{field:"nosep",header:"SEP",width:"120px"},{field:"",header:"Diagnosa",width:"140px"}],this.getDataCombo()}getDataCombo(){this.apiService.get("farmasi/get-combo-farmasi").subscribe(e=>{var t=e;this.listDepartemen=t.departemen,this.listKelompokPasien=t.kelompokpasien,this.LoadCache()})}isiRuangan(){null!=this.item.dataDepartemen&&(this.listRuangan=this.item.dataDepartemen.ruangan)}LoadCache(){var e=this.cacheHelper.get("DaftarPasienFarmasiCache");null!=e?(this.item.tglAwal=new Date(e[0]),this.item.tglAkhir=new Date(e[1]),this.item.status=e[2],this.item.namaOrReg=e[3],null!=e[6]&&(this.listDepartemen=[e[6]],this.item.dataDepartemen=e[6]),null!=e[5]&&(this.listRuangan=[e[5]],this.item.dataRuangan=e[5]),null!=e[4]&&""!=e[4]&&(this.item.noReg=e[4]),null!=e[7]&&""!=e[7]&&(this.item.noRm=e[7]),null!=e[8]&&""!=e[8]&&(this.item.jmlRows=e[8]),this.getData()):this.getData()}cari(){this.getData()}getData(){var e=r(this.item.tglAwal).format("YYYY-MM-DD HH:mm"),t=r(this.item.tglAkhir).format("YYYY-MM-DD HH:mm"),i="",a=void 0;null!=this.item.ruangan&&(i=this.item.dataRuangan.id,a={id:this.item.dataRuangan.id,ruangan:this.item.dataRuangan.ruangan});var n="",l=void 0;null!=this.item.instalasi&&(n=this.item.dataDepartemen.id,l={id:this.item.dataDepartemen.id,departemen:this.item.dataDepartemen.departemen});var s="";null!=this.item.dataKelPasien&&(s=this.item.dataKelPasien.id);var o="";null!=this.item.noRM&&(o=this.item.noRM);var d="";null!=this.item.Noregistrasi&&(d=this.item.Noregistrasi);var p="";null!=this.item.namaPasien&&(p=this.item.namaPasien);var c="";null!=this.item.jmlRows&&(c=this.item.jmlRows);var b=!1;null!=this.item.isCanBalik&&(b=this.item.isCanBalik),this.cacheHelper.set("DaftarPasienFarmasiCache",{0:e,1:t,2:void 0,3:p,4:d,5:a,6:l,7:o}),this.apiService.get("registrasi/get-daftar-registrasi-pasien?namaPasien="+p+"&ruanganId="+i+"&status=&tglAwal="+e+"&tglAkhir="+t+"&noReg="+d+"&instalasiId="+n+"&noRm="+o+"&jmlRows="+c+"&kelompokPasienId="+s+"&isCanBalik="+b).subscribe(e=>{e=e;for(let n=0;n<e.length;n++){const l=e[n];var t=r(new Date(l.tglregistrasi)).format("YYYY-MM-DD"),i=r(new Date(l.tgllahir)).format("YYYY-MM-DD"),a=this.dateHelper.CountAge(new Date(i),new Date(t));l.no=n+1,l.umur=a.year+" thn "+a.month+" bln "+a.day+" hari",null==l.tglmeninggal?(l.statuspasien="Hidup",l.color="info"):(l.statuspasien="Meninggal",l.color="danger")}this.dataTable=e,this.totalRecords=e.totalRow})}cekCanBalik(e){1==e?(this.disableTgl=!0,this.getData()):(this.disableTgl=!1,this.getData())}onRowSelect(e){null!=e.data&&this.apiService.get("general/get-data-closing-pasien/"+this.selected.noregistrasi).subscribe(t=>{t.length>0?this.alertService.error("Peringatan!","Registrasi Ini Telah Diclosing"):this.selected=e.data})}transaksiLayanan2(e){this.selected=e,this.transaksiLayanan()}popUpInputObat2(e){this.selected=e,this.popUpInputObat()}transaksiLayanan(){null!=this.selected?(this.cacheHelper.set("rincianPelayananFarmasiCache",{0:"",1:""}),this.router.navigate(["transaksi-pelayanan-apotik",this.selected.norec,"pasien"])):this.alertService.warn("Info,","Data Belum Dipilih!")}popUpInputObat(){null!=this.selected?(this.item.norec_dpr="",this.apiService.get("general/get-data-closing-pasien/"+this.selected.noregistrasi).subscribe(e=>{e.length>0?this.alertService.error("Peringatan!","Registrasi Ini Telah Diclosing"):this.apiService.get("registrasi/get-data-antrian-pasien?noregistrasi="+this.selected.noregistrasi).subscribe(e=>{var t=e;this.listRuanganApd=t.ruangan,null!=t.ruangan&&(this.item.dataRuanganApd=t.ruangan[0],this.item.norec_dpr=t.ruangan[0].norec_apd,this.pop_inputTindakan=!0)})})):this.alertService.warn("Info","Data Belum Dipilih!")}inputObat(){null!=this.item.dataRuanganApd?(this.cacheHelper.set("InputResepPasienCtrl",{0:this.selected.norm,1:this.selected.namapasien,2:this.selected.jeniskelamin,3:this.selected.noregistrasi,4:this.selected.umur,5:this.selected.kelasidfk,6:this.selected.namakelas,7:this.selected.tglregistrasi,8:this.item.dataRuanganApd.norec_apd,9:"",10:this.selected.kelompokpasien,11:this.selected.namaruangan,12:this.selected.alamatlengkap,13:"",14:"",15:"",16:""}),this.router.navigate(["input-resep-apotik",this.selected.norec,this.item.dataRuanganApd.norec_apd])):this.alertService.warn("Info","Ruang Antrian Belum Dipilih!")}filter(){this.popFilter=!0}cariFilter(){this.popFilter=!1,this.getData()}clearFilter(){this.popFilter=!1,this.item={},this.dateNow=new Date,this.item.tglAwal=r(this.dateNow).format("YYYY-MM-DD 00:00"),this.item.tglAkhir=r(this.dateNow).format("YYYY-MM-DD 23:59"),this.item.jmlRows=50,this.LoadCache()}}return e.\u0275fac=function(t){return new(t||e)(o.Jb(d.a),o.Jb(d.b),o.Jb(l.a),o.Jb(l.h),o.Jb(p.a),o.Jb(c.a),o.Jb(b.a),o.Jb(n.a),o.Jb(n.f))},e.\u0275cmp=o.Db({type:e,selectors:[["app-daftar-pasien-farmasi"]],features:[o.wb([l.a])],decls:71,vars:59,consts:[["header","Confirmation","icon","fa fa-question-circle"],[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[1,"p-grid"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","disabled","ngModelChange"],["type","text","pInputText","","placeholder","No Rekam Medis",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Noregistrasi",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Nama Pasien",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-1",2,"margin-top","15px"],["binary","true","inputId","item.isCanBalik",3,"ngModel","ngModelChange","onChange"],["for","item.isCanBalik","pTooltip","Menampilkan semua pasien yang masih dirawat (Rawat Inap)",1,"label"],[1,"p-col-12","p-md-1",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",1,"p-mr-1",3,"click"],["pButton","","type","button","icon","pi pi-filter","pTooltip","Filter Detail",1,"p-button-success",3,"click"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange","onRowSelect"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],["header","Pilih Ruang Antrian",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"p-col-12","p-md-6"],["placeholder","Ruangan","optionLabel","ruangan","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange"],[1,"p-col-12","p-md-6",2,"margin-top","15px"],["pButton","","type","submit","icon","fa fa-medkit","pTooltip","Input Obat/Alkes","label","Input Obat/Alkes",3,"click"],["header","Filter",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"p-col-12","p-md-3"],["placeholder","Instalasi","optionLabel","departemen","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["placeholder","Tipe Pasien","optionLabel","kelompokpasien","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange"],["type","text","pInputText","","placeholder","Jml Rows",3,"ngModel","ngModelChange","keyup.enter"],["pTemplate","footer"],[2,"width","100px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],["pButton","","type","button","icon","fa fa-medkit","pTooltip","Rincian Pelayanan","label","",1,"p-button-rounded","p-button-primary","p-mr-2",3,"click"],["pButton","","type","button","icon","fa fa-stethoscope","pTooltip","Input Obat/Alkes","label","",1,"p-button-rounded","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"],[2,"height","34px"],[4,"ngFor","ngForOf"],[1,"loading-text"],["icon","pi pi-filter","label","Filter",1,"p-button-success",3,"click"],["icon","pi pi-close","label","Clear","styleClass","p-button-text",3,"click"]],template:function(e,t){1&e&&(o.Lb(0,"p-confirmDialog",0),o.Qb(1,"div",1),o.Qb(2,"div",2),o.Qb(3,"h4"),o.Jc(4,"Pasien Ruangan"),o.Pb(),o.Qb(5,"div",3),o.Qb(6,"div",4),o.Qb(7,"div",5),o.Qb(8,"label",6),o.Jc(9,"Periode Awal"),o.Pb(),o.Qb(10,"p-calendar",7),o.Yb("ngModelChange",function(e){return t.item.tglAwal=e}),o.Pb(),o.Pb(),o.Qb(11,"div",5),o.Qb(12,"label",6),o.Jc(13,"Periode Akhir"),o.Pb(),o.Qb(14,"p-calendar",7),o.Yb("ngModelChange",function(e){return t.item.tglAkhir=e}),o.Pb(),o.Pb(),o.Qb(15,"div",5),o.Qb(16,"label",6),o.Jc(17,"No Rekam Medis "),o.Pb(),o.Qb(18,"input",8),o.Yb("ngModelChange",function(e){return t.item.noRM=e})("keyup.enter",function(){return t.cari()}),o.Pb(),o.Pb(),o.Qb(19,"div",5),o.Qb(20,"label",6),o.Jc(21,"Noregistrasi"),o.Pb(),o.Qb(22,"input",9),o.Yb("ngModelChange",function(e){return t.item.Noregistrasi=e})("keyup.enter",function(){return t.cari()}),o.Pb(),o.Pb(),o.Qb(23,"div",5),o.Qb(24,"label",6),o.Jc(25,"Nama Pasien "),o.Pb(),o.Qb(26,"input",10),o.Yb("ngModelChange",function(e){return t.item.namaPasien=e})("keyup.enter",function(){return t.cari()}),o.Pb(),o.Pb(),o.Qb(27,"div",11),o.Qb(28,"p-checkbox",12),o.Yb("ngModelChange",function(e){return t.item.isCanBalik=e})("onChange",function(){return t.cekCanBalik(t.item.isCanBalik)}),o.Pb(),o.Qb(29,"label",13),o.Jc(30," Dirawat "),o.Pb(),o.Pb(),o.Qb(31,"div",14),o.Qb(32,"button",15),o.Yb("click",function(){return t.cari()}),o.Pb(),o.Qb(33,"button",16),o.Yb("click",function(){return t.filter()}),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Qb(34,"div",3),o.Qb(35,"p-table",17,18),o.Yb("selectionChange",function(e){return t.selected=e})("onRowSelect",function(e){return t.onRowSelect(e)}),o.Hc(37,R,4,1,"ng-template",19),o.Hc(38,D,5,3,"ng-template",20),o.Hc(39,y,2,1,"ng-template",21),o.Pb(),o.Pb(),o.Qb(40,"div",3),o.Lb(41,"div",4),o.Pb(),o.Pb(),o.Pb(),o.Qb(42,"p-dialog",22),o.Yb("visibleChange",function(e){return t.pop_inputTindakan=e}),o.Qb(43,"div",1),o.Qb(44,"div",4),o.Qb(45,"div",23),o.Qb(46,"label",6),o.Jc(47,"Ruangan"),o.Pb(),o.Qb(48,"p-dropdown",24),o.Yb("ngModelChange",function(e){return t.item.dataRuanganApd=e}),o.Pb(),o.Pb(),o.Qb(49,"div",25),o.Qb(50,"button",26),o.Yb("click",function(){return t.inputObat()}),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Qb(51,"p-dialog",27),o.Yb("visibleChange",function(e){return t.popFilter=e}),o.Qb(52,"div",1),o.Qb(53,"div",4),o.Qb(54,"div",28),o.Qb(55,"label",6),o.Jc(56,"Instalasi"),o.Pb(),o.Qb(57,"p-dropdown",29),o.Yb("ngModelChange",function(e){return t.item.dataDepartemen=e})("onChange",function(){return t.isiRuangan()}),o.Pb(),o.Pb(),o.Qb(58,"div",28),o.Qb(59,"label",6),o.Jc(60,"Ruangan"),o.Pb(),o.Qb(61,"p-dropdown",24),o.Yb("ngModelChange",function(e){return t.item.dataRuangan=e}),o.Pb(),o.Pb(),o.Qb(62,"div",28),o.Qb(63,"label",6),o.Jc(64,"Tipe Pasien"),o.Pb(),o.Qb(65,"p-dropdown",30),o.Yb("ngModelChange",function(e){return t.item.dataKelPasien=e}),o.Pb(),o.Pb(),o.Qb(66,"div",5),o.Qb(67,"label",6),o.Jc(68,"jml Rows"),o.Pb(),o.Qb(69,"input",31),o.Yb("ngModelChange",function(e){return t.item.jmlRows=e})("keyup.enter",function(){return t.cari()}),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Hc(70,Y,2,0,"ng-template",32),o.Pb()),2&e&&(o.xb(10),o.ic("ngModel",t.item.tglAwal)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0)("disabled",t.disableTgl),o.xb(4),o.ic("ngModel",t.item.tglAkhir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0)("disabled",t.disableTgl),o.xb(4),o.ic("ngModel",t.item.noRM),o.xb(4),o.ic("ngModel",t.item.Noregistrasi),o.xb(4),o.ic("ngModel",t.item.namaPasien),o.xb(2),o.ic("ngModel",t.item.isCanBalik),o.xb(7),o.ic("columns",t.column)("value",t.dataTable)("selection",t.selected)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",o.mc(56,T))("paginator",!0)("pageLinks",5),o.xb(7),o.Ec(o.mc(57,I)),o.ic("visible",t.pop_inputTindakan)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!0),o.xb(6),o.ic("options",t.listRuanganApd)("ngModel",t.item.dataRuanganApd)("filter",!0)("showClear",!0),o.xb(3),o.Ec(o.mc(58,S)),o.ic("visible",t.popFilter)("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!0),o.xb(6),o.ic("options",t.listDepartemen)("ngModel",t.item.dataDepartemen)("filter",!0)("showClear",!0),o.xb(4),o.ic("options",t.listRuangan)("ngModel",t.item.dataRuangan)("filter",!0)("showClear",!0),o.xb(4),o.ic("options",t.listKelompokPasien)("ngModel",t.item.dataKelPasien)("filter",!0)("showClear",!0),o.xb(4),o.ic("ngModel",t.item.jmlRows))},directives:[h.a,g.a,u.g,u.h,u.a,m.a,f.a,w.a,P.b,k.h,l.k,v.a,C.a,a.k,k.g,k.f,k.e,P.a],styles:[""]}),e})()}];let J=(()=>{class e{}return e.\u0275mod=o.Hb({type:e}),e.\u0275inj=o.Gb({factory:function(t){return new(t||e)},imports:[[n.j.forChild(A)],n.j]}),e})();var F=i("PCNd");let N=(()=>{class e{}return e.\u0275mod=o.Hb({type:e}),e.\u0275inj=o.Gb({factory:function(t){return new(t||e)},imports:[[a.b,J,F.a]]}),e})()}}]);