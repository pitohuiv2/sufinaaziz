(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{"1GeA":function(e,t,i){"use strict";i.r(t),i.d(t,"DaftarPerjanjianModule",function(){return S});var a=i("ofXK"),n=i("tyNb"),o=i("7zfz"),r=i("wd/R"),s=i("fXoL"),l=i("EJUL"),c=i("U+s4"),d=i("G0w9"),p=i("ujBT"),b=i("Nf9I"),u=i("eO1q"),h=i("3Pt+"),g=i("arFO"),m=i("7kUa"),f=i("jIHw"),v=i("xlun"),w=i("rEr+");function P(e,t){if(1&e&&(s.Qb(0,"th",21),s.Jc(1),s.Lb(2,"p-sortIcon",22),s.Pb()),2&e){const e=t.$implicit;s.Fc("width: ",e.width,""),s.jc("pSortableColumn",e.field),s.xb(1),s.Lc(" ",e.header," "),s.xb(1),s.jc("field",e.field)}}function k(e,t){if(1&e&&(s.Qb(0,"tr"),s.Qb(1,"th",19),s.Jc(2,"#"),s.Pb(),s.Hc(3,P,3,6,"th",20),s.Pb()),2&e){const e=t.$implicit;s.xb(3),s.ic("ngForOf",e)}}function C(e,t){if(1&e&&(s.Qb(0,"td"),s.Jc(1),s.Pb()),2&e){const e=t.$implicit,i=s.bc().$implicit;s.Fc("width: ",e.width,""),s.xb(1),s.Lc(" ",i[e.field]," ")}}function M(e,t){if(1&e){const e=s.Sb();s.Qb(0,"tr",23),s.Qb(1,"td",19),s.Qb(2,"button",24),s.Yb("click",function(){s.yc(e);const i=t.$implicit;return s.bc().reconfirm(i)}),s.Pb(),s.Qb(3,"button",25),s.Yb("click",function(i){s.yc(e);const a=t.$implicit;return s.bc().confirm(i,a)}),s.Pb(),s.Pb(),s.Hc(4,C,2,4,"td",26),s.Pb()}if(2&e){const e=t.columns,i=t.rowIndex;s.ic("pSelectableRow",t.$implicit)("pSelectableRowIndex",i),s.xb(4),s.ic("ngForOf",e)}}const Q=function(){return[5,10,25,50]},x=[{path:"",component:(()=>{class e{constructor(e,t,i,a,n,o,r,s,l){this.apiService=e,this.authService=t,this.confirmationService=i,this.messageService=a,this.cacheHelper=n,this.dateHelper=o,this.alertService=r,this.route=s,this.router=l,this.item={tglAwal:new Date,tglAkhir:new Date}}ngOnInit(){this.column=[{field:"no",header:"No",width:"65px"},{field:"noreservasi",header:"Kode Reservasi",width:"140px"},{field:"nocm",header:"No RM",width:"80px"},{field:"tanggalreservasi",header:"Tgl Reservasi",width:"150px"},{field:"namapasien",header:"Nama Pasien",width:"250px"},{field:"namaruangan",header:"Poli",width:"200px"},{field:"kelompokpasien",header:"Tipe Pasien",width:"180px"},{field:"dokter",header:"Dokter",width:"200px"},{field:"status",header:"Status",width:"120px",tag:'<p-tag severity="color" value="status"></p-tag>'},{field:"notelepon",header:"Telpon",width:"120px"},{field:"tglinput",header:"Tgl Input",width:"150px"}],this.listStatus=[{nama:"Confirm"},{nama:"Reservasi"}],this.apiService.get("registrasi/get-combo-perjanjian").subscribe(e=>{this.listRuangan=e.ruanganrajal}),this.load()}cari(){this.load()}load(){var e=r(this.item.tglAwal).format("YYYY-MM-DD"),t=r(this.item.tglAkhir).format("YYYY-MM-DD"),i="";null!=this.item.status&&(i=this.item.status.nama);var a="";null!=this.item.ruangan&&(a=this.item.ruangan.id);var n="";null!=this.item.namaPasien&&(n=this.item.namaPasien);var o="";null!=this.item.noRM&&(o=this.item.noRM);var s="";null!=this.item.kodeReservasi&&(s=this.item.kodeReservasi),this.apiService.get("registrasi/get-data-pasien-reservasi?tglAwal="+e+"&tglAkhir="+t+"&kdReservasi="+s+"&statusRev="+i+"&namapasienpm="+n+"&ruanganId="+a+"&noRM="+o).subscribe(e=>{for(let t=0;t<e.data.length;t++){const i=e.data[t];i.no=t+1,i.color="Confirm"==i.status?"info":"danger"}this.listPasien=e.data})}confirm(e,t){"Confirm"!=t.status?this.confirmationService.confirm({target:e.target,message:"Yakin mau hapus?",icon:"pi pi-exclamation-triangle",acceptLabel:"Ya",rejectLabel:"Tidak",accept:()=>{this.hapus(t)},reject:()=>{}}):this.alertService.info("Info","Pasien Sudah di Confirm, tidak bisa dihapus")}hapus(e){this.apiService.post("reservasionline/delete",{norec:e.norec}).subscribe(e=>{this.load(),this.saveAntrol(e.noreservasi,99)})}reconfirm(e){"Confirm"!=e.status?null==e.nocm?(this.cacheHelper.set("CacheRegisOnline",{0:e,1:"Online",2:"",3:"",4:"",5:"",6:""}),this.router.navigate(["pasien-baru",e.norec,"-","-"])):(this.cacheHelper.set("cacheStatusPasien","LAMA"),this.cacheHelper.set("CacheRegistrasiPasien",void 0),this.cacheHelper.set("CacheRegisOnline",{0:e,1:"Online",2:"",3:"",4:"",5:"",6:""}),this.router.navigate(["registrasi-ruangan",e.nocmfk])):this.alertService.info("Info","Pasien Sudah di Confirm")}saveAntrol(e,t){var i={url:"antrean/updatewaktu",jenis:"antrean",method:"POST",data:{kodebooking:e,taskid:t,waktu:(new Date).getTime()}};this.apiService.postNonMessage("bridging/bpjs/tools",i).subscribe(e=>{})}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(l.a),s.Jb(l.b),s.Jb(o.a),s.Jb(o.h),s.Jb(c.a),s.Jb(d.a),s.Jb(p.a),s.Jb(n.a),s.Jb(n.f))},e.\u0275cmp=s.Db({type:e,selectors:[["app-daftar-perjanjian"]],features:[s.wb([o.a])],decls:37,vars:30,consts:[["header","Confirmation","icon","fa fa-question-circle"],[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[1,"p-grid"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","ngModelChange"],["placeholder","Poli","optionLabel","namaruangan",3,"options","ngModel","filter","showClear","ngModelChange"],["type","text","pInputText","","placeholder","Nama Pasien",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Kode Reservasi",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-1"],["placeholder","Status","optionLabel","nama",3,"options","ngModel","filter","showClear","ngModelChange"],[1,"p-col-12","p-md-1",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",3,"click"],[1,"p-col-12"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange"],["pTemplate","header"],["pTemplate","body"],[2,"width","120px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],["pButton","","type","button","icon","pi pi-arrow-right","pTooltip","Reconfirm","label","",1,"p-button-rounded","p-mr-2",3,"click"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus Data","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(s.Lb(0,"p-confirmDialog",0),s.Qb(1,"div",1),s.Qb(2,"div",2),s.Qb(3,"h4"),s.Jc(4,"Pasien Perjanjian"),s.Pb(),s.Qb(5,"div",3),s.Qb(6,"div",4),s.Qb(7,"div",5),s.Qb(8,"label",6),s.Jc(9,"Periode Awal"),s.Pb(),s.Qb(10,"p-calendar",7),s.Yb("ngModelChange",function(e){return t.item.tglAwal=e}),s.Pb(),s.Pb(),s.Qb(11,"div",5),s.Qb(12,"label",6),s.Jc(13,"Periode Akhir"),s.Pb(),s.Qb(14,"p-calendar",7),s.Yb("ngModelChange",function(e){return t.item.tglAkhir=e}),s.Pb(),s.Pb(),s.Qb(15,"div",5),s.Qb(16,"label",6),s.Jc(17,"Poli"),s.Pb(),s.Qb(18,"p-dropdown",8),s.Yb("ngModelChange",function(e){return t.item.ruangan=e}),s.Pb(),s.Pb(),s.Qb(19,"div",5),s.Qb(20,"label",6),s.Jc(21,"Nama Pasien "),s.Pb(),s.Qb(22,"input",9),s.Yb("ngModelChange",function(e){return t.item.namaPasien=e})("keyup.enter",function(){return t.cari()}),s.Pb(),s.Pb(),s.Qb(23,"div",5),s.Qb(24,"label",6),s.Jc(25,"Kode Reservasi"),s.Pb(),s.Qb(26,"input",10),s.Yb("ngModelChange",function(e){return t.item.kodeReservasi=e})("keyup.enter",function(){return t.cari()}),s.Pb(),s.Pb(),s.Qb(27,"div",11),s.Qb(28,"label",6),s.Jc(29,"Status"),s.Pb(),s.Qb(30,"p-dropdown",12),s.Yb("ngModelChange",function(e){return t.item.status=e}),s.Pb(),s.Pb(),s.Qb(31,"div",13),s.Qb(32,"button",14),s.Yb("click",function(){return t.cari()}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(33,"div",15),s.Qb(34,"p-table",16),s.Yb("selectionChange",function(e){return t.selected=e}),s.Hc(35,k,4,1,"ng-template",17),s.Hc(36,M,5,3,"ng-template",18),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&e&&(s.xb(10),s.ic("ngModel",t.item.tglAwal)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!1),s.xb(4),s.ic("ngModel",t.item.tglAkhir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!1),s.xb(4),s.ic("options",t.listRuangan)("ngModel",t.item.ruangan)("filter",!0)("showClear",!0),s.xb(4),s.ic("ngModel",t.item.namaPasien),s.xb(4),s.ic("ngModel",t.item.kodeReservasi),s.xb(4),s.ic("options",t.listStatus)("ngModel",t.item.status)("filter",!0)("showClear",!0),s.xb(4),s.ic("columns",t.column)("value",t.listPasien)("selection",t.selected)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",s.mc(29,Q))("paginator",!0)("pageLinks",5))},directives:[b.a,u.a,h.g,h.h,g.a,h.a,m.a,f.b,v.a,w.h,o.k,a.k,w.g,w.f,w.e],styles:[""]}),e})()}];let y=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[n.j.forChild(x)],n.j]}),e})();var R=i("PCNd");let S=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[a.b,y,R.a]]}),e})()}}]);