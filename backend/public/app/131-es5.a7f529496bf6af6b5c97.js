!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{VvNW:function(t,i,a){"use strict";a.r(i),a.d(i,"MapRuanganToProdukModule",function(){return _});var o=a("ofXK"),l=a("tyNb"),r=a("fXoL"),c=a("EJUL"),u=a("7zfz"),d=a("U+s4"),p=a("G0w9"),s=a("ujBT"),b=a("dPl2"),h=a("arFO"),g=a("3Pt+"),f=a("7kUa"),m=a("jIHw"),v=a("xlun"),k=a("rEr+"),P=a("7CaW"),y=a("Ji6n"),C=a("hYoW"),Q=a("PU9F");function w(e,n){if(1&e&&(r.Qb(0,"th",36),r.Jc(1),r.Lb(2,"p-sortIcon",37),r.Pb()),2&e){var t=n.$implicit;r.Fc("width: ",t.width,""),r.jc("pSortableColumn",t.field),r.xb(1),r.Lc(" ",t.header," "),r.xb(1),r.jc("field",t.field)}}function x(e,n){if(1&e&&(r.Qb(0,"tr"),r.Lb(1,"th",34),r.Hc(2,w,3,6,"th",35),r.Pb()),2&e){var t=n.$implicit;r.xb(2),r.ic("ngForOf",t)}}function M(e,n){if(1&e&&(r.Qb(0,"td"),r.Jc(1),r.Pb()),2&e){var t=n.$implicit,i=r.bc().$implicit;r.Fc("width: ",t.width,""),r.xb(1),r.Lc(" ",i[t.field]," ")}}function S(e,n){if(1&e){var t=r.Sb();r.Qb(0,"tr"),r.Qb(1,"td",34),r.Qb(2,"button",38),r.Yb("click",function(){r.yc(t);var e=n.$implicit;return r.bc().hapusRow(e)}),r.Pb(),r.Pb(),r.Hc(3,M,2,4,"td",39),r.Pb()}if(2&e){var i=n.columns;r.xb(3),r.ic("ngForOf",i)}}function R(e,n){if(1&e){var t=r.Sb();r.Qb(0,"div",42),r.Qb(1,"p-checkbox",43),r.Yb("ngModelChange",function(e){r.yc(t);var i=n.$implicit;return r.bc(2).item.layanan[i.id]=e})("onChange",function(){return r.yc(t),r.bc(2).getSelected()}),r.Pb(),r.Qb(2,"label",44),r.Jc(3),r.Pb(),r.Pb()}if(2&e){var i=n.$implicit,a=r.bc(2);r.xb(1),r.jc("inputId",i.id),r.ic("ngModel",a.item.layanan[i.id]),r.xb(1),r.jc("for",i.id),r.xb(1),r.Lc(" ",i.namaproduk,"")}}function D(e,n){if(1&e&&(r.Qb(0,"div",40),r.Hc(1,R,4,4,"div",41),r.cc(2,"filter"),r.Pb()),2&e){var t=r.bc();r.xb(1),r.ic("ngForOf",r.ec(2,1,t.listProdukCek,t.searchText))}}var I=function(){return{width:"100%"}};function T(e,n){if(1&e&&(r.Qb(0,"div",6),r.Lb(1,"p-tag",47),r.Pb()),2&e){var t=n.$implicit;r.xb(1),r.Ec(r.mc(3,I)),r.jc("value",t.namaproduk)}}function J(e,n){if(1&e&&(r.Qb(0,"p-panel",45),r.Qb(1,"div",2),r.Hc(2,T,2,4,"div",46),r.Pb(),r.Pb()),2&e){var t=r.bc();r.kc("header","Detail Pelayanan Terpilih : ",t.countSelected,""),r.ic("toggleable",!0),r.xb(2),r.ic("ngForOf",t.listChecked)}}var F,O,H,Y=function(){return[5,10,25,50]},j=[{path:"",component:(F=function(){function t(n,i,a,o,l,r,c,u){e(this,t),this.apiService=n,this.authService=i,this.messageService=a,this.cacheHelper=o,this.dateHelper=l,this.alertService=r,this.route=c,this.router=u,this.item={layanan:[],limit:200},this.pop_User=!1,this.isSimpan=!1,this.indexTab=0,this.searchText="",this.searchText2="",this.listModul=[],this.listRuangan=[],this.ruanganDef=[],this.produkDef=[],this.d_Ruangan2=[],this.listProdukCek=[],this.listChecked=[],this.countSelected=0}var i,a,o;return i=t,(a=[{key:"ngOnInit",value:function(){this.loadColumn(),this.loadCombo(),this.loadData()}},{key:"loadCombo",value:function(){var e=this;this.apiService.get("sysadmin/general/get-map-ruangan-combo").subscribe(function(n){e.d_Departemen=n.departemen,e.listProdukCek=n.produk,e.produkDef=n.produk})}},{key:"cari",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this,n="",t="",i="",a="";null!=this.item.qDept&&(n=this.item.qDept.id),null!=this.item.qRuangn&&(t=this.item.qRuangn.id),null!=this.item.qProduk&&(i=this.item.qProduk),null!=this.item.limit&&(a=this.item.limit),this.apiService.get("sysadmin/general/get-map-ruangan-produk?instId="+n+"&ruangId="+t+"&produk="+i+"&limit="+a).subscribe(function(n){for(var t=0;t<n.length;t++)n[t].no=t+1;e.dataSource=n})}},{key:"loadColumn",value:function(){this.column=[{field:"no",header:"No",width:"40px"},{field:"namadepartemen",header:"Instalasi",width:"150px"},{field:"namaruangan",header:"Ruangan",width:"150px"},{field:"namaproduk",header:"Nama Pelayanan",width:"200px"}]}},{key:"isiRuangan",value:function(){null!=this.item.qDept&&(this.d_Ruangan=this.item.qDept.ruangan)}},{key:"isiRuangan2",value:function(){null!=this.item.instalasi&&(this.d_Ruangan2=this.item.instalasi.ruangan)}},{key:"hapusRow",value:function(e){var n=this;this.apiService.post("sysadmin/general/delete-map-ruangan-produk",{id:e.id}).subscribe(function(e){n.loadData()})}},{key:"handleChangeTab",value:function(e){this.indexTab=e.index,0==e.index&&this.loadData()}},{key:"clearFilter",value:function(){this.searchText=""}},{key:"saveMap",value:function(){if(null!=this.item.ruangan)if(0!=this.item.layanan.length){for(var e=Object.keys(this.item.layanan),n=[],t=e.length-1;t>=0;t--)1==this.item.layanan[e[t]]&&n.push({produkidfk:parseInt(e[t])});this.apiService.post("sysadmin/general/save-map-ruangan-produk",{ruanganidfk:this.item.ruangan.id,details:n}).subscribe(function(e){})}else this.alertService.warn("Info","Belum ada Pelayanan yang dipilih");else this.alertService.warn("Info","Ruangan belum dipilih")}},{key:"changeMap",value:function(e){var n=this;this.item.layanan=[],this.getSelected(),null!=e.value&&this.apiService.get("sysadmin/general/get-map-ruangan-produk?ruangId="+e.value.id).subscribe(function(e){n.item.layanan=[];for(var t=0;t<e.length;t++)n.item.layanan[e[t].produkidfk]=!0;n.getSelected()})}},{key:"cekAll",value:function(){for(var e=0;e<this.listProdukCek.length;e++)this.item.layanan[this.listProdukCek[e].id]=!0;this.getSelected()}},{key:"clearSelection",value:function(){for(var e=Object.keys(this.item.layanan),n=0;n<e.length;n++)this.item.layanan[e[n]]=!1;this.getSelected()}},{key:"getSelected",value:function(){if(this.item.layanan.length>0){for(var e=Object.keys(this.item.layanan),n=0;n<e.length;n++){var t=e[n];if(1==this.item.layanan[parseInt(t)])for(var i=0;i<this.produkDef.length;i++){var a=this.produkDef[i];if(a.id==t){for(var o=0;o<this.listChecked.length;o++)this.listChecked[o].namaproduk==a.namaproduk&&this.listChecked.splice(o,1);this.listChecked.push({namaproduk:a.namaproduk})}}else for(i=0;i<this.produkDef.length;i++){var l=this.produkDef[i];if(l.id==t)for(o=0;o<this.listChecked.length;o++)this.listChecked[o].namaproduk==l.namaproduk&&this.listChecked.splice(o,1)}}this.countSelected=this.listChecked.length}else this.listChecked=[]}}])&&n(i.prototype,a),o&&n(i,o),t}(),F.\u0275fac=function(e){return new(e||F)(r.Jb(c.a),r.Jb(c.b),r.Jb(u.h),r.Jb(d.a),r.Jb(p.a),r.Jb(s.a),r.Jb(l.a),r.Jb(l.f))},F.\u0275cmp=r.Db({type:F,selectors:[["app-map-ruangan-to-produk"]],decls:62,vars:32,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-grid"],[1,"p-col-12","p-md-12"],[3,"onChange"],["header","Daftar Mapping","leftIcon","fa fa-users"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["placeholder","Instalasi","optionLabel","departemen",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["placeholder","Ruangan","optionLabel","ruangan",3,"options","ngModel","filter","showClear","ngModelChange"],[1,"p-col-12","p-md-3"],["type","text","pInputText","","placeholder","Nama Pelayanan ",3,"ngModel","ngModelChange"],[1,"p-col-12","p-md-1"],["type","text","pInputText","","placeholder","Rows ",3,"ngModel","ngModelChange"],[1,"p-col-12","p-md-1",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",3,"click"],[1,"p-col-12"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange"],["pTemplate","header"],["pTemplate","body"],["header","Mapping Pelayanan","leftIcon","pi pi-sitemap"],["placeholder","Ruangan","optionLabel","ruangan",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["header","Detail Pelayanan",3,"toggleable"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Filter",3,"ngModel","ngModelChange"],["pButton","","type","button","icon","pi pi-times","pTooltip","Clear Filter",1,"p-button","p-button-danger","p-mr-2",3,"click"],["pButton","","type","button","icon","pi pi-check","label","Cek Semua",1,"p-button-success","p-mr-2",3,"click"],["pButton","","type","button","icon","pi pi-refresh","label","Hapus Terpilih",1,"p-button-warning","p-mr-2",3,"click"],["class","p-grid","style","overflow: auto; height: 350px;padding: 20px;",4,"ngIf"],[1,"p-grid",2,"margin-top","10px"],[1,"p-col-12","p-md-1","p-md-offset-11"],["pButton","","type","button","icon","pi pi-save","label","Simpan",1,"p-button","p-mr-2",3,"click"],[3,"header","toggleable",4,"ngIf"],[2,"width","50px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus ","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"],[1,"p-grid",2,"overflow","auto","height","350px","padding","20px"],["class","p-col-12 p-md-2 p-field-checkbox",4,"ngFor","ngForOf"],[1,"p-col-12","p-md-2","p-field-checkbox"],["binary","true","name","group1",3,"ngModel","inputId","ngModelChange","onChange"],[3,"for"],[3,"header","toggleable"],["class","p-col-12 p-md-2",4,"ngFor","ngForOf"],["styleClass","p-mr-2","severity","warning",3,"value"]],template:function(e,n){1&e&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"h4"),r.Jc(3,"Map Ruangan To Pelayanan"),r.Pb(),r.Qb(4,"div",2),r.Qb(5,"div",3),r.Qb(6,"p-tabView",4),r.Yb("onChange",function(e){return n.handleChangeTab(e)}),r.Qb(7,"p-tabPanel",5),r.Qb(8,"div",2),r.Qb(9,"div",6),r.Qb(10,"label",7),r.Jc(11,"Instalasi"),r.Pb(),r.Qb(12,"p-dropdown",8),r.Yb("ngModelChange",function(e){return n.item.qDept=e})("onChange",function(){return n.isiRuangan()}),r.Pb(),r.Pb(),r.Qb(13,"div",6),r.Qb(14,"label",7),r.Jc(15,"Ruangan"),r.Pb(),r.Qb(16,"p-dropdown",9),r.Yb("ngModelChange",function(e){return n.item.qRuangn=e}),r.Pb(),r.Pb(),r.Qb(17,"div",10),r.Qb(18,"label",7),r.Jc(19,"Nama Pelayanan "),r.Pb(),r.Qb(20,"input",11),r.Yb("ngModelChange",function(e){return n.item.qProduk=e}),r.Pb(),r.Pb(),r.Qb(21,"div",12),r.Qb(22,"label",7),r.Jc(23,"Rows "),r.Pb(),r.Qb(24,"input",13),r.Yb("ngModelChange",function(e){return n.item.limit=e}),r.Pb(),r.Pb(),r.Qb(25,"div",14),r.Qb(26,"button",15),r.Yb("click",function(){return n.cari()}),r.Pb(),r.Pb(),r.Qb(27,"div",16),r.Qb(28,"p-table",17),r.Yb("selectionChange",function(e){return n.selectedGrid=e}),r.Hc(29,x,3,1,"ng-template",18),r.Hc(30,S,4,1,"ng-template",19),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(31,"p-tabPanel",20),r.Qb(32,"div",2),r.Qb(33,"div",3),r.Qb(34,"div",2),r.Qb(35,"div",6),r.Qb(36,"label",7),r.Jc(37,"Instalasi"),r.Pb(),r.Qb(38,"p-dropdown",8),r.Yb("ngModelChange",function(e){return n.item.instalasi=e})("onChange",function(){return n.isiRuangan2()}),r.Pb(),r.Pb(),r.Qb(39,"div",6),r.Qb(40,"label",7),r.Jc(41,"Ruangan"),r.Pb(),r.Qb(42,"p-dropdown",21),r.Yb("ngModelChange",function(e){return n.item.ruangan=e})("onChange",function(e){return n.changeMap(e)}),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(43,"div",3),r.Qb(44,"p-panel",22),r.Qb(45,"div",2),r.Qb(46,"div",6),r.Qb(47,"span",23),r.Lb(48,"i",24),r.Qb(49,"input",25),r.Yb("ngModelChange",function(e){return n.searchText=e}),r.Pb(),r.Pb(),r.Pb(),r.Qb(50,"div",12),r.Qb(51,"button",26),r.Yb("click",function(){return n.clearFilter()}),r.Pb(),r.Pb(),r.Qb(52,"div",12),r.Qb(53,"button",27),r.Yb("click",function(){return n.cekAll()}),r.Pb(),r.Pb(),r.Qb(54,"div",12),r.Qb(55,"button",28),r.Yb("click",function(){return n.clearSelection()}),r.Pb(),r.Pb(),r.Hc(56,D,3,4,"div",29),r.Pb(),r.Qb(57,"div",30),r.Qb(58,"div",31),r.Qb(59,"button",32),r.Yb("click",function(){return n.saveMap()}),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(60,"div",3),r.Hc(61,J,3,3,"p-panel",33),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&e&&(r.xb(12),r.ic("options",n.d_Departemen)("ngModel",n.item.qDept)("filter",!0)("showClear",!0),r.xb(4),r.ic("options",n.d_Ruangan)("ngModel",n.item.qRuangn)("filter",!0)("showClear",!0),r.xb(4),r.ic("ngModel",n.item.qProduk),r.xb(4),r.ic("ngModel",n.item.limit),r.xb(4),r.ic("columns",n.column)("value",n.dataSource)("selection",n.selectedGrid)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",r.mc(31,Y))("paginator",!0)("pageLinks",5),r.xb(10),r.ic("options",n.d_Departemen)("ngModel",n.item.instalasi)("filter",!0)("showClear",!0),r.xb(4),r.ic("options",n.d_Ruangan2)("ngModel",n.item.ruangan)("filter",!0)("showClear",!0),r.xb(2),r.ic("toggleable",!0),r.xb(5),r.ic("ngModel",n.searchText),r.xb(7),r.ic("ngIf",n.listProdukCek.length>0),r.xb(5),r.ic("ngIf",n.listChecked.length>0))},directives:[b.b,b.a,h.a,g.g,g.h,g.a,f.a,m.b,v.a,k.h,u.k,P.a,o.l,o.k,k.g,k.f,y.a,C.a],pipes:[Q.a],styles:[".p-field-checkbox[_ngcontent-%COMP%], .p-field-radiobutton[_ngcontent-%COMP%]{margin-bottom:0;display:flex;align-items:center}"]}),F)}],q=((O=function n(){e(this,n)}).\u0275mod=r.Hb({type:O}),O.\u0275inj=r.Gb({factory:function(e){return new(e||O)},imports:[[l.j.forChild(j)],l.j]}),O),L=a("PCNd"),_=((H=function n(){e(this,n)}).\u0275mod=r.Hb({type:H}),H.\u0275inj=r.Gb({factory:function(e){return new(e||H)},imports:[[o.b,q,L.a]]}),H)}}])}();