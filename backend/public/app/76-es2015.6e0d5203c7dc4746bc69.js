(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{"+pUI":function(e,t,i){"use strict";i.r(t),i.d(t,"DaftarSoModule",function(){return S});var a=i("ofXK"),n=i("tyNb"),o=i("7zfz"),r=i("1zoS"),l=i("wd/R"),s=i("fXoL"),d=i("EJUL"),c=i("U+s4"),p=i("G0w9"),b=i("ujBT"),u=i("Nf9I"),g=i("arFO"),h=i("3Pt+"),m=i("eO1q"),f=i("jIHw"),w=i("xlun"),k=i("rEr+"),P=i("Q4Mo");function x(e,t){if(1&e){const e=s.Sb();s.Qb(0,"div",19),s.Qb(1,"button",20),s.Yb("click",function(){return s.yc(e),s.bc().exportExcel()}),s.Pb(),s.Pb()}}function v(e,t){if(1&e&&(s.Qb(0,"th",22),s.Jc(1),s.Lb(2,"p-sortIcon",23),s.Pb()),2&e){const e=t.$implicit;s.Fc("width: ",e.width,""),s.jc("pSortableColumn",e.field),s.xb(1),s.Lc(" ",e.header," "),s.xb(1),s.jc("field",e.field)}}function J(e,t){if(1&e&&(s.Qb(0,"tr"),s.Hc(1,v,3,6,"th",21),s.Pb()),2&e){const e=t.$implicit;s.xb(1),s.ic("ngForOf",e)}}function C(e,t){if(1&e&&(s.Qb(0,"span",28),s.Jc(1),s.cc(2,"currency"),s.Pb()),2&e){const e=s.bc().$implicit,t=s.bc().$implicit;s.xb(1),s.Lc(" ",s.ec(2,1,t[e.field],"Rp ")," ")}}function Q(e,t){if(1&e&&(s.Qb(0,"span"),s.Jc(1),s.Pb()),2&e){const e=s.bc().$implicit,t=s.bc().$implicit;s.xb(1),s.Lc(" ",t[e.field]," ")}}function D(e,t){if(1&e&&(s.Qb(0,"td"),s.Hc(1,C,3,4,"span",26),s.Hc(2,Q,2,1,"span",27),s.Pb()),2&e){const e=t.$implicit;s.Fc("width: ",e.width,""),s.xb(1),s.ic("ngIf",null!=e.isCurrency),s.xb(1),s.ic("ngIf",null==e.isCurrency)}}function M(e,t){if(1&e&&(s.Qb(0,"tr",24),s.Hc(1,D,3,5,"td",25),s.Pb()),2&e){const e=t.columns,i=t.rowIndex;s.ic("pSelectableRow",t.$implicit)("pSelectableRowIndex",i),s.xb(1),s.ic("ngForOf",e)}}const R=function(){return[5,10,25,50]},y=[{path:"",component:(()=>{class e{constructor(e,t,i,a,n,o,s,d){this.apiService=e,this.authService=t,this.confirmationService=i,this.messageService=a,this.cacheHelper=n,this.helper=o,this.alertService=s,this.route=d,this.item={tglAwal:new Date(l(new Date).format("YYYY-MM-DD 00:00")),tglAkhir:new Date(l(new Date).format("YYYY-MM-DD 23:59"))},this.page=r.b.get().page,this.rows=r.b.get().rows}ngOnInit(){this.dataLogin=this.authService.getDataLoginUser(),this.kelUser=this.dataLogin.kelompokUser.kelompokUser,this.dateNow=new Date,this.item.jmlRows=10,this.column=[{field:"no",header:"No",width:"65px"},{field:"tglclosing",header:"Tgl Closing",width:"140px"},{field:"kdproduk",header:"Kode Produk",width:"140px"},{field:"namaproduk",header:"Nama Produk",width:"300px"},{field:"satuanstandar",header:"Satuan",width:"180px"},{field:"qtyprodukreal",header:"Jumlah",width:"120px"},{field:"harga",header:"Harga Satuan",width:"140px",isCurrency:!0},{field:"total",header:"Total",width:"140px",isCurrency:!0},{field:"namaruangan",header:"Ruangan",width:"250px"}],this.loadDataCombo()}loadDataCombo(){this.apiService.get("logistik/get-combo-logistik").subscribe(e=>{this.listRuangan=null!=this.dataLogin.mapLoginUserToRuangan?this.dataLogin.mapLoginUserToRuangan:e.ruangfarmasi,this.item.dataRuangan=this.listRuangan[0],this.loadData()}),this.apiService.get("logistik/get-combo-detailjenisproduk").subscribe(e=>{this.listDetailJenisProduk=e.detailjenisproduk})}isiJenisProduk(){null!=this.item.dataDjenisProduk&&(this.listJenisBarang=this.item.dataDjenisProduk.jenisproduk)}isiKelompokProduk(){null!=this.item.dataJenisBarang&&(this.listKelompokBarang=this.item.dataJenisBarang.kelompokproduk)}formatRupiah(e,t){return t+" "+parseFloat(e).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}loadData(){var e,t,i,a=l(this.item.tglAwal).format("YYYY-MM-DD HH:mm"),n=l(this.item.tglAkhir).format("YYYY-MM-DD HH:mm");i="",null!=this.item.dataRuangan&&(i=this.item.dataRuangan.id),e="",null!=this.item.dataDjenisProduk&&(e=this.item.dataDjenisProduk.id),t="",null!=this.item.dataJenisBarang&&(t=this.item.dataJenisBarang.id);var o="";null!=this.item.jmlRows&&(o=this.item.jmlRows),this.apiService.get("logistik/get-daftar-so?tglAwal="+a+"&tglAkhir="+n+"&jeniskprodukid="+t+"&ruanganfk="+i+"&detailjenisprodukfk="+e+"&jmlRows="+o).subscribe(e=>{var t=e.data;for(let i=0;i<t.length;i++)t[i].no=i+1;this.dataTable=t})}cari(){this.loadData()}exportExcel(){this.helper.exportExcel(this.dataTable,"DaftarStokOpname")}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(d.a),s.Jb(d.b),s.Jb(o.a),s.Jb(o.h),s.Jb(c.a),s.Jb(p.a),s.Jb(b.a),s.Jb(n.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-daftar-so"]],features:[s.wb([o.a])],decls:36,vars:32,consts:[["header","Confirmation","icon","fa fa-question-circle"],[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[1,"p-grid"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["placeholder","Ruangan","optionLabel","namaruangan",3,"options","ngModel","filter","showClear","ngModelChange"],["placeholder","Detail Jenis Produk","optionLabel","detailjenisproduk",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["placeholder","Jenis Produk","optionLabel","jenisproduk",3,"options","ngModel","filter","showClear","ngModelChange"],["yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","ngModelChange"],[1,"p-col-12","p-md-1"],[1,"p-col-12","p-md-12",2,"margin-top","10px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",3,"click"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],["type","button","pButton","","pRipple","","icon","pi pi-file-excel","pTooltip","Export Excel","tooltipPosition","bottom",1,"p-button-success","p-mr-2",3,"click"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],[3,"style",4,"ngFor","ngForOf"],["style","text-align: right;",4,"ngIf"],[4,"ngIf"],[2,"text-align","right"]],template:function(e,t){1&e&&(s.Lb(0,"p-confirmDialog",0),s.Qb(1,"div",1),s.Qb(2,"div",2),s.Qb(3,"h4"),s.Jc(4,"Stok Opname List"),s.Pb(),s.Qb(5,"div",3),s.Qb(6,"div",4),s.Qb(7,"div",5),s.Qb(8,"label",6),s.Jc(9,"Ruangan"),s.Pb(),s.Qb(10,"p-dropdown",7),s.Yb("ngModelChange",function(e){return t.item.dataRuangan=e}),s.Pb(),s.Pb(),s.Qb(11,"div",5),s.Qb(12,"label",6),s.Jc(13,"Detail Jenis Produk"),s.Pb(),s.Qb(14,"p-dropdown",8),s.Yb("ngModelChange",function(e){return t.item.dataDjenisProduk=e})("onChange",function(){return t.isiJenisProduk()}),s.Pb(),s.Pb(),s.Qb(15,"div",5),s.Qb(16,"label",6),s.Jc(17,"Jenis Produk"),s.Pb(),s.Qb(18,"p-dropdown",9),s.Yb("ngModelChange",function(e){return t.item.dataJenisBarang=e}),s.Pb(),s.Pb(),s.Qb(19,"div",5),s.Qb(20,"label",6),s.Jc(21,"Periode Awal"),s.Pb(),s.Qb(22,"p-calendar",10),s.Yb("ngModelChange",function(e){return t.item.tglAwal=e}),s.Pb(),s.Pb(),s.Qb(23,"div",5),s.Qb(24,"label",6),s.Jc(25,"Periode Akhir"),s.Pb(),s.Qb(26,"p-calendar",10),s.Yb("ngModelChange",function(e){return t.item.tglAkhir=e}),s.Pb(),s.Pb(),s.Qb(27,"div",11),s.Qb(28,"div",12),s.Qb(29,"button",13),s.Yb("click",function(){return t.cari()}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(30,"div",3),s.Qb(31,"p-table",14,15),s.Yb("selectionChange",function(e){return t.selected=e}),s.Hc(33,x,2,0,"ng-template",16),s.Hc(34,J,2,1,"ng-template",17),s.Hc(35,M,2,3,"ng-template",18),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&e&&(s.xb(10),s.ic("options",t.listRuangan)("ngModel",t.item.dataRuangan)("filter",!0)("showClear",!0),s.xb(4),s.ic("options",t.listDetailJenisProduk)("ngModel",t.item.dataDjenisProduk)("filter",!0)("showClear",!0),s.xb(4),s.ic("options",t.listJenisBarang)("ngModel",t.item.dataJenisBarang)("filter",!0)("showClear",!0),s.xb(4),s.ic("ngModel",t.item.tglAwal)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),s.xb(4),s.ic("ngModel",t.item.tglAkhir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),s.xb(5),s.ic("columns",t.column)("value",t.dataTable)("selection",t.selected)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",s.mc(31,R))("paginator",!0)("pageLinks",5))},directives:[u.a,g.a,h.g,h.h,m.a,f.b,w.a,k.h,o.k,P.a,a.k,k.g,k.f,k.e,a.l],pipes:[a.c],styles:[""]}),e})()}];let j=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[n.j.forChild(y)],n.j]}),e})();var Y=i("PCNd");let S=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[a.b,j,Y.a]]}),e})()}}]);