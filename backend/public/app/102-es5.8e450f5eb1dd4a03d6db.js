!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{"1GeA":function(i,a,n){"use strict";n.r(a),n.d(a,"DaftarPerjanjianModule",function(){return A});var r=n("ofXK"),o=n("tyNb"),l=n("7zfz"),s=n("wd/R"),c=n("fXoL"),u=n("EJUL"),b=n("U+s4"),p=n("G0w9"),d=n("ujBT"),h=n("Nf9I"),g=n("eO1q"),f=n("3Pt+"),m=n("arFO"),v=n("7kUa"),w=n("jIHw"),P=n("xlun"),k=n("rEr+");function y(e,t){if(1&e&&(c.Qb(0,"th",21),c.Jc(1),c.Lb(2,"p-sortIcon",22),c.Pb()),2&e){var i=t.$implicit;c.Fc("width: ",i.width,""),c.jc("pSortableColumn",i.field),c.xb(1),c.Lc(" ",i.header," "),c.xb(1),c.jc("field",i.field)}}function C(e,t){if(1&e&&(c.Qb(0,"tr"),c.Qb(1,"th",19),c.Jc(2,"#"),c.Pb(),c.Hc(3,y,3,6,"th",20),c.Pb()),2&e){var i=t.$implicit;c.xb(3),c.ic("ngForOf",i)}}function M(e,t){if(1&e&&(c.Qb(0,"td"),c.Jc(1),c.Pb()),2&e){var i=t.$implicit,a=c.bc().$implicit;c.Fc("width: ",i.width,""),c.xb(1),c.Lc(" ",a[i.field]," ")}}function Q(e,t){if(1&e){var i=c.Sb();c.Qb(0,"tr",23),c.Qb(1,"td",19),c.Qb(2,"button",24),c.Yb("click",function(){c.yc(i);var e=t.$implicit;return c.bc().reconfirm(e)}),c.Pb(),c.Qb(3,"button",25),c.Yb("click",function(e){c.yc(i);var a=t.$implicit;return c.bc().confirm(e,a)}),c.Pb(),c.Pb(),c.Hc(4,M,2,4,"td",26),c.Pb()}if(2&e){var a=t.columns,n=t.rowIndex;c.ic("pSelectableRow",t.$implicit)("pSelectableRowIndex",n),c.xb(4),c.ic("ngForOf",a)}}var x,R,S,j=function(){return[5,10,25,50]},J=[{path:"",component:(x=function(){function i(t,a,n,r,o,l,s,c,u){e(this,i),this.apiService=t,this.authService=a,this.confirmationService=n,this.messageService=r,this.cacheHelper=o,this.dateHelper=l,this.alertService=s,this.route=c,this.router=u,this.item={tglAwal:new Date,tglAkhir:new Date}}var a,n,r;return a=i,(n=[{key:"ngOnInit",value:function(){var e=this;this.column=[{field:"no",header:"No",width:"65px"},{field:"noreservasi",header:"Kode Reservasi",width:"140px"},{field:"nocm",header:"No RM",width:"80px"},{field:"tanggalreservasi",header:"Tgl Reservasi",width:"150px"},{field:"namapasien",header:"Nama Pasien",width:"250px"},{field:"namaruangan",header:"Poli",width:"200px"},{field:"kelompokpasien",header:"Tipe Pasien",width:"180px"},{field:"dokter",header:"Dokter",width:"200px"},{field:"status",header:"Status",width:"120px",tag:'<p-tag severity="color" value="status"></p-tag>'},{field:"notelepon",header:"Telpon",width:"120px"},{field:"tglinput",header:"Tgl Input",width:"150px"}],this.listStatus=[{nama:"Confirm"},{nama:"Reservasi"}],this.apiService.get("registrasi/get-combo-perjanjian").subscribe(function(t){e.listRuangan=t.ruanganrajal}),this.load()}},{key:"cari",value:function(){this.load()}},{key:"load",value:function(){var e=this,t=s(this.item.tglAwal).format("YYYY-MM-DD"),i=s(this.item.tglAkhir).format("YYYY-MM-DD"),a="";null!=this.item.status&&(a=this.item.status.nama);var n="";null!=this.item.ruangan&&(n=this.item.ruangan.id);var r="";null!=this.item.namaPasien&&(r=this.item.namaPasien);var o="";null!=this.item.noRM&&(o=this.item.noRM);var l="";null!=this.item.kodeReservasi&&(l=this.item.kodeReservasi),this.apiService.get("registrasi/get-data-pasien-reservasi?tglAwal="+t+"&tglAkhir="+i+"&kdReservasi="+l+"&statusRev="+a+"&namapasienpm="+r+"&ruanganId="+n+"&noRM="+o).subscribe(function(t){for(var i=0;i<t.data.length;i++){var a=t.data[i];a.no=i+1,a.color="Confirm"==a.status?"info":"danger"}e.listPasien=t.data})}},{key:"confirm",value:function(e,t){var i=this;"Confirm"!=t.status?this.confirmationService.confirm({target:e.target,message:"Yakin mau hapus?",icon:"pi pi-exclamation-triangle",acceptLabel:"Ya",rejectLabel:"Tidak",accept:function(){i.hapus(t)},reject:function(){}}):this.alertService.info("Info","Pasien Sudah di Confirm, tidak bisa dihapus")}},{key:"hapus",value:function(e){var t=this;this.apiService.post("reservasionline/delete",{norec:e.norec}).subscribe(function(e){t.load(),t.saveAntrol(e.noreservasi,99)})}},{key:"reconfirm",value:function(e){"Confirm"!=e.status?null==e.nocm?(this.cacheHelper.set("CacheRegisOnline",{0:e,1:"Online",2:"",3:"",4:"",5:"",6:""}),this.router.navigate(["pasien-baru",e.norec,"-","-"])):(this.cacheHelper.set("cacheStatusPasien","LAMA"),this.cacheHelper.set("CacheRegistrasiPasien",void 0),this.cacheHelper.set("CacheRegisOnline",{0:e,1:"Online",2:"",3:"",4:"",5:"",6:""}),this.router.navigate(["registrasi-ruangan",e.nocmfk])):this.alertService.info("Info","Pasien Sudah di Confirm")}},{key:"saveAntrol",value:function(e,t){var i={url:"antrean/updatewaktu",jenis:"antrean",method:"POST",data:{kodebooking:e,taskid:t,waktu:(new Date).getTime()}};this.apiService.postNonMessage("bridging/bpjs/tools",i).subscribe(function(e){})}}])&&t(a.prototype,n),r&&t(a,r),i}(),x.\u0275fac=function(e){return new(e||x)(c.Jb(u.a),c.Jb(u.b),c.Jb(l.a),c.Jb(l.h),c.Jb(b.a),c.Jb(p.a),c.Jb(d.a),c.Jb(o.a),c.Jb(o.f))},x.\u0275cmp=c.Db({type:x,selectors:[["app-daftar-perjanjian"]],features:[c.wb([l.a])],decls:37,vars:30,consts:[["header","Confirmation","icon","fa fa-question-circle"],[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[1,"p-grid"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","ngModelChange"],["placeholder","Poli","optionLabel","namaruangan",3,"options","ngModel","filter","showClear","ngModelChange"],["type","text","pInputText","","placeholder","Nama Pasien",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Kode Reservasi",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-1"],["placeholder","Status","optionLabel","nama",3,"options","ngModel","filter","showClear","ngModelChange"],[1,"p-col-12","p-md-1",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",3,"click"],[1,"p-col-12"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange"],["pTemplate","header"],["pTemplate","body"],[2,"width","120px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],["pButton","","type","button","icon","pi pi-arrow-right","pTooltip","Reconfirm","label","",1,"p-button-rounded","p-mr-2",3,"click"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus Data","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(c.Lb(0,"p-confirmDialog",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"h4"),c.Jc(4,"Pasien Perjanjian"),c.Pb(),c.Qb(5,"div",3),c.Qb(6,"div",4),c.Qb(7,"div",5),c.Qb(8,"label",6),c.Jc(9,"Periode Awal"),c.Pb(),c.Qb(10,"p-calendar",7),c.Yb("ngModelChange",function(e){return t.item.tglAwal=e}),c.Pb(),c.Pb(),c.Qb(11,"div",5),c.Qb(12,"label",6),c.Jc(13,"Periode Akhir"),c.Pb(),c.Qb(14,"p-calendar",7),c.Yb("ngModelChange",function(e){return t.item.tglAkhir=e}),c.Pb(),c.Pb(),c.Qb(15,"div",5),c.Qb(16,"label",6),c.Jc(17,"Poli"),c.Pb(),c.Qb(18,"p-dropdown",8),c.Yb("ngModelChange",function(e){return t.item.ruangan=e}),c.Pb(),c.Pb(),c.Qb(19,"div",5),c.Qb(20,"label",6),c.Jc(21,"Nama Pasien "),c.Pb(),c.Qb(22,"input",9),c.Yb("ngModelChange",function(e){return t.item.namaPasien=e})("keyup.enter",function(){return t.cari()}),c.Pb(),c.Pb(),c.Qb(23,"div",5),c.Qb(24,"label",6),c.Jc(25,"Kode Reservasi"),c.Pb(),c.Qb(26,"input",10),c.Yb("ngModelChange",function(e){return t.item.kodeReservasi=e})("keyup.enter",function(){return t.cari()}),c.Pb(),c.Pb(),c.Qb(27,"div",11),c.Qb(28,"label",6),c.Jc(29,"Status"),c.Pb(),c.Qb(30,"p-dropdown",12),c.Yb("ngModelChange",function(e){return t.item.status=e}),c.Pb(),c.Pb(),c.Qb(31,"div",13),c.Qb(32,"button",14),c.Yb("click",function(){return t.cari()}),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(33,"div",15),c.Qb(34,"p-table",16),c.Yb("selectionChange",function(e){return t.selected=e}),c.Hc(35,C,4,1,"ng-template",17),c.Hc(36,Q,5,3,"ng-template",18),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.xb(10),c.ic("ngModel",t.item.tglAwal)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!1),c.xb(4),c.ic("ngModel",t.item.tglAkhir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!1),c.xb(4),c.ic("options",t.listRuangan)("ngModel",t.item.ruangan)("filter",!0)("showClear",!0),c.xb(4),c.ic("ngModel",t.item.namaPasien),c.xb(4),c.ic("ngModel",t.item.kodeReservasi),c.xb(4),c.ic("options",t.listStatus)("ngModel",t.item.status)("filter",!0)("showClear",!0),c.xb(4),c.ic("columns",t.column)("value",t.listPasien)("selection",t.selected)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",c.mc(29,j))("paginator",!0)("pageLinks",5))},directives:[h.a,g.a,f.g,f.h,m.a,f.a,v.a,w.b,P.a,k.h,l.k,r.k,k.g,k.f,k.e],styles:[""]}),x)}],Y=((R=function t(){e(this,t)}).\u0275mod=c.Hb({type:R}),R.\u0275inj=c.Gb({factory:function(e){return new(e||R)},imports:[[o.j.forChild(J)],o.j]}),R),T=n("PCNd"),A=((S=function t(){e(this,t)}).\u0275mod=c.Hb({type:S}),S.\u0275inj=c.Gb({factory:function(e){return new(e||S)},imports:[[r.b,Y,T.a]]}),S)}}])}();