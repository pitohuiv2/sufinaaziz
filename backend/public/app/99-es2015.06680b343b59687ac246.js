(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{VURj:function(e,t,i){"use strict";i.r(t),i.d(t,"DaftarMutasiModule",function(){return S});var a=i("ofXK"),n=i("tyNb"),r=i("7zfz"),o=i("1zoS"),s=i("wd/R"),l=i("fXoL"),c=i("EJUL"),d=i("U+s4"),p=i("G0w9"),b=i("ujBT"),h=i("Nf9I"),u=i("eO1q"),g=i("3Pt+"),m=i("7kUa"),f=i("arFO"),w=i("jIHw"),P=i("xlun"),v=i("rEr+"),k=i("/RsI");function M(e,t){if(1&e&&(l.Qb(0,"th",28),l.Jc(1),l.Lb(2,"p-sortIcon",29),l.Pb()),2&e){const e=t.$implicit;l.Fc("width: ",e.width,""),l.jc("pSortableColumn",e.field),l.xb(1),l.Lc(" ",e.header," "),l.xb(1),l.jc("field",e.field)}}function R(e,t){if(1&e&&(l.Qb(0,"tr"),l.Qb(1,"th",26),l.Jc(2,"Aksi "),l.Pb(),l.Hc(3,M,3,6,"th",27),l.Pb()),2&e){const e=t.$implicit;l.xb(3),l.ic("ngForOf",e)}}function C(e,t){if(1&e&&(l.Qb(0,"td"),l.Jc(1),l.Pb()),2&e){const e=t.$implicit,i=l.bc().$implicit;l.Fc("width: ",e.width,""),l.xb(1),l.Lc(" ",i[e.field]," ")}}function Q(e,t){if(1&e){const e=l.Sb();l.Qb(0,"tr",30),l.Qb(1,"td",26),l.Qb(2,"button",31),l.Yb("click",function(){l.yc(e);const i=t.$implicit;return l.bc().mutasiKeun(i)}),l.Pb(),l.Pb(),l.Hc(3,C,2,4,"td",32),l.Pb()}if(2&e){const e=t.columns,i=t.rowIndex;l.ic("pSelectableRow",t.$implicit)("pSelectableRowIndex",i),l.xb(3),l.ic("ngForOf",e)}}function D(e,t){if(1&e){const e=l.Sb();l.Qb(0,"p-button",33),l.Yb("click",function(){return l.yc(e),l.bc().cariFilter()}),l.Pb(),l.Qb(1,"p-button",34),l.Yb("click",function(){return l.yc(e),l.bc().clearFilter()}),l.Pb()}}const x=function(){return[5,10,25,50]},Y=function(){return{width:"50vw"}},y=[{path:"",component:(()=>{class e{constructor(e,t,i,a,n,r,s,l,c){this.apiService=e,this.authService=t,this.confirmationService=i,this.messageService=a,this.cacheHelper=n,this.dateHelper=r,this.alertService=s,this.route=l,this.router=c,this.pencarian="",this.item={},this.listKriteria=[{name:"Semua",id:"1"},{name:"Masih Dirawat",id:"2"}],this.page=o.b.get().page,this.rows=o.b.get().rows}ngOnInit(){this.dataLogin=this.authService.dataLoginUser,this.kelUser=this.dataLogin.kelompokUser.kelompokUser,this.dateNow=new Date,this.item.tglAwal=s(this.dateNow).format("YYYY-MM-DD 00:00"),this.item.tglAkhir=s(this.dateNow).format("YYYY-MM-DD 23:59"),this.item.jmlRows=50,this.column=[{field:"no",header:"No",width:"65px"},{field:"tglregistrasi",header:"Tgl Registrasi",width:"140px"},{field:"norm",header:"No RM",width:"80px"},{field:"noregistrasi",header:"Noregistrasi",width:"125px"},{field:"namapasien",header:"Nama Pasien",width:"250px"},{field:"namakelas",header:"Kelas",width:"100px"},{field:"namaruangan",header:"Ruangan",width:"180px"},{field:"namadokter",header:"Dokter",width:"180px"},{field:"kelompokpasien",header:"Tipe Pasien",width:"120px"},{field:"tglpulang",header:"Tgl Pulang",width:"140px"},{field:"jenispelayanan",header:"Jenis Pelayanan",width:"140px"}],this.getDataCombo()}getDataCombo(){this.apiService.get("registrasi/get-data-combo-operator").subscribe(e=>{var t=e;this.listDepartemen=t.departemen,this.listKelompokPasien=t.kelompokpasien,this.LoadCache()})}LoadCache(){var e=this.cacheHelper.get("DafarMutasi");null!=e?(this.item.tglAwal=new Date(e[0]),this.item.tglAkhir=new Date(e[1]),this.item.status=e[2],this.item.namaOrReg=e[3],null!=e[6]&&(this.listDepartemen=[e[6]],this.item.dataDepartemen=e[6]),null!=e[5]&&(this.listRuangan=[e[5]],this.item.dataRuangan=e[5]),null!=e[4]&&""!=e[4]&&(this.item.noReg=e[4]),null!=e[7]&&""!=e[7]&&(this.item.noRm=e[7]),null!=e[8]&&""!=e[8]&&(this.item.jmlRows=e[8]),this.getData()):this.getData()}isiRuangan(){null!=this.item.dataDepartemen&&(this.listRuangan=this.item.dataDepartemen.ruangan)}cari(){this.getData()}getData(){var e=s(this.item.tglAwal).format("YYYY-MM-DD HH:mm"),t=s(this.item.tglAkhir).format("YYYY-MM-DD HH:mm"),i="",a=void 0;null!=this.item.dataRuangan&&(i=this.item.dataRuangan.id,a={id:this.item.dataRuangan.id,ruangan:this.item.dataRuangan.ruangan});var n="",r=void 0;null!=this.item.dataDepartemen&&(n=this.item.dataDepartemen.id,r={id:this.item.dataDepartemen.id,departemen:this.item.dataDepartemen.departemen});var o="";null!=this.item.dataKelPasien&&(o=this.item.dataKelPasien.id);var l="";null!=this.item.noRM&&(l=this.item.noRM);var c="";null!=this.item.Noregistrasi&&(c=this.item.Noregistrasi);var d="";null!=this.item.namaPasien&&(d=this.item.namaPasien);var p="";null!=this.item.jmlRows&&(p=this.item.jmlRows);var b=!1;null!=this.item.isCanBalik&&(b=this.item.isCanBalik),this.cacheHelper.set("DafarMutasi",{0:e,1:t,2:void 0,3:d,4:c,5:a,6:r,7:l}),this.apiService.get("registrasi/get-daftar-mutasi?namaPasien="+d+"&ruanganId="+i+"&status=&tglAwal="+e+"&tglAkhir="+t+"&noReg="+c+"&instalasiId="+n+"&noRm="+l+"&jmlRows="+p+"&kelompokPasienId="+o+"&isCanBalik="+b).subscribe(e=>{e=e;for(let t=0;t<e.length;t++){const i=e[t];i.no=t+1,null==i.tglmeninggal?(i.statuspasien="Hidup",i.color="info"):(i.statuspasien="Meninggal",i.color="danger")}this.dataTable=e,this.totalRecords=e.totalRow})}mutasiKeun(e){this.cacheHelper.set("CacheMutasiRanap",void 0),this.apiService.get("registrasi/get-apd?noregistrasi="+e.noregistrasi+"&objectruanganlastfk="+e.ruanganlastidfk).subscribe(t=>{var i=t.data;null!=i&&(this.router.navigate(["registrasi-ruangan",e.normidfk]),this.cacheHelper.set("CacheMutasiRanap",e.norec+"~"+e.noregistrasi+"~"+i.norec_apd))})}mutasi(){null!=this.selected?(this.cacheHelper.set("CacheMutasiRanap",void 0),this.apiService.get("registrasi/get-apd?noregistrasi="+this.selected.noregistrasi+"&objectruanganlastfk="+this.selected.ruanganlastidfk).subscribe(e=>{var t=e.data;null!=t&&(this.router.navigate(["registrasi-ruangan",this.selected.normidfk]),this.cacheHelper.set("CacheMutasiRanap",this.selected.norec+"~"+this.selected.noregistrasi+"~"+t.norec_apd))})):this.alertService.error("Info","Pilih data dulu")}onRowSelect(e){this.selected=e.data}filterDokter(e){this.apiService.get("general/get-data-combo-dokter-part?namalengkap="+e.query).subscribe(e=>{this.listDokter=e})}filter(){this.popFilter=!0}cariFilter(){this.popFilter=!1,this.getData()}clearFilter(){this.popFilter=!1,this.item={},this.item.tglAwal=s(this.dateNow).format("YYYY-MM-DD 00:00"),this.item.tglAkhir=s(this.dateNow).format("YYYY-MM-DD 23:59"),this.item.jmlRows=50,this.getData()}}return e.\u0275fac=function(t){return new(t||e)(l.Jb(c.a),l.Jb(c.b),l.Jb(r.a),l.Jb(r.h),l.Jb(d.a),l.Jb(p.a),l.Jb(b.a),l.Jb(n.a),l.Jb(n.f))},e.\u0275cmp=l.Db({type:e,selectors:[["app-daftar-mutasi"]],features:[l.wb([r.a])],decls:51,vars:45,consts:[["header","Confirmation","icon","fa fa-question-circle"],[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[1,"p-grid"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","disabled","ngModelChange"],[1,"p-col-12","p-md-1"],["type","text","pInputText","","placeholder","No RM",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Noregistrasi",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Nama Pasien",3,"ngModel","ngModelChange","keyup.enter"],["placeholder","Tipe Pasien","optionLabel","kelompokpasien",3,"options","ngModel","filter","showClear","ngModelChange"],[1,"p-col-12","p-md-1",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",1,"p-mr-1",3,"click"],["pButton","","type","button","icon","pi pi-filter","pTooltip","Filter",1,"p-button-success",3,"click"],[1,"p-col-12"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["header","Filter",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"p-col-12","p-md-6"],["placeholder","Instalasi","optionLabel","departemen","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["placeholder","Ruangan","optionLabel","ruangan","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange"],["pTemplate","footer"],[2,"width","80px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],["pButton","","type","button","icon","fa fa-eject","pTooltip","Mutasi","label","",1,"p-button-rounded","p-button-success","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"],["icon","pi pi-filter","label","Filter",1,"p-button-success",3,"click"],["icon","pi pi-close","label","Clear","styleClass","p-button-text",3,"click"]],template:function(e,t){1&e&&(l.Lb(0,"p-confirmDialog",0),l.Qb(1,"div",1),l.Qb(2,"div",2),l.Qb(3,"h4"),l.Jc(4,"Mutasi Rawat Inap"),l.Pb(),l.Qb(5,"div",3),l.Qb(6,"div",4),l.Qb(7,"div",5),l.Qb(8,"label",6),l.Jc(9,"Periode Awal"),l.Pb(),l.Qb(10,"p-calendar",7),l.Yb("ngModelChange",function(e){return t.item.tglAwal=e}),l.Pb(),l.Pb(),l.Qb(11,"div",5),l.Qb(12,"label",6),l.Jc(13,"Periode Akhir"),l.Pb(),l.Qb(14,"p-calendar",7),l.Yb("ngModelChange",function(e){return t.item.tglAkhir=e}),l.Pb(),l.Pb(),l.Qb(15,"div",8),l.Qb(16,"label",6),l.Jc(17,"No RM "),l.Pb(),l.Qb(18,"input",9),l.Yb("ngModelChange",function(e){return t.item.noRM=e})("keyup.enter",function(){return t.cari()}),l.Pb(),l.Pb(),l.Qb(19,"div",5),l.Qb(20,"label",6),l.Jc(21,"Noregistrasi"),l.Pb(),l.Qb(22,"input",10),l.Yb("ngModelChange",function(e){return t.item.Noregistrasi=e})("keyup.enter",function(){return t.cari()}),l.Pb(),l.Pb(),l.Qb(23,"div",5),l.Qb(24,"label",6),l.Jc(25,"Nama Pasien "),l.Pb(),l.Qb(26,"input",11),l.Yb("ngModelChange",function(e){return t.item.namaPasien=e})("keyup.enter",function(){return t.cari()}),l.Pb(),l.Pb(),l.Qb(27,"div",5),l.Qb(28,"label",6),l.Jc(29,"Tipe Pasien"),l.Pb(),l.Qb(30,"p-dropdown",12),l.Yb("ngModelChange",function(e){return t.item.dataKelPasien=e}),l.Pb(),l.Pb(),l.Qb(31,"div",13),l.Qb(32,"button",14),l.Yb("click",function(){return t.cari()}),l.Pb(),l.Qb(33,"button",15),l.Yb("click",function(){return t.filter()}),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(34,"div",16),l.Qb(35,"p-table",17,18),l.Yb("selectionChange",function(e){return t.selected=e}),l.Hc(37,R,4,1,"ng-template",19),l.Hc(38,Q,4,3,"ng-template",20),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(39,"p-dialog",21),l.Yb("visibleChange",function(e){return t.popFilter=e}),l.Qb(40,"div",1),l.Qb(41,"div",4),l.Qb(42,"div",22),l.Qb(43,"label",6),l.Jc(44,"Instalasi"),l.Pb(),l.Qb(45,"p-dropdown",23),l.Yb("ngModelChange",function(e){return t.item.dataDepartemen=e})("onChange",function(){return t.isiRuangan()}),l.Pb(),l.Pb(),l.Qb(46,"div",22),l.Qb(47,"label",6),l.Jc(48,"Ruangan"),l.Pb(),l.Qb(49,"p-dropdown",24),l.Yb("ngModelChange",function(e){return t.item.dataRuangan=e}),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Hc(50,D,2,0,"ng-template",25),l.Pb()),2&e&&(l.xb(10),l.ic("ngModel",t.item.tglAwal)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0)("disabled",t.disableTgl),l.xb(4),l.ic("ngModel",t.item.tglAkhir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0)("disabled",t.disableTgl),l.xb(4),l.ic("ngModel",t.item.noRM),l.xb(4),l.ic("ngModel",t.item.Noregistrasi),l.xb(4),l.ic("ngModel",t.item.namaPasien),l.xb(4),l.ic("options",t.listKelompokPasien)("ngModel",t.item.dataKelPasien)("filter",!0)("showClear",!0),l.xb(5),l.ic("columns",t.column)("value",t.dataTable)("selection",t.selected)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",l.mc(43,x))("paginator",!0)("pageLinks",5),l.xb(4),l.Ec(l.mc(44,Y)),l.ic("visible",t.popFilter)("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!0),l.xb(6),l.ic("options",t.listDepartemen)("ngModel",t.item.dataDepartemen)("filter",!0)("showClear",!0),l.xb(4),l.ic("options",t.listRuangan)("ngModel",t.item.dataRuangan)("filter",!0)("showClear",!0))},directives:[h.a,u.a,g.g,g.h,g.a,m.a,f.a,w.b,P.a,v.h,r.k,k.a,a.k,v.g,v.f,v.e,w.a],styles:[""]}),e})()}];let N=(()=>{class e{}return e.\u0275mod=l.Hb({type:e}),e.\u0275inj=l.Gb({factory:function(t){return new(t||e)},imports:[[n.j.forChild(y)],n.j]}),e})();var J=i("PCNd");let S=(()=>{class e{}return e.\u0275mod=l.Hb({type:e}),e.\u0275inj=l.Gb({factory:function(t){return new(t||e)},imports:[[a.b,N,J.a]]}),e})()}}]);