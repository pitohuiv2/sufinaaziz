!function(){function a(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function e(a,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{UBrM:function(t,i,n){"use strict";n.r(i),n.d(i,"BayarTagihanPasienModule",function(){return Y});var r=n("ofXK"),o=n("tyNb"),l=n("7zfz"),b=n("1zoS"),c=n("wd/R"),s=n("fXoL"),d=n("EJUL"),p=n("U+s4"),u=n("G0w9"),m=n("ujBT"),h=n("7CaW"),g=n("3Pt+"),f=n("7kUa"),y=n("eO1q"),v=n("arFO"),P=n("zFJ7"),T=n("jIHw"),w=n("xlun"),Q=n("rEr+"),B=n("Nf9I");function x(a,e){if(1&a&&(s.Qb(0,"th",36),s.Jc(1),s.Lb(2,"p-sortIcon",37),s.Pb()),2&a){var t=e.$implicit;s.Fc("width: ",t.width,""),s.jc("pSortableColumn",t.field),s.xb(1),s.Lc(" ",t.header," "),s.xb(1),s.jc("field",t.field)}}function k(a,e){if(1&a&&(s.Qb(0,"tr"),s.Hc(1,x,3,6,"th",34),s.Qb(2,"th",35),s.Jc(3," # "),s.Pb(),s.Pb()),2&a){var t=e.$implicit;s.xb(1),s.ic("ngForOf",t)}}function C(a,e){if(1&a&&(s.Qb(0,"span"),s.Jc(1),s.Pb()),2&a){var t=s.bc().$implicit,i=s.bc().$implicit,n=s.bc();s.xb(1),s.Lc(" ",n.formatRupiah(i[t.field],"")," ")}}function M(a,e){if(1&a&&(s.Qb(0,"span"),s.Jc(1),s.Pb()),2&a){var t=s.bc().$implicit,i=s.bc().$implicit;s.xb(1),s.Lc(" ",i[t.field],"")}}function S(a,e){if(1&a&&(s.Qb(0,"td"),s.Hc(1,C,2,1,"span",41),s.Hc(2,M,2,1,"span",41),s.Pb()),2&a){var t=e.$implicit;s.Fc("width: ",t.width,""),s.xb(1),s.ic("ngIf",null!=t.isCurrency),s.xb(1),s.ic("ngIf",null==t.isCurrency)}}function D(a,e){if(1&a){var t=s.Sb();s.Qb(0,"tr",38),s.Hc(1,S,3,5,"td",39),s.Qb(2,"td",35),s.Qb(3,"button",40),s.Yb("click",function(){s.yc(t);var a=e.$implicit;return s.bc().hapusItem(a)}),s.Pb(),s.Pb(),s.Pb()}if(2&a){var i=e.columns,n=e.rowIndex;s.ic("pSelectableRow",e.$implicit)("pSelectableRowIndex",n),s.xb(1),s.ic("ngForOf",i)}}var J,N,I,R=function(){return[5,10,25,50]},F=function(){return{width:"50vw"}},L=[{path:"",component:(J=function(){function t(e,i,n,r,o,l,c,s,d){a(this,t),this.apiService=e,this.authService=i,this.confirmationService=n,this.messageService=r,this.cacheHelper=o,this.dateHelper=l,this.alertService=c,this.route=s,this.router=d,this.params={},this.dataTable=[],this.item={pasien:{}},this.dataPrevPage={},this.maxDateValue=new Date,this.page=b.b.get().page,this.rows=b.b.get().rows}var i,n,r;return i=t,(n=[{key:"ngOnInit",value:function(){var a=this;this.dateNow=new Date,this.item.tglBayar=this.dateNow,this.column=[{field:"no",header:"No",width:"65px"},{field:"caraBayar",header:"Cara Bayar",width:"140px"},{field:"nominal",header:"Nominal",width:"100px",isCurrency:!0}],this.route.params.subscribe(function(e){a.currentNorecSP=e.norec_sp,a.currentJenisPembayaran=e.jenispembayaran,a.JenisPembayaran=e.jenispembayaran,a.norec_sp=a.currentNorecSP,a.nominalBayar=parseFloat(e.nominalbayar),a.dataPrevPage={noRecStrukPelayanan:a.norec_sp,tipePembayaran:a.JenisPembayaran},a.LoadCombo()})}},{key:"LoadCombo",value:function(){var a=this;this.apiService.get("kasir/get-combo-kasir").subscribe(function(e){var t=e;a.listCaraBayar=t.carabayar,a.item.caraBayar=t.carabayar[0],a.dataPegawai=t.dataLogin,a.dataPegawai&&(a.idKasir=a.dataPegawai.objectpegawaifk,a.namaKasir=a.dataPegawai.namalengkap),a.LoadData()})}},{key:"formatRupiah",value:function(a,e){return e+" "+parseFloat(a).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}},{key:"LoadData",value:function(){var a=this;this.apiService.get("kasir/get-data-pembayaran?noRecStrukPelayanan="+this.norec_sp+"&tipePembayaran="+this.JenisPembayaran+"&jumlahBayar="+this.nominalBayar).subscribe(function(e){var t=e;a.item.Diterima=t.pasien,a.Tagihan=parseFloat(t.jumlahBayar),a.item.Nominal=parseFloat(t.jumlahBayar),a.changeNominal(t.jumlahBayar),a.item.totalTagihan=a.formatRupiah(a.Tagihan,"Rp."),a.item.TotalDibayar=a.formatRupiah(a.Tagihan,"Rp.")})}},{key:"Batal",value:function(){this.item.Nominal=void 0,this.item.Terbilang=void 0}},{key:"changeNominal",value:function(a){var e=this;null!=a&&""!=a&&this.apiService.get("sysadmin/general/get-terbilang/"+parseFloat(a)).subscribe(function(a){e.item.Terbilang=a.terbilang})}},{key:"tambahBayar",value:function(){if(null!=this.item.caraBayar)if(null!=this.item.Nominal&&""!=this.item.Nominal){this.dataTable.push({no:0==this.dataTable.length?1:this.dataTable.length+1,caraBayar:this.item.caraBayar.carabayar,idcaraBayar:this.item.caraBayar.id,nominal:parseFloat(this.item.Nominal)});for(var a=0,e=0;e<this.dataTable.length;e++)a=this.dataTable[e].nominal+a;this.item.Total=a,this.item.Terbilang=void 0,this.item.Nominal=void 0}else this.alertService.warn("Info","Nominal Tidak Boleh Kosong!");else this.alertService.warn("Info","Cara Bayar Belum Dipilih!")}},{key:"hapusItem",value:function(a){for(var e=this.dataTable.length-1;e>=0;e--)this.dataTable[e].no==a.no&&this.dataTable.splice(e,1);for(var t=0,i=0;i<this.dataTable.length;i++)t=this.dataTable[i].nominal+t;this.item.Total=t}},{key:"bayarTagihan",value:function(){var a=this;if(null!=this.item.Total&&0!=this.item.Total)if(this.item.Total==this.Tagihan){for(var e={parameterTambahan:this.dataPrevPage,jumlahBayar:this.item.Tota,biayaAdministrasi:0,diskon:0,tglsbm:c(this.item.TglBayar).format("YYYY-MM-DD HH:mm"),pembayaran:[]},t=0;t<this.dataTable.length;t++){var i=this.dataTable[t];e.pembayaran.push({nominal:i.nominal,caraBayar:{id:i.idcaraBayar,caraBayar:i.caraBayar}})}this.isSimpan=!0,this.apiService.post("kasir/simpan-data-pembayaran",e).subscribe(function(e){var t;a.apiService.postLog("Pembayaran Tagihan "+a.JenisPembayaran,"nomor sbm",e.noSBM[0],"Pembayaran Tagihan No SBM - "+e.noSBM[0]+" pada No Registrasi "+e.noReg).subscribe(function(a){}),t=confirm("View Kwitansi? ")?"true":"false",a.apiService.getUrlCetak("http://127.0.0.1:3885/desk/routes?cetak-kwitansi=1&nosbm="+e.norec+"&idpegawai="+a.authService.getDataLoginUser().pegawai.namaLengkap+"&view="+t,function(a){}),window.history.back(),a.isSimpan=!1},function(e){a.isSimpan=!1})}else this.alertService.warn("Info","Total Bayar Tidak Sama Dengan Tagihan!");else this.alertService.warn("Info","Total Bayar Tidak Boleh Kosong!")}},{key:"Kembali",value:function(){window.history.back()}},{key:"onRowSelect",value:function(a){}},{key:"changeKlaim",value:function(a){}}])&&e(i.prototype,n),r&&e(i,r),t}(),J.\u0275fac=function(a){return new(a||J)(s.Jb(d.a),s.Jb(d.b),s.Jb(l.a),s.Jb(l.h),s.Jb(p.a),s.Jb(u.a),s.Jb(m.a),s.Jb(o.a),s.Jb(o.f))},J.\u0275cmp=s.Db({type:J,selectors:[["app-bayar-tagihan-pasien"]],features:[s.wb([l.a])],decls:71,vars:35,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-grid"],[1,"p-col-12","p-md-3"],["header","Data Tagihan",3,"toggleable"],[1,"p-col-12","p-md-12"],["for","input"],["type","text","pInputText","","placeholder","Total Tagihan","disabled","",3,"ngModel","ngModelChange"],["for","input",1,"label-required"],["yearRange","1980:2030","dateFormat","yy-mm-dd","placeholder","Tgl Bayar","hourFormat","24",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","maxDate","ngModelChange"],["type","text","pInputText","","placeholder","Total Harus Dibayar","disabled","",3,"ngModel","ngModelChange"],["placeholder","Cara Bayar","optionLabel","carabayar",3,"options","ngModel","filter","showClear","ngModelChange"],["pInputTextarea","","placeholder","Terbilang","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Nominal Bayar",3,"ngModel","ngModelChange"],[1,"p-col-12","p-md-5","p-md-offset-2"],["pButton","","type","submit","icon","fa fa-plus","pTooltip","Tambah Bayar","label","Tambah",3,"click"],[1,"p-col-12","p-md-5"],["pButton","","type","submit","icon","fa fa-ban","pTooltip","Batal","label","Batal",1,"p-button-danger",3,"click"],[1,"p-col-12","p-md-9"],["header","Daftar Bayar",3,"toggleable"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange","onRowSelect"],["dt",""],["pTemplate","header"],["pTemplate","body"],[1,"p-col-12","p-md-6"],["header","Detail",3,"toggleable"],["pInputTextarea","","placeholder","Diterima Dari","disabled","",3,"ngModel","ngModelChange"],["header","Total Bayar",3,"toggleable"],["pInputTextarea","","placeholder","Total Dibayarkan","disabled","",3,"ngModel","ngModelChange"],[1,"p-col-12","p-md-8"],[1,"p-col-12","p-md-2",2,"margin-top","15px"],["rejectButtonStyleClass","p-button-text",3,"baseZIndex"],["pButton","","type","submit","icon","fa fa-money","pTooltip","Bayar","label","Bayar",1,"p-button-success",3,"disabled","click"],["pButton","","type","submit","icon","fa fa-undo","pTooltip","Kembali","label","Kembali",1,"p-button-danger",3,"click"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[2,"width","80px"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],[3,"style",4,"ngFor","ngForOf"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus Data","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],[4,"ngIf"]],template:function(a,e){1&a&&(s.Qb(0,"div",0),s.Qb(1,"div",1),s.Qb(2,"h4"),s.Jc(3,"Penerimaan Pembayaran"),s.Pb(),s.Qb(4,"div",2),s.Qb(5,"div",3),s.Qb(6,"p-panel",4),s.Qb(7,"div",2),s.Qb(8,"div",5),s.Qb(9,"label",6),s.Jc(10,"Total Tagihan"),s.Pb(),s.Qb(11,"input",7),s.Yb("ngModelChange",function(a){return e.item.totalTagihan=a}),s.Pb(),s.Pb(),s.Qb(12,"div",5),s.Qb(13,"label",8),s.Jc(14," Tgl Bayar "),s.Pb(),s.Qb(15,"p-calendar",9),s.Yb("ngModelChange",function(a){return e.item.tglBayar=a}),s.Pb(),s.Pb(),s.Qb(16,"div",5),s.Qb(17,"label",6),s.Jc(18,"Total Harus Dibayar"),s.Pb(),s.Qb(19,"input",10),s.Yb("ngModelChange",function(a){return e.item.TotalDibayar=a}),s.Pb(),s.Pb(),s.Qb(20,"div",5),s.Qb(21,"label",8),s.Jc(22,"Cara Bayar"),s.Pb(),s.Qb(23,"p-dropdown",11),s.Yb("ngModelChange",function(a){return e.item.caraBayar=a}),s.Pb(),s.Pb(),s.Qb(24,"div",5),s.Qb(25,"label",6),s.Jc(26,"Terbilang"),s.Pb(),s.Qb(27,"textarea",12),s.Yb("ngModelChange",function(a){return e.item.Terbilang=a}),s.Pb(),s.Pb(),s.Qb(28,"div",5),s.Qb(29,"label",8),s.Jc(30,"Nominal"),s.Pb(),s.Qb(31,"input",13),s.Yb("ngModelChange",function(a){return e.item.Nominal=a})("ngModelChange",function(){return e.changeNominal(e.item.Nominal)}),s.Pb(),s.Pb(),s.Qb(32,"div",5),s.Qb(33,"div",2),s.Qb(34,"div",14),s.Qb(35,"button",15),s.Yb("click",function(){return e.tambahBayar()}),s.Pb(),s.Pb(),s.Qb(36,"div",16),s.Qb(37,"button",17),s.Yb("click",function(){return e.Batal()}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(38,"div",18),s.Qb(39,"div",2),s.Qb(40,"div",5),s.Qb(41,"p-panel",19),s.Qb(42,"div",5),s.Qb(43,"p-table",20,21),s.Yb("selectionChange",function(a){return e.selected=a})("onRowSelect",function(a){return e.onRowSelect(a)}),s.Hc(45,k,4,1,"ng-template",22),s.Hc(46,D,4,3,"ng-template",23),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(47,"div",5),s.Qb(48,"div",2),s.Qb(49,"div",24),s.Qb(50,"p-panel",25),s.Qb(51,"div",2),s.Qb(52,"div",5),s.Qb(53,"label",6),s.Jc(54,"Diterima Dari"),s.Pb(),s.Qb(55,"textarea",26),s.Yb("ngModelChange",function(a){return e.item.Diterima=a}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(56,"div",24),s.Qb(57,"p-panel",27),s.Qb(58,"div",2),s.Qb(59,"div",5),s.Qb(60,"label",6),s.Jc(61,"Total"),s.Pb(),s.Qb(62,"textarea",28),s.Yb("ngModelChange",function(a){return e.item.Total=a}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(63,"div",5),s.Qb(64,"div",2),s.Lb(65,"div",29),s.Qb(66,"div",30),s.Lb(67,"p-confirmDialog",31),s.Qb(68,"button",32),s.Yb("click",function(){return e.bayarTagihan()}),s.Pb(),s.Pb(),s.Qb(69,"div",30),s.Qb(70,"button",33),s.Yb("click",function(){return e.Kembali()}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&a&&(s.xb(6),s.ic("toggleable",!1),s.xb(5),s.ic("ngModel",e.item.totalTagihan),s.xb(4),s.ic("ngModel",e.item.tglBayar)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0)("maxDate",e.maxDateValue),s.xb(4),s.ic("ngModel",e.item.TotalDibayar),s.xb(4),s.ic("options",e.listCaraBayar)("ngModel",e.item.caraBayar)("filter",!0)("showClear",!0),s.xb(4),s.ic("ngModel",e.item.Terbilang),s.xb(4),s.ic("ngModel",e.item.Nominal),s.xb(10),s.ic("toggleable",!1),s.xb(2),s.ic("columns",e.column)("value",e.dataTable)("selection",e.selected)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",s.mc(33,R))("paginator",!0)("pageLinks",5),s.xb(7),s.ic("toggleable",!1),s.xb(5),s.ic("ngModel",e.item.Diterima),s.xb(2),s.ic("toggleable",!1),s.xb(5),s.ic("ngModel",e.item.Total),s.xb(5),s.Ec(s.mc(34,F)),s.ic("baseZIndex",1e4),s.xb(1),s.ic("disabled",e.isSimpan))},directives:[h.a,g.a,f.a,g.g,g.h,y.a,v.a,P.a,T.b,w.a,Q.h,l.k,B.a,r.k,Q.g,Q.f,Q.e,r.l],styles:[""]}),J)}],j=((N=function e(){a(this,e)}).\u0275mod=s.Hb({type:N}),N.\u0275inj=s.Gb({factory:function(a){return new(a||N)},imports:[[o.j.forChild(L)],o.j]}),N),H=n("PCNd"),Y=((I=function e(){a(this,e)}).\u0275mod=s.Hb({type:I}),I.\u0275inj=s.Gb({factory:function(a){return new(a||I)},imports:[[r.b,j,H.a]]}),I)}}])}();