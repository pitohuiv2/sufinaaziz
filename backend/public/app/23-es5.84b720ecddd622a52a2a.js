!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{ZDsB:function(a,i,n){"use strict";n.r(i),n.d(i,"DaftarSetoranKasirModule",function(){return j});var r=n("ofXK"),o=n("tyNb"),l=n("7zfz"),c=n("wd/R"),b=n("fXoL"),s=n("EJUL"),d=n("U+s4"),p=n("G0w9"),h=n("ujBT"),u=n("Nf9I"),m=n("eO1q"),f=n("3Pt+"),g=n("lVkt"),v=n("arFO"),w=n("7kUa"),P=n("jIHw"),y=n("xlun"),Q=n("rEr+"),C=n("Q4Mo");function k(e,t){if(1&e&&(b.Qb(0,"th",24),b.Jc(1),b.Lb(2,"p-sortIcon",25),b.Pb()),2&e){var a=t.$implicit;b.Fc("width: ",a.width,""),b.jc("pSortableColumn",a.field),b.xb(1),b.Lc(" ",a.header," "),b.xb(1),b.jc("field",a.field)}}function S(e,t){if(1&e&&(b.Qb(0,"tr"),b.Qb(1,"th",22),b.Jc(2,"Aksi"),b.Pb(),b.Lb(3,"th",22),b.Hc(4,k,3,6,"th",23),b.Pb()),2&e){var a=t.$implicit;b.xb(4),b.ic("ngForOf",a)}}function x(e,t){if(1&e&&(b.Qb(0,"span"),b.Jc(1),b.Pb()),2&e){var a=b.bc().$implicit,i=b.bc().$implicit,n=b.bc();b.xb(1),b.Lc(" ",n.formatRupiah(i[a.field],"")," ")}}function M(e,t){if(1&e&&(b.Qb(0,"span"),b.Jc(1),b.Pb()),2&e){var a=b.bc().$implicit,i=b.bc().$implicit;b.xb(1),b.Lc(" ",i[a.field],"")}}function D(e,t){if(1&e&&(b.Qb(0,"td"),b.Hc(1,x,2,1,"span",30),b.Hc(2,M,2,1,"span",30),b.Pb()),2&e){var a=t.$implicit;b.Fc("width: ",a.width,""),b.xb(1),b.ic("ngIf",null!=a.isCurrency),b.xb(1),b.ic("ngIf",null==a.isCurrency)}}function Y(e,t){if(1&e){var a=b.Sb();b.Qb(0,"tr",26),b.Qb(1,"td",22),b.Qb(2,"button",27),b.Yb("click",function(){b.yc(a);var e=t.$implicit;return b.bc().batalSetor2(e)}),b.Pb(),b.Pb(),b.Qb(3,"td",22),b.Lb(4,"button",28),b.Pb(),b.Hc(5,D,3,5,"td",29),b.Pb()}if(2&e){var i=t.$implicit,n=t.columns,r=t.rowIndex,o=t.expanded;b.ic("pSelectableRow",i)("pSelectableRowIndex",r),b.xb(4),b.ic("pRowToggler",i)("icon",o?"pi pi-chevron-down":"pi pi-chevron-right"),b.xb(1),b.ic("ngForOf",n)}}function J(e,t){1&e&&(b.Qb(0,"tr"),b.Qb(1,"th"),b.Jc(2,"No Bayar"),b.Pb(),b.Qb(3,"th"),b.Jc(4,"Nama Pasien"),b.Pb(),b.Qb(5,"th"),b.Jc(6,"Desk"),b.Pb(),b.Qb(7,"th"),b.Jc(8,"Keterangan"),b.Pb(),b.Qb(9,"th"),b.Jc(10,"Total Bayar"),b.Pb(),b.Qb(11,"th"),b.Jc(12,"Petugas Kasir"),b.Pb(),b.Pb())}function K(e,t){if(1&e&&(b.Qb(0,"tr"),b.Qb(1,"td"),b.Jc(2),b.Pb(),b.Qb(3,"td"),b.Jc(4),b.Pb(),b.Qb(5,"td"),b.Jc(6),b.Pb(),b.Qb(7,"td"),b.Jc(8),b.Pb(),b.Qb(9,"td"),b.Jc(10),b.Pb(),b.Qb(11,"td"),b.Jc(12),b.Pb(),b.Pb()),2&e){var a=t.$implicit;b.xb(2),b.Kc(a.nosbm),b.xb(2),b.Kc(a.namapasien),b.xb(2),b.Kc(a.namapasien_klien),b.xb(2),b.Kc(a.keterangan),b.xb(2),b.Kc(a.totalpenerimaan),b.xb(2),b.Kc(a.namalengkap)}}function H(e,t){if(1&e&&(b.Qb(0,"tr"),b.Qb(1,"td",31),b.Qb(2,"div",32),b.Qb(3,"p-table",33),b.Hc(4,J,13,0,"ng-template",19),b.Hc(5,K,13,6,"ng-template",20),b.Pb(),b.Pb(),b.Pb(),b.Pb()),2&e){var a=t.$implicit;b.xb(3),b.ic("value",a.details)}}var R,A,L,B=function(){return[5,10,25,50]},T=[{path:"",component:(R=function(){function a(t,i,n,r,o,l,c,b,s){e(this,a),this.apiService=t,this.authService=i,this.confirmationService=n,this.messageService=r,this.cacheHelper=o,this.dateHelper=l,this.alertService=c,this.route=b,this.router=s,this.item={},this.listPetugasPenerima=[]}var i,n,r;return i=a,(n=[{key:"ngOnInit",value:function(){this.loginUser=this.authService.getDataLoginUser(),this.dateNow=new Date,this.item.tglAwal=new Date(c(this.dateNow).format("YYYY-MM-DD 00:00")),this.item.tglAkhir=new Date(c(this.dateNow).format("YYYY-MM-DD 23:59")),this.item.jmlRows=50,this.loadColumn(),this.getDataCombo()}},{key:"loadColumn",value:function(){this.column=[{field:"no",header:"No",width:"65px"},{field:"noclosing",header:"Noclosing",width:"180px"},{field:"tglclosing",header:"Tgl Setor",width:"140px"},{field:"carabayar",header:"Cara Bayar",width:"120px"},{field:"carasetor",header:"Cara Setor",width:"140px"},{field:"petugas",header:"Petugas Penerima",width:"200px"},{field:"totalsetor",header:"Total Setor",width:"180px",isCurrency:!0}]}},{key:"getDataCombo",value:function(){var e=this;this.apiService.get("bendaharapenerimaan/get-combo-bp").subscribe(function(t){e.listCaraBayar=t.carabayar,e.listKelompokTransaksi=t.jenistransaksi,e.listPetugasPenerima=t.petugaskasir,e.listCaraSetor=t.carasetor,e.LoadCache()})}},{key:"LoadCache",value:function(){var e=this.cacheHelper.get("cacheDaftarSetoranKasir");null!=e?(this.item.tglAwal=new Date(e[0]),this.item.tglAkhir=new Date(e[1]),this.LoadData()):this.LoadData()}},{key:"formatRupiah",value:function(e,t){return t+" "+parseFloat(e).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}},{key:"LoadData",value:function(){var e=this,t=c(this.item.tglAwal).format("YYYY-MM-DD HH:mm"),a=c(this.item.tglAkhir).format("YYYY-MM-DD HH:mm");this.cacheHelper.set("cacheDaftarSetoranKasir",{0:t,1:a});var i="";null!=this.item.CaraBayar&&(i=this.item.CaraBayar.id);var n="";null!=this.item.CaraSetor&&(n=this.item.CaraSetor.id);var r="";if(null!=this.item.selectedKasir){for(var o="",l=this.item.selectedKasir.length-1;l>=0;l--)o+=","+this.item.selectedKasir[l].id;r=o.slice(1,o.length)}this.apiService.get("bendaharapenerimaan/get-daftar-setoran-kasir?tglAwal="+t+"&tglAkhir="+a+"&idCaraBayar="+i+"&idCaraSetor="+n+"&KasirArr="+r).subscribe(function(t){for(var a=t.data,i=0;i<a.length;i++)a[i].no=i+1;e.dataTable=a})}},{key:"cari",value:function(){this.LoadData()}},{key:"onRowSelect",value:function(e){null!=e.data&&(this.selected=e.data)}},{key:"batalSetor2",value:function(e){this.selected=e,this.batalSetor()}},{key:"batalSetor",value:function(){var e=this;if(null!=this.selected){c(this.item.tglAwal).format("YYYY-MM-DD"),c(this.item.tglAwal).format("YYYY-MM-DD HH:mm"),c(this.item.tglAkhir).format("YYYY-MM-DD HH:mm");var t=0,a=[];if(null!=this.dataTable){for(var i=0;i<this.selected.details.length;i++){var n=this.selected.details[i];null!=n.norec&&(t+=parseFloat(n.totalpenerimaan),a.push({norec_sbm:n.norec,noclosing:this.selected.noclosing}))}if(0!=a.length){t=this.formatRupiah(t,"Rp.");var r={details:a};this.confirmationService.confirm({message:"Apakah Anda Yakin Akan Melakukan Pembatalan Setoran Kasir?",header:"Konfirmasi Pembatalan Setoran Kasir",icon:"pi pi-info-circle",accept:function(){e.confirmationService.close(),e.apiService.post("bendaharapenerimaan/save-batal-setoran-kasir",r).subscribe(function(t){e.LoadData()})},reject:function(t){e.alertService.warn("Info, Konfirmasi","Pembatalan Setoran Kasir Dibatalkan!"),e.confirmationService.close()}})}else this.alertService.error("Info","'Belum ada data yang di setor!")}else this.alertService.error("Info","Belum ada data yang di setor!")}else this.alertService.error("Info","Data Belum Dipilih!")}}])&&t(i.prototype,n),r&&t(i,r),a}(),R.\u0275fac=function(e){return new(e||R)(b.Jb(s.a),b.Jb(s.b),b.Jb(l.a),b.Jb(l.h),b.Jb(d.a),b.Jb(p.a),b.Jb(h.a),b.Jb(o.a),b.Jb(o.f))},R.\u0275cmp=b.Db({type:R,selectors:[["app-daftar-setoran-kasir"]],features:[b.wb([l.a,l.h])],decls:43,vars:31,consts:[["header","Confirmation","icon","fa fa-question-circle"],[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[1,"p-grid"],[1,"p-col-12","p-md-11"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","ngModelChange"],[1,"p-col-12","p-md-3"],["optionLabel","namalengkap",3,"options","ngModel","ngModelChange"],["placeholder","Cara Bayar","optionLabel","carabayar",3,"options","ngModel","filter","showClear","ngModelChange"],["placeholder","Cara Setor","optionLabel","carasetor",3,"options","ngModel","filter","showClear","ngModelChange"],[1,"p-col-12","p-md-1"],["type","text","pInputText","","placeholder","Jml Rows",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-12",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",3,"click"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single","dataKey","norec",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange","onRowSelect"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[2,"width","80px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],["pButton","","type","button","icon","fa fa-ban","pTooltip","Batal Setor","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain","p-mr-2",3,"pRowToggler","icon"],[3,"style",4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","10"],[1,"p-p-3"],["dataKey","noclosingidfk",3,"value"]],template:function(e,t){1&e&&(b.Lb(0,"p-confirmDialog",0),b.Qb(1,"div",1),b.Qb(2,"div",2),b.Qb(3,"h4"),b.Jc(4,"Daftar Setoran Kasir"),b.Pb(),b.Qb(5,"div",3),b.Qb(6,"div",4),b.Qb(7,"div",5),b.Qb(8,"div",4),b.Qb(9,"div",6),b.Qb(10,"label",7),b.Jc(11,"Periode Awal"),b.Pb(),b.Qb(12,"p-calendar",8),b.Yb("ngModelChange",function(e){return t.item.tglAwal=e}),b.Pb(),b.Pb(),b.Qb(13,"div",6),b.Qb(14,"label",7),b.Jc(15,"Periode Akhir"),b.Pb(),b.Qb(16,"p-calendar",8),b.Yb("ngModelChange",function(e){return t.item.tglAkhir=e}),b.Pb(),b.Pb(),b.Qb(17,"div",9),b.Qb(18,"label",7),b.Jc(19,"Petugas Penerima"),b.Pb(),b.Qb(20,"p-multiSelect",10),b.Yb("ngModelChange",function(e){return t.item.selectedKasir=e}),b.Pb(),b.Pb(),b.Qb(21,"div",6),b.Qb(22,"label",7),b.Jc(23,"Cara Bayar"),b.Pb(),b.Qb(24,"p-dropdown",11),b.Yb("ngModelChange",function(e){return t.item.CaraBayar=e}),b.Pb(),b.Pb(),b.Qb(25,"div",6),b.Qb(26,"label",7),b.Jc(27,"Cara Setor"),b.Pb(),b.Qb(28,"p-dropdown",12),b.Yb("ngModelChange",function(e){return t.item.CaraSetor=e}),b.Pb(),b.Pb(),b.Qb(29,"div",13),b.Qb(30,"label",7),b.Jc(31,"jml Rows"),b.Pb(),b.Qb(32,"input",14),b.Yb("ngModelChange",function(e){return t.item.jmlRows=e})("keyup.enter",function(){return t.cari()}),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(33,"div",13),b.Qb(34,"div",4),b.Qb(35,"div",15),b.Qb(36,"button",16),b.Yb("click",function(){return t.cari()}),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(37,"div",3),b.Qb(38,"p-table",17,18),b.Yb("selectionChange",function(e){return t.selected=e})("onRowSelect",function(e){return t.onRowSelect(e)}),b.Hc(40,S,5,1,"ng-template",19),b.Hc(41,Y,6,5,"ng-template",20),b.Hc(42,H,6,1,"ng-template",21),b.Pb(),b.Pb(),b.Pb(),b.Pb()),2&e&&(b.xb(12),b.ic("ngModel",t.item.tglAwal)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),b.xb(4),b.ic("ngModel",t.item.tglAkhir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),b.xb(4),b.ic("options",t.listPetugasPenerima)("ngModel",t.item.selectedKasir),b.xb(4),b.ic("options",t.listCaraBayar)("ngModel",t.item.CaraBayar)("filter",!0)("showClear",!0),b.xb(4),b.ic("options",t.listCaraSetor)("ngModel",t.item.CaraSetor)("filter",!0)("showClear",!0),b.xb(4),b.ic("ngModel",t.item.jmlRows),b.xb(6),b.ic("columns",t.column)("value",t.dataTable)("selection",t.selected)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",b.mc(30,B))("paginator",!0)("pageLinks",5))},directives:[u.a,m.a,f.g,f.h,g.a,v.a,f.a,w.a,P.b,y.a,Q.h,l.k,r.k,Q.g,Q.f,Q.e,C.a,Q.d,r.l],styles:[""]}),R)}],I=((A=function t(){e(this,t)}).\u0275mod=b.Hb({type:A}),A.\u0275inj=b.Gb({factory:function(e){return new(e||A)},imports:[[o.j.forChild(T)],o.j]}),A),N=n("PCNd"),j=((L=function t(){e(this,t)}).\u0275mod=b.Hb({type:L}),L.\u0275inj=b.Gb({factory:function(e){return new(e||L)},imports:[[r.b,I,N.a]]}),L)}}])}();