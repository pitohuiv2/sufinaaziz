(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{ZTb9:function(e,a,t){"use strict";t.r(a),t.d(a,"DaftarPasienPenunjangModule",function(){return T});var i=t("ofXK"),n=t("tyNb"),o=t("7zfz"),l=t("wd/R"),r=t("fXoL"),s=t("EJUL"),d=t("U+s4"),p=t("G0w9"),b=t("ujBT"),c=t("eO1q"),h=t("3Pt+"),u=t("7kUa"),g=t("jIHw"),m=t("xlun"),f=t("rEr+"),P=t("/RsI"),w=t("arFO");function v(e,a){if(1&e&&(r.Qb(0,"th",34),r.Jc(1),r.Lb(2,"p-sortIcon",35),r.Pb()),2&e){const e=a.$implicit;r.Fc("width: ",e.width,""),r.jc("pSortableColumn",e.field),r.xb(1),r.Lc(" ",e.header," "),r.xb(1),r.jc("field",e.field)}}function D(e,a){if(1&e&&(r.Qb(0,"tr"),r.Qb(1,"th",32),r.Jc(2,"Aksi"),r.Pb(),r.Hc(3,v,3,6,"th",33),r.Pb()),2&e){const e=a.$implicit;r.xb(3),r.ic("ngForOf",e)}}function k(e,a){if(1&e&&(r.Qb(0,"td"),r.Jc(1),r.Pb()),2&e){const e=a.$implicit,t=r.bc().$implicit;r.Fc("width: ",e.width,""),r.xb(1),r.Lc(" ",t[e.field]," ")}}function M(e,a){if(1&e){const e=r.Sb();r.Qb(0,"tr",36),r.Qb(1,"td",32),r.Qb(2,"button",37),r.Yb("click",function(){r.yc(e);const t=a.$implicit;return r.bc().RincianPenunjang2(t)}),r.Pb(),r.Qb(3,"button",38),r.Yb("click",function(){r.yc(e);const t=a.$implicit;return r.bc().pengkajianMedis2(t)}),r.Pb(),r.Qb(4,"button",39),r.Yb("click",function(){r.yc(e);const t=a.$implicit;return r.bc().ubahGolDarah2(t)}),r.Pb(),r.Pb(),r.Hc(5,k,2,4,"td",40),r.Pb()}if(2&e){const e=a.columns,t=a.rowIndex;r.ic("pSelectableRow",a.$implicit)("pSelectableRowIndex",t),r.xb(5),r.ic("ngForOf",e)}}function Q(e,a){if(1&e){const e=r.Sb();r.Qb(0,"p-button",41),r.Yb("click",function(){return r.yc(e),r.bc().cariFilter()}),r.Pb(),r.Qb(1,"p-button",42),r.Yb("click",function(){return r.yc(e),r.bc().clearFilter()}),r.Pb()}}const x=function(){return[5,10,25,50]},Y=function(){return{width:"400px",minWidth:"400px"}},C=function(){return{width:"50vw"}},R=[{path:"",component:(()=>{class e{constructor(e,a,t,i,n,o,l,r,s){this.apiService=e,this.authService=a,this.confirmationService=t,this.messageService=i,this.cacheHelper=n,this.dateHelper=o,this.alertService=l,this.route=r,this.router=s,this.listLayanan=[],this.item={pasien:{}}}ngOnInit(){this.dataLogin=this.authService.dataLoginUser,this.kelUser=this.dataLogin.kelompokUser.kelompokUser,this.dateNow=new Date,this.item.tglAwal=l(this.dateNow).format("YYYY-MM-DD 00:00"),this.item.tglAkhir=l(this.dateNow).format("YYYY-MM-DD 23:59"),this.item.jmlRows=50,this.column=[{field:"no",header:"No",width:"65px"},{field:"expertise",header:"Exp",width:"85px"},{field:"tglmasuk",header:"Tgl Masuk",width:"140px"},{field:"tglregistrasi",header:"Tgl Registrasi",width:"140px"},{field:"tglpulang",header:"Tgl Pulang",width:"140px"},{field:"noregistrasi",header:"Noregistrasi",width:"125px"},{field:"norm",header:"No RM",width:"100px"},{field:"namapasien",header:"Nama Pasien",width:"200px"},{field:"jeniskelamin",header:"Jenis Kelamin",width:"140px"},{field:"golongandarah",header:"Gol Darah",width:"120px"},{field:"umur",header:"Umur",width:"120px"},{field:"kelompokpasien",header:"Tipe Pasien",width:"140px"},{field:"namakelas",header:"Kelas",width:"120px"},{field:"pegawaiorder",header:"Petugas",width:"180px"},{field:"alamatlengkap",header:"Alamat",width:"200px"}],this.getDataCombo()}getDataCombo(){this.apiService.get("penunjang/get-data-combo-penunjang").subscribe(e=>{var a=e;this.listDepartemen=a.departemen,this.listKelompokPasien=a.kelompokpasien,this.listGolonganDarah=a.goldarah}),this.apiService.get("penunjang/get-data-ruang-tujuan?keluseridfk="+this.dataLogin.kelompokUser.id).subscribe(e=>{this.listRuanganTujuan=e.ruangan,this.LoadCache()})}LoadCache(){this.item.jmlRows=50;var e=this.cacheHelper.get("daftarPasienPenunjangCache");null!=e?(null!=e[2]&&(this.listKelompokPasien=[e[2]],this.item.dataKelPasien=e[2]),null!=e[5]&&(this.listDepartemen=[e[5]],this.item.dataDepartemen=e[5]),null!=e[4]&&(this.listRuangan=[e[4]],this.item.dataRuangan=e[4]),null!=e[3]&&(this.listRuanganTujuan=[e[3]],this.item.dataRuanganTujuan=e[3]),this.getData()):this.getData()}cari(){this.getData()}getData(){var e="",a=void 0;null!=this.item.dataDepartemen&&(e="&deptId="+this.item.dataDepartemen.id,a={id:this.item.dataDepartemen.id,departemen:this.item.dataDepartemen.departemen});var t="",i=void 0;null!=this.item.dataRuangan&&(t="&ruangId="+this.item.dataRuangan.id,i={id:this.item.dataRuangan.id,ruangan:this.item.dataRuangan.ruangan});var n="",o=void 0;null!=this.item.dataKelPasien&&(n="&kelId="+this.item.dataKelPasien.id,o={id:this.item.dataKelPasien.id,kelompokpasien:this.item.dataKelPasien.kelompokpasien});var r="",s=void 0;null!=this.item.dataRuanganTujuan&&(r="&ruangTujuan="+this.item.dataRuanganTujuan.id,s={id:this.item.dataRuanganTujuan.id,namaruangan:this.item.dataRuanganTujuan.namaruangan});var d="";null!=this.item.Noregistrasi&&(d="&noregistrasi="+this.item.Noregistrasi);var p="";null!=this.item.noRM&&(p="&nocm="+this.item.noRM);var b="";null!=this.item.namaPasien&&(b="&namapasien="+this.item.namaPasien);var c="";null!=this.item.jmlRows&&(c="&jmlRow="+this.item.jmlRow);var h=l(this.item.tglAwal).format("YYYY-MM-DD HH:mm:ss"),u=l(this.item.tglAkhir).format("YYYY-MM-DD HH:mm:ss"),g="&KelUserid="+this.dataLogin.kelompokUser.id,m="&KelUser="+this.dataLogin.kelompokUser.kelompokUser;this.cacheHelper.set("daftarPasienPenunjangCache",{0:h,1:u,2:o,3:s,4:i,5:a}),this.apiService.get("penunjang/get-daftar-pasien-penunjang?tglAwal="+h+"&tglAkhir="+u+d+p+b+e+t+r+n+g+m+c).subscribe(e=>{var a=e.data;for(let d=0;d<a.length;d++){const e=a[d];e.no=d+1;var t=l(new Date(e.tglregistrasi)).format("YYYY-MM-DD"),i=l(new Date(e.tgllahir)).format("YYYY-MM-DD"),n=this.dateHelper.CountAge(new Date(i),new Date(t));if(e.umur=e.umur=n.year+" thn "+n.month+" bln "+n.day+" hari",e.expertise=1==e.expertise?"\u2714":"\u2718",e.durasi="-",null!=e.tglexpertise){var o=l(new Date(e.tglmasuk)).format("YYYY-MM-DD HH:mm"),r=l(new Date(e.tglexpertise)).format("YYYY-MM-DD HH:mm"),s=this.dateHelper.CountDifferenceDayHourMinute(new Date(r),new Date(o));e.durasi=(new Date(e.tglexpertise),new Date(e.tglmasuk),s)}}this.dataTable=a})}onRowSelect(e){null!=e.data&&this.apiService.get("general/get-data-closing-pasien/"+this.selected.noregistrasi).subscribe(a=>{a.length>0?this.alertService.error("Peringatan!","Registrasi Ini Telah Diclosing"):this.selected=e.data})}ubahGolDarah(){null!=this.selected?this.pop_GolonganDarah=!0:this.alertService.warn("Peringatan!","Data Belum Dipilih!")}ubahGolDarah2(e){this.selected=e,this.pop_GolonganDarah=!0}batalGolDarah(){this.item.golDarah=void 0,this.pop_GolonganDarah=!1}simpanGolDarah(){null!=this.selected?null!=this.item.golDarah?this.apiService.post("penunjang/update-gol-darah",{norm:this.selected.norm,golongandarahidfk:this.item.golDarah.id}).subscribe(e=>{this.item.golDarah=void 0,this.pop_GolonganDarah=!1,this.getData()}):this.alertService.warn("Peringatan!","Golongan Darah Belum Dipilih!"):this.alertService.warn("Peringatan!","Data Belum Dipilih!")}pengkajianMedis2(e){this.apiService.get("registrasi/get-apd?noregistrasi="+e.noregistrasi+"&objectruanganlastfk="+e.ruid).subscribe(a=>{var t=a.data;null!=t&&this.router.navigate(["rekam-medis",e.norec,t.norec_apd])})}pengkajianMedis(){null!=this.selected?this.apiService.get("registrasi/get-apd?noregistrasi="+this.selected.noregistrasi+"&objectruanganlastfk="+this.selected.ruid).subscribe(e=>{var a=e.data;null!=a&&this.router.navigate(["rekam-medis",this.selected.norec,a.norec_apd])}):this.alertService.warn("Info!","Data Belum Dipilih")}RincianPenunjang2(e){this.router.navigate(["rincian-penunjang",e.norec_pd,e.norec_apd])}RincianPenunjang(){null!=this.selected?this.router.navigate(["rincian-penunjang",this.selected.norec_pd,this.selected.norec_apd]):this.alertService.warn("Info!","Data Belum Dipilih")}isiRuangan(e){this.listRuangan=e.value.ruangan}filter(){this.popFilter=!0}cariFilter(){this.popFilter=!1,this.getData()}clearFilter(){this.popFilter=!1,this.dateNow=new Date,this.item.tglAwal=l(this.dateNow).format("YYYY-MM-DD 00:00"),this.item.tglAkhir=l(this.dateNow).format("YYYY-MM-DD 23:59"),this.item.jmlRows=50,this.getData()}}return e.\u0275fac=function(a){return new(a||e)(r.Jb(s.a),r.Jb(s.b),r.Jb(o.a),r.Jb(o.h),r.Jb(d.a),r.Jb(p.a),r.Jb(b.a),r.Jb(n.a),r.Jb(n.f))},e.\u0275cmp=r.Db({type:e,selectors:[["app-daftar-pasien-penunjang"]],features:[r.wb([o.a])],decls:74,vars:58,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[1,"p-grid"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","disabled","ngModelChange"],[1,"p-col-12","p-md-1"],["type","text","pInputText","","placeholder"," Rows",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","No Rekam Medis",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Noregistrasi",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Nama Pasien",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-1",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",1,"p-mr-1",3,"click"],["pButton","","type","button","icon","pi pi-filter","pTooltip","Filter Detail",1,"p-button-success",3,"click"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],[1,"p-col-12","p-md-6"],["header","Golongan Darah",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"p-col-12","p-md-4"],["placeholder","Golongan Darah","optionLabel","golongandarah","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange"],[1,"p-col-12","p-md-4",2,"margin-top","15px"],["pButton","","type","submit","icon","fa fa-floppy-o","pTooltip","Simpan","label","Simpan",3,"click"],["pButton","","type","submit","icon","fa fa-ban","pTooltip","Batal","label","Batal",2,"background-color","red",3,"click"],["header","Filter",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"p-col-12","p-md-3"],["appendTo","body","placeholder","Instalasi","optionLabel","departemen",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["appendTo","body","placeholder","Ruangan","optionLabel","ruangan",3,"options","ngModel","filter","showClear","ngModelChange"],["placeholder","Tipe Pasien","optionLabel","kelompokpasien","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange"],["pTemplate","footer"],[2,"width","180px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],["pButton","","type","button","icon","fa fa-info-circle","pTooltip","Rincian","label","",1,"p-button-rounded","p-button-success","p-mr-2",3,"click"],["pButton","","type","button","icon","fa fa-stethoscope","pTooltip","Pengkajian Medis","label","",1,"p-button-rounded","p-mr-2",3,"click"],["pButton","","type","button","icon","fa fa-heart","pTooltip","Ubah Golongan Darah","label","",1,"p-button-rounded","p-button-warning","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"],["icon","pi pi-filter","label","Filter",1,"p-button-success",3,"click"],["icon","pi pi-close","label","Clear","styleClass","p-button-text",3,"click"]],template:function(e,a){1&e&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"h4"),r.Jc(3,"Pasien Penunjang List"),r.Pb(),r.Qb(4,"div",2),r.Qb(5,"div",3),r.Qb(6,"div",2),r.Qb(7,"div",3),r.Qb(8,"div",4),r.Qb(9,"label",5),r.Jc(10,"Periode Awal"),r.Pb(),r.Qb(11,"p-calendar",6),r.Yb("ngModelChange",function(e){return a.item.tglAwal=e}),r.Pb(),r.Pb(),r.Qb(12,"div",4),r.Qb(13,"label",5),r.Jc(14,"Periode Akhir"),r.Pb(),r.Qb(15,"p-calendar",6),r.Yb("ngModelChange",function(e){return a.item.tglAkhir=e}),r.Pb(),r.Pb(),r.Qb(16,"div",7),r.Qb(17,"label",5),r.Jc(18," Rows"),r.Pb(),r.Qb(19,"input",8),r.Yb("ngModelChange",function(e){return a.item.jmlRows=e})("keyup.enter",function(){return a.cari()}),r.Pb(),r.Pb(),r.Qb(20,"div",4),r.Qb(21,"label",5),r.Jc(22,"No Rekam Medis "),r.Pb(),r.Qb(23,"input",9),r.Yb("ngModelChange",function(e){return a.item.noRM=e})("keyup.enter",function(){return a.cari()}),r.Pb(),r.Pb(),r.Qb(24,"div",4),r.Qb(25,"label",5),r.Jc(26,"Noregistrasi"),r.Pb(),r.Qb(27,"input",10),r.Yb("ngModelChange",function(e){return a.item.Noregistrasi=e})("keyup.enter",function(){return a.cari()}),r.Pb(),r.Pb(),r.Qb(28,"div",4),r.Qb(29,"label",5),r.Jc(30,"Nama Pasien "),r.Pb(),r.Qb(31,"input",11),r.Yb("ngModelChange",function(e){return a.item.namaPasien=e})("keyup.enter",function(){return a.cari()}),r.Pb(),r.Pb(),r.Qb(32,"div",12),r.Qb(33,"button",13),r.Yb("click",function(){return a.cari()}),r.Pb(),r.Qb(34,"button",14),r.Yb("click",function(){return a.filter()}),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(35,"div",2),r.Qb(36,"p-table",15,16),r.Yb("selectionChange",function(e){return a.selected=e}),r.Hc(38,D,4,1,"ng-template",17),r.Hc(39,M,6,3,"ng-template",18),r.Pb(),r.Pb(),r.Qb(40,"div",2),r.Qb(41,"div",3),r.Qb(42,"div",19),r.Lb(43,"div",3),r.Pb(),r.Lb(44,"div",19),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(45,"p-dialog",20),r.Yb("visibleChange",function(e){return a.pop_GolonganDarah=e}),r.Qb(46,"div",0),r.Qb(47,"div",3),r.Qb(48,"div",2),r.Qb(49,"div",3),r.Qb(50,"div",21),r.Qb(51,"label",5),r.Jc(52,"Golongan Darah"),r.Pb(),r.Qb(53,"p-dropdown",22),r.Yb("ngModelChange",function(e){return a.item.golDarah=e}),r.Pb(),r.Pb(),r.Qb(54,"div",23),r.Qb(55,"button",24),r.Yb("click",function(){return a.simpanGolDarah()}),r.Pb(),r.Pb(),r.Qb(56,"div",23),r.Qb(57,"button",25),r.Yb("click",function(){return a.batalGolDarah()}),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(58,"p-dialog",26),r.Yb("visibleChange",function(e){return a.popFilter=e}),r.Qb(59,"div",0),r.Qb(60,"div",3),r.Qb(61,"div",27),r.Qb(62,"label",5),r.Jc(63,"Instalasi"),r.Pb(),r.Qb(64,"p-dropdown",28),r.Yb("ngModelChange",function(e){return a.item.dataDepartemen=e})("onChange",function(e){return a.isiRuangan(e)}),r.Pb(),r.Pb(),r.Qb(65,"div",27),r.Qb(66,"label",5),r.Jc(67,"Ruangan"),r.Pb(),r.Qb(68,"p-dropdown",29),r.Yb("ngModelChange",function(e){return a.item.dataRuangan=e}),r.Pb(),r.Pb(),r.Qb(69,"div",27),r.Qb(70,"label",5),r.Jc(71,"Tipe Pasien"),r.Pb(),r.Qb(72,"p-dropdown",30),r.Yb("ngModelChange",function(e){return a.item.dataKelPasien=e}),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Hc(73,Q,2,0,"ng-template",31),r.Pb()),2&e&&(r.xb(11),r.ic("ngModel",a.item.tglAwal)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0)("disabled",a.disableVer),r.xb(4),r.ic("ngModel",a.item.tglAkhir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0)("disabled",a.disableVer),r.xb(4),r.ic("ngModel",a.item.jmlRows),r.xb(4),r.ic("ngModel",a.item.noRM),r.xb(4),r.ic("ngModel",a.item.Noregistrasi),r.xb(4),r.ic("ngModel",a.item.namaPasien),r.xb(5),r.ic("columns",a.column)("value",a.dataTable)("selection",a.selected)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",r.mc(55,x))("paginator",!0)("pageLinks",5),r.xb(9),r.Ec(r.mc(56,Y)),r.ic("visible",a.pop_GolonganDarah)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!0),r.xb(8),r.ic("options",a.listGolonganDarah)("ngModel",a.item.golDarah)("filter",!0)("showClear",!0),r.xb(5),r.Ec(r.mc(57,C)),r.ic("visible",a.popFilter)("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!0),r.xb(6),r.ic("options",a.listDepartemen)("ngModel",a.item.dataDepartemen)("filter",!0)("showClear",!0),r.xb(4),r.ic("options",a.listRuangan)("ngModel",a.item.dataRuangan)("filter",!0)("showClear",!0),r.xb(4),r.ic("options",a.listKelompokPasien)("ngModel",a.item.dataKelPasien)("filter",!0)("showClear",!0))},directives:[c.a,h.g,h.h,h.a,u.a,g.b,m.a,f.h,o.k,P.a,w.a,i.k,f.g,f.f,f.e,g.a],styles:[""]}),e})()}];let y=(()=>{class e{}return e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({factory:function(a){return new(a||e)},imports:[[n.j.forChild(R)],n.j]}),e})();var j=t("PCNd");let T=(()=>{class e{}return e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({factory:function(a){return new(a||e)},imports:[[i.b,y,j.a]]}),e})()}}]);