(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"88ya":function(e,a,t){"use strict";t.r(a),t.d(a,"DaftarPenerimaanKasirModule",function(){return Y});var i=t("ofXK"),n=t("tyNb"),r=t("7zfz"),o=t("wd/R"),l=t("fXoL"),s=t("EJUL"),b=t("U+s4"),d=t("G0w9"),c=t("ujBT"),p=t("eO1q"),m=t("3Pt+"),h=t("arFO"),g=t("lVkt"),u=t("jIHw"),P=t("xlun"),f=t("rEr+"),M=t("7kUa"),Q=t("7CaW");function y(e,a){if(1&e&&(l.Qb(0,"th",35),l.Jc(1),l.Lb(2,"p-sortIcon",36),l.Pb()),2&e){const e=a.$implicit;l.Fc("width: ",e.width,""),l.jc("pSortableColumn",e.field),l.xb(1),l.Lc(" ",e.header," "),l.xb(1),l.jc("field",e.field)}}function w(e,a){if(1&e&&(l.Qb(0,"tr"),l.Hc(1,y,3,6,"th",34),l.Pb()),2&e){const e=a.$implicit;l.xb(1),l.ic("ngForOf",e)}}function x(e,a){if(1&e&&(l.Qb(0,"span"),l.Jc(1),l.Pb()),2&e){const e=l.bc().$implicit,a=l.bc().$implicit,t=l.bc();l.xb(1),l.Lc(" ",t.formatRupiah(a[e.field],"")," ")}}function C(e,a){if(1&e&&(l.Qb(0,"span"),l.Jc(1),l.Pb()),2&e){const e=l.bc().$implicit,a=l.bc().$implicit;l.xb(1),l.Lc(" ",a[e.field],"")}}function v(e,a){if(1&e&&(l.Qb(0,"td"),l.Hc(1,x,2,1,"span",39),l.Hc(2,C,2,1,"span",39),l.Pb()),2&e){const e=a.$implicit;l.Fc("width: ",e.width,""),l.xb(1),l.ic("ngIf",null!=e.isCurrency),l.xb(1),l.ic("ngIf",null==e.isCurrency)}}function k(e,a){if(1&e&&(l.Qb(0,"tr",37),l.Hc(1,v,3,5,"td",38),l.Pb()),2&e){const e=a.columns,t=a.rowIndex;l.ic("pSelectableRow",a.$implicit)("pSelectableRowIndex",t),l.xb(1),l.ic("ngForOf",e)}}const T=function(){return[5,10,25,50]},D=[{path:"",component:(()=>{class e{constructor(e,a,t,i,n,r,o,l,s){this.apiService=e,this.authService=a,this.confirmationService=t,this.messageService=i,this.cacheHelper=n,this.dateHelper=r,this.alertService=o,this.route=l,this.router=s,this.item={},this.listPetugasPenerima=[],this.isDeposit=!1,this.isCicilanPasien=!1}ngOnInit(){this.loginUser=this.authService.getDataLoginUser(),this.dateNow=new Date,this.item.tglAwal=new Date(o(this.dateNow).format("YYYY-MM-DD 00:00")),this.item.tglAkhir=new Date(o(this.dateNow).format("YYYY-MM-DD 23:59")),this.column=[{field:"no",header:"No",width:"65px"},{field:"tglsbm",header:"Tgl Bayar",width:"140px"},{field:"nosbm",header:"No Bayar",width:"140px"},{field:"nocm",header:"No RM",width:"125px"},{field:"noregistrasi",header:"Noregistrasi",width:"125px"},{field:"namapasien",header:"Nama Pasien",width:"250px"},{field:"namapasien_klien",header:"Deskripsi",width:"250px"},{field:"namaruangan",header:"Ruangan",width:"180px"},{field:"keterangan",header:"Jenis Pembayaran",width:"180px"},{field:"carabayar",header:"Cara Bayar",width:"140px"},{field:"totalpenerimaan",header:"Total Penerimaan",width:"160px",isCurrency:!0},{field:"namalengkap",header:"Petugas",width:"180px"},{field:"status",header:"Stat Setor",width:"140px"}],this.getDataCombo()}getDataCombo(){this.apiService.get("bendaharapenerimaan/get-combo-bp").subscribe(e=>{this.listCaraBayar=e.carabayar,this.listKelompokTransaksi=e.jenistransaksi,this.listPetugasPenerima=e.petugaskasir,this.LoadCache()})}LoadCache(){var e=this.cacheHelper.get("cacheDaftarPenerimaanPembayaran");null!=e?(this.item.tglAwal=new Date(e[0]),this.item.tglAkhir=new Date(e[1]),this.LoadData()):this.LoadData()}formatRupiah(e,a){return a+" "+parseFloat(e).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}LoadData(){var e=o(this.item.tglAwal).format("YYYY-MM-DD HH:mm"),a=o(this.item.tglAkhir).format("YYYY-MM-DD HH:mm");this.cacheHelper.set("cacheDaftarPenerimaanPembayaran",{0:e,1:a});var t="";null!=this.item.dataCaraBayar&&(t=this.item.dataCaraBayar.id);var i="";null!=this.item.dataKelTransaksi&&(i=this.item.dataKelTransaksi.id);var n=this.item.noBuktiBayar,r="";if(null!=this.item.selectedKasir){for(var l="",s=this.item.selectedKasir.length-1;s>=0;s--)l+=","+this.item.selectedKasir[s].id;r=l.slice(1,l.length)}this.apiService.get("kasir/data-penerimaan-pembayaran?dateStartTglSbm="+e+"&dateEndTglSbm="+a+"&idCaraBayar="+t+"&idKelTransaksi="+i+"&nosbm="+n+"&nocm="+this.item.noRM+"&noregistrasi="+this.item.Noregistrasi+"&nama="+this.item.namaPasien+"&desk="+this.item.Desk+"&KasirArr="+r).subscribe(e=>{var a=e,t=0,i=0,n=0,r=0,o=0,l=0;for(let s=0;s<a.length;s++){const e=a[s];e.no=s+1,null==e.nocm&&(e.nocm="-"),null==e.namapasien&&(e.namapasien="-"),null==e.noregistrasi&&(e.noregistrasi="-"),null==e.namaruangan&&(e.namaruangan="-"),null==e.namapasien_klien&&(e.namapasien_klien="-"),null==e.namapasien&&(e.namapasien="-"),e.status=null!=e.noclosing?"Setor":"Belum Setor","TUNAI"==e.carabayar&&(t=parseFloat(e.totalpenerimaan)+t),"KARTU DEBIT"==e.carabayar&&(i=parseFloat(e.totalpenerimaan)+i),"KARTU KREDIT"==e.carabayar&&(n=parseFloat(e.totalpenerimaan)+n),"TRANSFER BANK"==e.carabayar&&(o=parseFloat(e.totalpenerimaan)+o),"DONASI"==e.carabayar&&(r=parseFloat(e.totalpenerimaan)+r),"MIX"==e.carabayar&&(l=parseFloat(e.totalpenerimaan)+l)}this.item.totalCash=this.formatRupiah(t,"RP."),this.item.totalDebit=this.formatRupiah(i,"RP."),this.item.totalKredit=this.formatRupiah(n,"RP."),this.item.totalDonasi=this.formatRupiah(r,"RP."),this.item.totalMix=this.formatRupiah(l,"RP."),this.item.totalTrf=this.formatRupiah(o,"RP."),this.dataTable=a})}cari(){this.LoadData()}onRowSelect(e){this.apiService.get("general/get-data-closing-pasien/"+e.data.noregistrasi).subscribe(a=>{a.length>0?this.alertService.error("Peringatan!","Registrasi Ini Telah Diclosing Tidak Bisa Diubah!"):this.selected=e.data})}}return e.\u0275fac=function(a){return new(a||e)(l.Jb(s.a),l.Jb(s.b),l.Jb(r.a),l.Jb(r.h),l.Jb(b.a),l.Jb(d.a),l.Jb(c.a),l.Jb(n.a),l.Jb(n.f))},e.\u0275cmp=l.Db({type:e,selectors:[["app-daftar-penerimaan-kasir"]],features:[l.wb([r.a,r.h])],decls:90,vars:42,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[1,"p-grid"],[1,"p-col-12","p-md-11"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","ngModelChange"],["placeholder","Cara Bayar","optionLabel","carabayar",3,"options","ngModel","filter","showClear","ngModelChange"],[1,"p-col-12","p-md-3"],["placeholder","Jenis Transaksi (Non Layanan)","optionLabel","kelompoktransaksi",3,"options","ngModel","filter","showClear","ngModelChange"],["optionLabel","namalengkap",3,"options","ngModel","ngModelChange"],[1,"p-col-12","p-md-1"],[1,"p-col-12","p-md-12",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",3,"click"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],[1,"p-col-12","p-md-7"],["type","text","pInputText","","placeholder","No Bukti Bayar",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","No Rekam Medis",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Noregistrasi",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Nama Pasien",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-5"],["header","Rincian Peneriman",3,"toggleable"],[1,"p-col-12","p-md-6"],["for","input"],["type","text","pInputText","","placeholder","Total Penerimaan Tunai","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Total Penerimaan Debit","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Total Penerimaan Kredit","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Total Penerimaan Donasi","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Total Penerimaan Mix","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Total Penerimaan Transfer Bank","disabled","",3,"ngModel","ngModelChange"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],[3,"style",4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(e,a){1&e&&(l.Qb(0,"div",0),l.Qb(1,"div",1),l.Qb(2,"h4"),l.Jc(3,"Daftar Penerimaan Pembayaran"),l.Pb(),l.Qb(4,"div",2),l.Qb(5,"div",3),l.Qb(6,"div",4),l.Qb(7,"div",3),l.Qb(8,"div",5),l.Qb(9,"label",6),l.Jc(10,"Periode Awal"),l.Pb(),l.Qb(11,"p-calendar",7),l.Yb("ngModelChange",function(e){return a.item.tglAwal=e}),l.Pb(),l.Pb(),l.Qb(12,"div",5),l.Qb(13,"label",6),l.Jc(14,"Periode Akhir"),l.Pb(),l.Qb(15,"p-calendar",7),l.Yb("ngModelChange",function(e){return a.item.tglAkhir=e}),l.Pb(),l.Pb(),l.Qb(16,"div",5),l.Qb(17,"label",6),l.Jc(18,"Cara Bayar"),l.Pb(),l.Qb(19,"p-dropdown",8),l.Yb("ngModelChange",function(e){return a.item.dataCaraBayar=e}),l.Pb(),l.Pb(),l.Qb(20,"div",9),l.Qb(21,"label",6),l.Jc(22,"Jenis Transaksi"),l.Pb(),l.Qb(23,"p-dropdown",10),l.Yb("ngModelChange",function(e){return a.item.dataKelTransaksi=e}),l.Pb(),l.Pb(),l.Qb(24,"div",9),l.Qb(25,"label",6),l.Jc(26,"Petugas Penerima"),l.Pb(),l.Qb(27,"p-multiSelect",11),l.Yb("ngModelChange",function(e){return a.item.selectedKasir=e}),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(28,"div",12),l.Qb(29,"div",3),l.Qb(30,"div",13),l.Qb(31,"button",14),l.Yb("click",function(){return a.cari()}),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(32,"div",2),l.Qb(33,"p-table",15,16),l.Yb("selectionChange",function(e){return a.selected=e}),l.Hc(35,w,2,1,"ng-template",17),l.Hc(36,k,2,3,"ng-template",18),l.Pb(),l.Pb(),l.Qb(37,"div",2),l.Qb(38,"div",3),l.Qb(39,"div",19),l.Qb(40,"div",3),l.Qb(41,"div",2),l.Qb(42,"div",3),l.Qb(43,"div",5),l.Qb(44,"label",6),l.Jc(45,"No Bayar "),l.Pb(),l.Qb(46,"input",20),l.Yb("ngModelChange",function(e){return a.item.noBuktiBayar=e})("keyup.enter",function(){return a.cari()}),l.Pb(),l.Pb(),l.Qb(47,"div",5),l.Qb(48,"label",6),l.Jc(49,"No Rekam Medis "),l.Pb(),l.Qb(50,"input",21),l.Yb("ngModelChange",function(e){return a.item.noRM=e})("keyup.enter",function(){return a.cari()}),l.Pb(),l.Pb(),l.Qb(51,"div",5),l.Qb(52,"label",6),l.Jc(53,"Noregistrasi"),l.Pb(),l.Qb(54,"input",22),l.Yb("ngModelChange",function(e){return a.item.Noregistrasi=e})("keyup.enter",function(){return a.cari()}),l.Pb(),l.Pb(),l.Qb(55,"div",9),l.Qb(56,"label",6),l.Jc(57,"Nama Pasien "),l.Pb(),l.Qb(58,"input",23),l.Yb("ngModelChange",function(e){return a.item.namaPasien=e})("keyup.enter",function(){return a.cari()}),l.Pb(),l.Pb(),l.Qb(59,"div",9),l.Qb(60,"label",6),l.Jc(61,"Deskripsi"),l.Pb(),l.Qb(62,"input",23),l.Yb("ngModelChange",function(e){return a.item.Desk=e})("keyup.enter",function(){return a.cari()}),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(63,"div",24),l.Qb(64,"p-panel",25),l.Qb(65,"div",3),l.Qb(66,"div",26),l.Qb(67,"label",27),l.Jc(68,"Total Penerimaan Tunai"),l.Pb(),l.Qb(69,"input",28),l.Yb("ngModelChange",function(e){return a.item.totalCash=e}),l.Pb(),l.Pb(),l.Qb(70,"div",26),l.Qb(71,"label",27),l.Jc(72,"Total Penerimaan Debit"),l.Pb(),l.Qb(73,"input",29),l.Yb("ngModelChange",function(e){return a.item.totalDebit=e}),l.Pb(),l.Pb(),l.Qb(74,"div",26),l.Qb(75,"label",27),l.Jc(76,"Total Penerimaan Kredit"),l.Pb(),l.Qb(77,"input",30),l.Yb("ngModelChange",function(e){return a.item.totalKredit=e}),l.Pb(),l.Pb(),l.Qb(78,"div",26),l.Qb(79,"label",27),l.Jc(80,"Total Penerimaan Donasi"),l.Pb(),l.Qb(81,"input",31),l.Yb("ngModelChange",function(e){return a.item.totalDonasi=e}),l.Pb(),l.Pb(),l.Qb(82,"div",26),l.Qb(83,"label",27),l.Jc(84,"Total Penerimaan Mix"),l.Pb(),l.Qb(85,"input",32),l.Yb("ngModelChange",function(e){return a.item.totalMix=e}),l.Pb(),l.Pb(),l.Qb(86,"div",26),l.Qb(87,"label",27),l.Jc(88,"Total Penerimaan Transfer Bank"),l.Pb(),l.Qb(89,"input",33),l.Yb("ngModelChange",function(e){return a.item.totalTrf=e}),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb()),2&e&&(l.xb(11),l.ic("ngModel",a.item.tglAwal)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),l.xb(4),l.ic("ngModel",a.item.tglAkhir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),l.xb(4),l.ic("options",a.listCaraBayar)("ngModel",a.item.dataCaraBayar)("filter",!0)("showClear",!0),l.xb(4),l.ic("options",a.listKelompokTransaksi)("ngModel",a.item.dataKelTransaksi)("filter",!0)("showClear",!0),l.xb(4),l.ic("options",a.listPetugasPenerima)("ngModel",a.item.selectedKasir),l.xb(6),l.ic("columns",a.column)("value",a.dataTable)("selection",a.selected)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",l.mc(41,T))("paginator",!0)("pageLinks",5),l.xb(13),l.ic("ngModel",a.item.noBuktiBayar),l.xb(4),l.ic("ngModel",a.item.noRM),l.xb(4),l.ic("ngModel",a.item.Noregistrasi),l.xb(4),l.ic("ngModel",a.item.namaPasien),l.xb(4),l.ic("ngModel",a.item.Desk),l.xb(2),l.ic("toggleable",!1),l.xb(5),l.ic("ngModel",a.item.totalCash),l.xb(4),l.ic("ngModel",a.item.totalDebit),l.xb(4),l.ic("ngModel",a.item.totalKredit),l.xb(4),l.ic("ngModel",a.item.totalDonasi),l.xb(4),l.ic("ngModel",a.item.totalMix),l.xb(4),l.ic("ngModel",a.item.totalTrf))},directives:[p.a,m.g,m.h,h.a,g.a,u.b,P.a,f.h,r.k,m.a,M.a,Q.a,i.k,f.g,f.f,f.e,i.l],styles:[""]}),e})()}];let R=(()=>{class e{}return e.\u0275mod=l.Hb({type:e}),e.\u0275inj=l.Gb({factory:function(a){return new(a||e)},imports:[[n.j.forChild(D)],n.j]}),e})();var J=t("PCNd");let Y=(()=>{class e{}return e.\u0275mod=l.Hb({type:e}),e.\u0275inj=l.Gb({factory:function(a){return new(a||e)},imports:[[i.b,R,J.a]]}),e})()}}]);