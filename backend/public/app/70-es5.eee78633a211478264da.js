!function(){function a(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function t(a,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{"mE+e":function(e,i,r){"use strict";r.r(i),r.d(i,"LaporanPenerimaanKasirModule",function(){return H});var n=r("ofXK"),o=r("tyNb"),l=r("7zfz"),b=r("wd/R"),s=r("fXoL"),d=r("EJUL"),c=r("U+s4"),p=r("G0w9"),h=r("ujBT"),m=r("Nf9I"),u=r("eO1q"),g=r("3Pt+"),f=r("arFO"),P=r("lVkt"),w=r("jIHw"),x=r("xlun"),y=r("rEr+"),k=r("Q4Mo");function v(a,t){if(1&a){var e=s.Sb();s.Qb(0,"div",22),s.Qb(1,"button",23),s.Yb("click",function(){return s.yc(e),s.bc().cetakLaporan()}),s.Pb(),s.Pb()}}function Q(a,t){1&a&&(s.Qb(0,"tr"),s.Qb(1,"th",24),s.Jc(2,"No"),s.Pb(),s.Qb(3,"th",25),s.Jc(4,"Deskripsi"),s.Pb(),s.Qb(5,"th",26),s.Jc(6,"Total"),s.Pb(),s.Pb(),s.Qb(7,"tr"),s.Qb(8,"th",27),s.Jc(9,"Banyak"),s.Pb(),s.Qb(10,"th",27),s.Jc(11,"Hutang Penjamin"),s.Pb(),s.Qb(12,"th",27),s.Jc(13,"Tanggungan RS"),s.Pb(),s.Qb(14,"th",27),s.Jc(15,"Harus Dibayar"),s.Pb(),s.Qb(16,"th",28),s.Jc(17,"Pembebasan"),s.Pb(),s.Qb(18,"th",28),s.Jc(19,"Administrasi"),s.Pb(),s.Qb(20,"th",28),s.Jc(21,"Jml Bayar"),s.Pb(),s.Qb(22,"th",28),s.Jc(23,"Sisa Tagihan"),s.Pb(),s.Pb())}function J(a,t){if(1&a&&(s.Qb(0,"td",33),s.Qb(1,"span",34),s.Jc(2),s.Pb(),s.Pb()),2&a){var e=s.bc().$implicit;s.xb(2),s.Kc(e.ruangan)}}function M(a,t){if(1&a&&(s.Qb(0,"tr",29),s.Hc(1,J,3,1,"td",30),s.Pb(),s.Qb(2,"tr"),s.Qb(3,"td",31),s.Jc(4),s.Pb(),s.Qb(5,"td",32),s.Jc(6),s.Pb(),s.Qb(7,"td",27),s.Jc(8),s.Pb(),s.Qb(9,"td",27),s.Jc(10),s.Pb(),s.Qb(11,"td",27),s.Jc(12),s.Pb(),s.Qb(13,"td",27),s.Jc(14),s.Pb(),s.Qb(15,"td",27),s.Jc(16),s.Pb(),s.Qb(17,"td",27),s.Jc(18),s.Pb(),s.Qb(19,"td",27),s.Jc(20),s.Pb(),s.Qb(21,"td",27),s.Jc(22),s.Pb(),s.Pb()),2&a){var e=t.$implicit,i=t.rowIndex,r=s.bc();s.xb(1),s.ic("ngIf",r.rowGroupMetadata[e.ruangan].index===i),s.xb(3),s.Kc(e.no),s.xb(2),s.Kc(e.tipepasien),s.xb(2),s.Kc(r.formatRupiah(e.banyak,"")),s.xb(2),s.Lc("",r.formatRupiah(e.totalprekanan,"")," "),s.xb(2),s.Lc("",r.formatRupiah(e.tanggunganrs,"")," "),s.xb(2),s.Lc(" ",r.formatRupiah(e.totalharusdibayar,""),""),s.xb(2),s.Kc(r.formatRupiah(e.pembebasan,"")),s.xb(2),s.Lc("",r.formatRupiah(e.administrasi,"")," "),s.xb(2),s.Lc("",r.formatRupiah(e.totaldibayar,"")," "),s.xb(2),s.Kc(r.formatRupiah(e.sisa,""))}}function C(a,t){if(1&a&&(s.Qb(0,"tr"),s.Qb(1,"td",35),s.Jc(2,"Grand Total"),s.Pb(),s.Qb(3,"td",36),s.Jc(4),s.Pb(),s.Qb(5,"td",37),s.Jc(6),s.Pb(),s.Qb(7,"td",38),s.Jc(8),s.Pb(),s.Qb(9,"td",36),s.Jc(10),s.Pb(),s.Qb(11,"td",39),s.Jc(12),s.Pb(),s.Qb(13,"td",40),s.Jc(14),s.Pb(),s.Qb(15,"td",41),s.Jc(16),s.Pb(),s.Qb(17,"td",42),s.Jc(18),s.Pb(),s.Pb()),2&a){var e=s.bc();s.xb(4),s.Lc(" ",e.formatRupiah(e.item.banyak,""),""),s.xb(2),s.Lc(" ",e.formatRupiah(e.item.totalprekanan,""),""),s.xb(2),s.Lc(" ",e.formatRupiah(e.item.tanggunganrs,""),""),s.xb(2),s.Lc(" ",e.formatRupiah(e.item.totalharusdibayar,""),""),s.xb(2),s.Lc(" ",e.formatRupiah(e.item.pembebasan,""),""),s.xb(2),s.Lc(" ",e.formatRupiah(e.item.administrasi,""),""),s.xb(2),s.Lc(" ",e.formatRupiah(e.item.totaldibayar,""),""),s.xb(2),s.Lc(" ",e.formatRupiah(e.item.sisa,""),"")}}var T,D,Y,L=[{path:"",component:(T=function(){function e(t,i,r,n,o,l,b,s,d){a(this,e),this.apiService=t,this.authService=i,this.confirmationService=r,this.messageService=n,this.cacheHelper=o,this.dateHelper=l,this.alertService=b,this.route=s,this.router=d,this.item={},this.listPetugasPenerima=[]}var i,r,n;return i=e,(r=[{key:"ngOnInit",value:function(){this.item.tglAwal=new Date(b(this.dateNow).format("YYYY-MM-DD 00:00")),this.item.tglAkhir=new Date(b(this.dateNow).format("YYYY-MM-DD 23:59")),this.item.banyak=0,this.item.totalprekanan=0,this.item.tanggunganrs=0,this.item.totalharusdibayar=0,this.item.pembebasan=0,this.item.administrasi=0,this.item.totaldibayar=0,this.item.sisa=0,this.column=[{field:"no",header:"No",width:"65px"},{field:"tglsbm",header:"Tgl Bayar",width:"140px"},{field:"nosbm",header:"No Bayar",width:"140px"},{field:"nocm",header:"No RM",width:"125px"},{field:"noregistrasi",header:"Noregistrasi",width:"125px"},{field:"namapasien",header:"Nama Pasien",width:"250px"},{field:"namapasien_klien",header:"Deskripsi",width:"250px"},{field:"namaruangan",header:"Ruangan",width:"180px"},{field:"keterangan",header:"Jenis Pembayaran",width:"180px"},{field:"carabayar",header:"Cara Bayar",width:"140px"},{field:"totalpenerimaan",header:"Total Penerimaan",width:"160px",isCurrency:!0},{field:"namalengkap",header:"Petugas",width:"180px"},{field:"status",header:"Stat Setor",width:"140px"}],this.getDataCombo()}},{key:"getDataCombo",value:function(){var a=this;this.apiService.get("kasir/get-data-combo-lapkasir").subscribe(function(t){a.listCaraBayar=t.carabayar,a.listKelompokTransaksi=t.jenistransaksi,a.listPetugasPenerima=t.petugaskasir,a.LoadCache()})}},{key:"LoadCache",value:function(){var a=this.cacheHelper.get("cacheDaftarPenerimaanPembayaran");null!=a?(this.item.tglAwal=new Date(a[0]),this.item.tglAkhir=new Date(a[1]),this.LoadData()):this.LoadData()}},{key:"formatRupiah",value:function(a,t){return t+" "+parseFloat(a).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}},{key:"LoadData",value:function(){var a=this,t=b(this.item.tglAwal).format("YYYY-MM-DD HH:mm"),e=b(this.item.tglAkhir).format("YYYY-MM-DD HH:mm");this.cacheHelper.set("cacheDaftarPenerimaanPembayaran",{0:t,1:e});var i="";null!=this.item.dataCaraBayar&&(i=this.item.dataCaraBayar.id);var r="";null!=this.item.dataKelTransaksi&&(r=this.item.dataKelTransaksi.id);var n="";if(null!=this.item.selectedKasir){for(var o="",l=this.item.selectedKasir.length-1;l>=0;l--)o+=","+this.item.selectedKasir[l].id;n=o.slice(1,o.length)}this.apiService.get("kasir/get-data-laporan-penerimaan-kasir?dateStartTglSbm="+t+"&dateEndTglSbm="+e+"&idCaraBayar="+i+"&idKelTransaksi="+r+"&KasirArr="+n).subscribe(function(t){for(var e=t,i=0,r=0,n=0,o=0,l=0,b=0,s=0,d=0,c=0;c<e.length;c++){var p=e[c];p.no=c+1,i+=parseFloat(p.banyak),r+=parseFloat(p.totalprekanan),n+=parseFloat(p.tanggunganrs),o+=parseFloat(p.totalharusdibayar),l+=parseFloat(p.pembebasan),b+=parseFloat(p.administrasi),s+=parseFloat(p.totaldibayar),d+=parseFloat(p.sisa)}a.dataTable=e,a.item.banyak=i,a.item.totalprekanan=r,a.item.tanggunganrs=n,a.item.totalharusdibayar=o,a.item.pembebasan=l,a.item.administrasi=b,a.item.totaldibayar=s,a.item.sisa=d,a.updateRowGroupMetaData()})}},{key:"onSort",value:function(){this.updateRowGroupMetaData()}},{key:"updateRowGroupMetaData",value:function(){if(this.rowGroupMetadata={},this.dataTable)for(var a=0;a<this.dataTable.length;a++){var t=this.dataTable[a].ruangan;0==a?this.rowGroupMetadata[t]={index:0,size:1}:t===this.dataTable[a-1].brand?this.rowGroupMetadata[t].size++:this.rowGroupMetadata[t]={index:a,size:1}}}},{key:"cari",value:function(){this.LoadData()}},{key:"cetakLaporan",value:function(){var a=b(this.item.tglAwal).format("YYYY-MM-DD HH:mm"),t=b(this.item.tglAkhir).format("YYYY-MM-DD HH:mm"),e="",i="";null!=this.item.dataCaraBayar&&(e=this.item.dataCaraBayar.id,i=this.item.dataCaraBayar.carabayar);var r="";if(null!=this.item.selectedKasir){for(var n="",o=this.item.selectedKasir.length-1;o>=0;o--)n+=","+this.item.selectedKasir[o].id;r=n.slice(1,n.length)}this.apiService.getUrlCetak("http://127.0.0.1:3885/desk/routes?cetak-laporan-penerimaan-kasir=1&idkasir="+r+"&tglawal="+a+"&tglakhir="+t+"&idcarabayar="+e+"&idruangan=&carabayar="+i+"&ruangan=&view=true",function(a){})}}])&&t(i.prototype,r),n&&t(i,n),e}(),T.\u0275fac=function(a){return new(a||T)(s.Jb(d.a),s.Jb(d.b),s.Jb(l.a),s.Jb(l.h),s.Jb(c.a),s.Jb(p.a),s.Jb(h.a),s.Jb(o.a),s.Jb(o.f))},T.\u0275cmp=s.Db({type:T,selectors:[["app-laporan-penerimaan-kasir"]],features:[s.wb([l.a,l.h])],decls:40,vars:23,consts:[["header","Confirmation","icon","fa fa-question-circle"],[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[1,"p-grid"],[1,"p-col-12","p-md-11"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","ngModelChange"],["placeholder","Cara Bayar","optionLabel","carabayar",3,"options","ngModel","filter","showClear","ngModelChange"],[1,"p-col-12","p-md-3"],["placeholder","Jenis Transaksi (Non Layanan)","optionLabel","kelompoktransaksi",3,"options","ngModel","filter","showClear","ngModelChange"],["optionLabel","namalengkap",3,"options","ngModel","ngModelChange"],[1,"p-col-12","p-md-1"],[1,"p-col-12","p-md-12",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",3,"click"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","rowHover","onSort"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","footer"],[1,"p-d-flex"],["type","button","pButton","","pRipple","","icon","pi pi-print","pTooltip","Cetak Laporan ","tooltipPosition","bottom",1,"p-button-info","p-mr-2",3,"click"],["rowspan","2",2,"text-align","left","width","60px"],["rowspan","2",2,"text-align","left","width","157px"],["colspan","8",2,"text-align","center","width","800px"],[2,"text-align","right","width","180px"],[2,"text-align","right","width","200px"],[1,"ui-widget-header"],["colspan","10",4,"ngIf"],[2,"text-align","left","width","55px"],[2,"text-align","left","width","135px"],["colspan","10"],[2,"text-align","left","font-weight","bold"],[2,"text-align","left","width","300px"],[2,"text-align","center","width","130px"],[2,"text-align","center","width","184px"],[2,"text-align","center","width","90px"],[2,"text-align","center","width","187px"],[2,"text-align","center","width","80px"],[2,"text-align","center","width","145px"],[2,"text-align","center","width","170px"]],template:function(a,t){1&a&&(s.Lb(0,"p-confirmDialog",0),s.Qb(1,"div",1),s.Qb(2,"div",2),s.Qb(3,"h4"),s.Jc(4,"Laporan Penerimaan Kasir"),s.Pb(),s.Qb(5,"div",3),s.Qb(6,"div",4),s.Qb(7,"div",5),s.Qb(8,"div",4),s.Qb(9,"div",6),s.Qb(10,"label",7),s.Jc(11,"Periode Awal"),s.Pb(),s.Qb(12,"p-calendar",8),s.Yb("ngModelChange",function(a){return t.item.tglAwal=a}),s.Pb(),s.Pb(),s.Qb(13,"div",6),s.Qb(14,"label",7),s.Jc(15,"Periode Akhir"),s.Pb(),s.Qb(16,"p-calendar",8),s.Yb("ngModelChange",function(a){return t.item.tglAkhir=a}),s.Pb(),s.Pb(),s.Qb(17,"div",6),s.Qb(18,"label",7),s.Jc(19,"Cara Bayar"),s.Pb(),s.Qb(20,"p-dropdown",9),s.Yb("ngModelChange",function(a){return t.item.dataCaraBayar=a}),s.Pb(),s.Pb(),s.Qb(21,"div",10),s.Qb(22,"label",7),s.Jc(23,"Jenis Transaksi"),s.Pb(),s.Qb(24,"p-dropdown",11),s.Yb("ngModelChange",function(a){return t.item.dataKelTransaksi=a}),s.Pb(),s.Pb(),s.Qb(25,"div",10),s.Qb(26,"label",7),s.Jc(27,"Petugas Penerima"),s.Pb(),s.Qb(28,"p-multiSelect",12),s.Yb("ngModelChange",function(a){return t.item.selectedKasir=a}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(29,"div",13),s.Qb(30,"div",4),s.Qb(31,"div",14),s.Qb(32,"button",15),s.Yb("click",function(){return t.cari()}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(33,"div",3),s.Qb(34,"p-table",16,17),s.Yb("onSort",function(){return t.onSort()}),s.Hc(36,v,2,0,"ng-template",18),s.Hc(37,Q,24,0,"ng-template",19),s.Hc(38,M,23,11,"ng-template",20),s.Hc(39,C,19,8,"ng-template",21),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&a&&(s.xb(12),s.ic("ngModel",t.item.tglAwal)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),s.xb(4),s.ic("ngModel",t.item.tglAkhir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),s.xb(4),s.ic("options",t.listCaraBayar)("ngModel",t.item.dataCaraBayar)("filter",!0)("showClear",!0),s.xb(4),s.ic("options",t.listKelompokTransaksi)("ngModel",t.item.dataKelTransaksi)("filter",!0)("showClear",!0),s.xb(4),s.ic("options",t.listPetugasPenerima)("ngModel",t.item.selectedKasir),s.xb(6),s.ic("columns",t.column)("value",t.dataTable)("rowHover",!0))},directives:[m.a,u.a,g.g,g.h,f.a,P.a,w.b,x.a,y.h,l.k,k.a,n.l],styles:[""]}),T)}],R=((D=function t(){a(this,t)}).\u0275mod=s.Hb({type:D}),D.\u0275inj=s.Gb({factory:function(a){return new(a||D)},imports:[[o.j.forChild(L)],o.j]}),D),K=r("PCNd"),H=((Y=function t(){a(this,t)}).\u0275mod=s.Hb({type:Y}),Y.\u0275inj=s.Gb({factory:function(a){return new(a||Y)},imports:[[n.b,R,K.a]]}),Y)}}])}();