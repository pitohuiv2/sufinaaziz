(window.webpackJsonp=window.webpackJsonp||[]).push([[118],{gmmh:function(e,a,i){"use strict";i.r(a),i.d(a,"RegistrasiRuanganModule",function(){return K});var t=i("ofXK"),n=i("tyNb"),s=i("7zfz"),r=i("wd/R"),o=i("fXoL"),l=i("EJUL"),d=i("U+s4"),p=i("G0w9"),c=i("ujBT"),h=i("7CaW"),m=i("SSqW"),u=i("eO1q"),b=i("3Pt+"),g=i("Ji6n"),k=i("arFO"),f=i("V5BG"),P=i("jIHw"),v=i("xlun"),w=i("/RsI"),R=i("Ks7X"),j=i("jeV5"),y=i("7kUa"),D=i("Wq6t");function M(e,a){1&e&&(o.Qb(0,"div",2),o.Qb(1,"div",7),o.Lb(2,"p-skeleton",27),o.Pb(),o.Qb(3,"div",7),o.Lb(4,"p-skeleton",27),o.Pb(),o.Qb(5,"div",7),o.Lb(6,"p-skeleton",27),o.Pb(),o.Qb(7,"div",7),o.Lb(8,"p-skeleton",27),o.Pb(),o.Qb(9,"div",7),o.Lb(10,"p-skeleton",27),o.Pb(),o.Qb(11,"div",7),o.Lb(12,"p-skeleton",27),o.Pb(),o.Qb(13,"div",7),o.Lb(14,"p-skeleton",27),o.Pb(),o.Qb(15,"div",7),o.Lb(16,"p-skeleton",27),o.Pb(),o.Qb(17,"div",7),o.Lb(18,"p-skeleton",27),o.Pb(),o.Qb(19,"div",7),o.Lb(20,"p-skeleton",27),o.Pb(),o.Pb())}function S(e,a){if(1&e){const e=o.Sb();o.Qb(0,"div",2),o.Qb(1,"div",7),o.Qb(2,"div",2),o.Qb(3,"div",7),o.Qb(4,"label",8),o.Jc(5,"No Rekam Medis "),o.Pb(),o.Qb(6,"input",28),o.Yb("ngModelChange",function(a){return o.yc(e),o.bc().item.pasien.nocm=a}),o.Pb(),o.Pb(),o.Qb(7,"div",7),o.Qb(8,"label",8),o.Jc(9,"Nama Pasien "),o.Pb(),o.Qb(10,"input",29),o.Yb("ngModelChange",function(a){return o.yc(e),o.bc().item.pasien.namapasien=a}),o.Pb(),o.Pb(),o.Qb(11,"div",7),o.Qb(12,"label",8),o.Jc(13,"Jenis Kelamin "),o.Pb(),o.Qb(14,"input",29),o.Yb("ngModelChange",function(a){return o.yc(e),o.bc().item.pasien.jeniskelamin=a}),o.Pb(),o.Pb(),o.Qb(15,"div",7),o.Qb(16,"label",8),o.Jc(17,"Tgl Lahir "),o.Pb(),o.Qb(18,"input",30),o.Yb("ngModelChange",function(a){return o.yc(e),o.bc().item.pasien.tgllahir=a}),o.Pb(),o.Pb(),o.Qb(19,"div",7),o.Qb(20,"label",8),o.Jc(21,"Umur "),o.Pb(),o.Qb(22,"input",31),o.Yb("ngModelChange",function(a){return o.yc(e),o.bc().item.pasien.umur=a}),o.Pb(),o.Pb(),o.Qb(23,"div",7),o.Qb(24,"label",8),o.Jc(25,"Pendidikan "),o.Pb(),o.Qb(26,"input",32),o.Yb("ngModelChange",function(a){return o.yc(e),o.bc().item.pasien.pendidikan=a}),o.Pb(),o.Pb(),o.Qb(27,"div",7),o.Qb(28,"label",8),o.Jc(29,"Alamat "),o.Pb(),o.Qb(30,"input",33),o.Yb("ngModelChange",function(a){return o.yc(e),o.bc().item.pasien.alamatlengkap=a}),o.Pb(),o.Pb(),o.Qb(31,"div",7),o.Qb(32,"label",8),o.Jc(33,"Pekerjaan "),o.Pb(),o.Qb(34,"input",34),o.Yb("ngModelChange",function(a){return o.yc(e),o.bc().item.pasien.pekerjaan=a}),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb()}if(2&e){const e=o.bc();o.xb(6),o.ic("ngModel",e.item.pasien.nocm),o.xb(4),o.ic("ngModel",e.item.pasien.namapasien),o.xb(4),o.ic("ngModel",e.item.pasien.jeniskelamin),o.xb(4),o.ic("ngModel",e.item.pasien.tgllahir),o.xb(4),o.ic("ngModel",e.item.pasien.umur),o.xb(4),o.ic("ngModel",e.item.pasien.pendidikan),o.xb(4),o.ic("ngModel",e.item.pasien.alamatlengkap),o.xb(4),o.ic("ngModel",e.item.pasien.pekerjaan)}}function C(e,a){if(1&e){const e=o.Sb();o.Qb(0,"div",3),o.Qb(1,"p-checkbox",35),o.Yb("ngModelChange",function(a){return o.yc(e),o.bc().model.rawatGabung=a}),o.Pb(),o.Qb(2,"label",36),o.Jc(3," Rawat Gabung"),o.Pb(),o.Pb()}if(2&e){const e=o.bc();o.xb(1),o.ic("ngModel",e.model.rawatGabung)}}function Q(e,a){if(1&e){const e=o.Sb();o.Qb(0,"div",7),o.Qb(1,"label",8),o.Jc(2,"Kelas "),o.Pb(),o.Qb(3,"p-dropdown",37),o.Yb("ngModelChange",function(a){return o.yc(e),o.bc().item.kelas=a})("onChange",function(a){return o.yc(e),o.bc().changeKelas(a)}),o.Pb(),o.Pb()}if(2&e){const e=o.bc();o.xb(3),o.ic("options",e.listKelas)("ngModel",e.item.kelas)("filter",!0)("showClear",!0)}}function I(e,a){if(1&e){const e=o.Sb();o.Qb(0,"div",7),o.Qb(1,"label",8),o.Jc(2,"Kamar "),o.Pb(),o.Qb(3,"p-dropdown",38),o.Yb("ngModelChange",function(a){return o.yc(e),o.bc().item.kamar=a})("onChange",function(a){return o.yc(e),o.bc().changeKamar(a)}),o.Pb(),o.Pb()}if(2&e){const e=o.bc();o.xb(3),o.ic("options",e.listKamar)("ngModel",e.item.kamar)("filter",!0)("showClear",!0)}}function T(e,a){if(1&e){const e=o.Sb();o.Qb(0,"div",7),o.Qb(1,"label",8),o.Jc(2,"Nomor Tempat Tidur "),o.Pb(),o.Qb(3,"p-dropdown",39),o.Yb("ngModelChange",function(a){return o.yc(e),o.bc().item.nomorTempatTidur=a}),o.Pb(),o.Pb()}if(2&e){const e=o.bc();o.xb(3),o.ic("options",e.listNoBed)("ngModel",e.item.nomorTempatTidur)("filter",!0)("showClear",!0)}}function x(e,a){if(1&e){const e=o.Sb();o.Qb(0,"div",7),o.Qb(1,"label",8),o.Jc(2,"Penjamin "),o.Pb(),o.Qb(3,"p-dropdown",40),o.Yb("ngModelChange",function(a){return o.yc(e),o.bc().item.rekanan=a}),o.Pb(),o.Pb()}if(2&e){const e=o.bc();o.xb(3),o.ic("options",e.listRekanan)("ngModel",e.item.rekanan)("filter",!0)("showClear",!0)}}function J(e,a){if(1&e){const e=o.Sb();o.Qb(0,"div",41),o.Qb(1,"button",42),o.Yb("click",function(){return o.yc(e),o.bc().cancel()}),o.Pb(),o.Pb()}}function L(e,a){if(1&e&&(o.Qb(0,"div",41),o.Lb(1,"p-splitButton",43),o.Pb()),2&e){const e=o.bc();o.xb(1),o.ic("model",e.listBtn)}}const Y=function(){return{width:"100%",height:"500px"}},A=function(){return{width:"450px",minWidth:"450px"}},N=[{path:"",component:(()=>{class e{constructor(e,a,i,t,n,s,r,o,l){this.apiService=e,this.authService=a,this.confirmationService=i,this.messageService=t,this.cacheHelper=n,this.dateHelper=s,this.alertService=r,this.route=o,this.router=l,this.params={},this.model={},this.item={tglRegistrasi:new Date,pasien:{}},this.dataAntrol={},this.listRuangan=[],this.norecPD="",this.isRegisOnline="",this.norecAPD="",this.history={}}ngOnInit(){this.listBtn=[{label:"Input Tindakan",icon:"pi pi-calendar-plus",command:()=>{this.inputTindakan()}},{label:"Input Asuransi",icon:"pi pi-briefcase",command:()=>{this.inputPemakaianAsuransi()}},{label:"Kembali",icon:"fa fa-arrow-left",command:()=>{this.cancel()}},{separator:!0},{label:"Bukti Layanan",icon:"pi pi-print",command:()=>{this.cetakBuktiLayanan()}},{label:"Label Pasien",icon:"pi pi-print",command:()=>{this.cetakLabelPasien()}},{label:"Kartu Pasien",icon:"pi pi-print",command:()=>{this.cetakKartu()}},{label:"Gelang Pasien",icon:"pi pi-print",command:()=>{this.cetakGelang()}},{label:"Tracer",icon:"pi pi-print",command:()=>{this.cetakTracer()}},{label:"Cetak SEP",icon:"pi pi-print",command:()=>{this.cetakSep()}},{label:"Nomor Antrian",icon:"pi pi-print",command:()=>{this.cetakNomorAntrian()}},{label:"Pernyataan Jampersal",icon:"pi pi-print",command:()=>{this.cetakJampersal()}},{label:"Persetujuan Rawat Inap",icon:"pi pi-print",command:()=>{this.cetakPersetujuanRanap()}}],this.route.params.subscribe(e=>{this.params.idPasien=e.id,this.currentNoCm=this.params.idPasien,this.apiService.get("registrasi/get-pasienbynocm?noCm="+this.currentNoCm).subscribe(e=>{this.item.pasien=e.data[0],this.item.nocmfk=e.data[0].nocmfk,null==e.data[0].foto&&(this.item.pasien.foto="../app/images/avatar.jpg");var a=new Date,i=this.dateHelper.CountAge(new Date(this.item.pasien.tgllahir),a);this.item.pasien.umur=i.year+" thn "+i.month+" bln "+i.day+" hari",this.item.pasien.tgllahir=r(new Date(e.data[0].tgllahir)).format("DD-MM-YYYY"),this.item.pasien.namapasien.indexOf("By Ny")>=0&&(this.item.tglRegistrasi=new Date(this.item.pasien.tgllahir),this.model.rawatInap=!0),this.loadCombo()})})}loadCombo(){this.apiService.get("registrasi/get-data-combo-new").subscribe(e=>{this.listJenisPelayanan=e.jenispelayanan,this.listAsalRujukan=e.asalrujukan,this.listKelompokPasien=e.kelompokpasien,this.isPenunjang||(this.listRuangan=e.ruanganrajal),this.listRuanganRajal=e.ruanganrajal,this.listRuanganRanap=e.ruanganranap,this.model.namaPenjamin={id:e.kelompokpasien[1].id,kelompokpasien:e.kelompokpasien[1].kelompokpasien},1==this.model.rawatInap&&this.cekRawatInap(this.model.rawatInap);var a=this.cacheHelper.get("CacheRegisOnline");if(null!=a){var i=a[0];this.item.tglRegistrasi=new Date,null!=i.objectruanganfk&&(this.item.ruangan={id:i.objectruanganfk,namaruangan:i.namaruangan}),null!=i.objectkelompokpasienfk&&(this.item.kelompokPasien={id:i.objectkelompokpasienfk,kelompokpasien:i.kelompokpasien}),null!=i.objectpegawaifk&&(this.item.dokter={id:i.objectpegawaifk,namalengkap:i.dokter}),this.isRegisOnline=i.noreservasi}this.cacheHelper.set("CacheRegisOnline",void 0);var t=this.cacheHelper.get("CacheRegisOnlineBaru");null!=t&&(this.isRegisOnline=t[0].noreservasi,this.item.ruangan={id:t[0].objectruanganfk,namaruangan:t[0].namaruangan},this.item.kelompokPasien={id:t[0].objectkelompokpasienfk,kelompokpasien:t[0].kelompokpasien}),this.cacheHelper.set("CacheRegisOnlineBaru",void 0),this.norecPD="";var n=this.cacheHelper.get("CacheRegistrasiPasien");if(null!=n){var s=n.split("~");this.item.IsEdit=!0,this.model.noRegistrasi=s[1],this.model.norec_pd=s[0],this.norecPD=s[0],this.norecAPD=s[2],this.model.norec_apd=s[2],this.getPasienByNorecPD()}var r=this.cacheHelper.get("CacheMutasiRanap");null!=r&&(s=r.split("~"),this.model.noRegistrasi=s[1],this.model.norec_pd=s[0],this.norecPD=s[0],this.norecAPD=s[2],this.model.norec_apd=s[2],this.getHistory(),this.model.rawatInap=!0,this.cekRawatInap(this.model.rawatInap),this.disabledMutasi=!0,this.cacheHelper.set("CacheMutasiRanap",void 0))})}getHistory(){this.apiService.get("registrasi/get-pasienbynorec-pd?norecPD="+this.norecPD+"&norecAPD="+this.norecAPD).subscribe(e=>{this.history=e.data[0]})}getPasienByNorecPD(){this.apiService.get("registrasi/get-pasienbynorec-pd?norecPD="+this.norecPD+"&norecAPD="+this.norecAPD).subscribe(e=>{"true"==e.data[0].israwatinap&&(this.model.rawatInap=!0,this.cekRawatInap(this.model.rawatInap),this.pasienBayi=!0),this.item.tglRegistrasi=new Date(e.data[0].tglregistrasi),this.item.ruangan={id:e.data[0].objectruanganlastfk,namaruangan:e.data[0].namaruangan,objectdepartemenfk:e.data[0].objectdepartemenfk},2==e.data[0].objectdepartemenfk&&(this.model.rawatInap=!0);var a=new Date,i=new Date(this.item.tglRegistrasi);Math.round(Math.abs((a.getTime()-i.getTime())/864e5))>=1&&(this.disableTgl=!0),this.item.kelas={id:e.data[0].objectkelasfk,namakelas:e.data[0].namakelas},this.listKamar=[{id:e.data[0].objectkamarfk,namakamar:e.data[0].namakamar}],this.item.kamar={id:e.data[0].objectkamarfk,namakamar:e.data[0].namakamar},this.listNoBed=[{id:e.data[0].objecttempattidurfk,reportdisplay:e.data[0].reportdisplay}],this.item.nomorTempatTidur={id:e.data[0].objecttempattidurfk,reportdisplay:e.data[0].reportdisplay},this.item.asalRujukan={id:e.data[0].objectasalrujukanfk,asalrujukan:e.data[0].asalrujukan},this.item.kelompokPasien={id:e.data[0].objectkelompokpasienlastfk,kelompokpasien:e.data[0].kelompokpasien},this.changeJenis({value:this.item.kelompokPasien}),this.item.rekanan={id:e.data[0].objectrekananfk,namarekanan:e.data[0].namarekanan},this.item.dokter={id:e.data[0].objectpegawaifk,namalengkap:e.data[0].dokter},this.isNext=!this.isPenunjang})}filterDokter(e){this.apiService.get("registrasi/get-dokter-part?namalengkap="+e.query).subscribe(e=>{this.listDokter=e})}cekRawatInap(e){if(!0===e)""==this.norecPD&&delete this.item.ruangan,this.listRuangan=[],this.listRuangan=this.listRuanganRanap;else{if(!1!==e&&void 0!==e)return;""==this.norecPD&&delete this.item.ruangan,this.listRuangan=[],this.listRuangan=this.listRuanganRajal,this.item.kelas=void 0,this.item.nomorTempatTidur=void 0,this.item.kamar=void 0}}changeJenis(e){let a=e.value;void 0!==a&&this.apiService.get("registrasi/get-penjaminbykelompokpasien?kdKelompokPasien="+a.id).subscribe(e=>{if(this.listRekanan=e.rekanan,a.kelompokpasien.indexOf("Umum")>-1)delete this.item.rekanan,this.nonUmum=!1,this.item.jenisPasien={id:this.listJenisPelayanan[1].id,jenispelayanan:this.listJenisPelayanan[1].jenispelayanan};else if(a.kelompokpasien.indexOf("BPJS")>-1){this.nonUmum=!0;for(let e=0;e<this.listRekanan.length;e++){const a=this.listRekanan[e];if(a.namarekanan.toLowerCase().indexOf("bpjs")>-1){this.item.rekanan={id:a.id,namarekanan:a.namarekanan};break}}this.item.jenisPasien={id:this.listJenisPelayanan[1].id,jenispelayanan:this.listJenisPelayanan[1].jenispelayanan}}else this.nonUmum=!0,this.item.jenisPasien={id:this.listJenisPelayanan[1].id,jenispelayanan:this.listJenisPelayanan[1].jenispelayanan}})}changeRuangan(e){!0===this.model.rawatInap&&this.apiService.get("registrasi/get-kelasbyruangan?idRuangan="+e.value.id).subscribe(e=>{this.listKelas=e.kelas})}changeKelas(e){void 0!==e&&(this.item.kelas||this.item.ruangan)&&this.apiService.get("registrasi/get-kamarbyruangankelas?idKelas="+this.item.kelas.id+"&idRuangan="+this.item.ruangan.id+"&israwatgabung="+this.model.rawatGabung).subscribe(e=>{this.listKamar=e.kamar})}changeKamar(e){void 0!==e.value.id&&null!=e.value.id&&this.apiService.get("registrasi/get-nobedbykamar?idKamar="+e.value.id).subscribe(e=>{if(this.listNoBed=[],this.model.rawatGabung)this.listNoBed=e.bed;else for(let a=0;a<e.bed.length;a++){const i=e.bed[a];"KOSONG"==i.statusbed&&this.listNoBed.push(i)}})}save(){if(1!=this.disabledMutasi)if(null!=this.item.ruangan){var e="false";if(null==this.model.rawatInap||1!=this.model.rawatInap||(e="true",null!=this.item.kelas))if(null!=this.item.asalRujukan)if(null!=this.item.kelompokPasien)if(null!=this.item.jenisPasien){var a=null;null!=this.item.rekanan&&(a=this.item.rekanan.id);var i=null;null!=this.item.dokter&&(i=this.item.dokter.id);var t=null;null!=this.item.kamar&&(t=this.item.kamar.id);var n=null;null!=this.item.nomorTempatTidur&&(n=this.item.nomorTempatTidur.id);var s="";null!=this.model.norec_pd&&(s=this.model.norec_pd);var o="";null!=this.model.norec_apd&&(o=this.model.norec_apd);var l="";null!=this.model.noRegistrasi&&(l=this.model.noRegistrasi);var d="",p=this.cacheHelper.get("cacheStatusPasien");null!=p&&(d=p);var c={pasiendaftar:{tglregistrasi:r(this.item.tglRegistrasi).format("YYYY-MM-DD HH:mm:ss"),tglregistrasidate:r(this.item.tglRegistrasi).format("YYYY-MM-DD"),nocmfk:this.item.nocmfk,objectruanganfk:this.item.ruangan.id,objectdepartemenfk:this.item.ruangan.objectdepartemenfk,objectkelasfk:1==this.model.rawatInap?this.item.kelas.id:6,objectkelompokpasienlastfk:this.item.kelompokPasien.id,objectrekananfk:a,tipelayanan:this.item.jenisPasien.id,objectpegawaifk:i,noregistrasi:l,norec_pd:s,israwatinap:e,statusschedule:this.isRegisOnline,statuspasien:d},antrianpasiendiperiksa:{norec_apd:o,tglregistrasi:r(this.item.tglRegistrasi).format("YYYY-MM-DD HH:mm:ss"),objectruanganfk:this.item.ruangan.id,objectkelasfk:1==this.model.rawatInap?this.item.kelas.id:6,objectpegawaifk:i,objectkamarfk:t,nobed:n,objectdepartemenfk:this.item.ruangan.objectdepartemenfk,objectasalrujukanfk:this.item.asalRujukan.id,israwatgabung:!0===this.model.rawatGabung?1:0}};this.isSimpan=!0,this.apiService.post("registrasi/save-registrasipasien",c).subscribe(e=>{this.isSimpan=!1,this.resultAPD=e.dataAPD,this.resultPD=e.dataPD,this.model.noRegistrasi=e.dataPD.noregistrasi,this.model.norec_pd=e.dataPD.norec,this.model.norec_apd=e.dataAPD.norec,this.cacheHelper.set("CacheRegistrasiPasien",this.model.norec_pd+"~"+this.model.noRegistrasi+"~"+e.dataAPD.norec),201==e.status&&(null!=this.item.asalRujukan&&this.cacheHelper.set("cacheAsalRujukan",this.item.asalRujukan.asalrujukan),""!=this.norecPD?this.apiService.postLog("Edit Registrasi","norec Pasien Daftar",this.norecPD,"Edit Registrasi ke ruangan "+this.item.ruangan.namaruangan+" pada No Registrasi "+this.model.noRegistrasi).subscribe(e=>{}):(this.apiService.postLog("Registrasi","norec Pasien Daftar",this.norecPD,"Registrasi ke ruangan "+this.item.ruangan.namaruangan+" pada No Registrasi "+this.model.noRegistrasi).subscribe(e=>{this.apiService.post("registrasi/save-adminsitrasi",{norec:this.model.norec_pd,norec_apd:this.model.norec_apd}).subscribe(e=>{})}),""!=this.isRegisOnline?this.apiService.post("registrasi/confirm-pasien-online",{noreservasi:this.isRegisOnline}).subscribe(e=>{}):""==this.norecPD&&""==this.isRegisOnline&&this.saveAntrol(this.model.noRegistrasi,this.resultAPD)),this.isPenunjang||(this.isNext=!0),this.item.kelompokPasien.kelompokpasien.toLowerCase().indexOf("umum")>-1==0&&""==this.norecPD&&this.inputPemakaianAsuransi(),""==this.norecPD&&"IGD"!=this.item.ruangan.namaruangan&&1!=this.model.rawatInap&&"Hemodialisa"!=this.item.ruangan.namaruangan&&"RADIOLOGI"!=this.item.ruangan.namaruangan&&"LABORATORIUM"!=this.item.ruangan.namaruangan&&"ELEKTROMEDIK"!=this.item.ruangan.namaruangan&&this.nomorAntrian(),this.norecPD=e.dataPD.norec,this.norecAPD=e.dataAPD.norec),null!=this.nocmIgd&&this.updateTriage()},function(e){this.isSimpan=!1,this.isBatal=!1})}else this.alertService.warn("Info","Jenis Pelayanan harus di isi");else this.alertService.warn("Info","Jenis Pembiayaan harus di isi");else this.alertService.warn("Info","Asal Rujukan harus di isi");else this.alertService.warn("Info","Kelas Harus di isi")}else this.alertService.warn("Info","Ruangan harus di isi");else this.saveMutasi()}inputPemakaianAsuransi(){var e,a;null!=this.item.asalRujukan&&this.cacheHelper.set("cacheAsalRujukan",this.item.asalRujukan.asalrujukan),""==this.norecPD?(e=this.model.norec_pd,a=this.model.norec_apd):(e=this.norecPD,a=this.norecAPD),this.router.navigate(["pemakaian-asuransi",e,a])}updateTriage(){}nomorAntrian(){}cancel(){this.cacheHelper.set("CacheRegistrasiPasien",void 0),window.history.back()}cetakTriage(){var e;null!=this.model.noRegistrasi?(e=confirm("View Triage IGD? ")?"true":"false",this.apiService.getUrlCetak("http://127.0.0.1:3885/desk/routes?cetak-triage=1&noregistrasi="+this.model.noRegistrasi+"&view="+e,function(e){})):this.alertService.error("Info","Pilih data dulu")}cetakSummary(){var e;null!=this.item.pasien.nocm?(e=confirm("View Summary List? ")?"true":"false",this.apiService.getUrlCetak("http://127.0.0.1:3885/desk/routes?cetak-summarylist=1&nocm="+this.item.pasien.nocm+"&view="+e,function(e){})):this.alertService.error("Info","Data Tidak Ditemukan")}cetakLembar(){var e;null!=this.model.noRegistrasi?(e=confirm("View Persejutuan Rawat Inap? ")?"true":"false",this.apiService.getUrlCetak("http://127.0.0.1:3885/desk/routes?cetak-surat-pernyataan-ranap=1&noregistrasi="+this.model.noRegistrasi+"&idpegawai="+this.authService.getDataLoginUser().pegawai.namaLengkap+"&view="+e,function(e){})):this.alertService.error("Info","Data Tidak Ditemukan")}cetakIdentitas(){var e;null!=this.model.noRegistrasi?(e=confirm("View Indentitas Pasien? ")?"true":"false",this.apiService.getUrlCetak("http://127.0.0.1:3885/desk/routes?cetak-lembar-identitas=1&nocm="+this.item.pasien.nocm+"&noregistrasi="+this.model.noRegistrasi+"&tipePasien="+this.item.kelompokPasien.kelompokpasien+"&idpegawai="+this.authService.getDataLoginUser().pegawai.namaLengkap+"&view="+e,function(e){})):this.alertService.error("Info","Data Tidak Ditemukan")}cetakNomorAntrian(){var e;null!=this.model.noRegistrasi?(e=confirm("View Bukti Pendaftaran? ")?"true":"false",this.apiService.getUrlCetak("http://127.0.0.1:3885/desk/routes?cetak-antrian-pendaftaran=1&noregistrasi="+this.model.noRegistrasi+"&idpegawai="+this.authService.getDataLoginUser().pegawai.namaLengkap+"&view="+e,function(e){})):this.alertService.error("Info","Data Tidak Ditemukan")}cetakSep(){if(null!=this.model.noRegistrasi)if("BPJS"==this.item.kelompokPasien.kelompokpasien){var e;e=confirm("View SEP? ")?"true":"false",this.apiService.getUrlCetak("http://127.0.0.1:3885/desk/routes?cetak-sep=1&noregistrasi="+this.model.noRegistrasi+"&qty=1&idpegawai="+this.authService.getDataLoginUser().pegawai.namaLengkap+"&ket=&view="+e,function(e){})}else this.alertService.error("Info","Hanya Untuk Pasien BPJS");else this.alertService.error("Info","Pilih data dulu")}cetakBlanko(){var e;null!=this.model.noRegistrasi?(e=confirm("View Blangko BPJS? ")?"true":"false",this.apiService.getUrlCetak("http://127.0.0.1:3885/desk/routes?cetak-blangko-bpjs=1&noregistrasi="+this.model.noRegistrasi+"&qty=1&idpegawai="+this.authService.getDataLoginUser().pegawai.id+"&ket=&view="+e,function(e){})):this.alertService.error("Info","Pilih data dulu")}cetakTracer(){var e;null!=this.model.noRegistrasi?(e=confirm("View Tracer? ")?"true":"false",this.apiService.getUrlCetak("http://127.0.0.1:3885/desk/routes?cetak-tracer=1&noregistrasi="+this.model.noRegistrasi+"&view="+e,function(e){})):this.alertService.error("Info","Data Tidak Ditemukan")}cetakGelang(){var e;e=confirm("View Gelang Pasien? ")?"true":"false",this.apiService.getUrlCetak("http://127.0.0.1:3885/desk/routes?cetak-gelangpasien=1&noregistrasi="+this.model.noRegistrasi+"&qty=1&view="+e,function(e){})}cetakKartu(){this.apiService.getUrlCetak("http://127.0.0.1:3885/desk/routes?cetak-kartu-pasien=1&norm="+this.item.pasien.nocm,function(e){})}cetakLabelPasien(){null!=this.model.noRegistrasi?(this.item.qtyPrint=1,this.pop_cetakLabelPasien=!0):this.alertService.error("Info","Data Tidak Ditemukan!")}cetakLabelPrint(){var e;e=confirm("View Label Pasien? ")?"true":"false",this.apiService.getUrlCetak("http://127.0.0.1:3885/desk/routes?cetak-labelpasien=1&noregistrasi="+this.model.noRegistrasi+"&qty="+this.item.qtyPrint+"&view="+e,function(e){}),this.pop_cetakLabelPasien=!1}cetakBuktiLayanan(){if(null!=this.item.ruangan)if(null!=this.model.noRegistrasi){var e;e=confirm("View Bukti Layanan? ")?"true":"false",this.apiService.getUrlCetak("http://127.0.0.1:3885/desk/routes?cetak-buktilayanan=1&noregistrasi="+this.model.noRegistrasi+"&idpegawai="+this.authService.getDataLoginUser().pegawai.namaLengkap+"&idRuangan="+this.item.ruangan.id+"&view="+e,function(e){})}else this.alertService.error("Info","Data Tidak Ditemukan!");else this.alertService.error("Info","Ruangan Masih Belum Diisi!")}inputTindakan(){var e,a;""==this.norecPD?(e=this.model.norec_pd,a=this.model.norec_apd):(e=this.norecPD,a=this.norecAPD),this.router.navigate(["input-tindakan",e,a])}saveMutasi(){if(null!=this.item.kelas)if(null!=this.item.jenisPasien&&null!=this.item.jenisPasien){var e=this.item.kelas.id,a=null;null!=this.item.rekanan&&(a=this.item.rekanan.id);var i,t,n=null;null!=this.item.dokter&&(n=this.item.dokter.id),i=null==this.item.kamar?null:this.item.kamar.id,t=null==this.item.nomorTempatTidur?null:this.item.nomorTempatTidur.id;var s=this.item.jenisPasien.id,o={pegawai:{id:n},tglRegistrasi:r(this.item.tglRegistrasi).format("YYYY-MM-DD HH:mm:ss"),jenisPelayanan:s,kelompokPasien:{id:this.item.kelompokPasien.id},ruangan:{id:this.item.ruangan.id},pasien:{id:this.item.nocmfk,pasienDaftar:{noRec:this.norecPD},noCm:this.item.pasien.nocm},noRecAntrianPasien:this.norecAPD,tglRegisDateOnly:r(this.item.tglRegistrasi).format("YYYY-MM-DD"),objectruanganasalfk:this.history.objectruanganlastfk,objectrekananfk:a,asalRujukan:{id:this.history.objectasalrujukanfk},kelas:{id:e},kamar:{id:i},nomorTempatTidur:{id:t},status:"pindah Kamar",noRecPasienDaftar:this.norecPD,statusPasien:this.history.statuspasien,isRawatGabung:null!=this.model.rawatGabung&&this.model.rawatGabung};this.isSimpan=!0,this.apiService.post("registrasi/simpan-mutasi-pasien",o).subscribe(e=>{this.resultAPD=e.data,this.model.noRegistrasi=this.history.noregistrasi,this.model.norec_apd=e.data.norec,this.apiService.postLog("Mutasi Rawat Inap","norec Registrasi Ruangan",this.norecPD,"Mutasi Rawat Inap  dengan No Registrasi - "+this.model.noRegistrasi+" ke Ruangan "+this.item.ruangan.namaruangan).subscribe(e=>{}),this.apiService.post("registrasi/update-sep-igd",{norec:this.norecPD}).subscribe(e=>{}),this.cacheHelper.set("CacheRegistrasiPasien",this.norecPD+"~"+this.model.noRegistrasi+"~"+this.resultAPD.norec),null!=this.item.asalRujukan&&this.cacheHelper.set("cacheAsalRujukan",this.item.asalRujukan.asalrujukan),this.isSimpan=!0,this.isNext=!0,this.item.kelompokPasien.kelompokpasien.toLowerCase().indexOf("umum")>-1==0?this.inputPemakaianAsuransi():window.history.back()},function(e){this.isSimpan=!1,this.isNext=!1})}else this.alertService.warn("Info","Jenis Pelayanan Harus di isi");else this.alertService.warn("Info","Kelas Harus di isi")}cetakJampersal(){if(null!=this.model.noRegistrasi)if(this.item.kelompokPasien.kelompokpasien=!1)this.alertService.error("Info","Hanya Untuk Pasien BPJS");else{var e;e=confirm("View Surat Pernyataan Jampersal? ")?"true":"false",this.apiService.getUrlCetak("http://127.0.0.1:3885/desk/routes?cetak-surat-jampersal=1&noregistrasi="+this.model.noRegistrasi+"&idpegawai="+this.authService.getDataLoginUser().pegawai.namaLengkap+"&view="+e,function(e){})}else this.alertService.error("Info","Data Tidak Ditemukan!")}cetakPersetujuanRanap(){if(null!=this.model.noRegistrasi)if(1==this.model.rawatInap){var e;e=confirm("View Surat Persetujuan Rawat Inap? ")?"true":"false",this.apiService.getUrlCetak("http://127.0.0.1:3885/desk/routes?cetak-surat-pernyataan-ranap=1&noregistrasi="+this.model.noRegistrasi+"&idpegawai="+this.authService.getDataLoginUser().pegawai.namaLengkap+"&view="+e,function(e){})}else this.alertService.error("Info","Hanya Untuk Pasien Rawat Inap!");else this.alertService.error("Info","Data Tidak Ditemukan!")}saveAntrol(e,a){var i=!1;if(this.item.kelompokPasien.kelompokpasien.indexOf("BPJS")>-1&&(i=!0),null!=this.item.ruangan.kodebpjs&&null!=this.item.ruangan.kodebpjs){var t={url:"jadwaldokter/kodepoli/"+this.item.ruangan.kodebpjs+"/tanggal/"+r(this.item.tglRegistrasi).format("YYYY-MM-DD"),jenis:"antrean",method:"GET",data:null};this.apiService.postNonMessage("bridging/bpjs/tools",t).subscribe(t=>{if(201!=t.metaData.code&&null!=t.response&&0!=t.response.length&&(this.item.dokter||this.item.dokter.kodebpjs)){for(var n="",s=t.response.length-1;s>=0;s--){const e=t.response[s];if(e.kodedokter==this.item.dokter.kodebpjs){n={jadwal:e.jadwal,namadokter:e.namadokter,kodedokter:e.kodedokter};break}}if(""!=n){var o="0";this.cacheHelper.get("cacheStatusPasien")&&"BARU"==this.cacheHelper.get("cacheStatusPasien")&&(o="1"),this.dataAntrol={};var l=this.item.pasien.nobpjs+this.item.pasien.nocm,d={url:"antrean/add",jenis:"antrean",method:"POST",data:{kodebooking:e,jenispasien:i?"JKN":"NON JKN",nomorkartu:i&&this.item.pasien.nobpjs?this.item.pasien.nobpjs:"",nik:this.item.pasien.noidentitas?this.item.pasien.noidentitas:"",nohp:this.item.pasien.notelepon?this.item.pasien.notelepon:"000000000000",kodepoli:this.item.ruangan.kodebpjs,namapoli:this.item.ruangan.namaruangan,pasienbaru:o,norm:this.item.pasien.nocm,tanggalperiksa:r(this.item.tglRegistrasi).format("YYYY-MM-DD"),kodedokter:n.kodedokter,namadokter:n.namadokter,jampraktek:n.jadwal,jeniskunjungan:1,nomorreferensi:l,nomorantrean:a.noantrian,angkaantrean:a.noantrian,estimasidilayani:(new Date).getTime(),sisakuotajkn:0,kuotajkn:0,sisakuotanonjkn:0,kuotanonjkn:0,keterangan:""}};this.dataAntrol=d,this.apiService.postNonMessage("bridging/bpjs/tools",d).subscribe(a=>{if(this.apiService.postLog("Antrol Task ID","norec Pasien Daftar",e,"Tambah Antrean Kode "+e+" | "+JSON.stringify(this.dataAntrol)+" | "+JSON.stringify(a)).subscribe(e=>{}),201!=a.metaData.code){var i={url:"antrean/updatewaktu",jenis:"antrean",method:"POST",data:{kodebooking:e,taskid:1,waktu:(new Date).getTime()-3e5}};this.apiService.postLog("Antrol Task ID","norec Pasien Daftar",e,"TASK ID 1 : "+e+" | "+JSON.stringify(i)).subscribe(e=>{}),this.apiService.postNonMessage("bridging/bpjs/tools",i).subscribe(a=>{var i={url:"antrean/updatewaktu",jenis:"antrean",method:"POST",data:{kodebooking:e,taskid:2,waktu:(new Date).getTime()-18e4}};this.apiService.postNonMessage("bridging/bpjs/tools",i).subscribe(a=>{var i={url:"antrean/updatewaktu",jenis:"antrean",method:"POST",data:{kodebooking:e,taskid:3,waktu:(new Date).getTime()}};this.apiService.postNonMessage("bridging/bpjs/tools",i).subscribe(e=>{})})})}})}}})}}}return e.\u0275fac=function(a){return new(a||e)(o.Jb(l.a),o.Jb(l.b),o.Jb(s.a),o.Jb(s.h),o.Jb(d.a),o.Jb(p.a),o.Jb(c.a),o.Jb(n.a),o.Jb(n.f))},e.\u0275cmp=o.Db({type:e,selectors:[["app-registrasi-ruangan"]],features:[o.wb([s.a])],decls:64,vars:54,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-grid"],[1,"p-col-12","p-md-6"],["header","Info Pasien",3,"toggleable"],["class","p-grid",4,"ngIf"],["header","Detail Registrasi",3,"toggleable"],[1,"p-col-12","p-md-12"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd","hourFormat","24","placeholder","Tgl Registrasi",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","ngModelChange"],["binary","true","inputId","model.rawatInap",3,"ngModel","disabled","ngModelChange","onChange"],["for","model.rawatInap"],["class","p-col-12 p-md-6",4,"ngIf"],["appendTo","body","placeholder","Ruangan / Poliklinik","optionLabel","namaruangan","dataKey","id",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["class","p-col-12 p-md-12",4,"ngIf"],["appendTo","body","placeholder","Asal Rujukan","optionLabel","asalrujukan",3,"options","ngModel","filter","showClear","ngModelChange"],["appendTo","body","placeholder","Jenis Pembiayaan","optionLabel","kelompokpasien",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["appendTo","body","placeholder","Tipe Layanan","optionLabel","jenispelayanan",3,"options","ngModel","filter","showClear","ngModelChange"],["field","namalengkap","placeholder","DPJP","appendTo","body",3,"ngModel","suggestions","dropdown","ngModelChange","completeMethod"],[1,"p-col-12","p-md-1","p-md-offset-10"],["pButton","","type","button","icon","pi pi-save","pTooltip","Simpan","label","Simpan",1,"p-button","p-mr-2",3,"disabled","click"],["class","p-col-12 p-md-1",4,"ngIf"],["header","Qty Print",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"p-col-12","p-md-8"],["placeholder","Qty","inputId","stacked",3,"ngModel","showButtons","ngModelChange"],[1,"p-col-12","p-md-4",2,"margin-top","15px"],["pButton","","type","submit","icon","fa fa-print","pTooltip","Cetak Label Pasien","label","Cetak",3,"click"],["height","2.4rem"],["type","text","pInputText","","placeholder","No Rekam Medis","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Nama Pasien","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Tgl Lahir","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Umur","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Pendidikan","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Alamat","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Pekerjaan","disabled","",3,"ngModel","ngModelChange"],["binary","true","inputId","model.rawatGabung",3,"ngModel","ngModelChange"],["for","model.rawatGabung"],["appendTo","body","placeholder","Kelas","optionLabel","namakelas",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["appendTo","body","placeholder","Kamar","optionLabel","namakamar",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["appendTo","body","placeholder","Nomor Tempat Tidur","optionLabel","reportdisplay",3,"options","ngModel","filter","showClear","ngModelChange"],["appendTo","body","placeholder","Penjamin","optionLabel","namarekanan","dataKey","id",3,"options","ngModel","filter","showClear","ngModelChange"],[1,"p-col-12","p-md-1"],["pButton","","type","button","icon","pi pi-arrow-left","pTooltip","Kembali Ke Menu Sebelumnya","label","Batal",1,"p-button","p-button-danger","p-mr-2",3,"click"],["label","Action","styleClass","p-button-success","icon","pi pi-ellipsis-v",3,"model"]],template:function(e,a){1&e&&(o.Qb(0,"div",0),o.Qb(1,"div",1),o.Qb(2,"h4"),o.Jc(3,"Registrasi"),o.Pb(),o.Qb(4,"div",2),o.Qb(5,"div",3),o.Qb(6,"p-panel",4),o.Qb(7,"p-scrollPanel"),o.Hc(8,M,21,0,"div",5),o.Hc(9,S,35,8,"div",5),o.Pb(),o.Pb(),o.Pb(),o.Qb(10,"div",3),o.Qb(11,"p-panel",6),o.Qb(12,"p-scrollPanel"),o.Qb(13,"div",2),o.Qb(14,"div",7),o.Qb(15,"label",8),o.Jc(16,"Tgl Registrasi "),o.Pb(),o.Qb(17,"p-calendar",9),o.Yb("ngModelChange",function(e){return a.item.tglRegistrasi=e}),o.Pb(),o.Pb(),o.Qb(18,"div",7),o.Qb(19,"div",2),o.Qb(20,"div",3),o.Qb(21,"p-checkbox",10),o.Yb("ngModelChange",function(e){return a.model.rawatInap=e})("onChange",function(){return a.cekRawatInap(a.model.rawatInap)}),o.Pb(),o.Qb(22,"label",11),o.Jc(23," Rawat Inap"),o.Pb(),o.Pb(),o.Hc(24,C,4,1,"div",12),o.Pb(),o.Pb(),o.Qb(25,"div",7),o.Qb(26,"label",8),o.Jc(27,"Ruangan / Poliklinik "),o.Pb(),o.Qb(28,"p-dropdown",13),o.Yb("ngModelChange",function(e){return a.item.ruangan=e})("onChange",function(e){return a.changeRuangan(e)}),o.Pb(),o.Pb(),o.Hc(29,Q,4,4,"div",14),o.Hc(30,I,4,4,"div",14),o.Hc(31,T,4,4,"div",14),o.Qb(32,"div",7),o.Qb(33,"label",8),o.Jc(34,"Asal Rujukan "),o.Pb(),o.Qb(35,"p-dropdown",15),o.Yb("ngModelChange",function(e){return a.item.asalRujukan=e}),o.Pb(),o.Pb(),o.Qb(36,"div",7),o.Qb(37,"label",8),o.Jc(38,"Jenis Pembiayaan "),o.Pb(),o.Qb(39,"p-dropdown",16),o.Yb("ngModelChange",function(e){return a.item.kelompokPasien=e})("onChange",function(e){return a.changeJenis(e)}),o.Pb(),o.Pb(),o.Hc(40,x,4,4,"div",14),o.Qb(41,"div",7),o.Qb(42,"label",8),o.Jc(43,"Tipe Layanan "),o.Pb(),o.Qb(44,"p-dropdown",17),o.Yb("ngModelChange",function(e){return a.item.jenisPasien=e}),o.Pb(),o.Pb(),o.Qb(45,"div",7),o.Qb(46,"label",8),o.Jc(47,"Dokter Penanggung Jawab "),o.Pb(),o.Qb(48,"p-autoComplete",18),o.Yb("ngModelChange",function(e){return a.item.dokter=e})("completeMethod",function(e){return a.filterDokter(e)}),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Qb(49,"div",7),o.Qb(50,"div",2),o.Qb(51,"div",19),o.Qb(52,"button",20),o.Yb("click",function(){return a.save()}),o.Pb(),o.Pb(),o.Hc(53,J,2,0,"div",21),o.Hc(54,L,2,1,"div",21),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Qb(55,"p-dialog",22),o.Yb("visibleChange",function(e){return a.pop_cetakLabelPasien=e}),o.Qb(56,"div",0),o.Qb(57,"div",2),o.Qb(58,"div",23),o.Qb(59,"label",8),o.Jc(60,"Qty "),o.Pb(),o.Qb(61,"p-inputNumber",24),o.Yb("ngModelChange",function(e){return a.item.qtyPrint=e}),o.Pb(),o.Pb(),o.Qb(62,"div",25),o.Qb(63,"button",26),o.Yb("click",function(){return a.cetakLabelPrint()}),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb()),2&e&&(o.xb(6),o.ic("toggleable",!0),o.xb(1),o.Ec(o.mc(51,Y)),o.xb(1),o.ic("ngIf",null==a.item.pasien.nocm),o.xb(1),o.ic("ngIf",null!=a.item.pasien.nocm),o.xb(2),o.ic("toggleable",!0),o.xb(1),o.Ec(o.mc(52,Y)),o.xb(5),o.ic("ngModel",a.item.tglRegistrasi)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),o.xb(4),o.ic("ngModel",a.model.rawatInap)("disabled",a.disabledMutasi),o.xb(3),o.ic("ngIf",a.model.rawatInap),o.xb(4),o.ic("options",a.listRuangan)("ngModel",a.item.ruangan)("filter",!0)("showClear",!0),o.xb(1),o.ic("ngIf",a.model.rawatInap),o.xb(1),o.ic("ngIf",a.model.rawatInap),o.xb(1),o.ic("ngIf",a.model.rawatInap),o.xb(4),o.ic("options",a.listAsalRujukan)("ngModel",a.item.asalRujukan)("filter",!0)("showClear",!0),o.xb(4),o.ic("options",a.listKelompokPasien)("ngModel",a.item.kelompokPasien)("filter",!0)("showClear",!0),o.xb(1),o.ic("ngIf",a.nonUmum),o.xb(4),o.ic("options",a.listJenisPelayanan)("ngModel",a.item.jenisPasien)("filter",!0)("showClear",!0),o.xb(4),o.ic("ngModel",a.item.dokter)("suggestions",a.listDokter)("dropdown",!0),o.xb(4),o.ic("disabled",a.isSimpan),o.xb(1),o.ic("ngIf",!a.isNext),o.xb(1),o.ic("ngIf",a.isNext),o.xb(1),o.Ec(o.mc(53,A)),o.ic("visible",a.pop_cetakLabelPasien)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!0),o.xb(6),o.ic("ngModel",a.item.qtyPrint)("showButtons",!0))},directives:[h.a,m.a,t.l,u.a,b.g,b.h,g.a,k.a,f.a,P.b,v.a,w.a,R.a,j.a,b.a,y.a,D.a],styles:[""]}),e})()}];let H=(()=>{class e{}return e.\u0275mod=o.Hb({type:e}),e.\u0275inj=o.Gb({factory:function(a){return new(a||e)},imports:[[n.j.forChild(N)],n.j]}),e})();var B=i("PCNd");let K=(()=>{class e{}return e.\u0275mod=o.Hb({type:e}),e.\u0275inj=o.Gb({factory:function(a){return new(a||e)},imports:[[t.b,H,B.a]]}),e})()}}]);