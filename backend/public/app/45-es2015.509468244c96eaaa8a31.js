(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{ADik:function(e,t,a){"use strict";a.r(t),a.d(t,"DaftarResepNonlayananModule",function(){return B});var n=a("ofXK"),i=a("tyNb"),o=a("7zfz"),l=a("1zoS"),s=a("wd/R"),r=a("fXoL"),c=a("EJUL"),b=a("U+s4"),p=a("G0w9"),d=a("ujBT"),h=a("Nf9I"),u=a("eO1q"),m=a("3Pt+"),g=a("arFO"),f=a("7kUa"),w=a("jIHw"),P=a("xlun"),R=a("5EWq"),Q=a("rEr+"),v=a("Wq6t"),D=a("Q4Mo");function y(e,t){if(1&e){const e=r.Sb();r.Qb(0,"button",24),r.Yb("click",function(){return r.yc(e),r.bc().inputResepBaru()}),r.Pb(),r.Lb(1,"p-splitButton",25)}if(2&e){const e=r.bc();r.xb(1),r.ic("model",e.listBtnCetak)}}function k(e,t){if(1&e&&(r.Qb(0,"th",29),r.Jc(1),r.Lb(2,"p-sortIcon",30),r.Pb()),2&e){const e=t.$implicit;r.Fc("width: ",e.width,""),r.jc("pSortableColumn",e.field),r.xb(1),r.Lc(" ",e.header," "),r.xb(1),r.jc("field",e.field)}}function x(e,t){if(1&e&&(r.Qb(0,"tr"),r.Qb(1,"th",26),r.Jc(2," Aksi "),r.Pb(),r.Lb(3,"th",27),r.Hc(4,k,3,6,"th",28),r.Pb()),2&e){const e=t.$implicit;r.xb(4),r.ic("ngForOf",e)}}function J(e,t){if(1&e&&(r.Qb(0,"td"),r.Jc(1),r.Pb()),2&e){const e=t.$implicit,a=r.bc().$implicit;r.Fc("width: ",e.width,""),r.xb(1),r.Lc(" ",a[e.field]," ")}}const C=function(){return{display:"inline-flex"}};function M(e,t){if(1&e){const e=r.Sb();r.Qb(0,"tr",31),r.Qb(1,"td",26),r.Qb(2,"p-splitButton",32),r.Yb("onDropdownClick",function(){r.yc(e);const a=t.$implicit;return r.bc().selectData(a)}),r.Pb(),r.Pb(),r.Qb(3,"td",27),r.Lb(4,"button",33),r.Pb(),r.Hc(5,J,2,4,"td",34),r.Pb()}if(2&e){const e=t.$implicit,a=t.columns,n=t.rowIndex,i=t.expanded,o=r.bc();r.ic("pSelectableRow",e)("pSelectableRowIndex",n),r.xb(2),r.Ec(r.mc(8,C)),r.ic("model",o.listBtn),r.xb(2),r.ic("pRowToggler",e)("icon",i?"pi pi-chevron-down":"pi pi-chevron-right"),r.xb(1),r.ic("ngForOf",a)}}function L(e,t){1&e&&(r.Qb(0,"tr"),r.Qb(1,"th"),r.Jc(2,"Rke"),r.Pb(),r.Qb(3,"th"),r.Jc(4,"Kemasan"),r.Pb(),r.Qb(5,"th"),r.Jc(6,"namaproduk"),r.Pb(),r.Qb(7,"th"),r.Jc(8,"Satuan"),r.Pb(),r.Qb(9,"th"),r.Jc(10,"Qty"),r.Pb(),r.Qb(11,"th"),r.Jc(12,"Harga"),r.Pb(),r.Qb(13,"th"),r.Jc(14,"Diskon"),r.Pb(),r.Qb(15,"th"),r.Jc(16,"Jasa"),r.Pb(),r.Qb(17,"th"),r.Jc(18,"Total"),r.Pb(),r.Qb(19,"th"),r.Jc(20,"Tgl Exp"),r.Pb(),r.Pb())}function S(e,t){if(1&e&&(r.Qb(0,"tr"),r.Qb(1,"td"),r.Jc(2),r.Pb(),r.Qb(3,"td"),r.Jc(4),r.Pb(),r.Qb(5,"td"),r.Jc(6),r.Pb(),r.Qb(7,"td"),r.Jc(8),r.Pb(),r.Qb(9,"td"),r.Jc(10),r.Pb(),r.Qb(11,"td"),r.Jc(12),r.Pb(),r.Qb(13,"td"),r.Jc(14),r.Pb(),r.Qb(15,"td"),r.Jc(16),r.Pb(),r.Qb(17,"td"),r.Jc(18),r.Pb(),r.Qb(19,"td"),r.Jc(20),r.Pb(),r.Pb()),2&e){const e=t.$implicit;r.xb(2),r.Kc(e.resepke),r.xb(2),r.Kc(e.jeniskemasan),r.xb(2),r.Kc(e.namaproduk),r.xb(2),r.Kc(e.satuanstandar),r.xb(2),r.Kc(e.qtyproduk),r.xb(2),r.Kc(e.hargasatuan),r.xb(2),r.Kc(e.hargadiscount),r.xb(2),r.Kc(e.hargatambahan),r.xb(2),r.Kc(e.total),r.xb(2),r.Kc(e.tglkadaluarsa)}}function Y(e,t){if(1&e&&(r.Qb(0,"tr"),r.Qb(1,"td",35),r.Qb(2,"div",36),r.Qb(3,"p-table",37),r.Hc(4,L,21,0,"ng-template",21),r.Hc(5,S,21,10,"ng-template",22),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&e){const e=t.$implicit;r.xb(3),r.ic("value",e.details)}}const N=function(){return[5,10,25,50]},H=[{path:"",component:(()=>{class e{constructor(e,t,a,n,i,o,s,r,c){this.apiService=e,this.authService=t,this.confirmationService=a,this.messageService=n,this.cacheHelper=i,this.dateHelper=o,this.alertService=s,this.route=r,this.router=c,this.item={},this.page=l.b.get().page,this.rows=l.b.get().rows}ngOnInit(){this.dataLogin=this.authService.getDataLoginUser(),this.kelUser=this.dataLogin.kelompokUser.kelompokUser,this.dateNow=new Date,this.item.tglAwal=s(this.dateNow).format("YYYY-MM-DD 00:00"),this.item.tglAkhir=s(this.dateNow).format("YYYY-MM-DD 23:59"),this.item.jmlRows=50,this.getDataList(),this.getDataCombo()}getDataList(){this.listBtnCetak=[{label:"Cetak Label Identitas",icon:"fa fa-print",command:()=>{this.ctkLabelIdentitas()}},{label:"Cetak Label Resep",icon:"fa fa-print",command:()=>{this.ctkLabelResep()}},{label:"Cetak Resep Obat",icon:"fa fa-print",command:()=>{this.ctkResepObat()}}],this.listBtn=[{label:"Ubah Resep",icon:"fa fa-medkit",command:()=>{this.ubahResep()}},{label:"Hapus Resep",icon:"fa fa-trash",command:()=>{this.hapusResep()}},{label:"Retur Resep ",icon:"fa fa-retweet",command:()=>{this.returResep()}}],this.column=[{field:"no",header:"No",width:"65px"},{field:"tglstruk",header:"Tgl Resep",width:"140px"},{field:"noresep",header:"No Resep",width:"140px"},{field:"norm",header:"No RM",width:"120px"},{field:"namapasien",header:"Nama Pasien",width:"180px"},{field:"notelp",header:"No Telp",width:"140px"},{field:"namaruangan",header:"Depo",width:"180px"},{field:"dokter",header:"Dokter",width:"180px"},{field:"nosbm",header:"No Bukti Bayar",width:"180px"}]}getDataCombo(){this.apiService.get("farmasi/get-combo-farmasi").subscribe(e=>{this.listRuanganDepo=null!=this.dataLogin.mapLoginUserToRuangan?this.dataLogin.mapLoginUserToRuangan:e.ruangfarmasi,this.LoadCache()})}LoadCache(){var e=this.cacheHelper.get("DaftarResepNonLayananCache");null!=e?(this.item.tglAwal=new Date(e[0]),this.item.tglAkhir=new Date(e[1]),null!=e[2]&&""!=e[2]&&(this.item.namaPasien=e[2]),null!=e[3]&&""!=e[3]&&(this.item.noResep=e[3]),null!=e[4]&&""!=e[4]&&(this.listRuanganDepo=[e[4]],this.item.dataRuanganDepo=e[4]),this.loadData()):this.loadData()}loadData(){var e=s(this.item.tglAwal).format("YYYY-MM-DD HH:mm"),t=s(this.item.tglAkhir).format("YYYY-MM-DD HH:mm"),a="",n=void 0;null!=this.item.instalasi&&(a=this.item.dataRuanganDepo.id,n={id:this.item.dataRuanganDepo.id,namaruangan:this.item.dataRuanganDepo.namaruangan});var i="";null!=this.item.namaPasien&&(i=this.item.namaPasien);var o="";null!=this.item.noResep&&(o=this.item.noResep);var l="";null!=this.item.jmlRows&&(l=this.item.jmlRows),this.cacheHelper.set("DaftarResepNonLayananCache",{0:e,1:t,2:i,3:o,4:n}),this.apiService.get("farmasi/get-daftar-resep-nonlayanan?namaPasien="+i+"&depoId="+a+"&tglAwal="+e+"&tglAkhir="+t+"&noResep="+o+"&jmlRows="+l).subscribe(e=>{var t=e.daftar;for(let o=0;o<t.length;o++){const e=t[o];e.no=o+1;var a=s(this.dateNow).format("YYYY-MM-DD"),n=s(new Date(e.tgllahir)).format("YYYY-MM-DD"),i=this.dateHelper.CountAge(new Date(n),new Date(a));e.umur=i.year+" thn "+i.month+" bln "+i.day+" hari"}this.dataTable=t})}cari(){this.loadData()}onRowSelect(e){null!=e.data&&(this.selected=e.data)}inputResepBaru(){this.router.navigate(["input-resep-nonlayanan","-"])}selectData(e){this.selected=e}ubahResep(){null!=this.selected?null==this.selected.nosbm?this.router.navigate(["input-resep-nonlayanan",this.selected.norec_resep]):this.alertService.warn("Info","Data Sudah Dibayar!"):this.alertService.warn("Info","Data Belum Dipilih!")}hapusResep(){null!=this.selected?null==this.selected.nosbm?this.apiService.post("farmasi/save-hapus-resep-nonlayanan",{norec_sp:this.selected.norec}).subscribe(e=>{this.apiService.postLog("Hapus Pelayanan Resep Non Layanan","Norec strukpelayanan",this.selected.norec,"Hapus Pelayanan Resep Non Layanan Dengan Noresep - "+this.selected.noresep+" atas Nama Pasien - "+this.selected.namapasien).subscribe(e=>{}),this.loadData()}):this.alertService.warn("Info","Data Sudah Dibayar!"):this.alertService.warn("Info","Data Belum Dipilih!")}returResep(){null!=this.selected?null==this.selected.nosbm?this.router.navigate(["retur-resep-nonlayanan",this.selected.norec_resep]):this.alertService.warn("Info","Data Sudah Dibayar!"):this.alertService.warn("Info","Data Belum Dipilih!")}ctkLabelIdentitas(){throw new Error("Method not implemented.")}ctkLabelResep(){throw new Error("Method not implemented.")}ctkResepObat(){throw new Error("Method not implemented.")}}return e.\u0275fac=function(t){return new(t||e)(r.Jb(c.a),r.Jb(c.b),r.Jb(o.a),r.Jb(o.h),r.Jb(b.a),r.Jb(p.a),r.Jb(d.a),r.Jb(i.a),r.Jb(i.f))},e.\u0275cmp=r.Db({type:e,selectors:[["app-daftar-resep-nonlayanan"]],features:[r.wb([o.a])],decls:45,vars:27,consts:[["header","Confirmation","icon","fa fa-question-circle"],[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[1,"p-grid"],[1,"p-col-12","p-md-10"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","ngModelChange"],[1,"p-col-12","p-md-3"],["placeholder","Ruangan","optionLabel","namaruangan",3,"options","ngModel","filter","showClear","ngModelChange"],["type","text","pInputText","","placeholder","Nomor Resep",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Nama Pasien",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-6"],["type","text","pInputText","","placeholder","Jml Rows",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-6",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",3,"click"],["styleClass","p-mb-4"],["pTemplate","left"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single","dataKey","norec_resep",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange","onRowSelect"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pButton","","type","submit","icon","fa fa-medkit","pTooltip","Input Resep Nonlayanan","label","Input Resep Baru",1,"p-mr-2",3,"click"],["label","Cetak","styleClass","p-button-help","icon","pi pi-print",3,"model"],["width","100px"],[2,"width","80px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],["label","","styleClass","p-button-help p-ml-auto","icon","pi pi-ellipsis-v","appendTo","body",3,"model","onDropdownClick"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain","p-mr-2",3,"pRowToggler","icon"],[3,"style",4,"ngFor","ngForOf"],["colspan","10"],[1,"p-p-3"],["dataKey","norec_resep",3,"value"]],template:function(e,t){1&e&&(r.Lb(0,"p-confirmDialog",0),r.Qb(1,"div",1),r.Qb(2,"div",2),r.Qb(3,"h4"),r.Jc(4,"Pelayanan Resep Bebas"),r.Pb(),r.Qb(5,"div",3),r.Qb(6,"div",4),r.Qb(7,"div",5),r.Qb(8,"div",4),r.Qb(9,"div",6),r.Qb(10,"label",7),r.Jc(11,"Periode Awal"),r.Pb(),r.Qb(12,"p-calendar",8),r.Yb("ngModelChange",function(e){return t.item.tglAwal=e}),r.Pb(),r.Pb(),r.Qb(13,"div",6),r.Qb(14,"label",7),r.Jc(15,"Periode Akhir"),r.Pb(),r.Qb(16,"p-calendar",8),r.Yb("ngModelChange",function(e){return t.item.tglAkhir=e}),r.Pb(),r.Pb(),r.Qb(17,"div",9),r.Qb(18,"label",7),r.Jc(19,"Depo"),r.Pb(),r.Qb(20,"p-dropdown",10),r.Yb("ngModelChange",function(e){return t.item.dataRuanganDepo=e}),r.Pb(),r.Pb(),r.Qb(21,"div",6),r.Qb(22,"label",7),r.Jc(23,"No Resep"),r.Pb(),r.Qb(24,"input",11),r.Yb("ngModelChange",function(e){return t.item.noResep=e})("keyup.enter",function(){return t.cari()}),r.Pb(),r.Pb(),r.Qb(25,"div",9),r.Qb(26,"label",7),r.Jc(27,"Nama Pasien "),r.Pb(),r.Qb(28,"input",12),r.Yb("ngModelChange",function(e){return t.item.namaPasien=e})("keyup.enter",function(){return t.cari()}),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(29,"div",6),r.Qb(30,"div",4),r.Qb(31,"div",13),r.Qb(32,"label",7),r.Jc(33,"jml Rows"),r.Pb(),r.Qb(34,"input",14),r.Yb("ngModelChange",function(e){return t.item.jmlRows=e})("keyup.enter",function(){return t.cari()}),r.Pb(),r.Pb(),r.Qb(35,"div",15),r.Qb(36,"button",16),r.Yb("click",function(){return t.cari()}),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(37,"div",3),r.Qb(38,"p-toolbar",17),r.Hc(39,y,2,1,"ng-template",18),r.Pb(),r.Qb(40,"p-table",19,20),r.Yb("selectionChange",function(e){return t.selected=e})("onRowSelect",function(e){return t.onRowSelect(e)}),r.Hc(42,x,5,1,"ng-template",21),r.Hc(43,M,6,9,"ng-template",22),r.Hc(44,Y,6,1,"ng-template",23),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&e&&(r.xb(12),r.ic("ngModel",t.item.tglAwal)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),r.xb(4),r.ic("ngModel",t.item.tglAkhir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),r.xb(4),r.ic("options",t.listRuanganDepo)("ngModel",t.item.dataRuanganDepo)("filter",!0)("showClear",!0),r.xb(4),r.ic("ngModel",t.item.noResep),r.xb(4),r.ic("ngModel",t.item.namaPasien),r.xb(6),r.ic("ngModel",t.item.jmlRows),r.xb(6),r.ic("columns",t.column)("value",t.dataTable)("selection",t.selected)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",r.mc(26,N))("paginator",!0)("pageLinks",5))},directives:[h.a,u.a,m.g,m.h,g.a,m.a,f.a,w.b,P.a,R.a,o.k,Q.h,v.a,n.k,Q.g,Q.f,Q.e,D.a,Q.d],styles:[""]}),e})()}];let I=(()=>{class e{}return e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({factory:function(t){return new(t||e)},imports:[[i.j.forChild(H)],i.j]}),e})();var T=a("PCNd");let B=(()=>{class e{}return e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({factory:function(t){return new(t||e)},imports:[[n.b,I,T.a]]}),e})()}}]);