(window.webpackJsonp=window.webpackJsonp||[]).push([[138],{"+kyB":function(e,i,t){"use strict";t.r(i),t.d(i,"SettingLoginUserModule",function(){return O});var n=t("ofXK"),a=t("tyNb"),o=t("7zfz"),l=t("fXoL"),r=t("EJUL"),s=t("U+s4"),b=t("G0w9"),p=t("ujBT"),c=t("dPl2"),d=t("7kUa"),u=t("rEr+"),g=t("arFO"),h=t("3Pt+"),m=t("7CaW"),f=t("jIHw"),P=t("xlun"),k=t("/RsI"),v=t("V5BG"),Q=t("Q4Mo"),M=t("Ji6n"),w=t("PU9F");function x(e,i){if(1&e){const e=l.Sb();l.Qb(0,"div",39),l.Qb(1,"button",40),l.Yb("click",function(){return l.yc(e),l.bc().tambah()}),l.Pb(),l.Pb()}}function C(e,i){if(1&e&&(l.Qb(0,"th",43),l.Jc(1),l.Lb(2,"p-sortIcon",44),l.Pb()),2&e){const e=i.$implicit;l.Fc("width: ",e.width,""),l.jc("pSortableColumn",e.field),l.xb(1),l.Lc(" ",e.header," "),l.xb(1),l.jc("field",e.field)}}function U(e,i){if(1&e&&(l.Qb(0,"tr"),l.Lb(1,"th",41),l.Hc(2,C,3,6,"th",42),l.Pb()),2&e){const e=i.$implicit;l.xb(2),l.ic("ngForOf",e)}}function y(e,i){if(1&e&&(l.Qb(0,"td"),l.Jc(1),l.Pb()),2&e){const e=i.$implicit,t=l.bc().$implicit;l.Fc("width: ",e.width,""),l.xb(1),l.Lc(" ",t[e.field]," ")}}function S(e,i){if(1&e){const e=l.Sb();l.Qb(0,"tr"),l.Qb(1,"td",41),l.Qb(2,"button",45),l.Yb("click",function(){l.yc(e);const t=i.$implicit;return l.bc().editUser(t)}),l.Pb(),l.Qb(3,"button",46),l.Yb("click",function(){l.yc(e);const t=i.$implicit;return l.bc().hapusUser(t)}),l.Pb(),l.Pb(),l.Hc(4,y,2,4,"td",47),l.Pb()}if(2&e){const e=i.columns;l.xb(4),l.ic("ngForOf",e)}}function T(e,i){if(1&e){const e=l.Sb();l.Qb(0,"div",50),l.Qb(1,"p-checkbox",51),l.Yb("ngModelChange",function(t){l.yc(e);const n=i.$implicit;return l.bc(2).item.mapRuangan[n.id]=t}),l.Pb(),l.Qb(2,"label",52),l.Jc(3),l.Pb(),l.Pb()}if(2&e){const e=i.$implicit,t=l.bc(2);l.xb(1),l.jc("inputId",e.id),l.ic("ngModel",t.item.mapRuangan[e.id]),l.xb(1),l.jc("for",e.id),l.xb(1),l.Lc(" ",e.namaruangan,"")}}function I(e,i){if(1&e&&(l.Qb(0,"div",48),l.Hc(1,T,4,4,"div",49),l.cc(2,"filter"),l.Pb()),2&e){const e=l.bc();l.xb(1),l.ic("ngForOf",l.ec(2,1,e.listRuangan,e.searchText))}}function F(e,i){if(1&e){const e=l.Sb();l.Qb(0,"div",50),l.Qb(1,"p-checkbox",53),l.Yb("ngModelChange",function(t){l.yc(e);const n=i.$implicit;return l.bc(2).item.mapModul[n.idCheck]=t}),l.Pb(),l.Qb(2,"label",52),l.Jc(3),l.Pb(),l.Pb()}if(2&e){const e=i.$implicit,t=l.bc(2);l.xb(1),l.jc("inputId",e.idCheck),l.ic("ngModel",t.item.mapModul[e.idCheck]),l.xb(1),l.jc("for",e.idCheck),l.xb(1),l.Lc(" ",e.namemodul,"")}}function J(e,i){if(1&e&&(l.Qb(0,"div",48),l.Hc(1,F,4,4,"div",49),l.cc(2,"filter"),l.Pb()),2&e){const e=l.bc();l.xb(1),l.ic("ngForOf",l.ec(2,1,e.listModul,e.searchText2))}}function L(e,i){if(1&e){const e=l.Sb();l.Qb(0,"button",54),l.Yb("click",function(){return l.yc(e),l.bc().simpanUser()}),l.Pb(),l.Qb(1,"button",55),l.Yb("click",function(){return l.yc(e),l.bc().pop_User=!1}),l.Pb()}if(2&e){const e=l.bc();l.ic("disabled",e.isSimpan)}}const Y=function(){return[5,10,25,50]},H=function(){return["namauser","namalengkap","kelompokuser"]},K=function(){return{width:"900px",minWidth:"900px"}},j=[{path:"",component:(()=>{class e{constructor(e,i,t,n,a,o,l,r,s){this.apiService=e,this.authService=i,this.confirmationService=t,this.messageService=n,this.cacheHelper=a,this.dateHelper=o,this.alertService=l,this.route=r,this.router=s,this.item={mapModul:[],mapRuangan:[],mapModul2:[]},this.pop_User=!1,this.isSimpan=!1,this.indexTab=0,this.searchText="",this.searchText2="",this.listModul=[],this.listRuangan=[],this.ruanganDef=[],this.modulDef=[]}ngOnInit(){this.loadColumn(),this.loadCombo(),this.loadData()}loadCombo(){this.apiService.get("sysadmin/general/get-combo-user").subscribe(e=>{this.d_KelompokUser=e.kelompokuser,this.d_Profile=e.profile;for(let i=0;i<e.modulaplikasi.length;i++){const t=e.modulaplikasi[i];t.name=t.modulaplikasi,t.idCheck=parseFloat(t.id+".10"),t.namemodul="Modul - "+t.modulaplikasi}for(let i=0;i<e.ruangan.length;i++){const t=e.ruangan[i];t.name=t.namaruangan}this.listRuangan=e.ruangan,this.listModul=e.modulaplikasi,this.item.profile=e.profile[0]})}loadData(){this.apiService.get("sysadmin/general/get-daftar-user").subscribe(e=>{for(let i=0;i<e.data.length;i++)e.data[i].no=i+1;this.dataSource=e.data,this.d_LoginUser=e.data})}loadColumn(){this.column=[{field:"no",header:"No",width:"40px"},{field:"namauser",header:"Nama User",width:"200px"},{field:"namalengkap",header:"Pegawai",width:"250px"},{field:"kelompokuser",header:"Kelompok User",width:"150px"}]}editUser(e){var i=e;this.item.idlogin=i.id,this.item.namaUser=i.namauser,this.item.kelompokUser={id:i.objectkelompokuserfk,kelompokuser:i.kelompokuser},this.item.pegawai={id:i.objectpegawaifk,namalengkap:i.namalengkap},this.pop_User=!0}hapusUser(e){this.apiService.post("sysadmin/general/delete-new-user",{id:e.id}).subscribe(e=>{this.loadData()})}tambah(){this.pop_User=!0,this.clearUser()}simpanUser(){null!=this.item.namaUser?null!=this.item.kataKunciPass?this.item.kataKunciPass==this.item.kataKunciConfirm?null!=this.item.kelompokUser?null!=this.item.pegawai?null!=this.item.profile?this.apiService.post("sysadmin/general/save-new-user",{id:null!=this.item.idlogin?this.item.idlogin:"",katasandi:this.item.kataKunciPass,namauser:this.item.namaUser,objectkelompokuserfk:this.item.kelompokUser.id,objectpegawaifk:this.item.pegawai.id,waktuberakhir:null,kdprofile:this.item.profile.id}).subscribe(e=>{this.pop_User=!1,this.loadData(),this.clearUser()}):this.alertService.error("Info","Profile User Harus di isi"):this.alertService.error("Info","Pegawai Harus di isi"):this.alertService.error("Info","Kelompok User Harus di isi"):this.alertService.error("Info","Kata Sandi tidak sama"):this.alertService.error("Info","Kata Sandi Harus di isi"):this.alertService.error("Info","Nama User Harus di isi")}clearUser(){delete this.item.idlogin,delete this.item.namaUser,delete this.item.kelompokUser,delete this.item.pegawai,delete this.item.kataKunciPass,delete this.item.kataKunciConfirm}filterPegawai(e){this.apiService.get("sysadmin/general/get-pegawai-part?namalengkap="+e.query).subscribe(e=>{this.d_Pegawai=e})}handleChangeTab(e){this.indexTab=e.index,this.loadData()}clearFilter(){this.searchText=""}clearFilter2(){this.searchText2=""}saveMapRuangan(){if(null!=this.item.loginUser)if(0!=this.item.mapRuangan.length){for(var e=Object.keys(this.item.mapRuangan),i=[],t=e.length-1;t>=0;t--)1==this.item.mapRuangan[e[t]]&&i.push({ruanganid:parseInt(e[t])});this.apiService.post("sysadmin/general/save-map-login-to-ruangan",{loginid:this.item.loginUser.id,ruangan:i}).subscribe(e=>{})}else this.alertService.warn("Info","Belum ada ruangan yang dipilih");else this.alertService.warn("Info","Login User belum dipilih")}changeUser(e){this.item.mapModul=[],this.item.mapRuangan=[],null!=e.value&&(this.apiService.get("sysadmin/general/get-map-loginruangan?loginuseridfk="+e.value.id).subscribe(e=>{this.item.mapRuangan=[],this.alertService.info("Info",e.length+" Ruangan Terpilih");for(let i=0;i<e.length;i++)this.item.mapRuangan[e[i].ruanganidfk]=!0}),this.apiService.get("sysadmin/general/get-map-loginmodul?loginuseridfk="+e.value.id).subscribe(e=>{this.item.mapModul=[],this.alertService.info("Info",e.length+" Modul Terpilih");for(let i=0;i<e.length;i++){const t=e[i];t.idCheck=parseFloat(t.objectmodulaplikasifk+".10"),this.item.mapModul[t.idCheck]=!0}}))}saveModul(){if(null!=this.item.loginUser){for(var e=Object.keys(this.item.mapModul),i=[],t=e.length-1;t>=0;t--)if(1==this.item.mapModul[e[t]]){let n=e[t].split(".");i.push({objectmodulaplikasifk:parseInt(n[0])})}0!=i.length?this.apiService.post("sysadmin/general/save-map-login-to-modul",{objectloginuserfk:this.item.loginUser.id,details:i}).subscribe(e=>{}):this.alertService.warn("Info","Belum ada Modul yang dipilih")}else this.alertService.warn("Info","Login User belum dipilih")}}return e.\u0275fac=function(i){return new(i||e)(l.Jb(r.a),l.Jb(r.b),l.Jb(o.a),l.Jb(o.h),l.Jb(s.a),l.Jb(b.a),l.Jb(p.a),l.Jb(a.a),l.Jb(a.f))},e.\u0275cmp=l.Db({type:e,selectors:[["app-setting-login-user"]],features:[l.wb([o.a])],decls:83,vars:45,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-grid"],[1,"p-col-12","p-md-12"],[3,"onChange"],["header","Login User","leftIcon","fa fa-users"],[1,"p-col-12","p-md-4"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Pencarian ",3,"input"],[1,"p-col-12"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","globalFilterFields","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Mapping User","leftIcon","pi pi-sitemap"],["for","input",1,"label"],["placeholder","Login User","optionLabel","namauser",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],[1,"p-col-12","p-md-6"],["header","Map To Ruangan",3,"toggleable"],["pInputText","","type","text","placeholder","Filter",3,"ngModel","ngModelChange"],[1,"p-col-12","p-md-1"],["pButton","","type","button","icon","pi pi-times","pTooltip","Clear Filter",1,"p-button","p-button-danger","p-mr-2",3,"click"],["class","p-grid","style","overflow: auto; height: 250px;padding: 20px;",4,"ngIf"],[1,"p-grid",2,"margin-top","10px"],[1,"p-col-12","p-md-2","p-md-offset-10"],["pButton","","type","button","icon","pi pi-save","label","Simpan",1,"p-button","p-mr-2",3,"click"],["header","Map To Modul",3,"toggleable"],["header","Tambah User ",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"p-fluid","p-grid"],["header","Detail User",3,"toggleable"],["type","text","pInputText","","placeholder","Nama User ",3,"ngModel","ngModelChange"],["type","password","pInputText","","placeholder","Kata Sandi ",3,"ngModel","ngModelChange"],["type","password","pInputText","","placeholder","Ulangi Kata Sandi ",3,"ngModel","ngModelChange"],["placeholder","Profile","optionLabel","namalengkap","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange"],["placeholder","Kelompok User","optionLabel","kelompokuser","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange"],["field","namalengkap","placeholder","Pegawai","appendTo","body",3,"ngModel","suggestions","dropdown","ngModelChange","completeMethod"],["pTemplate","footer"],[1,"p-d-flex"],["type","button","pButton","","pRipple","","icon","pi pi-plus","pTooltip","Tambah ","tooltipPosition","bottom",1,"p-button-success","p-mr-2",3,"click"],[2,"width","80px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],["pButton","","type","button","icon","pi pi-user-edit","pTooltip","Edit ","label","",1,"p-button-rounded","p-mr-2",3,"click"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus ","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"],[1,"p-grid",2,"overflow","auto","height","250px","padding","20px"],["class","p-col-12 p-field-checkbox",4,"ngFor","ngForOf"],[1,"p-col-12","p-field-checkbox"],["binary","true","name","group1",3,"ngModel","inputId","ngModelChange"],[3,"for"],["binary","true",3,"ngModel","inputId","ngModelChange"],["pButton","","icon","pi pi-save","label","Simpan",1,"p-button","p-button-success","p-mr-2",3,"disabled","click"],["pButton","","icon","fa fa-refresh","label","Batal",1,"p-button","p-mr-2",3,"click"]],template:function(e,i){if(1&e){const e=l.Sb();l.Qb(0,"div",0),l.Qb(1,"div",1),l.Qb(2,"h4"),l.Jc(3,"Setting Login User"),l.Pb(),l.Qb(4,"div",2),l.Qb(5,"div",3),l.Qb(6,"p-tabView",4),l.Yb("onChange",function(e){return i.handleChangeTab(e)}),l.Qb(7,"p-tabPanel",5),l.Qb(8,"div",2),l.Qb(9,"div",6),l.Qb(10,"span",7),l.Lb(11,"i",8),l.Qb(12,"input",9),l.Yb("input",function(i){return l.yc(e),l.wc(15).filterGlobal(i.target.value,"contains")}),l.Pb(),l.Pb(),l.Pb(),l.Qb(13,"div",10),l.Qb(14,"p-table",11,12),l.Yb("selectionChange",function(e){return i.selectedGrid=e}),l.Hc(16,x,2,0,"ng-template",13),l.Hc(17,U,3,1,"ng-template",14),l.Hc(18,S,5,1,"ng-template",15),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(19,"p-tabPanel",16),l.Qb(20,"div",2),l.Qb(21,"div",3),l.Qb(22,"div",2),l.Qb(23,"div",6),l.Qb(24,"label",17),l.Jc(25,"Login User"),l.Pb(),l.Qb(26,"p-dropdown",18),l.Yb("ngModelChange",function(e){return i.item.loginUser=e})("onChange",function(e){return i.changeUser(e)}),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(27,"div",19),l.Qb(28,"p-panel",20),l.Qb(29,"div",2),l.Qb(30,"div",6),l.Qb(31,"span",7),l.Lb(32,"i",8),l.Qb(33,"input",21),l.Yb("ngModelChange",function(e){return i.searchText=e}),l.Pb(),l.Pb(),l.Pb(),l.Qb(34,"div",22),l.Qb(35,"button",23),l.Yb("click",function(){return i.clearFilter()}),l.Pb(),l.Pb(),l.Hc(36,I,3,4,"div",24),l.Pb(),l.Qb(37,"div",25),l.Qb(38,"div",26),l.Qb(39,"button",27),l.Yb("click",function(){return i.saveMapRuangan()}),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(40,"div",19),l.Qb(41,"p-panel",28),l.Qb(42,"div",2),l.Qb(43,"div",6),l.Qb(44,"span",7),l.Lb(45,"i",8),l.Qb(46,"input",21),l.Yb("ngModelChange",function(e){return i.searchText2=e}),l.Pb(),l.Pb(),l.Pb(),l.Qb(47,"div",22),l.Qb(48,"button",23),l.Yb("click",function(){return i.clearFilter2()}),l.Pb(),l.Pb(),l.Hc(49,J,3,4,"div",24),l.Pb(),l.Qb(50,"div",25),l.Qb(51,"div",26),l.Qb(52,"button",27),l.Yb("click",function(){return i.saveModul()}),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(53,"p-dialog",29),l.Yb("visibleChange",function(e){return i.pop_User=e}),l.Qb(54,"div",30),l.Qb(55,"div",3),l.Qb(56,"p-panel",31),l.Qb(57,"div",2),l.Qb(58,"div",6),l.Qb(59,"label",17),l.Jc(60,"Nama User "),l.Pb(),l.Qb(61,"input",32),l.Yb("ngModelChange",function(e){return i.item.namaUser=e}),l.Pb(),l.Pb(),l.Qb(62,"div",6),l.Qb(63,"label",17),l.Jc(64,"Kata Sandi "),l.Pb(),l.Qb(65,"input",33),l.Yb("ngModelChange",function(e){return i.item.kataKunciPass=e}),l.Pb(),l.Pb(),l.Qb(66,"div",6),l.Qb(67,"label",17),l.Jc(68,"Ulangi Kata Sandi "),l.Pb(),l.Qb(69,"input",34),l.Yb("ngModelChange",function(e){return i.item.kataKunciConfirm=e}),l.Pb(),l.Pb(),l.Qb(70,"div",6),l.Qb(71,"label",17),l.Jc(72,"Profile"),l.Pb(),l.Qb(73,"p-dropdown",35),l.Yb("ngModelChange",function(e){return i.item.profile=e}),l.Pb(),l.Pb(),l.Qb(74,"div",6),l.Qb(75,"label",17),l.Jc(76,"Kelompok User"),l.Pb(),l.Qb(77,"p-dropdown",36),l.Yb("ngModelChange",function(e){return i.item.kelompokUser=e}),l.Pb(),l.Pb(),l.Qb(78,"div",6),l.Qb(79,"label",17),l.Jc(80,"Pegawai"),l.Pb(),l.Qb(81,"p-autoComplete",37),l.Yb("ngModelChange",function(e){return i.item.pegawai=e})("completeMethod",function(e){return i.filterPegawai(e)}),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Hc(82,L,2,1,"ng-template",38),l.Pb()}2&e&&(l.xb(14),l.ic("columns",i.column)("value",i.dataSource)("selection",i.selectedGrid)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",l.mc(42,Y))("paginator",!0)("pageLinks",5)("globalFilterFields",l.mc(43,H)),l.xb(12),l.ic("options",i.d_LoginUser)("ngModel",i.item.loginUser)("filter",!0)("showClear",!0),l.xb(2),l.ic("toggleable",!0),l.xb(5),l.ic("ngModel",i.searchText),l.xb(3),l.ic("ngIf",i.listRuangan.length>0),l.xb(5),l.ic("toggleable",!0),l.xb(5),l.ic("ngModel",i.searchText2),l.xb(3),l.ic("ngIf",i.listModul.length>0),l.xb(4),l.Ec(l.mc(44,K)),l.ic("visible",i.pop_User)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!0),l.xb(3),l.ic("toggleable",!0),l.xb(5),l.ic("ngModel",i.item.namaUser),l.xb(4),l.ic("ngModel",i.item.kataKunciPass),l.xb(4),l.ic("ngModel",i.item.kataKunciConfirm),l.xb(4),l.ic("options",i.d_Profile)("ngModel",i.item.profile)("filter",!0)("showClear",!0),l.xb(4),l.ic("options",i.d_KelompokUser)("ngModel",i.item.kelompokUser)("filter",!0)("showClear",!0),l.xb(4),l.ic("ngModel",i.item.pegawai)("suggestions",i.d_Pegawai)("dropdown",!0))},directives:[c.b,c.a,d.a,u.h,o.k,g.a,h.g,h.h,m.a,h.a,f.b,P.a,n.l,k.a,v.a,Q.a,n.k,u.g,u.f,M.a],pipes:[w.a],styles:[".p-field-checkbox[_ngcontent-%COMP%], .p-field-radiobutton[_ngcontent-%COMP%]{margin-bottom:0;display:flex;align-items:center}"]}),e})()}];let R=(()=>{class e{}return e.\u0275mod=l.Hb({type:e}),e.\u0275inj=l.Gb({factory:function(i){return new(i||e)},imports:[[a.j.forChild(j)],a.j]}),e})();var _=t("PCNd");let O=(()=>{class e{}return e.\u0275mod=l.Hb({type:e}),e.\u0275inj=l.Gb({factory:function(i){return new(i||e)},imports:[[n.b,R,_.a]]}),e})()}}]);