!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"8kWx":function(i,n,a){"use strict";a.d(n,"a",function(){return $});var o=a("fXoL"),r=a("By0h"),c=a("EJUL"),l=a("7zfz"),s=a("U+s4"),u=a("G0w9"),p=a("ujBT"),b=a("tyNb"),d=a("dPl2"),m=a("rEr+"),h=a("ofXK"),f=a("7kUa"),g=a("jIHw"),v=a("xlun"),P=a("Q4Mo"),k=a("jeV5"),y=a("b1Ni"),x=a("PU9F");function w(e,t){if(1&e){var i=o.Sb();o.Qb(0,"div",15),o.Qb(1,"div",16),o.Qb(2,"span",17),o.Lb(3,"i",18),o.Qb(4,"input",19),o.Yb("input",function(e){return o.yc(i),o.bc(),o.wc(10).filterGlobal(e.target.value,"contains")}),o.Pb(),o.Pb(),o.Pb(),o.Qb(5,"div",20),o.Qb(6,"button",21),o.Yb("click",function(){return o.yc(i),o.bc().buatBaru()}),o.Pb(),o.Pb(),o.Pb()}}function R(e,t){if(1&e&&(o.Qb(0,"th",24),o.Jc(1),o.Lb(2,"p-sortIcon",25),o.Pb()),2&e){var i=t.$implicit;o.Fc("width: ",i.width,""),o.jc("pSortableColumn",i.field),o.xb(1),o.Lc(" ",i.header," "),o.xb(1),o.jc("field",i.field)}}function M(e,t){if(1&e&&(o.Qb(0,"tr"),o.Lb(1,"th",22),o.Hc(2,R,3,6,"th",23),o.Pb()),2&e){var i=t.$implicit;o.xb(2),o.ic("ngForOf",i)}}function T(e,t){if(1&e&&(o.Qb(0,"span"),o.Jc(1),o.Pb()),2&e){var i=o.bc().$implicit,n=o.bc().$implicit,a=o.bc();o.xb(1),o.Lc(" ",a.formatRupiah(n[i.field],""),"")}}function Q(e,t){if(1&e&&(o.Qb(0,"span"),o.Jc(1),o.Pb()),2&e){var i=o.bc().$implicit,n=o.bc().$implicit;o.xb(1),o.Lc(" ",n[i.field],"")}}function S(e,t){if(1&e&&(o.Qb(0,"td"),o.Hc(1,T,2,1,"span",30),o.Hc(2,Q,2,1,"span",30),o.Pb()),2&e){var i=t.$implicit;o.Fc("width: ",i.width,""),o.xb(1),o.ic("ngIf",null!=i.isCurrency),o.xb(1),o.ic("ngIf",null==i.isCurrency)}}function E(e,t){if(1&e){var i=o.Sb();o.Qb(0,"tr"),o.Qb(1,"td",22),o.Lb(2,"button",26),o.Qb(3,"button",27),o.Yb("click",function(){o.yc(i);var e=t.$implicit;return o.bc().hapusPengkajian(e)}),o.Pb(),o.Qb(4,"button",28),o.Yb("click",function(){o.yc(i);var e=t.$implicit;return o.bc().editD(e)}),o.Pb(),o.Pb(),o.Hc(5,S,3,5,"td",29),o.Pb()}if(2&e){var n=t.$implicit,a=t.columns,r=t.expanded;o.xb(2),o.ic("pRowToggler",n)("icon",r?"pi pi-chevron-down":"pi pi-chevron-right"),o.xb(3),o.ic("ngForOf",a)}}function F(e,t){1&e&&(o.Qb(0,"tr"),o.Qb(1,"th"),o.Jc(2,"Form Yang terisi"),o.Pb(),o.Pb())}function C(e,t){if(1&e){var i=o.Sb();o.Qb(0,"span"),o.Jc(1),o.Qb(2,"button",27),o.Yb("click",function(){o.yc(i);var e=t.$implicit;return o.bc(3).hapusForm(e)}),o.Pb(),o.Qb(3,"button",35),o.Yb("click",function(){o.yc(i);var e=t.$implicit;return o.bc(3).asupKaForm(e)}),o.Pb(),o.Pb()}if(2&e){var n=t.$implicit;o.zb("order-badge order-instock"),o.xb(1),o.Lc(" ",n.namaform," ")}}function D(e,t){if(1&e&&(o.Qb(0,"tr"),o.Hc(1,C,4,3,"span",34),o.Pb()),2&e){var i=t.$implicit;o.xb(1),o.ic("ngForOf",i.details)}}function H(e,t){if(1&e&&(o.Qb(0,"tr"),o.Qb(1,"td",31),o.Qb(2,"div",32),o.Qb(3,"p-table",33),o.Hc(4,F,3,0,"ng-template",9),o.Hc(5,D,2,1,"ng-template",10),o.Pb(),o.Pb(),o.Pb(),o.Pb()),2&e){var i=t.$implicit;o.xb(3),o.ic("value",i.details)}}function j(e,t){1&e&&o.Lb(0,"p-skeleton",36)}var L=function(){return{"overflow-x":"auto","overflow-y":"hidden",position:"static"}};function I(e,t){if(1&e&&(o.Lb(0,"p-menubar",37),o.cc(1,"filter")),2&e){var i=o.bc();o.Ec(o.mc(6,L)),o.ic("model",o.ec(1,3,i.treeSourceMenu,i.searchText))}}var J=function(){return[5,10,25,50]},O=function(){return["namaPelayanan"]},$=function(){var i=function(){function i(t,n,a,o,r,c,l,s,u){e(this,i),this.rekamMedis=t,this.apiService=n,this.authService=a,this.confirmationService=o,this.cacheHelper=r,this.dateHelper=c,this.alertService=l,this.activeRoute=s,this.router=u,this.item={tglPelayanan:new Date,layanan:[]},this.listProdukCek=[],this.produkDef=[],this.listRuanganTujuan=[],this.skeleton=[],this.searchText="",this.selected_count=0,this.selected_games=[],this.listChecked=[],this.dataSourceRiwayat=[],this.treeSourceMenu=[],this.headData={},this.nomorERM="-",this.navDetailForm="emr-detail-form",this.paramEMR="asesmen",this.defaultFormTujuan=210080}var n,a,o;return n=i,(a=[{key:"ngAfterViewInit",value:function(){}},{key:"ngOnInit",value:function(){if(null==this.rekamMedis.header.norec){var e=this.cacheHelper.get("cacheEMR_qwertyuiop");null!=e&&(e=JSON.parse(e),this.headData=e)}else this.headData=this.rekamMedis.header;null==this.headData.norec&&window.history.back(),this.item.idPegawaiLogin=this.authService.getDataLoginUser().pegawai.id,this.columnRiwayatPengkajian=[{field:"tglemr",header:"Tgl EMR",width:"100px"},{field:"noemr",header:"No EMR",width:"100px"},{field:"noregistrasi",header:"No Registrasi",width:"100px"},{field:"namaruangan",header:"Ruangan",width:"150px"}],this.loadRiwayatEMR()}},{key:"handleChangeTab",value:function(e){this.indexTab=e.index,0==e.index?(this.loadRiwayatEMR(),console.log(this.activeRoute)):1==e.index&&this.loadTreeView()}},{key:"buatBaru",value:function(){this.indexTab=1,this.handleChangeTab({index:this.indexTab}),this.router.navigate([this.navDetailForm,this.defaultFormTujuan,"-"],{relativeTo:this.activeRoute}),this.nomorERM="-"}},{key:"editD",value:function(e){this.nomorERM=e.noemr,this.indexTab=1,this.handleChangeTab({index:this.indexTab}),this.router.navigate([this.navDetailForm,this.defaultFormTujuan,e.noemr],{relativeTo:this.activeRoute})}},{key:"hapusPengkajian",value:function(e){var t=this;this.nomorERM="-",this.apiService.post("emr/hapus-emr-transaksi-norec",{norec:e.norec}).subscribe(function(e){t.loadRiwayatEMR(),t.apiService.postLog("Hapus EMR","norec emrpasien_t",e.norec,"Hapus No EMR - "+e.emrpasienfk+" pada No Registrasi  "+t.headData.noregistrasi+" - Pasien : "+t.headData.namapasien).subscribe(function(e){})})}},{key:"asupKaForm",value:function(e){this.nomorERM=e.emrpasienfk,this.indexTab=1,this.handleChangeTab({index:this.indexTab}),this.router.navigate([this.navDetailForm,e.emrfk,e.emrpasienfk],{relativeTo:this.activeRoute})}},{key:"hapusForm",value:function(e){var t=this,i={noemr:e.noemr,reportdisplay:e.reportdisplay,idemr:e.emrfk,norec:e.norec,idpegawai:this.authService.getPegawaiId()};this.apiService.post("emr/disable-emr-details",i).subscribe(function(i){t.apiService.postLog("Hapus EMR","norec emrpasien_t",e.norec,"Hapus Satu Form EMR ( "+e.namaform+" ) No EMR - "+e.noemr+" pada No Registrasi  "+t.headData.noregistrasi+" - Pasien : "+t.headData.namapasien).subscribe(function(e){})})}},{key:"loadTreeView",value:function(){var e=this;this.treeSourceMenu=[],this.isLoadingNav=!0,this.apiService.get("emr/get-menu-rekam-medis-dynamic?namaemr="+this.paramEMR).subscribe(function(t){e.isLoadingNav=!1;for(var i=0;i<t.data.length;i++){var n=t.data[i];if(n.name=n.label,null==n.items)n.command=function(t){t.node=t.item,e.nodeSelect(t)};else for(var a=0;a<n.items.length;a++){var o=n.items[a];if(o.name=o.label,null==o.items)o.command=function(t){t.node=t.item,e.nodeSelect(t)};else for(var r=0;r<o.items.length;r++){var c=o.items[r];if(c.name=c.label,null==c.items)c.command=function(t){t.node=t.item,e.nodeSelect(t)};else for(var l=0;l<c.items.length;l++){var s=c.items[l];if(s.name=s.label,null==s.items)s.command=function(t){t.node=t.item,e.nodeSelect(t)};else for(var u=0;u<s.items.length;u++){var p=s.items[u];p.name=p.label,null==p.items&&(p.command=function(t){t.node=t.item,e.nodeSelect(t)})}}}}n.icon="pi pi-fw pi-bars"}e.treeSourceMenu=t.data})}},{key:"nodeSelect",value:function(e){var t=e.node.reportdisplay;this.router.navigate(null==t?[this.navDetailForm,e.node.id,this.nomorERM]:[t],{relativeTo:this.activeRoute})}},{key:"loadRiwayatEMR",value:function(){var e=this;this.apiService.get("emr/get-emr-transaksi-detail-form?noregistrasi="+this.headData.noregistrasi+"&jenisEmr="+this.paramEMR).subscribe(function(t){e.dataSourcePengkajian=t.data})}}])&&t(n.prototype,a),o&&t(n,o),i}();return i.\u0275fac=function(e){return new(e||i)(o.Jb(r.a),o.Jb(c.a),o.Jb(c.b),o.Jb(l.a),o.Jb(s.a),o.Jb(u.a),o.Jb(p.a),o.Jb(b.a),o.Jb(b.f))},i.\u0275cmp=o.Db({type:i,selectors:[["app-emr-detail"]],decls:22,vars:15,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[3,"activeIndex","onChange","activeIndexChange"],["header","Riwayat ","leftIcon","fa fa-list"],[1,"p-grid"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","dataKey","norec","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","globalFilterFields","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["header","Input EMR","leftIcon","pi pi-th-large"],["height","3rem",4,"ngIf"],["appendTo","p-grid",3,"model","style",4,"ngIf"],[1,"table-header","p-grid"],[1,"p-col-12","p-md-3"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Filter",3,"input"],[1,"p-col-12","p-md-2","p-md-offset-7"],["pButton","","type","button","icon","pi pi-plus","pTooltip","Buat Pengkajian Baru ","label","Tambah",1,"p-button","p-mr-2",3,"click"],[2,"width","80px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain","p-mr-2",3,"pRowToggler","icon"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus Data","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],["pButton","","type","button","icon","pi pi-check-circle","pTooltip","Edit Data","label","",1,"p-button-rounded","p-button-success","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","5"],[1,"p-p-3"],["dataKey","norec",3,"value"],[3,"class",4,"ngFor","ngForOf"],["pButton","","type","button","icon","pi pi-check-circle","pTooltip","Masuk Ke Form (Edit)","label","",1,"p-button-rounded","p-button-success","p-mr-2",3,"click"],["height","3rem"],["appendTo","p-grid",3,"model"]],template:function(e,t){1&e&&(o.Qb(0,"div",0),o.Qb(1,"div",1),o.Qb(2,"h4"),o.Jc(3,"EMR"),o.Pb(),o.Qb(4,"div",2),o.Qb(5,"p-tabView",3),o.Yb("onChange",function(e){return t.handleChangeTab(e)})("activeIndexChange",function(e){return t.indexTab=e}),o.Qb(6,"p-tabPanel",4),o.Qb(7,"div",5),o.Qb(8,"div",2),o.Qb(9,"p-table",6,7),o.Yb("selectionChange",function(e){return t.selectedData=e}),o.Hc(11,w,7,0,"ng-template",8),o.Hc(12,M,3,1,"ng-template",9),o.Hc(13,E,6,3,"ng-template",10),o.Hc(14,H,6,1,"ng-template",11),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Qb(15,"p-tabPanel",12),o.Qb(16,"div",5),o.Qb(17,"div",2),o.Hc(18,j,1,0,"p-skeleton",13),o.Hc(19,I,2,7,"p-menubar",14),o.Pb(),o.Qb(20,"div",2),o.Lb(21,"router-outlet"),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb()),2&e&&(o.xb(5),o.ic("activeIndex",t.indexTab),o.xb(4),o.ic("columns",t.columnRiwayatPengkajian)("value",t.dataSourcePengkajian)("selection",t.selectedData)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",o.mc(13,J))("paginator",!0)("pageLinks",5)("globalFilterFields",o.mc(14,O)),o.xb(9),o.ic("ngIf",0==t.treeSourceMenu.length),o.xb(1),o.ic("ngIf",t.treeSourceMenu.length>0))},directives:[d.b,d.a,m.h,l.k,h.l,b.k,f.a,g.b,v.a,h.k,m.g,m.f,P.a,m.d,k.a,y.a],pipes:[x.a],styles:[".p-field-checkbox[_ngcontent-%COMP%], .p-field-radiobutton[_ngcontent-%COMP%]{margin-bottom:0;display:flex;align-items:center}.order-badge.order-instock[_ngcontent-%COMP%]{background:#c8e6c9;color:#256029;margin-right:2px;color:#000;border-radius:15px;border:1px solid;padding:2px 7px;font-family:inherit;line-height:1.72em;text-align:center;text-decoration:none;background-color:#fff;display:inline-block;min-width:78px;vertical-align:middle;margin-top:5px}.p-menubar[_ngcontent-%COMP%]   .p-menuitem.p-menuitem-active[_ngcontent-%COMP%] > .p-menuitem-link[_ngcontent-%COMP%]{background:#e9ecef;position:static}"]}),i}()},"xBt/":function(t,i,n){"use strict";n.r(i),n.d(i,"EmrDetailModule",function(){return d});var a,o,r=n("ofXK"),c=n("tyNb"),l=n("8kWx"),s=n("fXoL"),u=[{path:"",component:l.a,children:[{path:"emr-detail-form/:namaEMR/:nomorEMR",loadChildren:function(){return n.e(33).then(n.bind(null,"Bvzc")).then(function(e){return e.EmrDetailFormModule})}}]}],p=((a=function t(){e(this,t)}).\u0275mod=s.Hb({type:a}),a.\u0275inj=s.Gb({factory:function(e){return new(e||a)},imports:[[c.j.forChild(u)],c.j]}),a),b=n("PCNd"),d=((o=function t(){e(this,t)}).\u0275mod=s.Hb({type:o}),o.\u0275inj=s.Gb({factory:function(e){return new(e||o)},imports:[[r.b,p,b.a]]}),o)}}])}();