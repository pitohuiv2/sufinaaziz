(window.webpackJsonp=window.webpackJsonp||[]).push([[113],{i7Li:function(e,t,a){"use strict";a.r(t),a.d(t,"LaporanSensusPasienModule",function(){return S});var i=a("ofXK"),n=a("tyNb"),l=a("7zfz"),o=a("1zoS"),r=a("wd/R"),s=a("fXoL"),d=a("EJUL"),p=a("U+s4"),c=a("G0w9"),h=a("ujBT"),b=a("eO1q"),m=a("3Pt+"),u=a("arFO"),g=a("lVkt"),f=a("jIHw"),w=a("xlun"),P=a("rEr+"),v=a("Q4Mo");function x(e,t){if(1&e){const e=s.Sb();s.Qb(0,"div",20),s.Qb(1,"button",21),s.Yb("click",function(){return s.yc(e),s.bc().exportExcel()}),s.Pb(),s.Pb()}}function k(e,t){if(1&e&&(s.Qb(0,"th",23),s.Jc(1),s.Lb(2,"p-sortIcon",24),s.Pb()),2&e){const e=t.$implicit;s.Fc("width: ",e.width,""),s.jc("pSortableColumn",e.field),s.xb(1),s.Lc(" ",e.header," "),s.xb(1),s.jc("field",e.field)}}function D(e,t){if(1&e&&(s.Qb(0,"tr"),s.Hc(1,k,3,6,"th",22),s.Pb()),2&e){const e=t.$implicit;s.xb(1),s.ic("ngForOf",e)}}function M(e,t){if(1&e&&(s.Qb(0,"span"),s.Jc(1),s.Pb()),2&e){const e=s.bc().$implicit,t=s.bc().$implicit,a=s.bc();s.xb(1),s.Lc(" ",a.formatRupiah(t[e.field],"")," ")}}function Q(e,t){if(1&e&&(s.Qb(0,"span"),s.Jc(1),s.Pb()),2&e){const e=s.bc().$implicit,t=s.bc().$implicit;s.xb(1),s.Lc(" ",t[e.field],"")}}function C(e,t){if(1&e&&(s.Qb(0,"td"),s.Hc(1,M,2,1,"span",27),s.Hc(2,Q,2,1,"span",27),s.Pb()),2&e){const e=t.$implicit;s.Fc("width: ",e.width,""),s.xb(1),s.ic("ngIf",null!=e.isCurrency),s.xb(1),s.ic("ngIf",null==e.isCurrency)}}function R(e,t){if(1&e&&(s.Qb(0,"tr",25),s.Hc(1,C,3,5,"td",26),s.Pb()),2&e){const e=t.columns,a=t.rowIndex;s.ic("pSelectableRow",t.$implicit)("pSelectableRowIndex",a),s.xb(1),s.ic("ngForOf",e)}}const Y=function(){return[5,10,25,50]},T=[{path:"",component:(()=>{class e{constructor(e,t,a,i,n,l,o,r,s){this.apiService=e,this.authService=t,this.confirmationService=a,this.messageService=i,this.cacheHelper=n,this.dateHelper=l,this.alertService=o,this.route=r,this.router=s,this.dataTable=[],this.item={}}ngOnInit(){this.column=[{field:"no",header:"No",width:"65px"},{field:"namaruangan",header:"Ruangan",width:"180px"},{field:"tglmasuk",header:"Tgl Masuk",width:"140px"},{field:"norm",header:"No RM",width:"140px"},{field:"noregistrasi",header:"Noregistrasi",width:"140px"},{field:"namapasien",header:"Nama Pasien",width:"250px"},{field:"jk_l",header:"L",width:"85px"},{field:"jk_p",header:"P",width:"85px"},{field:"umur",header:"Umur",width:"180px"},{field:"alamatlengkap",header:"Alamat",width:"250px"},{field:"kelompokpasien",header:"Cara Bayar",width:"150px"},{field:"baru",header:"Baru",width:"85px"},{field:"lama",header:"Lama",width:"85px"},{field:"tekanandarah",header:"Tekanan Darah",width:"150px"},{field:"bb_tb",header:"BB/TB",width:"140px"},{field:"keluhan",header:"Keluhan",width:"140px"},{field:"kddiagnosa",header:"Diagnosa",width:"180px"},{field:"terapi",header:"Therapy",width:"180px"},{field:"statuspulang",header:"Status",width:"180px"}],this.dateNow=new Date,this.item.tglAwal=r(this.dateNow).format("YYYY-MM-DD 00:00"),this.item.tglAkhir=r(this.dateNow).format("YYYY-MM-DD 23:59"),this.getDataCombo()}getDataCombo(){this.apiService.get("laporan/get-data-combo").subscribe(e=>{var t=e;this.listDepartemen=t.departemenrajal,this.listTipePasien=t.kelompokpasien,this.item.dataDepartemen=this.listDepartemen[0],this.isiRuangan(),this.LoadCache()})}isiRuangan(){null!=this.item.dataDepartemen&&(this.listRuangan=this.item.dataDepartemen.ruangan)}LoadCache(){var e=this.cacheHelper.get("SensusCache");null!=e?(this.item.tglAwal=new Date(e[0]),this.item.tglAkhir=new Date(e[1]),this.getData()):this.getData()}getData(){var e=r(this.item.tglAwal).format("YYYY-MM-DD HH:mm"),t=r(this.item.tglAkhir).format("YYYY-MM-DD HH:mm"),a="";null!=this.item.dataDepartemen&&(a="&idDept="+this.item.dataDepartemen.id);var i="";null!=this.item.dataRuangan&&(i="&idRuangan="+this.item.dataRuangan.id);var n="";null!=this.item.dataTipePasien&&(n="&idTipePasien="+this.item.dataTipePasien.id);var l="";if(null!=this.item.selectedRuangan){for(var o="",s=this.item.selectedRuangan.length-1;s>=0;s--)o+=","+this.item.selectedRuangan[s].id;l=o.slice(1,o.length)}this.cacheHelper.set("SensusCache",{0:e,1:t}),this.apiService.get("laporan/get-data-lap-sensus-pasien?&tglAwal="+e+"&tglAkhir="+t+a+i+n+"&listRuang="+l+"&kodeprofile=1").subscribe(e=>{for(let t=0;t<e.length;t++)e[t].no=t+1;this.dataTable=e})}cari(){this.getData()}exportExcel(){var e=this.authService.dataLoginUser.profile.id,t=this.authService.dataLoginUser.pegawai.namaLengkap,a=r(this.item.tglAwal).format("YYYY-MM-DD HH:mm"),i=r(this.item.tglAkhir).format("YYYY-MM-DD HH:mm"),n="";null!=this.item.dataDepartemen&&(n="&idDept="+this.item.dataDepartemen.id);var l="";null!=this.item.dataRuangan&&(l="&idRuangan="+this.item.dataRuangan.id);var s="";null!=this.item.dataTipePasien&&(s="&idTipePasien="+this.item.dataTipePasien.id);var d="",p="";if(null!=this.item.selectedRuangan){for(var c="",h=this.item.selectedRuangan.length-1;h>=0;h--)c+=","+this.item.selectedRuangan[h].id;d=c.slice(1,c.length)}""!=d&&(p="&listRuang="+d),window.open(o.b.get().apiBackend+"print/cetak-laporan-sensus-pasien?&tglAwal="+a+"&tglAkhir="+i+n+l+s+p+"&kodeprofile="+e+"&namauser="+t)}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(d.a),s.Jb(d.b),s.Jb(l.a),s.Jb(l.h),s.Jb(p.a),s.Jb(c.a),s.Jb(h.a),s.Jb(n.a),s.Jb(n.f))},e.\u0275cmp=s.Db({type:e,selectors:[["app-laporan-sensus-pasien"]],features:[s.wb([l.a,l.h])],decls:37,vars:30,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-grid"],[1,"p-col-12","p-md-11"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","ngModelChange"],[1,"p-col-12","p-md-3"],["placeholder","Instalasi","optionLabel","departemen",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["optionLabel","ruangan",3,"options","ngModel","ngModelChange"],["placeholder","Tipe Pasien","optionLabel","kelompokpasien",3,"options","ngModel","filter","showClear","ngModelChange"],[1,"p-col-12","p-md-1"],[1,"p-col-12","p-md-12",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",3,"click"],[1,"p-col-12","p-md-12"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[1,"p-d-flex"],["type","button","pButton","","pRipple","","icon","pi pi-file-pdf","pTooltip","PDF","tooltipPosition","bottom",1,"p-button-success","p-mr-2",3,"click"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],[3,"style",4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(e,t){1&e&&(s.Qb(0,"div",0),s.Qb(1,"div",1),s.Qb(2,"h4"),s.Jc(3,"Laporan Sensus Pasien Rawat Jalan"),s.Pb(),s.Qb(4,"div",2),s.Qb(5,"div",3),s.Qb(6,"div",2),s.Qb(7,"div",4),s.Qb(8,"label",5),s.Jc(9,"Periode Awal"),s.Pb(),s.Qb(10,"p-calendar",6),s.Yb("ngModelChange",function(e){return t.item.tglAwal=e}),s.Pb(),s.Pb(),s.Qb(11,"div",4),s.Qb(12,"label",5),s.Jc(13,"Periode Akhir"),s.Pb(),s.Qb(14,"p-calendar",6),s.Yb("ngModelChange",function(e){return t.item.tglAkhir=e}),s.Pb(),s.Pb(),s.Qb(15,"div",7),s.Qb(16,"label",5),s.Jc(17,"Instalasi"),s.Pb(),s.Qb(18,"p-dropdown",8),s.Yb("ngModelChange",function(e){return t.item.dataDepartemen=e})("onChange",function(){return t.isiRuangan()}),s.Pb(),s.Pb(),s.Qb(19,"div",7),s.Qb(20,"label",5),s.Jc(21,"Ruangan"),s.Pb(),s.Qb(22,"p-multiSelect",9),s.Yb("ngModelChange",function(e){return t.item.selectedRuangan=e}),s.Pb(),s.Pb(),s.Qb(23,"div",4),s.Qb(24,"label",5),s.Jc(25,"Tipe Pasien"),s.Pb(),s.Qb(26,"p-dropdown",10),s.Yb("ngModelChange",function(e){return t.item.dataTipePasien=e}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(27,"div",11),s.Qb(28,"div",2),s.Qb(29,"div",12),s.Qb(30,"button",13),s.Yb("click",function(){return t.cari()}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(31,"div",14),s.Qb(32,"p-table",15,16),s.Yb("selectionChange",function(e){return t.selected=e}),s.Hc(34,x,2,0,"ng-template",17),s.Hc(35,D,2,1,"ng-template",18),s.Hc(36,R,2,3,"ng-template",19),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&e&&(s.xb(10),s.ic("ngModel",t.item.tglAwal)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),s.xb(4),s.ic("ngModel",t.item.tglAkhir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),s.xb(4),s.ic("options",t.listDepartemen)("ngModel",t.item.dataDepartemen)("filter",!0)("showClear",!0),s.xb(4),s.ic("options",t.listRuangan)("ngModel",t.item.selectedRuangan),s.xb(4),s.ic("options",t.listTipePasien)("ngModel",t.item.dataTipePasien)("filter",!0)("showClear",!0),s.xb(6),s.ic("columns",t.column)("value",t.dataTable)("selection",t.selected)("rowHover",!0)("rows",10)("showCurrentPageReport",!0)("rowsPerPageOptions",s.mc(29,Y))("paginator",!0)("pageLinks",5))},directives:[b.a,m.g,m.h,u.a,g.a,f.b,w.a,P.h,l.k,v.a,i.k,P.g,P.f,P.e,i.l],styles:[""]}),e})()}];let y=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[n.j.forChild(T)],n.j]}),e})();var H=a("PCNd");let S=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[i.b,y,H.a]]}),e})()}}]);