!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"/VK3":function(i,a,n){"use strict";n.r(a),n.d(a,"DaftarPasienFarmasiModule",function(){return B});var l=n("ofXK"),r=n("tyNb"),o=n("7zfz"),s=n("1zoS"),c=n("wd/R"),d=n("fXoL"),p=n("EJUL"),b=n("U+s4"),u=n("G0w9"),h=n("ujBT"),g=n("Nf9I"),m=n("eO1q"),f=n("3Pt+"),w=n("7kUa"),v=n("Ji6n"),k=n("xlun"),P=n("jIHw"),y=n("rEr+"),C=n("/RsI"),M=n("arFO");function R(e,t){if(1&e&&(d.Qb(0,"th",35),d.Jc(1),d.Lb(2,"p-sortIcon",36),d.Pb()),2&e){var i=t.$implicit;d.Fc("width: ",i.width,""),d.jc("pSortableColumn",i.field),d.xb(1),d.Lc(" ",i.header," "),d.xb(1),d.jc("field",i.field)}}function Q(e,t){if(1&e&&(d.Qb(0,"tr"),d.Qb(1,"th",33),d.Jc(2,"Aksi"),d.Pb(),d.Hc(3,R,3,6,"th",34),d.Pb()),2&e){var i=t.$implicit;d.xb(3),d.ic("ngForOf",i)}}function D(e,t){if(1&e&&(d.Qb(0,"td"),d.Jc(1),d.Pb()),2&e){var i=t.$implicit,a=d.bc().$implicit;d.Fc("width: ",i.width,""),d.xb(1),d.Lc(" ",a[i.field]," ")}}function x(e,t){if(1&e){var i=d.Sb();d.Qb(0,"tr",37),d.Qb(1,"td",33),d.Qb(2,"button",38),d.Yb("click",function(){d.yc(i);var e=t.$implicit;return d.bc().transaksiLayanan2(e)}),d.Pb(),d.Qb(3,"button",39),d.Yb("click",function(){d.yc(i);var e=t.$implicit;return d.bc().popUpInputObat2(e)}),d.Pb(),d.Pb(),d.Hc(4,D,2,4,"td",40),d.Pb()}if(2&e){var a=t.columns,n=t.rowIndex;d.ic("pSelectableRow",t.$implicit)("pSelectableRowIndex",n),d.xb(4),d.ic("ngForOf",a)}}function Y(e,t){1&e&&(d.Qb(0,"td"),d.Lb(1,"div",43),d.Pb())}function T(e,t){if(1&e&&(d.Qb(0,"tr",41),d.Hc(1,Y,2,0,"td",42),d.Pb()),2&e){var i=t.columns;d.xb(1),d.ic("ngForOf",i)}}function I(e,t){if(1&e){var i=d.Sb();d.Qb(0,"p-button",44),d.Yb("click",function(){return d.yc(i),d.bc().cariFilter()}),d.Pb(),d.Qb(1,"p-button",45),d.Yb("click",function(){return d.yc(i),d.bc().clearFilter()}),d.Pb()}}var S,A,J,F=function(){return[5,10,25,50]},N=function(){return{width:"450px",minWidth:"450px"}},H=function(){return{width:"50vw"}},L=[{path:"",component:(S=function(){function i(t,a,n,l,r,o,c,d,p){e(this,i),this.apiService=t,this.authService=a,this.confirmationService=n,this.messageService=l,this.cacheHelper=r,this.dateHelper=o,this.alertService=c,this.route=d,this.router=p,this.pencarian="",this.item={},this.listKriteria=[{name:"Semua",id:"1"},{name:"Masih Dirawat",id:"2"}],this.page=s.b.get().page,this.rows=s.b.get().rows}var a,n,l;return a=i,(n=[{key:"ngOnInit",value:function(){this.dataLogin=this.authService.dataLoginUser,this.kelUser=this.dataLogin.kelompokUser.kelompokUser,this.dateNow=new Date,this.item.tglAwal=c(this.dateNow).format("YYYY-MM-DD 00:00"),this.item.tglAkhir=c(this.dateNow).format("YYYY-MM-DD 23:59"),this.item.jmlRows=50,this.column=[{field:"no",header:"No",width:"65px"},{field:"tglregistrasi",header:"Tgl Registrasi",width:"140px"},{field:"norm",header:"No RM",width:"80px"},{field:"noregistrasi",header:"Noregistrasi",width:"125px"},{field:"namapasien",header:"Nama Pasien",width:"250px"},{field:"namakelas",header:"Kelas",width:"100px"},{field:"namaruangan",header:"Ruangan",width:"180px"},{field:"namadokter",header:"Dokter",width:"180px"},{field:"kelompokpasien",header:"Tipe Pasien",width:"120px"},{field:"namarekanan",header:"Penjamin",width:"120px"},{field:"tglpulang",header:"Tgl Pulang",width:"140px"},{field:"jenispelayanan",header:"Jenis Pelayanan",width:"140px"},{field:"kelasditanggung",header:"Kls Ditanggung",width:"180px"},{field:"nosep",header:"SEP",width:"120px"},{field:"",header:"Diagnosa",width:"140px"}],this.getDataCombo()}},{key:"getDataCombo",value:function(){var e=this;this.apiService.get("farmasi/get-combo-farmasi").subscribe(function(t){var i=t;e.listDepartemen=i.departemen,e.listKelompokPasien=i.kelompokpasien,e.LoadCache()})}},{key:"isiRuangan",value:function(){null!=this.item.dataDepartemen&&(this.listRuangan=this.item.dataDepartemen.ruangan)}},{key:"LoadCache",value:function(){var e=this.cacheHelper.get("DaftarPasienFarmasiCache");null!=e?(this.item.tglAwal=new Date(e[0]),this.item.tglAkhir=new Date(e[1]),this.item.status=e[2],this.item.namaOrReg=e[3],null!=e[6]&&(this.listDepartemen=[e[6]],this.item.dataDepartemen=e[6]),null!=e[5]&&(this.listRuangan=[e[5]],this.item.dataRuangan=e[5]),null!=e[4]&&""!=e[4]&&(this.item.noReg=e[4]),null!=e[7]&&""!=e[7]&&(this.item.noRm=e[7]),null!=e[8]&&""!=e[8]&&(this.item.jmlRows=e[8]),this.getData()):this.getData()}},{key:"cari",value:function(){this.getData()}},{key:"getData",value:function(){var e=this,t=c(this.item.tglAwal).format("YYYY-MM-DD HH:mm"),i=c(this.item.tglAkhir).format("YYYY-MM-DD HH:mm"),a="",n=void 0;null!=this.item.ruangan&&(a=this.item.dataRuangan.id,n={id:this.item.dataRuangan.id,ruangan:this.item.dataRuangan.ruangan});var l="",r=void 0;null!=this.item.instalasi&&(l=this.item.dataDepartemen.id,r={id:this.item.dataDepartemen.id,departemen:this.item.dataDepartemen.departemen});var o="";null!=this.item.dataKelPasien&&(o=this.item.dataKelPasien.id);var s="";null!=this.item.noRM&&(s=this.item.noRM);var d="";null!=this.item.Noregistrasi&&(d=this.item.Noregistrasi);var p="";null!=this.item.namaPasien&&(p=this.item.namaPasien);var b="";null!=this.item.jmlRows&&(b=this.item.jmlRows);var u=!1;null!=this.item.isCanBalik&&(u=this.item.isCanBalik),this.cacheHelper.set("DaftarPasienFarmasiCache",{0:t,1:i,2:void 0,3:p,4:d,5:n,6:r,7:s}),this.apiService.get("registrasi/get-daftar-registrasi-pasien?namaPasien="+p+"&ruanganId="+a+"&status=&tglAwal="+t+"&tglAkhir="+i+"&noReg="+d+"&instalasiId="+l+"&noRm="+s+"&jmlRows="+b+"&kelompokPasienId="+o+"&isCanBalik="+u).subscribe(function(t){t=t;for(var i=0;i<t.length;i++){var a=t[i],n=c(new Date(a.tglregistrasi)).format("YYYY-MM-DD"),l=c(new Date(a.tgllahir)).format("YYYY-MM-DD"),r=e.dateHelper.CountAge(new Date(l),new Date(n));a.no=i+1,a.umur=r.year+" thn "+r.month+" bln "+r.day+" hari",null==a.tglmeninggal?(a.statuspasien="Hidup",a.color="info"):(a.statuspasien="Meninggal",a.color="danger")}e.dataTable=t,e.totalRecords=t.totalRow})}},{key:"cekCanBalik",value:function(e){1==e?(this.disableTgl=!0,this.getData()):(this.disableTgl=!1,this.getData())}},{key:"onRowSelect",value:function(e){var t=this;null!=e.data&&this.apiService.get("general/get-data-closing-pasien/"+this.selected.noregistrasi).subscribe(function(i){i.length>0?t.alertService.error("Peringatan!","Registrasi Ini Telah Diclosing"):t.selected=e.data})}},{key:"transaksiLayanan2",value:function(e){this.selected=e,this.transaksiLayanan()}},{key:"popUpInputObat2",value:function(e){this.selected=e,this.popUpInputObat()}},{key:"transaksiLayanan",value:function(){null!=this.selected?(this.cacheHelper.set("rincianPelayananFarmasiCache",{0:"",1:""}),this.router.navigate(["transaksi-pelayanan-apotik",this.selected.norec,"pasien"])):this.alertService.warn("Info,","Data Belum Dipilih!")}},{key:"popUpInputObat",value:function(){var e=this;null!=this.selected?(this.item.norec_dpr="",this.apiService.get("general/get-data-closing-pasien/"+this.selected.noregistrasi).subscribe(function(t){t.length>0?e.alertService.error("Peringatan!","Registrasi Ini Telah Diclosing"):e.apiService.get("registrasi/get-data-antrian-pasien?noregistrasi="+e.selected.noregistrasi).subscribe(function(t){var i=t;e.listRuanganApd=i.ruangan,null!=i.ruangan&&(e.item.dataRuanganApd=i.ruangan[0],e.item.norec_dpr=i.ruangan[0].norec_apd,e.pop_inputTindakan=!0)})})):this.alertService.warn("Info","Data Belum Dipilih!")}},{key:"inputObat",value:function(){null!=this.item.dataRuanganApd?(this.cacheHelper.set("InputResepPasienCtrl",{0:this.selected.norm,1:this.selected.namapasien,2:this.selected.jeniskelamin,3:this.selected.noregistrasi,4:this.selected.umur,5:this.selected.kelasidfk,6:this.selected.namakelas,7:this.selected.tglregistrasi,8:this.item.dataRuanganApd.norec_apd,9:"",10:this.selected.kelompokpasien,11:this.selected.namaruangan,12:this.selected.alamatlengkap,13:"",14:"",15:"",16:""}),this.router.navigate(["input-resep-apotik",this.selected.norec,this.item.dataRuanganApd.norec_apd])):this.alertService.warn("Info","Ruang Antrian Belum Dipilih!")}},{key:"filter",value:function(){this.popFilter=!0}},{key:"cariFilter",value:function(){this.popFilter=!1,this.getData()}},{key:"clearFilter",value:function(){this.popFilter=!1,this.item={},this.dateNow=new Date,this.item.tglAwal=c(this.dateNow).format("YYYY-MM-DD 00:00"),this.item.tglAkhir=c(this.dateNow).format("YYYY-MM-DD 23:59"),this.item.jmlRows=50,this.LoadCache()}}])&&t(a.prototype,n),l&&t(a,l),i}(),S.\u0275fac=function(e){return new(e||S)(d.Jb(p.a),d.Jb(p.b),d.Jb(o.a),d.Jb(o.h),d.Jb(b.a),d.Jb(u.a),d.Jb(h.a),d.Jb(r.a),d.Jb(r.f))},S.\u0275cmp=d.Db({type:S,selectors:[["app-daftar-pasien-farmasi"]],features:[d.wb([o.a])],decls:71,vars:59,consts:[["header","Confirmation","icon","fa fa-question-circle"],[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[1,"p-grid"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","disabled","ngModelChange"],["type","text","pInputText","","placeholder","No Rekam Medis",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Noregistrasi",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Nama Pasien",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-1",2,"margin-top","15px"],["binary","true","inputId","item.isCanBalik",3,"ngModel","ngModelChange","onChange"],["for","item.isCanBalik","pTooltip","Menampilkan semua pasien yang masih dirawat (Rawat Inap)",1,"label"],[1,"p-col-12","p-md-1",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",1,"p-mr-1",3,"click"],["pButton","","type","button","icon","pi pi-filter","pTooltip","Filter Detail",1,"p-button-success",3,"click"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange","onRowSelect"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],["header","Pilih Ruang Antrian",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"p-col-12","p-md-6"],["placeholder","Ruangan","optionLabel","ruangan","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange"],[1,"p-col-12","p-md-6",2,"margin-top","15px"],["pButton","","type","submit","icon","fa fa-medkit","pTooltip","Input Obat/Alkes","label","Input Obat/Alkes",3,"click"],["header","Filter",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"p-col-12","p-md-3"],["placeholder","Instalasi","optionLabel","departemen","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["placeholder","Tipe Pasien","optionLabel","kelompokpasien","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange"],["type","text","pInputText","","placeholder","Jml Rows",3,"ngModel","ngModelChange","keyup.enter"],["pTemplate","footer"],[2,"width","100px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],["pButton","","type","button","icon","fa fa-medkit","pTooltip","Rincian Pelayanan","label","",1,"p-button-rounded","p-button-primary","p-mr-2",3,"click"],["pButton","","type","button","icon","fa fa-stethoscope","pTooltip","Input Obat/Alkes","label","",1,"p-button-rounded","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"],[2,"height","34px"],[4,"ngFor","ngForOf"],[1,"loading-text"],["icon","pi pi-filter","label","Filter",1,"p-button-success",3,"click"],["icon","pi pi-close","label","Clear","styleClass","p-button-text",3,"click"]],template:function(e,t){1&e&&(d.Lb(0,"p-confirmDialog",0),d.Qb(1,"div",1),d.Qb(2,"div",2),d.Qb(3,"h4"),d.Jc(4,"Pasien Ruangan"),d.Pb(),d.Qb(5,"div",3),d.Qb(6,"div",4),d.Qb(7,"div",5),d.Qb(8,"label",6),d.Jc(9,"Periode Awal"),d.Pb(),d.Qb(10,"p-calendar",7),d.Yb("ngModelChange",function(e){return t.item.tglAwal=e}),d.Pb(),d.Pb(),d.Qb(11,"div",5),d.Qb(12,"label",6),d.Jc(13,"Periode Akhir"),d.Pb(),d.Qb(14,"p-calendar",7),d.Yb("ngModelChange",function(e){return t.item.tglAkhir=e}),d.Pb(),d.Pb(),d.Qb(15,"div",5),d.Qb(16,"label",6),d.Jc(17,"No Rekam Medis "),d.Pb(),d.Qb(18,"input",8),d.Yb("ngModelChange",function(e){return t.item.noRM=e})("keyup.enter",function(){return t.cari()}),d.Pb(),d.Pb(),d.Qb(19,"div",5),d.Qb(20,"label",6),d.Jc(21,"Noregistrasi"),d.Pb(),d.Qb(22,"input",9),d.Yb("ngModelChange",function(e){return t.item.Noregistrasi=e})("keyup.enter",function(){return t.cari()}),d.Pb(),d.Pb(),d.Qb(23,"div",5),d.Qb(24,"label",6),d.Jc(25,"Nama Pasien "),d.Pb(),d.Qb(26,"input",10),d.Yb("ngModelChange",function(e){return t.item.namaPasien=e})("keyup.enter",function(){return t.cari()}),d.Pb(),d.Pb(),d.Qb(27,"div",11),d.Qb(28,"p-checkbox",12),d.Yb("ngModelChange",function(e){return t.item.isCanBalik=e})("onChange",function(){return t.cekCanBalik(t.item.isCanBalik)}),d.Pb(),d.Qb(29,"label",13),d.Jc(30," Dirawat "),d.Pb(),d.Pb(),d.Qb(31,"div",14),d.Qb(32,"button",15),d.Yb("click",function(){return t.cari()}),d.Pb(),d.Qb(33,"button",16),d.Yb("click",function(){return t.filter()}),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(34,"div",3),d.Qb(35,"p-table",17,18),d.Yb("selectionChange",function(e){return t.selected=e})("onRowSelect",function(e){return t.onRowSelect(e)}),d.Hc(37,Q,4,1,"ng-template",19),d.Hc(38,x,5,3,"ng-template",20),d.Hc(39,T,2,1,"ng-template",21),d.Pb(),d.Pb(),d.Qb(40,"div",3),d.Lb(41,"div",4),d.Pb(),d.Pb(),d.Pb(),d.Qb(42,"p-dialog",22),d.Yb("visibleChange",function(e){return t.pop_inputTindakan=e}),d.Qb(43,"div",1),d.Qb(44,"div",4),d.Qb(45,"div",23),d.Qb(46,"label",6),d.Jc(47,"Ruangan"),d.Pb(),d.Qb(48,"p-dropdown",24),d.Yb("ngModelChange",function(e){return t.item.dataRuanganApd=e}),d.Pb(),d.Pb(),d.Qb(49,"div",25),d.Qb(50,"button",26),d.Yb("click",function(){return t.inputObat()}),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(51,"p-dialog",27),d.Yb("visibleChange",function(e){return t.popFilter=e}),d.Qb(52,"div",1),d.Qb(53,"div",4),d.Qb(54,"div",28),d.Qb(55,"label",6),d.Jc(56,"Instalasi"),d.Pb(),d.Qb(57,"p-dropdown",29),d.Yb("ngModelChange",function(e){return t.item.dataDepartemen=e})("onChange",function(){return t.isiRuangan()}),d.Pb(),d.Pb(),d.Qb(58,"div",28),d.Qb(59,"label",6),d.Jc(60,"Ruangan"),d.Pb(),d.Qb(61,"p-dropdown",24),d.Yb("ngModelChange",function(e){return t.item.dataRuangan=e}),d.Pb(),d.Pb(),d.Qb(62,"div",28),d.Qb(63,"label",6),d.Jc(64,"Tipe Pasien"),d.Pb(),d.Qb(65,"p-dropdown",30),d.Yb("ngModelChange",function(e){return t.item.dataKelPasien=e}),d.Pb(),d.Pb(),d.Qb(66,"div",5),d.Qb(67,"label",6),d.Jc(68,"jml Rows"),d.Pb(),d.Qb(69,"input",31),d.Yb("ngModelChange",function(e){return t.item.jmlRows=e})("keyup.enter",function(){return t.cari()}),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Hc(70,I,2,0,"ng-template",32),d.Pb()),2&e&&(d.xb(10),d.ic("ngModel",t.item.tglAwal)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0)("disabled",t.disableTgl),d.xb(4),d.ic("ngModel",t.item.tglAkhir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0)("disabled",t.disableTgl),d.xb(4),d.ic("ngModel",t.item.noRM),d.xb(4),d.ic("ngModel",t.item.Noregistrasi),d.xb(4),d.ic("ngModel",t.item.namaPasien),d.xb(2),d.ic("ngModel",t.item.isCanBalik),d.xb(7),d.ic("columns",t.column)("value",t.dataTable)("selection",t.selected)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",d.mc(56,F))("paginator",!0)("pageLinks",5),d.xb(7),d.Ec(d.mc(57,N)),d.ic("visible",t.pop_inputTindakan)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!0),d.xb(6),d.ic("options",t.listRuanganApd)("ngModel",t.item.dataRuanganApd)("filter",!0)("showClear",!0),d.xb(3),d.Ec(d.mc(58,H)),d.ic("visible",t.popFilter)("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!0),d.xb(6),d.ic("options",t.listDepartemen)("ngModel",t.item.dataDepartemen)("filter",!0)("showClear",!0),d.xb(4),d.ic("options",t.listRuangan)("ngModel",t.item.dataRuangan)("filter",!0)("showClear",!0),d.xb(4),d.ic("options",t.listKelompokPasien)("ngModel",t.item.dataKelPasien)("filter",!0)("showClear",!0),d.xb(4),d.ic("ngModel",t.item.jmlRows))},directives:[g.a,m.a,f.g,f.h,f.a,w.a,v.a,k.a,P.b,y.h,o.k,C.a,M.a,l.k,y.g,y.f,y.e,P.a],styles:[""]}),S)}],O=((A=function t(){e(this,t)}).\u0275mod=d.Hb({type:A}),A.\u0275inj=d.Gb({factory:function(e){return new(e||A)},imports:[[r.j.forChild(L)],r.j]}),A),j=n("PCNd"),B=((J=function t(){e(this,t)}).\u0275mod=d.Hb({type:J}),J.\u0275inj=d.Gb({factory:function(e){return new(e||J)},imports:[[l.b,O,j.a]]}),J)}}])}();