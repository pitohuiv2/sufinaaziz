(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"8kWx":function(e,t,i){"use strict";i.d(t,"a",function(){return J});var n=i("fXoL"),a=i("By0h"),o=i("EJUL"),r=i("7zfz"),c=i("U+s4"),s=i("G0w9"),l=i("ujBT"),p=i("tyNb"),b=i("dPl2"),d=i("rEr+"),u=i("ofXK"),h=i("7kUa"),m=i("jIHw"),g=i("xlun"),f=i("Q4Mo"),v=i("jeV5"),P=i("b1Ni"),x=i("PU9F");function w(e,t){if(1&e){const e=n.Sb();n.Qb(0,"div",15),n.Qb(1,"div",16),n.Qb(2,"span",17),n.Lb(3,"i",18),n.Qb(4,"input",19),n.Yb("input",function(t){return n.yc(e),n.bc(),n.wc(10).filterGlobal(t.target.value,"contains")}),n.Pb(),n.Pb(),n.Pb(),n.Qb(5,"div",20),n.Qb(6,"button",21),n.Yb("click",function(){return n.yc(e),n.bc().buatBaru()}),n.Pb(),n.Pb(),n.Pb()}}function k(e,t){if(1&e&&(n.Qb(0,"th",24),n.Jc(1),n.Lb(2,"p-sortIcon",25),n.Pb()),2&e){const e=t.$implicit;n.Fc("width: ",e.width,""),n.jc("pSortableColumn",e.field),n.xb(1),n.Lc(" ",e.header," "),n.xb(1),n.jc("field",e.field)}}function y(e,t){if(1&e&&(n.Qb(0,"tr"),n.Lb(1,"th",22),n.Hc(2,k,3,6,"th",23),n.Pb()),2&e){const e=t.$implicit;n.xb(2),n.ic("ngForOf",e)}}function R(e,t){if(1&e&&(n.Qb(0,"span"),n.Jc(1),n.Pb()),2&e){const e=n.bc().$implicit,t=n.bc().$implicit,i=n.bc();n.xb(1),n.Lc(" ",i.formatRupiah(t[e.field],""),"")}}function M(e,t){if(1&e&&(n.Qb(0,"span"),n.Jc(1),n.Pb()),2&e){const e=n.bc().$implicit,t=n.bc().$implicit;n.xb(1),n.Lc(" ",t[e.field],"")}}function T(e,t){if(1&e&&(n.Qb(0,"td"),n.Hc(1,R,2,1,"span",30),n.Hc(2,M,2,1,"span",30),n.Pb()),2&e){const e=t.$implicit;n.Fc("width: ",e.width,""),n.xb(1),n.ic("ngIf",null!=e.isCurrency),n.xb(1),n.ic("ngIf",null==e.isCurrency)}}function Q(e,t){if(1&e){const e=n.Sb();n.Qb(0,"tr"),n.Qb(1,"td",22),n.Lb(2,"button",26),n.Qb(3,"button",27),n.Yb("click",function(){n.yc(e);const i=t.$implicit;return n.bc().hapusPengkajian(i)}),n.Pb(),n.Qb(4,"button",28),n.Yb("click",function(){n.yc(e);const i=t.$implicit;return n.bc().editD(i)}),n.Pb(),n.Pb(),n.Hc(5,T,3,5,"td",29),n.Pb()}if(2&e){const e=t.$implicit,i=t.columns,a=t.expanded;n.xb(2),n.ic("pRowToggler",e)("icon",a?"pi pi-chevron-down":"pi pi-chevron-right"),n.xb(3),n.ic("ngForOf",i)}}function S(e,t){1&e&&(n.Qb(0,"tr"),n.Qb(1,"th"),n.Jc(2,"Form Yang terisi"),n.Pb(),n.Pb())}function E(e,t){if(1&e){const e=n.Sb();n.Qb(0,"span"),n.Jc(1),n.Qb(2,"button",27),n.Yb("click",function(){n.yc(e);const i=t.$implicit;return n.bc(3).hapusForm(i)}),n.Pb(),n.Qb(3,"button",35),n.Yb("click",function(){n.yc(e);const i=t.$implicit;return n.bc(3).asupKaForm(i)}),n.Pb(),n.Pb()}if(2&e){const e=t.$implicit;n.zb("order-badge order-instock"),n.xb(1),n.Lc(" ",e.namaform," ")}}function F(e,t){if(1&e&&(n.Qb(0,"tr"),n.Hc(1,E,4,3,"span",34),n.Pb()),2&e){const e=t.$implicit;n.xb(1),n.ic("ngForOf",e.details)}}function C(e,t){if(1&e&&(n.Qb(0,"tr"),n.Qb(1,"td",31),n.Qb(2,"div",32),n.Qb(3,"p-table",33),n.Hc(4,S,3,0,"ng-template",9),n.Hc(5,F,2,1,"ng-template",10),n.Pb(),n.Pb(),n.Pb(),n.Pb()),2&e){const e=t.$implicit;n.xb(3),n.ic("value",e.details)}}function D(e,t){1&e&&n.Lb(0,"p-skeleton",36)}const H=function(){return{"overflow-x":"auto","overflow-y":"hidden",position:"static"}};function L(e,t){if(1&e&&(n.Lb(0,"p-menubar",37),n.cc(1,"filter")),2&e){const e=n.bc();n.Ec(n.mc(6,H)),n.ic("model",n.ec(1,3,e.treeSourceMenu,e.searchText))}}const j=function(){return[5,10,25,50]},I=function(){return["namaPelayanan"]};let J=(()=>{class e{constructor(e,t,i,n,a,o,r,c,s){this.rekamMedis=e,this.apiService=t,this.authService=i,this.confirmationService=n,this.cacheHelper=a,this.dateHelper=o,this.alertService=r,this.activeRoute=c,this.router=s,this.item={tglPelayanan:new Date,layanan:[]},this.listProdukCek=[],this.produkDef=[],this.listRuanganTujuan=[],this.skeleton=[],this.searchText="",this.selected_count=0,this.selected_games=[],this.listChecked=[],this.dataSourceRiwayat=[],this.treeSourceMenu=[],this.headData={},this.nomorERM="-",this.navDetailForm="emr-detail-form",this.paramEMR="asesmen",this.defaultFormTujuan=210080}ngAfterViewInit(){}ngOnInit(){if(null==this.rekamMedis.header.norec){var e=this.cacheHelper.get("cacheEMR_qwertyuiop");null!=e&&(e=JSON.parse(e),this.headData=e)}else this.headData=this.rekamMedis.header;null==this.headData.norec&&window.history.back(),this.item.idPegawaiLogin=this.authService.getDataLoginUser().pegawai.id,this.columnRiwayatPengkajian=[{field:"tglemr",header:"Tgl EMR",width:"100px"},{field:"noemr",header:"No EMR",width:"100px"},{field:"noregistrasi",header:"No Registrasi",width:"100px"},{field:"namaruangan",header:"Ruangan",width:"150px"}],this.loadRiwayatEMR()}handleChangeTab(e){this.indexTab=e.index,0==e.index?(this.loadRiwayatEMR(),console.log(this.activeRoute)):1==e.index&&this.loadTreeView()}buatBaru(){this.indexTab=1,this.handleChangeTab({index:this.indexTab}),this.router.navigate([this.navDetailForm,this.defaultFormTujuan,"-"],{relativeTo:this.activeRoute}),this.nomorERM="-"}editD(e){this.nomorERM=e.noemr,this.indexTab=1,this.handleChangeTab({index:this.indexTab}),this.router.navigate([this.navDetailForm,this.defaultFormTujuan,e.noemr],{relativeTo:this.activeRoute})}hapusPengkajian(e){this.nomorERM="-",this.apiService.post("emr/hapus-emr-transaksi-norec",{norec:e.norec}).subscribe(e=>{this.loadRiwayatEMR(),this.apiService.postLog("Hapus EMR","norec emrpasien_t",e.norec,"Hapus No EMR - "+e.emrpasienfk+" pada No Registrasi  "+this.headData.noregistrasi+" - Pasien : "+this.headData.namapasien).subscribe(e=>{})})}asupKaForm(e){this.nomorERM=e.emrpasienfk,this.indexTab=1,this.handleChangeTab({index:this.indexTab}),this.router.navigate([this.navDetailForm,e.emrfk,e.emrpasienfk],{relativeTo:this.activeRoute})}hapusForm(e){var t={noemr:e.noemr,reportdisplay:e.reportdisplay,idemr:e.emrfk,norec:e.norec,idpegawai:this.authService.getPegawaiId()};this.apiService.post("emr/disable-emr-details",t).subscribe(t=>{this.apiService.postLog("Hapus EMR","norec emrpasien_t",e.norec,"Hapus Satu Form EMR ( "+e.namaform+" ) No EMR - "+e.noemr+" pada No Registrasi  "+this.headData.noregistrasi+" - Pasien : "+this.headData.namapasien).subscribe(e=>{})})}loadTreeView(){this.treeSourceMenu=[],this.isLoadingNav=!0,this.apiService.get("emr/get-menu-rekam-medis-dynamic?namaemr="+this.paramEMR).subscribe(e=>{this.isLoadingNav=!1;for(let t=0;t<e.data.length;t++){const i=e.data[t];if(i.name=i.label,null==i.items)i.command=e=>{e.node=e.item,this.nodeSelect(e)};else for(let e=0;e<i.items.length;e++){const t=i.items[e];if(t.name=t.label,null==t.items)t.command=e=>{e.node=e.item,this.nodeSelect(e)};else for(let e=0;e<t.items.length;e++){const i=t.items[e];if(i.name=i.label,null==i.items)i.command=e=>{e.node=e.item,this.nodeSelect(e)};else for(let e=0;e<i.items.length;e++){const t=i.items[e];if(t.name=t.label,null==t.items)t.command=e=>{e.node=e.item,this.nodeSelect(e)};else for(let e=0;e<t.items.length;e++){const i=t.items[e];i.name=i.label,null==i.items&&(i.command=e=>{e.node=e.item,this.nodeSelect(e)})}}}}i.icon="pi pi-fw pi-bars"}this.treeSourceMenu=e.data})}nodeSelect(e){let t=e.node.reportdisplay;this.router.navigate(null==t?[this.navDetailForm,e.node.id,this.nomorERM]:[t],{relativeTo:this.activeRoute})}loadRiwayatEMR(){this.apiService.get("emr/get-emr-transaksi-detail-form?noregistrasi="+this.headData.noregistrasi+"&jenisEmr="+this.paramEMR).subscribe(e=>{this.dataSourcePengkajian=e.data})}}return e.\u0275fac=function(t){return new(t||e)(n.Jb(a.a),n.Jb(o.a),n.Jb(o.b),n.Jb(r.a),n.Jb(c.a),n.Jb(s.a),n.Jb(l.a),n.Jb(p.a),n.Jb(p.f))},e.\u0275cmp=n.Db({type:e,selectors:[["app-emr-detail"]],decls:22,vars:15,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[3,"activeIndex","onChange","activeIndexChange"],["header","Riwayat ","leftIcon","fa fa-list"],[1,"p-grid"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","dataKey","norec","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","globalFilterFields","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["header","Input EMR","leftIcon","pi pi-th-large"],["height","3rem",4,"ngIf"],["appendTo","p-grid",3,"model","style",4,"ngIf"],[1,"table-header","p-grid"],[1,"p-col-12","p-md-3"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Filter",3,"input"],[1,"p-col-12","p-md-2","p-md-offset-7"],["pButton","","type","button","icon","pi pi-plus","pTooltip","Buat Pengkajian Baru ","label","Tambah",1,"p-button","p-mr-2",3,"click"],[2,"width","80px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain","p-mr-2",3,"pRowToggler","icon"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus Data","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],["pButton","","type","button","icon","pi pi-check-circle","pTooltip","Edit Data","label","",1,"p-button-rounded","p-button-success","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","5"],[1,"p-p-3"],["dataKey","norec",3,"value"],[3,"class",4,"ngFor","ngForOf"],["pButton","","type","button","icon","pi pi-check-circle","pTooltip","Masuk Ke Form (Edit)","label","",1,"p-button-rounded","p-button-success","p-mr-2",3,"click"],["height","3rem"],["appendTo","p-grid",3,"model"]],template:function(e,t){1&e&&(n.Qb(0,"div",0),n.Qb(1,"div",1),n.Qb(2,"h4"),n.Jc(3,"EMR"),n.Pb(),n.Qb(4,"div",2),n.Qb(5,"p-tabView",3),n.Yb("onChange",function(e){return t.handleChangeTab(e)})("activeIndexChange",function(e){return t.indexTab=e}),n.Qb(6,"p-tabPanel",4),n.Qb(7,"div",5),n.Qb(8,"div",2),n.Qb(9,"p-table",6,7),n.Yb("selectionChange",function(e){return t.selectedData=e}),n.Hc(11,w,7,0,"ng-template",8),n.Hc(12,y,3,1,"ng-template",9),n.Hc(13,Q,6,3,"ng-template",10),n.Hc(14,C,6,1,"ng-template",11),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Qb(15,"p-tabPanel",12),n.Qb(16,"div",5),n.Qb(17,"div",2),n.Hc(18,D,1,0,"p-skeleton",13),n.Hc(19,L,2,7,"p-menubar",14),n.Pb(),n.Qb(20,"div",2),n.Lb(21,"router-outlet"),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Pb()),2&e&&(n.xb(5),n.ic("activeIndex",t.indexTab),n.xb(4),n.ic("columns",t.columnRiwayatPengkajian)("value",t.dataSourcePengkajian)("selection",t.selectedData)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",n.mc(13,j))("paginator",!0)("pageLinks",5)("globalFilterFields",n.mc(14,I)),n.xb(9),n.ic("ngIf",0==t.treeSourceMenu.length),n.xb(1),n.ic("ngIf",t.treeSourceMenu.length>0))},directives:[b.b,b.a,d.h,r.k,u.l,p.k,h.a,m.b,g.a,u.k,d.g,d.f,f.a,d.d,v.a,P.a],pipes:[x.a],styles:[".p-field-checkbox[_ngcontent-%COMP%], .p-field-radiobutton[_ngcontent-%COMP%]{margin-bottom:0;display:flex;align-items:center}.order-badge.order-instock[_ngcontent-%COMP%]{background:#c8e6c9;color:#256029;margin-right:2px;color:#000;border-radius:15px;border:1px solid;padding:2px 7px;font-family:inherit;line-height:1.72em;text-align:center;text-decoration:none;background-color:#fff;display:inline-block;min-width:78px;vertical-align:middle;margin-top:5px}.p-menubar[_ngcontent-%COMP%]   .p-menuitem.p-menuitem-active[_ngcontent-%COMP%] > .p-menuitem-link[_ngcontent-%COMP%]{background:#e9ecef;position:static}"]}),e})()},"xBt/":function(e,t,i){"use strict";i.r(t),i.d(t,"EmrDetailModule",function(){return p});var n=i("ofXK"),a=i("tyNb"),o=i("8kWx"),r=i("fXoL");const c=[{path:"",component:o.a,children:[{path:"emr-detail-form/:namaEMR/:nomorEMR",loadChildren:()=>i.e(33).then(i.bind(null,"Bvzc")).then(e=>e.EmrDetailFormModule)}]}];let s=(()=>{class e{}return e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({factory:function(t){return new(t||e)},imports:[[a.j.forChild(c)],a.j]}),e})();var l=i("PCNd");let p=(()=>{class e{}return e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({factory:function(t){return new(t||e)},imports:[[n.b,s,l.a]]}),e})()}}]);