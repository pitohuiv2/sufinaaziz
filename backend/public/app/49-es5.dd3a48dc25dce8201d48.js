!function(){function a(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function e(a,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{I2Rk:function(t,i,n){"use strict";n.r(i),n.d(i,"InputResepNonlayananModule",function(){return E});var s=n("ofXK"),o=n("tyNb"),l=n("7zfz"),r=n("wd/R"),h=n("fXoL"),u=n("EJUL"),d=n("U+s4"),m=n("G0w9"),p=n("ujBT"),b=n("7CaW"),c=n("eO1q"),g=n("3Pt+"),k=n("arFO"),f=n("7kUa"),v=n("Ji6n"),P=n("V5BG"),Q=n("Ks7X"),M=n("jIHw"),x=n("xlun"),S=n("rEr+"),y=n("LuMj");function j(a,e){if(1&a){var t=h.Sb();h.Qb(0,"div",52),h.Qb(1,"p-radioButton",53),h.Yb("ngModelChange",function(a){return h.yc(t),h.bc().item.jenisKemasan=a})("onClick",function(){h.yc(t);var a=h.bc();return a.clickRadio(a.item.jenisKemasan)}),h.Pb(),h.Qb(2,"label",54),h.Jc(3),h.Pb(),h.Pb()}if(2&a){var i=e.$implicit,n=h.bc();h.xb(1),h.ic("inputId",i.id)("value",i)("ngModel",n.item.jenisKemasan),h.xb(1),h.ic("for",i.id),h.xb(1),h.Kc(i.jeniskemasan)}}function C(a,e){if(1&a){var t=h.Sb();h.Qb(0,"div",30),h.Qb(1,"label",6),h.Jc(2,"Jumlah "),h.Pb(),h.Qb(3,"p-inputNumber",55),h.Yb("ngModelChange",function(a){return h.yc(t),h.bc().item.jumlahxmakan=a})("onInput",function(a){return h.yc(t),h.bc().onChangeJmlXMakan(a)}),h.Pb(),h.Pb()}if(2&a){var i=h.bc();h.xb(3),h.ic("ngModel",i.item.jumlahxmakan)("showButtons",!0)}}function w(a,e){if(1&a){var t=h.Sb();h.Qb(0,"div",30),h.Qb(1,"label",6),h.Jc(2,"Dosis "),h.Pb(),h.Qb(3,"input",56),h.Yb("ngModelChange",function(a){return h.yc(t),h.bc().item.dosis=a})("input",function(a){return h.yc(t),h.bc().onChangeJmlXMakan(a.target.value)}),h.Pb(),h.Pb()}if(2&a){var i=h.bc();h.xb(3),h.ic("ngModel",i.item.dosis)}}function R(a,e){if(1&a){var t=h.Sb();h.Qb(0,"div",30),h.Qb(1,"label",6),h.Jc(2,"Jenis Racikan "),h.Pb(),h.Qb(3,"p-dropdown",57),h.Yb("ngModelChange",function(a){return h.yc(t),h.bc().item.jenisRacikan=a}),h.Pb(),h.Pb()}if(2&a){var i=h.bc();h.xb(3),h.ic("options",i.listJenisRacikan)("ngModel",i.item.jenisRacikan)("filter",!0)("showClear",!0)}}function D(a,e){if(1&a){var t=h.Sb();h.Qb(0,"div",58),h.Qb(1,"div",2),h.Qb(2,"div",59),h.Qb(3,"p-checkbox",60),h.Yb("ngModelChange",function(a){h.yc(t);var i=e.$implicit;return h.bc().item.aturanCheck[i.id]=a})("onChange",function(){return h.yc(t),h.bc().getSelected()}),h.Pb(),h.Pb(),h.Qb(4,"div",61),h.Qb(5,"label",54),h.Jc(6),h.Pb(),h.Pb(),h.Pb(),h.Pb()}if(2&a){var i=e.$implicit,n=h.bc();h.xb(3),h.jc("inputId",i.id),h.ic("ngModel",n.item.aturanCheck[i.id]),h.xb(2),h.ic("for",i.id),h.xb(1),h.Lc(" ",i.nama,"")}}function K(a,e){if(1&a&&(h.Qb(0,"th"),h.Jc(1),h.Pb()),2&a){var t=e.$implicit;h.Fc("width: ",t.width,""),h.xb(1),h.Lc(" ",t.header," ")}}function T(a,e){if(1&a&&(h.Qb(0,"tr"),h.Lb(1,"th",62),h.Hc(2,K,2,4,"th",63),h.Pb()),2&a){var t=e.$implicit;h.xb(2),h.ic("ngForOf",t)}}function J(a,e){if(1&a&&(h.Qb(0,"span"),h.Jc(1),h.Pb()),2&a){var t=h.bc().$implicit,i=h.bc().$implicit,n=h.bc();h.xb(1),h.Lc(" ",n.formatRupiah(i[t.field],""),"")}}function I(a,e){if(1&a&&(h.Qb(0,"span"),h.Jc(1),h.Pb()),2&a){var t=h.bc().$implicit,i=h.bc().$implicit;h.xb(1),h.Lc(" ",i[t.field],"")}}function Y(a,e){if(1&a&&(h.Qb(0,"td"),h.Hc(1,J,2,1,"span",66),h.Hc(2,I,2,1,"span",66),h.Pb()),2&a){var t=e.$implicit;h.Fc("width: ",t.width,""),h.xb(1),h.ic("ngIf",null!=t.isCurrency),h.xb(1),h.ic("ngIf",null==t.isCurrency)}}function F(a,e){if(1&a){var t=h.Sb();h.Qb(0,"tr"),h.Qb(1,"td",62),h.Qb(2,"button",64),h.Yb("click",function(){h.yc(t);var a=e.$implicit;return h.bc().editD(a)}),h.Pb(),h.Qb(3,"button",65),h.Yb("click",function(){h.yc(t);var a=e.$implicit;return h.bc().hapusD(a)}),h.Pb(),h.Pb(),h.Hc(4,Y,3,5,"td",63),h.Pb()}if(2&a){var i=e.columns;h.xb(4),h.ic("ngForOf",i)}}function N(a,e){if(1&a&&(h.Qb(0,"tr"),h.Qb(1,"td",67),h.Jc(2,"Grand Total : "),h.Pb(),h.Qb(3,"td"),h.Jc(4),h.Pb(),h.Pb()),2&a){var t=h.bc();h.xb(4),h.Lc(" \xa0",t.item.totalSubTotal,"")}}var L,H,O,B=function(){return[5,10,25,50]},_=[{path:"",component:(L=function(){function t(e,i,n,s,o,l,r,h,u){a(this,t),this.apiService=e,this.authService=i,this.confirmationService=n,this.messageService=s,this.cacheHelper=o,this.dateHelper=l,this.alertService=r,this.route=h,this.router=u,this.params={},this.item={pasien:{},tglresep:new Date,aturanCheck:[],rke:1},this.skeleton=[],this.maxDateValue=new Date,this.headData={},this.dataProdukDetail=[],this.listSatuan=[],this.statusTambah=!0,this.listDataSigna=[{id:1,nama:"P",isChecked:!1},{id:2,nama:"S",isChecked:!1},{id:3,nama:"Sr",isChecked:!1},{id:4,nama:"M",isChecked:!1}],this.hrg1=0,this.columnGrid=[],this.dataSource=[],this.data2=[],this.strStatus=0,this.isPemakaianObatAlkes=!1,this.tambah=function(){if(0!=this.statusTambah)if(null!=this.item.ruangan)if(null!=this.item.penulisResep)if(null!=this.item.tglresep)if(0!=this.item.jumlah)if(null!=this.item.jenisKemasan)if(null!=this.item.produk)if(null!=this.item.satuan)if(null!=this.item.aturanpakaitxt){var a=0;1==this.item.SelectedObatKronis&&(a=1);var e="";this.item.KeteranganPakai&&(e=this.item.KeteranganPakai);var t=1;"Racikan"==this.item.jenisKemasan.jeniskemasan&&(t=this.item.dosis);var i,n=null;null!=this.item.jenisRacikan&&(n=this.item.jenisRacikan.id),i=null==this.dataSource?1:this.data2.length+1;var s={};if(this.disabledRuangan=!0,null!=this.item.no)for(var o=this.data2.length-1;o>=0;o--)this.data2[o].no==this.item.no&&(s.no=this.item.no,s.generik=null,s.hargajual=this.item.hargaSatuan,s.jenisobatfk=n,s.stock=this.item.stok,s.harganetto=this.item.hargaSatuan,s.nostrukterimafk=this.noTerima,s.rke=this.item.rke,s.jeniskemasanfk=this.item.jenisKemasan.id,s.jeniskemasan=this.item.jenisKemasan.jeniskemasan,s.aturanpakaifk=0,s.aturanpakai=this.item.aturanpakaitxt,s.ispagi=this.item.chkp,s.issiang=this.item.chks,s.issore=this.item.chksr,s.ismalam=this.item.chkm,s.asalprodukfk=0,s.asalproduk="",s.produkfk=this.item.produk.id,s.namaproduk=this.item.produk.namaproduk,s.nilaikonversi=this.item.nilaiKonversi,s.satuanstandarfk=this.item.satuan.ssid,s.satuanstandar=this.item.satuan.satuanstandar,s.satuanviewfk=this.item.satuan.ssid,s.satuanview=this.item.satuan.satuanstandar,s.jmlstok=this.item.stok,s.jumlah=this.item.jumlah,s.hargasatuan=this.item.hargaSatuan,s.hargadiscount=null!=this.hargaDiskon?this.hargaDiskon:0,s.persendiscount=null!=this.item.hargaDiskon?this.item.hargaDiskon:0,s.total=this.item.hargaTotal,s.dosis=t,s.jumlahxmakan=this.item.jumlahxmakan,s.jmldosis=String(this.item.jumlah/t)+"/"+String(t),s.keterangan=e,s.satuanresepfk=null!=this.item.satuanresep?this.item.satuanresep.id:null,s.satuanresep=null!=this.item.satuanresep?this.item.satuanresep.satuanresep:null,s.tglkadaluarsa=null!=this.tglkadaluarsa?this.tglkadaluarsa:null,s.isoutofstok=!1,s.iskronis=a,s.belumlengkap=!1,this.data2[o]=s,this.dataSource=this.data2);else{s={no:i,generik:null,hargajual:this.item.hargaSatuan,jenisobatfk:n,stock:this.item.stok,harganetto:this.item.hargaSatuan,nostrukterimafk:this.noTerima,rke:this.item.rke,jeniskemasanfk:this.item.jenisKemasan.id,jeniskemasan:this.item.jenisKemasan.jeniskemasan,aturanpakaifk:0,aturanpakai:this.item.aturanpakaitxt,ispagi:this.item.chkp,issiang:this.item.chks,issore:this.item.chksr,ismalam:this.item.chkm,asalprodukfk:0,asalproduk:"",produkfk:this.item.produk.id,namaproduk:this.item.produk.namaproduk,nilaikonversi:this.item.nilaiKonversi,satuanstandarfk:this.item.satuan.ssid,satuanstandar:this.item.satuan.satuanstandar,satuanviewfk:this.item.satuan.ssid,satuanview:this.item.satuan.satuanstandar,jmlstok:this.item.stok,jumlah:this.item.jumlah,hargasatuan:this.item.hargaSatuan,hargadiscount:null!=this.hargaDiskon?this.hargaDiskon:0,persendiscount:null!=this.item.hargaDiskon?this.item.hargaDiskon:0,total:this.item.hargaTotal,dosis:t,jumlahxmakan:this.item.jumlahxmakan,jmldosis:String(this.item.jumlah/t)+"/"+String(t),keterangan:e,satuanresepfk:null!=this.item.satuanresep?this.item.satuanresep.id:null,satuanresep:null!=this.item.satuanresep?this.item.satuanresep.satuanresep:null,tglkadaluarsa:null!=this.tglkadaluarsa?this.tglkadaluarsa:null,isoutofstok:!1,iskronis:a,belumlengkap:!1},this.data2.push(s),this.dataSource=this.data2;var l=0;for(o=this.data2.length-1;o>=0;o--)l+=parseFloat(this.data2[o].total);this.item.totalSubTotal=this.formatRupiah(l,"Rp.")}"Racikan"!=this.item.jenisKemasan.jeniskemasan&&(this.item.rke=parseFloat(this.item.rke)+1),this.disabledRuangan=!0,this.kosongkan(),this.clear()}else this.alertService.error("Info","Aturan Pakai Belum diisi!!");else this.alertService.error("Info","Pilih Satuan terlebih dahulu!!");else this.alertService.error("Info","Pilih Produk terlebih dahulu!!");else this.alertService.error("Info","Pilih Jenis Kemasan terlebih dahulu!!");else this.alertService.error("Info","Jumlah harus di isi!");else this.alertService.error("Info","Data Tanggal Resep Masih Kosong!");else this.alertService.error("Info","Data Penulis Resep Masih Kosong!");else this.alertService.error("Info","Data Ruangan Masih Kosong!")}}var i,n,s;return i=t,(n=[{key:"ngOnInit",value:function(){this.isSimpan=!1,this.dateNow=new Date,this.dataLogin=this.authService.getDataLoginUser(),this.kelUser=this.dataLogin.kelompokUser.kelompokUser,this.item.SelectedResepPulang=!1,this.item.SelectedObatKronis=!1,this.hargaDiskon=0,this.loadColumn(),this.loadCombo(),this.firstLoad()}},{key:"formatRupiah",value:function(a,e){return e+" "+parseFloat(a).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}},{key:"loadColumn",value:function(){this.columnGrid=[{field:"no",header:"No",width:"80px"},{field:"rke",header:"R/Ke",width:"100px"},{field:"jeniskemasan",header:"Kemasan",width:"120px"},{field:"jmldosis",header:"Jml/Dosis",width:"120px"},{field:"aturanpakai",header:"Aturan Pakai",width:"120px"},{field:"satuanresep",header:"Satuan Resep",width:"120px"},{field:"namaproduk",header:"Produk",width:"120px"},{field:"satuanstandar",header:"Satuan",width:"100px"},{field:"jumlah",header:"Jumlah",width:"150px"},{field:"hargasatuan",header:"Harga",width:"150px",isCurrency:!0},{field:"total",header:"Total",width:"150px",isCurrency:!0},{field:"keterangan",header:"Keterangan",width:"150px"},{field:"tglkadaluarsa",header:"Tgl Exp",width:"140px"}]}},{key:"loadCombo",value:function(){var a=this;this.apiService.get("farmasi/get-combo-farmasi").subscribe(function(e){var t=e;a.listRuangan=null!=a.dataLogin.mapLoginUserToRuangan?a.dataLogin.mapLoginUserToRuangan:t.ruangfarmasi,a.listPenulisResep=t.dokter,a.listJenisKelamin=t.jeniskelamin}),this.apiService.get("farmasi/get-combo-resep").subscribe(function(e){a.listJenisKemasan=e.jeniskemasan,a.listAsalProduk=e.asalproduk,a.listsatuanresep=e.satuanresep,a.listJenisRacikan=e.jenisracikan,a.item.jenisKemasan=e.jeniskemasan[1]})}},{key:"firstLoad",value:function(){var a=this;this.route.params.subscribe(function(e){null!=e.norec_resep||""!=e.norec_rp?(a.params.norec_resep=e.norec_resep,a.norec_resep=e.norec_resep):a.norec_resep="",a.loadData()})}},{key:"loadData",value:function(){var a=this;"-"!=this.norec_resep&&this.apiService.get("farmasi/get-detail-obat-bebas?norecResep="+this.norec_resep).subscribe(function(e){var t=e.detailresep,i=e.pelayananPasien,n=0;a.item.pasien=t,a.item.pasien.tgllahir=r(new Date(t.tgllahir)).format("YYYY-MM-DD HH:mm"),a.item.pasien.jeniskelamin={id:t.jkid,jeniskelamin:t.jeniskelamin},a.item.nomorResep=t.nostruk,a.item.ruangan={id:t.id,namaruangan:t.namaruangan},a.disabledRuangan=!0,a.item.penulisResep={id:t.pgid,namalengkap:t.namalengkap},a.item.tglresep=r(t.tglresep).format("YYYY-MM-DD HH:mm");for(var s=0;s<i.length;s++){var o=i[s];o.no=s+1,n+=parseFloat(o.total)}a.data2=i,a.item.totalSubTotal=a.formatRupiah(n,"Rp."),a.dataSource=a.data2})}},{key:"clickRadio",value:function(a){"Racikan"==a.jeniskemasan?(this.showRacikanDose=!0,delete this.item.jumlahxmakan,delete this.item.dosis,delete this.item.jenisRacikan,delete this.item.sediaan,delete this.item.kekuatan):this.showRacikanDose=!1}},{key:"cariPasien",value:function(){var a=this;if(""==this.item.pasien.norm||"-"==this.item.pasien.norm)return this.item.pasien.namapasien=void 0,this.item.pasien.jeniskelamin=void 0,this.item.pasien.tgllahir=void 0,this.item.pasien.notelepon=void 0,void(this.item.pasien.alamatlengkap=void 0);this.apiService.get("general/get-detail-pasien?nocm="+this.item.pasien.norm).subscribe(function(e){null!=e&&(a.item.pasien=e,a.item.pasien.tgllahir=new Date(r(e.tgllahir).format("YYYY-MM-DD HH:mm")),a.item.pasien.jeniskelamin={id:e.jkid,jeniskelamin:e.jeniskelamin})})}},{key:"ObatKronis",value:function(a){this.item.SelectedObatKronis=1==a.checked}},{key:"filterProduk",value:function(a){var e=this;this.apiService.get("farmasi/get-produk-resep?namaproduk="+a.query).subscribe(function(a){e.listProduk=a})}},{key:"getSatuan",value:function(){null!=this.item.produk.id&&this.GETKONVERSI()}},{key:"GETKONVERSI",value:function(){var a=this;this.listSatuan=this.item.produk.konversisatuan,0==this.listSatuan.length&&(this.listSatuan=[{ssid:this.item.produk.ssid,satuanstandar:this.item.produk.satuanstandar}]),this.item.satuan={ssid:this.item.produk.ssid,satuanstandar:this.item.produk.satuanstandar},this.item.nilaiKonversi=1,null!=this.item.ruangan&&(this.statusTambah=!1,this.apiService.get("general/get-produkdetail-general?produkfk="+this.item.produk.id+"&ruanganfk="+this.item.ruangan.id).subscribe(function(e){a.dataProdukDetail=e.detail,a.item.stok=e.jmlstok/a.item.nilaiKonversi,a.onChangeKonversi(),0==e.kekuatan&&(e.kekuatan=1),a.item.kekuatan=e.kekuatan,a.item.sediaan=e.sediaan,a.tglkadaluarsa=r(a.dataProdukDetail[0].tglkadaluarsa).format("YYYY-MM-DD HH:mm"),a.dataProdukDetail.length>0&&(null!=a.dataSelected?(a.item.nilaiKonversi=a.dataSelected.nilaikonversi,a.item.stok=a.dataSelected.jmlstok,a.item.jumlah=a.dataSelected.jumlah,a.item.hargaSatuan=a.dataSelected.hargasatuan,0!=a.dataSelected.hargadiscount?(a.hargaDiskon=parseFloat(a.item.hargaSatuan)-parseFloat(a.dataSelected.hargadiscount),a.item.hargaDiskon=parseFloat(a.item.hargaSatuan)/parseFloat(a.dataSelected.hargadiscount)):(a.hargaDiskon=0,a.item.hargaDiskon=0),a.item.hargaTotal=a.dataSelected.total,null!=a.item.kekuatan&&0!=a.item.kekuatan&&(a.item.jumlahxmakan=parseFloat(a.item.jumlah)/parseFloat(a.item.dosis)*parseFloat(a.item.kekuatan))):(a.hargaDiskon=0,a.item.hargaDiskon=0)),a.statusTambah=!0,a.gettotal()}))}},{key:"onChangeQty",value:function(a){this.item.jumlah=a.value,this.gettotal()}},{key:"onChangeJmlXMakan",value:function(a){null!=this.item.kekuatan&&0!=this.item.kekuatan||(this.item.kekuatan=1),this.item.jumlah=parseFloat(this.item.jumlahxmakan)*parseFloat(this.item.dosis)/parseFloat(this.item.kekuatan)}},{key:"onChangeKonversi",value:function(){this.item.stok>0&&(this.item.stok=parseFloat(this.item.stok)*parseFloat(this.item.nilaiKonversi),this.item.jumlah=1,this.item.hargaSatuan=0,this.item.hargaDiskon=0,this.item.hargaTotal=0)}},{key:"onChangeDiskon",value:function(a){this.item.hargaDiskon=parseFloat(a.value),this.hargaDiskon=0;var e=this.item.hargaSatuan-this.item.hargaSatuan*this.item.hargaDiskon/100;this.hargaDiskon=e,this.item.hargaTotal=this.item.jumlah*e}},{key:"getNilaiKonversi",value:function(){this.item.nilaiKonversi=this.item.satuan.nilaikonversi}},{key:"gettotal",value:function(){for(var a=!1,e=0;e<this.dataProdukDetail.length;e++)if(a=!1,this.item.jumlah*parseFloat(this.item.nilaiKonversi)>0){this.hrg1=Math.round(parseFloat(this.dataProdukDetail[e].hargajual)*parseFloat(this.item.nilaiKonversi)),this.item.hargaSatuan=parseFloat(this.hrg1),this.item.hargaTotal=this.item.jumlah*this.hrg1,this.noTerima=this.dataProdukDetail[e].norec,a=!0;break}0==a&&(this.item.hargaSatuan=0,this.item.total=0,this.noTerima=""),0==this.item.jumlah&&(this.item.hargaSatuan=0)}},{key:"kosongkan",value:function(){this.dataSelected=void 0,delete this.item.produk,delete this.item.satuan,delete this.item.nilaiKonversi,delete this.item.sediaan,delete this.item.kekuatan,this.item.stok=0,this.item.jumlah=1,this.item.no=void 0,this.item.hargaSatuan=0,delete this.item.satuanresep,delete this.item.KeteranganPakai,this.item.hargaDiskon=0,this.item.hargaTotal=0,this.hargaDiskon=0,this.tglkadaluarsa=void 0}},{key:"clear",value:function(){"Racikan"!=this.item.jenisKemasan.jeniskemasan&&delete this.item.jenisRacikan}},{key:"getSelected",value:function(){var a=0;if(this.item.aturanCheck.length>0)for(var e=Object.keys(this.item.aturanCheck),t=0;t<e.length;t++){var i=e[t];1==this.item.aturanCheck[parseInt(i)]?("1"==i&&(this.item.chkp=1),"2"==i&&(this.item.chks=1),"3"==i&&(this.item.chksr=1),"4"==i&&(this.item.chkm=1)):("1"==i&&(this.item.chkp=0),"2"==i&&(this.item.chks=0),"3"==i&&(this.item.chksr=0),"4"==i&&(this.item.chkm=0))}1==this.item.chkp&&(a+=1),1==this.item.chks&&(a+=1),1==this.item.chksr&&(a+=1),1==this.item.chkm&&(a+=1),this.item.aturanpakaitxt=a+"x1",0==a&&(this.item.aturanpakaitxt="")}},{key:"batal",value:function(){this.kosongkan(),this.clear()}},{key:"batalGrid",value:function(){this.disabledRuangan=!1,this.kosongkan(),this.clear(),this.data2=[],this.dataSource=void 0}},{key:"hapusD",value:function(a){for(var e=this.data2.length-1;e>=0;e--)if(this.data2[e].no==a.no){this.data2.splice(e,1);var t=0;for(e=this.data2.length-1;e>=0;e--)t+=parseFloat(this.data2[e].total),this.data2[e].no=e+1;this.dataSource=this.data2,this.item.totalSubTotal=t}"Racikan"!=this.item.jenisKemasan.jeniskemasan&&(this.item.rke=parseFloat(this.item.rke)-1),this.kosongkan()}},{key:"editD",value:function(a){var e=this;if(0!=this.statusTambah){var t=[];this.dataSelected=a,this.item.no=a.no,this.item.rke=a.rke,null!=a.jenisobatfk&&this.apiService.get("farmasi/get-jenis-obat?jrid="+a.jenisobatfk).subscribe(function(a){0!=a.data.length&&(e.item.jenisRacikan={id:a.data[0].id,jenisracikan:a.data[0].jenisracikan})}),null!=this.item.jenisKemasan&&this.item.jenisKemasan.id==a.jeniskemasanfk||(this.item.jenisKemasan={id:a.jeniskemasanfk,jeniskemasan:a.jeniskemasan}),this.item.satuanresep={id:a.satuanresepfk,satuanresep:a.satuanresep},this.item.jumlahxmakan=a.jumlahxmakan,this.item.dosis=a.dosis,this.item.aturanPakai={id:a.aturanpakaifk,name:a.aturanpakai},this.item.aturanpakaitxt=a.aturanpakai,this.item.KeteranganPakai=a.keterangan,this.item.aturanCheck=[],null!=a.ispagi&&"0"!=a.ispagi&&(this.item.aturanCheck[1]=!0),null!=a.issiang&&"0"!=a.issiang&&(this.item.aturanCheck[2]=!0),null!=a.issore&&"0"!=a.issore&&(this.item.aturanCheck[3]=!0),null!=a.ismalam&&"0"!=a.ismalam&&(this.item.aturanCheck[4]=!0),this.getSelected(),this.item.asal={id:a.asalprodukfk,asalproduk:a.asalproduk},this.apiService.get("farmasi/get-produk-resep?idproduk="+a.produkfk).subscribe(function(i){e.listProduk=i;for(var n=e.listProduk.length-1;n>=0;n--)if(e.listProduk[n].id==a.produkfk){t=e.listProduk[n];break}e.item.produk=t,e.GETKONVERSI()})}}},{key:"Kembali",value:function(){window.history.back()}},{key:"save",value:function(){var a=this;if(this.isSimpan=!0,null!=this.item.ruangan)if(null!=this.item.penulisResep)if(null!=this.item.tglresep)if(null!=this.item.pasien.namapasien)if(0!=this.data2.length){for(var e=0,t=this.data2.length-1;t>=0;t--)e+=parseFloat(this.data2[t].total);var i={noresep:this.norec_resep,tglresep:r(this.item.tglresep).format("YYYY-MM-DD HH:mm:ss"),nocm:null!=this.item.pasien.norm?this.item.pasien.norm:"-",namapasien:this.item.pasien.namapasien,penulisresepfk:this.item.penulisResep.id,ruanganfk:this.item.ruangan.id,keteranganlainnya:"Resep Non Layanan",totalharusdibayar:e,tglLahir:null!=this.item.pasien.tgllahir?r(this.item.pasien.tgllahir).format("YYYY-MM-DD HH:mm"):null,noTelepon:null!=this.item.pasien.notelepon?this.item.pasien.notelepon:"-",alamat:null!=this.item.pasien.alamatlengkap?this.item.pasien.alamatlengkap:"-",jkid:null!=this.item.pasien.jeniskelamin?this.item.pasien.jeniskelamin.id:null};this.apiService.post("farmasi/save-resep-nonlayanan",{strukresep:i,details:this.data2}).subscribe(function(e){"-"==a.norec_resep?a.apiService.postLog("Simpan Pelayanan Resep Non Layanan","Norec strukresep_t",e.data.norec,"Simpan Pelayanan Resep Non Layanan Dengan Noresep - "+e.data.nostruk+" atas Nama Pasien - "+e.data.namapasien_klien).subscribe(function(a){}):a.apiService.postLog("Simpan Ubah Pelayanan Resep Non Layanan","Norec strukresep_t",e.data.norec,"Simpan Ubah Pelayanan Resep Non Layanan Dengan Noresep - "+e.data.nostruk+" atas Nama Pasien - "+e.data.namapasien_klien).subscribe(function(a){}),a.kosongkan(),a.clear(),a.data2=[],a.dataSource=void 0,window.history.back()})}else alert("Pilih Produk terlebih dahulu!!");else this.alertService.error("Info","Nama Pasien Masih Kosong!");else this.alertService.error("Info","Data Tanggal Resep Masih Kosong!");else this.alertService.error("Info","Data Penulis Resep Masih Kosong!");else this.alertService.error("Info","Data Ruangan Masih Kosong!")}}])&&e(i.prototype,n),s&&e(i,s),t}(),L.\u0275fac=function(a){return new(a||L)(h.Jb(u.a),h.Jb(u.b),h.Jb(l.a),h.Jb(l.h),h.Jb(d.a),h.Jb(m.a),h.Jb(p.a),h.Jb(o.a),h.Jb(o.f))},L.\u0275cmp=h.Db({type:L,selectors:[["app-input-resep-nonlayanan"]],features:[h.wb([l.a])],decls:151,vars:72,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-grid"],[1,"p-col-12","p-md-3"],[1,"p-col-12","p-md-12"],["header","Data Resep",3,"toggleable"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd","placeholder","Tgl Resep","hourFormat","24",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","maxDate","ngModelChange"],["placeholder","Ruangan ","optionLabel","namaruangan","dataKey","id",3,"options","ngModel","filter","showClear","disabled","ngModelChange"],["type","text","pInputText","","placeholder","Nomor Resep","disabled","",3,"ngModel","ngModelChange"],["placeholder","Penulis","optionLabel","namalengkap",3,"options","ngModel","filter","showClear","ngModelChange"],["header","Info Pasien",3,"toggleable"],["type","text","pInputText","","placeholder","Nomor RM",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Nama Pasien",3,"ngModel","ngModelChange"],["placeholder","Jenis Kelamin","optionLabel","jeniskelamin","dataKey","id",3,"options","ngModel","filter","showClear","ngModelChange"],["yearRange","1980:2030","dateFormat","yy-mm-dd","placeholder","Tgl Lahir","hourFormat","24",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","ngModelChange"],["type","text","pInputText","","placeholder","Telepon",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Alamat",3,"ngModel","ngModelChange"],[1,"p-col-12","p-md-9"],["header","Resep",3,"toggleable"],["label","Obat Kronis","binary","true","inputId","item.SelectedObatKronis",3,"ngModel","ngModelChange","onChange"],[1,"p-col-12","p-md-1"],["type","text","pInputText","","placeholder","R/Ke ",3,"ngModel","ngModelChange"],["class","p-col-12 p-md-6 p-field-checkbox",4,"ngFor","ngForOf"],["class","p-col-12 p-md-2",4,"ngIf"],["type","text","pInputText","","placeholder","Kekuatan",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Stok",3,"ngModel","ngModelChange"],[1,"p-col-12","p-md-4"],["field","namaproduk","placeholder","Pilih Produk",3,"ngModel","suggestions","dropdown","ngModelChange","completeMethod","onSelect"],["placeholder","Qty","inputId","stacked",3,"ngModel","showButtons","ngModelChange","onInput"],[1,"p-col-12","p-md-2"],["placeholder","Satuan ","optionLabel","satuanstandar","dataKey","id",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["type","text","pInputText","","placeholder","Harga","disabled","",3,"ngModel","ngModelChange"],["placeholder","Disc %","inputId","stacked",3,"ngModel","showButtons","ngModelChange","onInput"],["type","text","pInputText","","placeholder","Total","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Aturan Pakai",3,"ngModel","ngModelChange"],["class","p-col-12 p-md-3 p-field-checkbox",4,"ngFor","ngForOf"],["placeholder","Satuan Resep  ","optionLabel","satuanresep","dataKey","id",3,"options","ngModel","filter","showClear","ngModelChange"],["type","text","pInputText","","placeholder","Keterangan",3,"ngModel","ngModelChange"],[1,"p-col-12","p-md-2","p-md-offset-8"],["pButton","","type","button","icon","pi pi-plus","pTooltip","Tambah","label","Tambah",1,"p-button","p-button-success","p-mr-2",3,"disabled","click"],["pButton","","type","button","icon","pi pi-refresh","pTooltip","Batal","label","Batal",1,"p-button","p-button-warning","p-mr-2",3,"click"],["header","Detail Resep",3,"toggleable"],["styleClass","p-datatable-customers","scrollable","true","dataKey","no",3,"value","columns","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],[1,"p-col-12","p-md-6"],[1,"p-col-12","p-md-3","p-md-offset-3"],["pButton","","type","button","icon","pi pi-save","pTooltip","Simpan Data","label","Simpan",1,"p-button","p-mr-2",3,"disabled","click"],["pButton","","type","button","icon","pi pi-refresh","pTooltip","Batal","label","Reset",1,"p-button","p-button-danger","p-mr-2",3,"click"],["pButton","","type","button","icon","fa fa-arrow-left","pTooltip","Kembali","label","Kembali",1,"p-button","p-button-danger","p-mr-2",3,"click"],[1,"p-col-12","p-md-6","p-field-checkbox"],["name","group2",3,"inputId","value","ngModel","ngModelChange","onClick"],[3,"for"],["placeholder","Jumlah","inputId","stacked",3,"ngModel","showButtons","ngModelChange","onInput"],["type","text","pInputText","","placeholder","Dosis",3,"ngModel","ngModelChange","input"],["placeholder","Jenis Racikan","optionLabel","jenisracikan","dataKey","id",3,"options","ngModel","filter","showClear","ngModelChange"],[1,"p-col-12","p-md-3","p-field-checkbox"],[1,"p-col-12"],["binary","true",3,"ngModel","inputId","ngModelChange","onChange"],[1,"p-col-12",2,"margin-top","-12px"],[2,"width","80px"],[3,"style",4,"ngFor","ngForOf"],["pButton","","type","button","icon","pi pi-user-edit","pTooltip","Edit Data","label","",1,"p-button-rounded","p-mr-2",3,"click"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus Data","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],[4,"ngIf"],["rowspan","6"]],template:function(a,e){1&a&&(h.Qb(0,"div",0),h.Qb(1,"div",1),h.Qb(2,"h4"),h.Jc(3,"Input Resep Non Layanan"),h.Pb(),h.Qb(4,"div",2),h.Qb(5,"div",3),h.Qb(6,"div",2),h.Qb(7,"div",4),h.Qb(8,"div",2),h.Qb(9,"div",4),h.Qb(10,"p-panel",5),h.Qb(11,"div",4),h.Qb(12,"div",2),h.Qb(13,"div",4),h.Qb(14,"label",6),h.Jc(15,"Tgl Resep"),h.Pb(),h.Qb(16,"p-calendar",7),h.Yb("ngModelChange",function(a){return e.item.tglresep=a}),h.Pb(),h.Pb(),h.Qb(17,"div",4),h.Qb(18,"label",6),h.Jc(19,"Ruangan "),h.Pb(),h.Qb(20,"p-dropdown",8),h.Yb("ngModelChange",function(a){return e.item.ruangan=a}),h.Pb(),h.Pb(),h.Qb(21,"div",4),h.Qb(22,"label",6),h.Jc(23,"Nomor Resep"),h.Pb(),h.Qb(24,"input",9),h.Yb("ngModelChange",function(a){return e.item.nomorResep=a}),h.Pb(),h.Pb(),h.Qb(25,"div",4),h.Qb(26,"label",6),h.Jc(27,"Penulis Resep "),h.Pb(),h.Qb(28,"p-dropdown",10),h.Yb("ngModelChange",function(a){return e.item.penulisResep=a}),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Qb(29,"div",4),h.Qb(30,"p-panel",11),h.Qb(31,"div",4),h.Qb(32,"div",2),h.Qb(33,"div",4),h.Qb(34,"label",6),h.Jc(35,"Nomor RM"),h.Pb(),h.Qb(36,"input",12),h.Yb("ngModelChange",function(a){return e.item.pasien.norm=a})("keyup.enter",function(){return e.cariPasien()}),h.Pb(),h.Pb(),h.Qb(37,"div",4),h.Qb(38,"label",6),h.Jc(39,"Nama"),h.Pb(),h.Qb(40,"input",13),h.Yb("ngModelChange",function(a){return e.item.pasien.namapasien=a}),h.Pb(),h.Pb(),h.Qb(41,"div",4),h.Qb(42,"label",6),h.Jc(43,"Jenis Kelamin"),h.Pb(),h.Qb(44,"p-dropdown",14),h.Yb("ngModelChange",function(a){return e.item.pasien.jeniskelamin=a}),h.Pb(),h.Pb(),h.Qb(45,"div",4),h.Qb(46,"label",6),h.Jc(47,"Tgl Lahir"),h.Pb(),h.Qb(48,"p-calendar",15),h.Yb("ngModelChange",function(a){return e.item.pasien.tgllahir=a}),h.Pb(),h.Pb(),h.Qb(49,"div",4),h.Qb(50,"label",6),h.Jc(51,"Nomor Telepon"),h.Pb(),h.Qb(52,"input",16),h.Yb("ngModelChange",function(a){return e.item.pasien.notelepon=a}),h.Pb(),h.Pb(),h.Qb(53,"div",4),h.Qb(54,"label",6),h.Jc(55,"Alamat"),h.Pb(),h.Qb(56,"input",17),h.Yb("ngModelChange",function(a){return e.item.pasien.alamatlengkap=a}),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Qb(57,"div",18),h.Qb(58,"div",2),h.Qb(59,"div",4),h.Qb(60,"div",2),h.Qb(61,"div",4),h.Qb(62,"p-panel",19),h.Qb(63,"div",2),h.Qb(64,"div",3),h.Qb(65,"p-checkbox",20),h.Yb("ngModelChange",function(a){return e.item.SelectedObatKronis=a})("onChange",function(a){return e.ObatKronis(a)}),h.Pb(),h.Pb(),h.Pb(),h.Qb(66,"div",2),h.Qb(67,"div",21),h.Qb(68,"label",6),h.Jc(69,"R/Ke "),h.Pb(),h.Qb(70,"input",22),h.Yb("ngModelChange",function(a){return e.item.rke=a}),h.Pb(),h.Pb(),h.Qb(71,"div",3),h.Qb(72,"label",6),h.Jc(73,"Jenis Kemasan "),h.Pb(),h.Qb(74,"div",2),h.Hc(75,j,4,5,"div",23),h.Pb(),h.Pb(),h.Hc(76,C,4,2,"div",24),h.Hc(77,w,4,1,"div",24),h.Hc(78,R,4,4,"div",24),h.Qb(79,"div",21),h.Qb(80,"label",6),h.Jc(81),h.Pb(),h.Qb(82,"input",25),h.Yb("ngModelChange",function(a){return e.item.kekuatan=a}),h.Pb(),h.Pb(),h.Qb(83,"div",21),h.Qb(84,"label",6),h.Jc(85,"Stok"),h.Pb(),h.Qb(86,"input",26),h.Yb("ngModelChange",function(a){return e.item.stok=a}),h.Pb(),h.Pb(),h.Pb(),h.Qb(87,"div",2),h.Qb(88,"div",27),h.Qb(89,"label",6),h.Jc(90,"Produk "),h.Pb(),h.Qb(91,"p-autoComplete",28),h.Yb("ngModelChange",function(a){return e.item.produk=a})("completeMethod",function(a){return e.filterProduk(a)})("onSelect",function(){return e.getSatuan()}),h.Pb(),h.Pb(),h.Qb(92,"div",21),h.Qb(93,"label",6),h.Jc(94,"Qty Obat "),h.Pb(),h.Qb(95,"p-inputNumber",29),h.Yb("ngModelChange",function(a){return e.item.jumlah=a})("onInput",function(a){return e.onChangeQty(a)}),h.Pb(),h.Pb(),h.Qb(96,"div",30),h.Qb(97,"label",6),h.Jc(98,"Satuan "),h.Pb(),h.Qb(99,"p-dropdown",31),h.Yb("ngModelChange",function(a){return e.item.satuan=a})("onChange",function(){return e.getNilaiKonversi()}),h.Pb(),h.Pb(),h.Qb(100,"div",30),h.Qb(101,"label",6),h.Jc(102,"Harga "),h.Pb(),h.Qb(103,"input",32),h.Yb("ngModelChange",function(a){return e.item.hargaSatuan=a}),h.Pb(),h.Pb(),h.Qb(104,"div",21),h.Qb(105,"label",6),h.Jc(106,"Diskon (%)"),h.Pb(),h.Qb(107,"p-inputNumber",33),h.Yb("ngModelChange",function(a){return e.item.hargaDiskon=a})("onInput",function(a){return e.onChangeDiskon(a)}),h.Pb(),h.Pb(),h.Qb(108,"div",30),h.Qb(109,"label",6),h.Jc(110,"Total "),h.Pb(),h.Qb(111,"input",34),h.Yb("ngModelChange",function(a){return e.item.hargaTotal=a}),h.Pb(),h.Pb(),h.Qb(112,"div",30),h.Qb(113,"label",6),h.Jc(114,"Aturan Pakai "),h.Pb(),h.Qb(115,"input",35),h.Yb("ngModelChange",function(a){return e.item.aturanpakaitxt=a}),h.Pb(),h.Pb(),h.Qb(116,"div",30),h.Qb(117,"label",6),h.Jc(118,"\xa0 "),h.Pb(),h.Qb(119,"div",2),h.Hc(120,D,7,4,"div",36),h.Pb(),h.Pb(),h.Qb(121,"div",3),h.Qb(122,"label",6),h.Jc(123,"Satuan Resep "),h.Pb(),h.Qb(124,"p-dropdown",37),h.Yb("ngModelChange",function(a){return e.item.satuanresep=a}),h.Pb(),h.Pb(),h.Qb(125,"div",3),h.Qb(126,"label",6),h.Jc(127,"Keterangan "),h.Pb(),h.Qb(128,"input",38),h.Yb("ngModelChange",function(a){return e.item.KeteranganPakai=a}),h.Pb(),h.Pb(),h.Pb(),h.Qb(129,"div",2),h.Qb(130,"div",39),h.Qb(131,"button",40),h.Yb("click",function(){return e.tambah()}),h.Pb(),h.Pb(),h.Qb(132,"div",30),h.Qb(133,"button",41),h.Yb("click",function(){return e.batal()}),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Qb(134,"div",4),h.Qb(135,"p-panel",42),h.Qb(136,"p-table",43),h.Hc(137,T,3,1,"ng-template",44),h.Hc(138,F,5,1,"ng-template",45),h.Hc(139,N,5,1,"ng-template",46),h.Pb(),h.Pb(),h.Pb(),h.Qb(140,"div",4),h.Qb(141,"div",2),h.Lb(142,"div",47),h.Qb(143,"div",47),h.Qb(144,"div",2),h.Qb(145,"div",48),h.Qb(146,"button",49),h.Yb("click",function(){return e.save()}),h.Pb(),h.Pb(),h.Qb(147,"div",3),h.Qb(148,"button",50),h.Yb("click",function(){return e.batalGrid()}),h.Pb(),h.Pb(),h.Qb(149,"div",3),h.Qb(150,"button",51),h.Yb("click",function(){return e.Kembali()}),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb(),h.Pb()),2&a&&(h.xb(10),h.ic("toggleable",!0),h.xb(6),h.ic("ngModel",e.item.tglresep)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0)("maxDate",e.maxDateValue),h.xb(4),h.ic("options",e.listRuangan)("ngModel",e.item.ruangan)("filter",!0)("showClear",!0)("disabled",e.disabledRuangan),h.xb(4),h.ic("ngModel",e.item.nomorResep),h.xb(4),h.ic("options",e.listPenulisResep)("ngModel",e.item.penulisResep)("filter",!0)("showClear",!0),h.xb(2),h.ic("toggleable",!0),h.xb(6),h.ic("ngModel",e.item.pasien.norm),h.xb(4),h.ic("ngModel",e.item.pasien.namapasien),h.xb(4),h.ic("options",e.listJenisKelamin)("ngModel",e.item.pasien.jeniskelamin)("filter",!0)("showClear",!0),h.xb(4),h.ic("ngModel",e.item.pasien.tgllahir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),h.xb(4),h.ic("ngModel",e.item.pasien.notelepon),h.xb(4),h.ic("ngModel",e.item.pasien.alamatlengkap),h.xb(6),h.ic("toggleable",!0),h.xb(3),h.ic("ngModel",e.item.SelectedObatKronis),h.xb(5),h.ic("ngModel",e.item.rke),h.xb(5),h.ic("ngForOf",e.listJenisKemasan),h.xb(1),h.ic("ngIf",e.showRacikanDose),h.xb(1),h.ic("ngIf",e.showRacikanDose),h.xb(1),h.ic("ngIf",e.showRacikanDose),h.xb(3),h.Lc("Kekuatan ",e.item.sediaan,""),h.xb(1),h.ic("ngModel",e.item.kekuatan),h.xb(4),h.ic("ngModel",e.item.stok),h.xb(5),h.ic("ngModel",e.item.produk)("suggestions",e.listProduk)("dropdown",!0),h.xb(4),h.ic("ngModel",e.item.jumlah)("showButtons",!0),h.xb(4),h.ic("options",e.listSatuan)("ngModel",e.item.satuan)("filter",!0)("showClear",!0),h.xb(4),h.ic("ngModel",e.item.hargaSatuan),h.xb(4),h.ic("ngModel",e.item.hargaDiskon)("showButtons",!0),h.xb(4),h.ic("ngModel",e.item.hargaTotal),h.xb(4),h.ic("ngModel",e.item.aturanpakaitxt),h.xb(5),h.ic("ngForOf",e.listDataSigna),h.xb(4),h.ic("options",e.listsatuanresep)("ngModel",e.item.satuanresep)("filter",!0)("showClear",!0),h.xb(4),h.ic("ngModel",e.item.KeteranganPakai),h.xb(3),h.ic("disabled",!e.statusTambah),h.xb(4),h.ic("toggleable",!0),h.xb(1),h.ic("value",e.dataSource)("columns",e.columnGrid)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",h.mc(71,B))("paginator",!0)("pageLinks",5),h.xb(10),h.ic("disabled",e.isSimpan))},directives:[b.a,c.a,g.g,g.h,k.a,g.a,f.a,v.a,s.k,s.l,P.a,Q.a,M.b,x.a,S.h,l.k,y.a],styles:[""]}),L)}],G=((H=function e(){a(this,e)}).\u0275mod=h.Hb({type:H}),H.\u0275inj=h.Gb({factory:function(a){return new(a||H)},imports:[[o.j.forChild(_)],o.j]}),H),$=n("PCNd"),E=((O=function e(){a(this,e)}).\u0275mod=h.Hb({type:O}),O.\u0275inj=h.Gb({factory:function(a){return new(a||O)},imports:[[s.b,G,$.a]]}),O)}}])}();