!function(){function e(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function a(e,a){for(var t=0;t<a.length;t++){var i=a[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"88ya":function(t,i,n){"use strict";n.r(i),n.d(i,"DaftarPenerimaanKasirModule",function(){return K});var r=n("ofXK"),o=n("tyNb"),l=n("7zfz"),b=n("wd/R"),s=n("fXoL"),d=n("EJUL"),c=n("U+s4"),p=n("G0w9"),m=n("ujBT"),u=n("eO1q"),g=n("3Pt+"),h=n("arFO"),f=n("lVkt"),P=n("jIHw"),v=n("xlun"),y=n("rEr+"),M=n("7kUa"),Q=n("7CaW");function w(e,a){if(1&e&&(s.Qb(0,"th",35),s.Jc(1),s.Lb(2,"p-sortIcon",36),s.Pb()),2&e){var t=a.$implicit;s.Fc("width: ",t.width,""),s.jc("pSortableColumn",t.field),s.xb(1),s.Lc(" ",t.header," "),s.xb(1),s.jc("field",t.field)}}function k(e,a){if(1&e&&(s.Qb(0,"tr"),s.Hc(1,w,3,6,"th",34),s.Pb()),2&e){var t=a.$implicit;s.xb(1),s.ic("ngForOf",t)}}function x(e,a){if(1&e&&(s.Qb(0,"span"),s.Jc(1),s.Pb()),2&e){var t=s.bc().$implicit,i=s.bc().$implicit,n=s.bc();s.xb(1),s.Lc(" ",n.formatRupiah(i[t.field],"")," ")}}function C(e,a){if(1&e&&(s.Qb(0,"span"),s.Jc(1),s.Pb()),2&e){var t=s.bc().$implicit,i=s.bc().$implicit;s.xb(1),s.Lc(" ",i[t.field],"")}}function T(e,a){if(1&e&&(s.Qb(0,"td"),s.Hc(1,x,2,1,"span",39),s.Hc(2,C,2,1,"span",39),s.Pb()),2&e){var t=a.$implicit;s.Fc("width: ",t.width,""),s.xb(1),s.ic("ngIf",null!=t.isCurrency),s.xb(1),s.ic("ngIf",null==t.isCurrency)}}function D(e,a){if(1&e&&(s.Qb(0,"tr",37),s.Hc(1,T,3,5,"td",38),s.Pb()),2&e){var t=a.columns,i=a.rowIndex;s.ic("pSelectableRow",a.$implicit)("pSelectableRowIndex",i),s.xb(1),s.ic("ngForOf",t)}}var R,J,Y,N=function(){return[5,10,25,50]},B=[{path:"",component:(R=function(){function t(a,i,n,r,o,l,b,s,d){e(this,t),this.apiService=a,this.authService=i,this.confirmationService=n,this.messageService=r,this.cacheHelper=o,this.dateHelper=l,this.alertService=b,this.route=s,this.router=d,this.item={},this.listPetugasPenerima=[],this.isDeposit=!1,this.isCicilanPasien=!1}var i,n,r;return i=t,(n=[{key:"ngOnInit",value:function(){this.loginUser=this.authService.getDataLoginUser(),this.dateNow=new Date,this.item.tglAwal=new Date(b(this.dateNow).format("YYYY-MM-DD 00:00")),this.item.tglAkhir=new Date(b(this.dateNow).format("YYYY-MM-DD 23:59")),this.column=[{field:"no",header:"No",width:"65px"},{field:"tglsbm",header:"Tgl Bayar",width:"140px"},{field:"nosbm",header:"No Bayar",width:"140px"},{field:"nocm",header:"No RM",width:"125px"},{field:"noregistrasi",header:"Noregistrasi",width:"125px"},{field:"namapasien",header:"Nama Pasien",width:"250px"},{field:"namapasien_klien",header:"Deskripsi",width:"250px"},{field:"namaruangan",header:"Ruangan",width:"180px"},{field:"keterangan",header:"Jenis Pembayaran",width:"180px"},{field:"carabayar",header:"Cara Bayar",width:"140px"},{field:"totalpenerimaan",header:"Total Penerimaan",width:"160px",isCurrency:!0},{field:"namalengkap",header:"Petugas",width:"180px"},{field:"status",header:"Stat Setor",width:"140px"}],this.getDataCombo()}},{key:"getDataCombo",value:function(){var e=this;this.apiService.get("bendaharapenerimaan/get-combo-bp").subscribe(function(a){e.listCaraBayar=a.carabayar,e.listKelompokTransaksi=a.jenistransaksi,e.listPetugasPenerima=a.petugaskasir,e.LoadCache()})}},{key:"LoadCache",value:function(){var e=this.cacheHelper.get("cacheDaftarPenerimaanPembayaran");null!=e?(this.item.tglAwal=new Date(e[0]),this.item.tglAkhir=new Date(e[1]),this.LoadData()):this.LoadData()}},{key:"formatRupiah",value:function(e,a){return a+" "+parseFloat(e).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}},{key:"LoadData",value:function(){var e=this,a=b(this.item.tglAwal).format("YYYY-MM-DD HH:mm"),t=b(this.item.tglAkhir).format("YYYY-MM-DD HH:mm");this.cacheHelper.set("cacheDaftarPenerimaanPembayaran",{0:a,1:t});var i="";null!=this.item.dataCaraBayar&&(i=this.item.dataCaraBayar.id);var n="";null!=this.item.dataKelTransaksi&&(n=this.item.dataKelTransaksi.id);var r=this.item.noBuktiBayar,o="";if(null!=this.item.selectedKasir){for(var l="",s=this.item.selectedKasir.length-1;s>=0;s--)l+=","+this.item.selectedKasir[s].id;o=l.slice(1,l.length)}this.apiService.get("kasir/data-penerimaan-pembayaran?dateStartTglSbm="+a+"&dateEndTglSbm="+t+"&idCaraBayar="+i+"&idKelTransaksi="+n+"&nosbm="+r+"&nocm="+this.item.noRM+"&noregistrasi="+this.item.Noregistrasi+"&nama="+this.item.namaPasien+"&desk="+this.item.Desk+"&KasirArr="+o).subscribe(function(a){for(var t=a,i=0,n=0,r=0,o=0,l=0,b=0,s=0;s<t.length;s++){var d=t[s];d.no=s+1,null==d.nocm&&(d.nocm="-"),null==d.namapasien&&(d.namapasien="-"),null==d.noregistrasi&&(d.noregistrasi="-"),null==d.namaruangan&&(d.namaruangan="-"),null==d.namapasien_klien&&(d.namapasien_klien="-"),null==d.namapasien&&(d.namapasien="-"),d.status=null!=d.noclosing?"Setor":"Belum Setor","TUNAI"==d.carabayar&&(i=parseFloat(d.totalpenerimaan)+i),"KARTU DEBIT"==d.carabayar&&(n=parseFloat(d.totalpenerimaan)+n),"KARTU KREDIT"==d.carabayar&&(r=parseFloat(d.totalpenerimaan)+r),"TRANSFER BANK"==d.carabayar&&(l=parseFloat(d.totalpenerimaan)+l),"DONASI"==d.carabayar&&(o=parseFloat(d.totalpenerimaan)+o),"MIX"==d.carabayar&&(b=parseFloat(d.totalpenerimaan)+b)}e.item.totalCash=e.formatRupiah(i,"RP."),e.item.totalDebit=e.formatRupiah(n,"RP."),e.item.totalKredit=e.formatRupiah(r,"RP."),e.item.totalDonasi=e.formatRupiah(o,"RP."),e.item.totalMix=e.formatRupiah(b,"RP."),e.item.totalTrf=e.formatRupiah(l,"RP."),e.dataTable=t})}},{key:"cari",value:function(){this.LoadData()}},{key:"onRowSelect",value:function(e){var a=this;this.apiService.get("general/get-data-closing-pasien/"+e.data.noregistrasi).subscribe(function(t){t.length>0?a.alertService.error("Peringatan!","Registrasi Ini Telah Diclosing Tidak Bisa Diubah!"):a.selected=e.data})}}])&&a(i.prototype,n),r&&a(i,r),t}(),R.\u0275fac=function(e){return new(e||R)(s.Jb(d.a),s.Jb(d.b),s.Jb(l.a),s.Jb(l.h),s.Jb(c.a),s.Jb(p.a),s.Jb(m.a),s.Jb(o.a),s.Jb(o.f))},R.\u0275cmp=s.Db({type:R,selectors:[["app-daftar-penerimaan-kasir"]],features:[s.wb([l.a,l.h])],decls:90,vars:42,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[1,"p-grid"],[1,"p-col-12","p-md-11"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","ngModelChange"],["placeholder","Cara Bayar","optionLabel","carabayar",3,"options","ngModel","filter","showClear","ngModelChange"],[1,"p-col-12","p-md-3"],["placeholder","Jenis Transaksi (Non Layanan)","optionLabel","kelompoktransaksi",3,"options","ngModel","filter","showClear","ngModelChange"],["optionLabel","namalengkap",3,"options","ngModel","ngModelChange"],[1,"p-col-12","p-md-1"],[1,"p-col-12","p-md-12",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",3,"click"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],[1,"p-col-12","p-md-7"],["type","text","pInputText","","placeholder","No Bukti Bayar",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","No Rekam Medis",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Noregistrasi",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Nama Pasien",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-5"],["header","Rincian Peneriman",3,"toggleable"],[1,"p-col-12","p-md-6"],["for","input"],["type","text","pInputText","","placeholder","Total Penerimaan Tunai","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Total Penerimaan Debit","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Total Penerimaan Kredit","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Total Penerimaan Donasi","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Total Penerimaan Mix","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Total Penerimaan Transfer Bank","disabled","",3,"ngModel","ngModelChange"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],[3,"style",4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(e,a){1&e&&(s.Qb(0,"div",0),s.Qb(1,"div",1),s.Qb(2,"h4"),s.Jc(3,"Daftar Penerimaan Pembayaran"),s.Pb(),s.Qb(4,"div",2),s.Qb(5,"div",3),s.Qb(6,"div",4),s.Qb(7,"div",3),s.Qb(8,"div",5),s.Qb(9,"label",6),s.Jc(10,"Periode Awal"),s.Pb(),s.Qb(11,"p-calendar",7),s.Yb("ngModelChange",function(e){return a.item.tglAwal=e}),s.Pb(),s.Pb(),s.Qb(12,"div",5),s.Qb(13,"label",6),s.Jc(14,"Periode Akhir"),s.Pb(),s.Qb(15,"p-calendar",7),s.Yb("ngModelChange",function(e){return a.item.tglAkhir=e}),s.Pb(),s.Pb(),s.Qb(16,"div",5),s.Qb(17,"label",6),s.Jc(18,"Cara Bayar"),s.Pb(),s.Qb(19,"p-dropdown",8),s.Yb("ngModelChange",function(e){return a.item.dataCaraBayar=e}),s.Pb(),s.Pb(),s.Qb(20,"div",9),s.Qb(21,"label",6),s.Jc(22,"Jenis Transaksi"),s.Pb(),s.Qb(23,"p-dropdown",10),s.Yb("ngModelChange",function(e){return a.item.dataKelTransaksi=e}),s.Pb(),s.Pb(),s.Qb(24,"div",9),s.Qb(25,"label",6),s.Jc(26,"Petugas Penerima"),s.Pb(),s.Qb(27,"p-multiSelect",11),s.Yb("ngModelChange",function(e){return a.item.selectedKasir=e}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(28,"div",12),s.Qb(29,"div",3),s.Qb(30,"div",13),s.Qb(31,"button",14),s.Yb("click",function(){return a.cari()}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(32,"div",2),s.Qb(33,"p-table",15,16),s.Yb("selectionChange",function(e){return a.selected=e}),s.Hc(35,k,2,1,"ng-template",17),s.Hc(36,D,2,3,"ng-template",18),s.Pb(),s.Pb(),s.Qb(37,"div",2),s.Qb(38,"div",3),s.Qb(39,"div",19),s.Qb(40,"div",3),s.Qb(41,"div",2),s.Qb(42,"div",3),s.Qb(43,"div",5),s.Qb(44,"label",6),s.Jc(45,"No Bayar "),s.Pb(),s.Qb(46,"input",20),s.Yb("ngModelChange",function(e){return a.item.noBuktiBayar=e})("keyup.enter",function(){return a.cari()}),s.Pb(),s.Pb(),s.Qb(47,"div",5),s.Qb(48,"label",6),s.Jc(49,"No Rekam Medis "),s.Pb(),s.Qb(50,"input",21),s.Yb("ngModelChange",function(e){return a.item.noRM=e})("keyup.enter",function(){return a.cari()}),s.Pb(),s.Pb(),s.Qb(51,"div",5),s.Qb(52,"label",6),s.Jc(53,"Noregistrasi"),s.Pb(),s.Qb(54,"input",22),s.Yb("ngModelChange",function(e){return a.item.Noregistrasi=e})("keyup.enter",function(){return a.cari()}),s.Pb(),s.Pb(),s.Qb(55,"div",9),s.Qb(56,"label",6),s.Jc(57,"Nama Pasien "),s.Pb(),s.Qb(58,"input",23),s.Yb("ngModelChange",function(e){return a.item.namaPasien=e})("keyup.enter",function(){return a.cari()}),s.Pb(),s.Pb(),s.Qb(59,"div",9),s.Qb(60,"label",6),s.Jc(61,"Deskripsi"),s.Pb(),s.Qb(62,"input",23),s.Yb("ngModelChange",function(e){return a.item.Desk=e})("keyup.enter",function(){return a.cari()}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(63,"div",24),s.Qb(64,"p-panel",25),s.Qb(65,"div",3),s.Qb(66,"div",26),s.Qb(67,"label",27),s.Jc(68,"Total Penerimaan Tunai"),s.Pb(),s.Qb(69,"input",28),s.Yb("ngModelChange",function(e){return a.item.totalCash=e}),s.Pb(),s.Pb(),s.Qb(70,"div",26),s.Qb(71,"label",27),s.Jc(72,"Total Penerimaan Debit"),s.Pb(),s.Qb(73,"input",29),s.Yb("ngModelChange",function(e){return a.item.totalDebit=e}),s.Pb(),s.Pb(),s.Qb(74,"div",26),s.Qb(75,"label",27),s.Jc(76,"Total Penerimaan Kredit"),s.Pb(),s.Qb(77,"input",30),s.Yb("ngModelChange",function(e){return a.item.totalKredit=e}),s.Pb(),s.Pb(),s.Qb(78,"div",26),s.Qb(79,"label",27),s.Jc(80,"Total Penerimaan Donasi"),s.Pb(),s.Qb(81,"input",31),s.Yb("ngModelChange",function(e){return a.item.totalDonasi=e}),s.Pb(),s.Pb(),s.Qb(82,"div",26),s.Qb(83,"label",27),s.Jc(84,"Total Penerimaan Mix"),s.Pb(),s.Qb(85,"input",32),s.Yb("ngModelChange",function(e){return a.item.totalMix=e}),s.Pb(),s.Pb(),s.Qb(86,"div",26),s.Qb(87,"label",27),s.Jc(88,"Total Penerimaan Transfer Bank"),s.Pb(),s.Qb(89,"input",33),s.Yb("ngModelChange",function(e){return a.item.totalTrf=e}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&e&&(s.xb(11),s.ic("ngModel",a.item.tglAwal)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),s.xb(4),s.ic("ngModel",a.item.tglAkhir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),s.xb(4),s.ic("options",a.listCaraBayar)("ngModel",a.item.dataCaraBayar)("filter",!0)("showClear",!0),s.xb(4),s.ic("options",a.listKelompokTransaksi)("ngModel",a.item.dataKelTransaksi)("filter",!0)("showClear",!0),s.xb(4),s.ic("options",a.listPetugasPenerima)("ngModel",a.item.selectedKasir),s.xb(6),s.ic("columns",a.column)("value",a.dataTable)("selection",a.selected)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",s.mc(41,N))("paginator",!0)("pageLinks",5),s.xb(13),s.ic("ngModel",a.item.noBuktiBayar),s.xb(4),s.ic("ngModel",a.item.noRM),s.xb(4),s.ic("ngModel",a.item.Noregistrasi),s.xb(4),s.ic("ngModel",a.item.namaPasien),s.xb(4),s.ic("ngModel",a.item.Desk),s.xb(2),s.ic("toggleable",!1),s.xb(5),s.ic("ngModel",a.item.totalCash),s.xb(4),s.ic("ngModel",a.item.totalDebit),s.xb(4),s.ic("ngModel",a.item.totalKredit),s.xb(4),s.ic("ngModel",a.item.totalDonasi),s.xb(4),s.ic("ngModel",a.item.totalMix),s.xb(4),s.ic("ngModel",a.item.totalTrf))},directives:[u.a,g.g,g.h,h.a,f.a,P.b,v.a,y.h,l.k,g.a,M.a,Q.a,r.k,y.g,y.f,y.e,r.l],styles:[""]}),R)}],I=((J=function a(){e(this,a)}).\u0275mod=s.Hb({type:J}),J.\u0275inj=s.Gb({factory:function(e){return new(e||J)},imports:[[o.j.forChild(B)],o.j]}),J),S=n("PCNd"),K=((Y=function a(){e(this,a)}).\u0275mod=s.Hb({type:Y}),Y.\u0275inj=s.Gb({factory:function(e){return new(e||Y)},imports:[[r.b,I,S.a]]}),Y)}}])}();