!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{C60u:function(i,a,n){"use strict";n.r(a),n.d(a,"DaftarKonsultasiModule",function(){return E});var r=n("ofXK"),o=n("tyNb"),l=n("wd/R"),s=n("fXoL"),c=n("EJUL"),u=n("U+s4"),d=n("G0w9"),p=n("ujBT"),b=n("eO1q"),g=n("3Pt+"),h=n("7kUa"),m=n("lVkt"),f=n("jIHw"),k=n("xlun"),v=n("rEr+"),w=n("7zfz"),P=n("/RsI"),x=n("V5BG");function y(e,t){if(1&e&&(s.Qb(0,"th",28),s.Jc(1),s.Lb(2,"p-sortIcon",29),s.Pb()),2&e){var i=t.$implicit;s.Fc("width: ",i.width,""),s.jc("pSortableColumn",i.field),s.xb(1),s.Lc(" ",i.header," "),s.xb(1),s.jc("field",i.field)}}function D(e,t){if(1&e&&(s.Qb(0,"tr"),s.Lb(1,"th",26),s.Hc(2,y,3,6,"th",27),s.Pb()),2&e){var i=t.$implicit;s.xb(2),s.ic("ngForOf",i)}}function Q(e,t){if(1&e&&(s.Qb(0,"td"),s.Jc(1),s.Pb()),2&e){var i=t.$implicit,a=s.bc().$implicit;s.Fc("width: ",i.width,""),s.xb(1),s.Lc(" ",a[i.field]," ")}}function M(e,t){if(1&e){var i=s.Sb();s.Qb(0,"tr",30),s.Qb(1,"td",26),s.Qb(2,"button",31),s.Yb("click",function(){s.yc(i);var e=t.$implicit;return s.bc().pengkajianMedis2(e)}),s.Pb(),s.Qb(3,"button",32),s.Yb("click",function(){s.yc(i);var e=t.$implicit;return s.bc().popUpUbahDokter2(e)}),s.Pb(),s.Qb(4,"button",33),s.Yb("click",function(){return s.yc(i),s.bc().konsultasi()}),s.Pb(),s.Pb(),s.Hc(5,Q,2,4,"td",34),s.Pb()}if(2&e){var a=t.$implicit,n=t.columns,r=t.rowIndex,o=s.bc();s.ic("pSelectableRow",a)("pSelectableRowIndex",r),s.xb(4),s.kc("pTooltip","",o.lengthKonsul," Konsultasi belum Verif"),s.xb(1),s.ic("ngForOf",n)}}function S(e,t){1&e&&(s.Qb(0,"td"),s.Lb(1,"div",37),s.Pb())}function C(e,t){if(1&e&&(s.Qb(0,"tr",35),s.Hc(1,S,2,0,"td",36),s.Pb()),2&e){var i=t.columns;s.xb(1),s.ic("ngForOf",i)}}function J(e,t){if(1&e){var i=s.Sb();s.Qb(0,"p-button",38),s.Yb("click",function(){return s.yc(i),s.bc().simpanDokter()}),s.Pb(),s.Qb(1,"p-button",39),s.Yb("click",function(){return s.yc(i),s.bc().batalDokter()}),s.Pb()}}function R(e,t){if(1&e){var i=s.Sb();s.Qb(0,"div",40),s.Qb(1,"div",41),s.Qb(2,"span",42),s.Lb(3,"i",43),s.Qb(4,"input",44),s.Yb("input",function(e){return s.yc(i),s.bc(),s.wc(34).filterGlobal(e.target.value,"contains")}),s.Pb(),s.Pb(),s.Pb(),s.Pb()}}function Y(e,t){if(1&e&&(s.Qb(0,"th",28),s.Jc(1),s.Lb(2,"p-sortIcon",29),s.Pb()),2&e){var i=t.$implicit;s.Fc("width: ",i.width,""),s.jc("pSortableColumn",i.field),s.xb(1),s.Lc(" ",i.header," "),s.xb(1),s.jc("field",i.field)}}function T(e,t){if(1&e&&(s.Qb(0,"tr"),s.Lb(1,"th",45),s.Hc(2,Y,3,6,"th",27),s.Pb()),2&e){var i=t.$implicit;s.xb(2),s.ic("ngForOf",i)}}function H(e,t){if(1&e&&(s.Qb(0,"span"),s.Jc(1),s.Pb()),2&e){var i=s.bc().$implicit,a=s.bc().$implicit,n=s.bc();s.xb(1),s.Lc(" ",n.formatRupiah(a[i.field],""),"")}}function I(e,t){if(1&e&&(s.Qb(0,"span"),s.Jc(1),s.Pb()),2&e){var i=s.bc().$implicit,a=s.bc().$implicit;s.xb(1),s.Lc(" ",a[i.field],"")}}function j(e,t){if(1&e&&(s.Qb(0,"td"),s.Hc(1,H,2,1,"span",47),s.Hc(2,I,2,1,"span",47),s.Pb()),2&e){var i=t.$implicit;s.Fc("width: ",i.width,""),s.xb(1),s.ic("ngIf",null!=i.isCurrency),s.xb(1),s.ic("ngIf",null==i.isCurrency)}}function K(e,t){if(1&e){var i=s.Sb();s.Qb(0,"tr"),s.Qb(1,"td",45),s.Qb(2,"button",46),s.Yb("click",function(){s.yc(i);var e=t.$implicit;return s.bc().verif(e)}),s.Pb(),s.Pb(),s.Hc(3,j,3,5,"td",34),s.Pb()}if(2&e){var a=t.columns;s.xb(3),s.ic("ngForOf",a)}}var O,N,F,L=function(){return[5,10,25,50]},_=function(){return{width:"450px",minWidth:"450px"}},U=function(){return{width:"1024px",minWidth:"1024px"}},A=function(){return["ruanganasal","ruangantujuan","namalengkap","keteranganorder","tglorder"]},$=[{path:"",component:(O=function(){function i(t,a,n,r,o,l,s){e(this,i),this.apiService=t,this.authService=a,this.cacheHelper=n,this.dateHelper=r,this.alertService=o,this.route=l,this.router=s,this.item={},this.listRuangan=[],this.lengthKonsul=0,this.dataSourceKonsul=[]}var a,n,r;return a=i,(n=[{key:"ngOnInit",value:function(){var e=this;this.kelompokUser=this.authService.getKelompokUser(),this.loadCombo(),this.apiService.get("emr/get-ruangan-konsul").subscribe(function(t){e.listRuangan=t}),this.column=[{field:"statlayanan",header:"\u2714",width:"60px"},{field:"no",header:"No",width:"60px"},{field:"tglregistrasi",header:"Tgl Konsul",width:"150px"},{field:"noregistrasi",header:"No Registrasi",width:"150px"},{field:"nocm",header:"No RM",width:"100px"},{field:"namapasien",header:"Nama Pasien",width:"250px"},{field:"umurzz",header:"Umur",width:"100px"},{field:"jeniskelamin",header:"JK",width:"80px"},{field:"statuspasien",header:"Status",width:"100px"},{field:"namadokter",header:"Dokter",width:"180px"},{field:"kelompokpasien",header:"Tipe Pasien",width:"120px"},{field:"namakelas",header:"Kelas",width:"120px"},{field:"alamatlengkap",header:"Alamat",width:"200px"},{field:"stts",header:"Panggil",width:"100px"},{field:"isonline",header:"Online",width:"100px"}],this.columnKonsul=[{field:"no",header:"No",width:"60px"},{field:"noregistrasi",header:"No Registrasi",width:"100px"},{field:"nocm",header:"No RM",width:"100px"},{field:"namapasien",header:"Nama Pasien",width:"200px"},{field:"tglorder",header:"Tgl Order",width:"100px"},{field:"ruanganasal",header:"Ruang Asal",width:"150px"},{field:"ruangantujuan",header:"Ruang Tujuan",width:"150px"},{field:"namalengkap",header:"Dokter",width:"150px"},{field:"pengonsul",header:"Pengonsul",width:"150px"},{field:"keteranganorder",header:"Ket",width:"180px"},{field:"status",header:"Status",width:"100px"}]}},{key:"loadCombo",value:function(){var e=this.cacheHelper.get("cache_DaftarKONSUL");null!=e?(this.item.periodeAwal=new Date(e[0]),this.item.periodeAkhir=new Date(e[1]),null!=e[4]&&e[4].length>0&&(this.item.ruanganMulti=e[4])):(this.item.periodeAwal=l(new Date).format("YYYY-MM-DD 00:00"),this.item.periodeAkhir=l(new Date).format("YYYY-MM-DD 23:59")),this.loadData(),this.countKonsul()}},{key:"countKonsul",value:function(){var e=this,t="";"dokter"==this.kelompokUser&&(t=this.authService.getPegawaiId()),this.apiService.get("emr/count-order-konsul?dokterid="+t).subscribe(function(t){e.lengthKonsul=parseFloat(t.data)})}},{key:"verif",value:function(e){var t=this;"Selesai"!=e.status?this.apiService.post("emr/save-konsul-from-order",{kelasfk:6,noantrian:this.dataSourceKonsul.length+1,norec_so:e.norec,norec_pd:e.norec_pd,dokterfk:e.pegawaifk,objectruangantujuanfk:e.objectruangantujuanfk,objectruanganasalfk:e.objectruanganfk}).subscribe(function(e){t.loadData(),t.countKonsul(),t.pop_daftarOrder=!1}):this.alertService.error("Info","Sudah di verifkasi")}},{key:"konsultasi",value:function(){var e=this;this.pop_daftarOrder=!0;var t="";"dokter"==this.kelompokUser&&(t=this.authService.getPegawaiId()),this.apiService.get("emr/get-order-konsul?dokterid="+t).subscribe(function(t){var i=t.data;if(i.length>0)for(var a=0;a<i.length;a++)i[a].no=a+1,i[a].status=null!=i[a].norec_apd?"Selesai":"-";e.dataSourceKonsul=i})}},{key:"cari",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this,t=l(this.item.periodeAwal).format("YYYY-MM-DD HH:mm:ss"),i=l(this.item.periodeAkhir).format("YYYY-MM-DD HH:mm:ss"),a="";null!=this.item.noCm&&(a="&norm="+this.item.noCm);var n="";null!=this.item.namaPasien&&(n="&nama="+this.item.namaPasien);var r="";null!=this.item.noRegistrasi&&(r="&noreg="+this.item.noRegistrasi);var o="";null!=this.item.ruangan&&(o="&ruangId="+this.item.ruangan.id);var s="";if(null!=this.item.ruanganMulti&&0!=this.item.ruanganMulti.length){for(var c="",u=this.item.ruanganMulti.length-1;u>=0;u--)c+=","+this.item.ruanganMulti[u].id;s=c.slice(1,c.length)}var d="";null!=this.item.rows&&(d="&jmlRow="+this.item.rows),this.apiService.get("emr/get-daftar-konsul-from-order?&tglAwal="+t+"&tglAkhir="+i+"&norm="+a+"&noreg="+r+"&nama="+n+"&ruanganArr="+s+o+d).subscribe(function(a){for(var n=0;n<a.length;n++){a[n].no=n+1;var r=new Date,o=new Date(a[n].tgllahir);a[n].umurzz=e.dateHelper.getUmur(o,r),a[n].stts="-",a[n].isonline="-",null!=a[n].noreservasi&&(a[n].isonline="Online",a[n].tglregistrasi=a[n].tanggalreservasi),null!=a[n].tgldipanggilsuster&&(a[n].stts="Di Panggil Perawat"),null!=a[n].tgldipanggildokter&&(a[n].stts="Di Panggil Dokter"),a[n].statlayanan="true"==a[n].statuslayanan||1==a[n].statuslayanan?"\u2714":""}e.dataSource=a,e.cacheHelper.set("cache_DaftarKONSUL",{0:t,1:i,2:null!=e.item.ruangan?e.item.ruangan.id:null,3:null!=e.item.ruangan?e.item.ruangan.namaruangan:null,4:e.item.ruanganMulti})})}},{key:"filterDokter",value:function(e){var t=this;this.apiService.get("general/get-data-combo-dokter-part?namalengkap="+e.query).subscribe(function(e){t.listDokter=e})}},{key:"popUpUbahDokter",value:function(){var e=this;null!=this.selected?this.apiService.get("general/get-data-closing-pasien/"+this.selected.noregistrasi).subscribe(function(t){t.length>0?e.alertService.error("Peringatan!","Registrasi Ini Telah Diclosing"):e.pop_DokterPJawab=!0}):this.alertService.warn("Info,","Data Belum Dipilih!")}},{key:"popUpUbahDokter2",value:function(e){var t=this;this.apiService.get("general/get-data-closing-pasien/"+e.noregistrasi).subscribe(function(e){e.length>0?t.alertService.error("Peringatan!","Registrasi Ini Telah Diclosing"):t.pop_DokterPJawab=!0})}},{key:"batalDokter",value:function(){this.item.dokterPJawab=void 0,this.pop_DokterPJawab=!1}},{key:"simpanDokter",value:function(){var e=this;null!=this.selected?null!=this.item.dokterPJawab?this.apiService.post("emr/ubah-dokter",{norec_apd:this.selected.norec_apd,pegawaiidfk:this.item.dokterPJawab.id}).subscribe(function(t){""!=e.selected.norec&&e.apiService.postLog("Simpan Ubah Dokter","norec Registrasi Pasien",e.selected.norec,"Ubah Ke Dokter  "+e.item.dokterPJawab.namalengkap+" pada No Registrasi "+e.selected.noregistrasi).subscribe(function(e){}),e.item.dokterPJawab=void 0,e.pop_DokterPJawab=!1,e.loadData()}):this.alertService.warn("Info,","Data Dokter Belum Dipilih!"):this.alertService.warn("Info,","Data Belum Dipilih!")}},{key:"detailTagihan",value:function(){this.router.navigate(["detail-tagihan",this.selected.noregistrasi])}},{key:"pengkajianMedis2",value:function(e){this.router.navigate(["rekam-medis",e.norec_pd,e.norec_apd])}},{key:"pengkajianMedis",value:function(){null!=this.selected?this.router.navigate(["rekam-medis",this.selected.norec_pd,this.selected.norec_apd]):this.alertService.warn("Info,","Pilih data dulu!")}}])&&t(a.prototype,n),r&&t(a,r),i}(),O.\u0275fac=function(e){return new(e||O)(s.Jb(c.a),s.Jb(c.b),s.Jb(u.a),s.Jb(d.a),s.Jb(p.a),s.Jb(o.a),s.Jb(o.f))},O.\u0275cmp=s.Db({type:O,selectors:[["app-daftar-konsultasi"]],decls:54,vars:58,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[1,"p-grid"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","disabled","ngModelChange"],[1,"p-col-12","p-md-1"],["type","text","pInputText","","placeholder","No RM",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Nama Pasien",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Noregistrasi",3,"ngModel","ngModelChange","keyup.enter"],["defaultLabel","Ruangan","optionLabel","namaruangan","display","chip",3,"options","ngModel","ngModelChange"],[1,"p-col-12","p-md-1",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",3,"click"],[1,"p-col-12"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","loadingbody"],["header","Dokter ",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],["field","namalengkap","placeholder","DPJP","appendTo","body",3,"ngModel","suggestions","dropdown","ngModelChange","completeMethod"],["pTemplate","footer"],["header","Daftar Order Konsul",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","dataKey","norec","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","globalFilterFields","selectionChange"],["pTemplate","caption"],[2,"width","180px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],["pButton","","type","button","icon","fa fa-stethoscope","pTooltip","Pengkajian Medis/EMR","label","",1,"p-button-rounded","p-button-success","p-mr-2",3,"click"],["pButton","","type","button","icon","mdi mdi-account-edit-outline","pTooltip","Ubah Dokter","label","",1,"p-button-rounded","p-mr-2","p-mt-1",3,"click"],["pButton","","type","button","icon","pi pi-clock","label","",1,"p-button-rounded","p-button-warning","p-mr-2","p-mt-1",3,"pTooltip","click"],[3,"style",4,"ngFor","ngForOf"],[2,"height","34px"],[4,"ngFor","ngForOf"],[1,"loading-text"],["icon","pi pi-save","label","Simpan","styleClass","p-button-success p-mr-2",3,"click"],["icon","pi pi-close","label","Tutup","styleClass","p-button-text",3,"click"],[1,"table-header","p-grid"],[1,"p-col-12","p-md-3"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Filter",3,"input"],[2,"width","80px"],["pButton","","type","button","icon","pi pi-check","pTooltip","Verikasi Order","label","",1,"p-button-rounded","p-button","p-mr-2",3,"click"],[4,"ngIf"]],template:function(e,t){1&e&&(s.Qb(0,"div",0),s.Qb(1,"div",1),s.Qb(2,"h4"),s.Jc(3,"Konsultasi Ruangan"),s.Pb(),s.Qb(4,"div",2),s.Qb(5,"div",3),s.Qb(6,"div",4),s.Qb(7,"label",5),s.Jc(8,"Periode Awal"),s.Pb(),s.Qb(9,"p-calendar",6),s.Yb("ngModelChange",function(e){return t.item.periodeAwal=e}),s.Pb(),s.Pb(),s.Qb(10,"div",4),s.Qb(11,"label",5),s.Jc(12,"Periode Akhir"),s.Pb(),s.Qb(13,"p-calendar",6),s.Yb("ngModelChange",function(e){return t.item.periodeAkhir=e}),s.Pb(),s.Pb(),s.Qb(14,"div",7),s.Qb(15,"label",5),s.Jc(16,"No RM "),s.Pb(),s.Qb(17,"input",8),s.Yb("ngModelChange",function(e){return t.item.noCm=e})("keyup.enter",function(){return t.cari()}),s.Pb(),s.Pb(),s.Qb(18,"div",4),s.Qb(19,"label",5),s.Jc(20,"Nama Pasien "),s.Pb(),s.Qb(21,"input",9),s.Yb("ngModelChange",function(e){return t.item.namaPasien=e})("keyup.enter",function(){return t.cari()}),s.Pb(),s.Pb(),s.Qb(22,"div",4),s.Qb(23,"label",5),s.Jc(24,"Noregistrasi"),s.Pb(),s.Qb(25,"input",10),s.Yb("ngModelChange",function(e){return t.item.noRegistrasi=e})("keyup.enter",function(){return t.cari()}),s.Pb(),s.Pb(),s.Qb(26,"div",4),s.Qb(27,"label",5),s.Jc(28,"Ruangan"),s.Pb(),s.Qb(29,"p-multiSelect",11),s.Yb("ngModelChange",function(e){return t.item.ruanganMulti=e}),s.Pb(),s.Pb(),s.Qb(30,"div",12),s.Qb(31,"button",13),s.Yb("click",function(){return t.cari()}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(32,"div",14),s.Qb(33,"p-table",15,16),s.Yb("selectionChange",function(e){return t.selected=e}),s.Hc(35,D,3,1,"ng-template",17),s.Hc(36,M,6,4,"ng-template",18),s.Hc(37,C,2,1,"ng-template",19),s.Pb(),s.Pb(),s.Pb(),s.Qb(38,"p-dialog",20),s.Yb("visibleChange",function(e){return t.pop_DokterPJawab=e}),s.Qb(39,"div",0),s.Qb(40,"div",3),s.Qb(41,"div",2),s.Qb(42,"label",5),s.Jc(43,"Dokter "),s.Pb(),s.Qb(44,"p-autoComplete",21),s.Yb("ngModelChange",function(e){return t.item.dokterPJawab=e})("completeMethod",function(e){return t.filterDokter(e)}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Hc(45,J,2,0,"ng-template",22),s.Pb(),s.Qb(46,"p-dialog",23),s.Yb("visibleChange",function(e){return t.pop_daftarOrder=e}),s.Qb(47,"div",0),s.Qb(48,"div",3),s.Qb(49,"p-table",24,16),s.Yb("selectionChange",function(e){return t.selectedData=e}),s.Hc(51,R,5,0,"ng-template",25),s.Hc(52,T,3,1,"ng-template",17),s.Hc(53,K,4,1,"ng-template",18),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb()),2&e&&(s.xb(9),s.ic("ngModel",t.item.periodeAwal)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0)("disabled",t.disableTgl),s.xb(4),s.ic("ngModel",t.item.periodeAkhir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0)("disabled",t.disableTgl),s.xb(4),s.ic("ngModel",t.item.noCm),s.xb(4),s.ic("ngModel",t.item.namaPasien),s.xb(4),s.ic("ngModel",t.item.noRegistrasi),s.xb(4),s.ic("options",t.listRuangan)("ngModel",t.item.ruanganMulti),s.xb(4),s.ic("columns",t.column)("value",t.dataSource)("selection",t.selected)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",s.mc(53,L))("paginator",!0)("pageLinks",5),s.xb(5),s.Ec(s.mc(54,_)),s.ic("visible",t.pop_DokterPJawab)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!0),s.xb(6),s.ic("ngModel",t.item.dokterPJawab)("suggestions",t.listDokter)("dropdown",!0),s.xb(2),s.Ec(s.mc(55,U)),s.ic("visible",t.pop_daftarOrder)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!0),s.xb(3),s.ic("columns",t.columnKonsul)("value",t.dataSourceKonsul)("selection",t.selectedData)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",s.mc(56,L))("paginator",!0)("pageLinks",5)("globalFilterFields",s.mc(57,A)))},directives:[b.a,g.g,g.h,g.a,h.a,m.a,f.b,k.a,v.h,w.k,P.a,x.a,r.k,v.g,v.f,v.e,f.a,r.l],styles:[""]}),O)}],z=((N=function t(){e(this,t)}).\u0275mod=s.Hb({type:N}),N.\u0275inj=s.Gb({factory:function(e){return new(e||N)},imports:[[o.j.forChild($)],o.j]}),N),B=n("PCNd"),E=((F=function t(){e(this,t)}).\u0275mod=s.Hb({type:F}),F.\u0275inj=s.Gb({factory:function(e){return new(e||F)},imports:[[r.b,z,B.a]]}),F)}}])}();