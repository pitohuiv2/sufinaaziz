!function(){function a(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function i(a,i){for(var n=0;n<i.length;n++){var t=i[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{iNqN:function(n,t,e){"use strict";e.r(t),e.d(t,"MapAdministrasiOtomatisModule",function(){return x});var o=e("ofXK"),s=e("tyNb"),r=e("fXoL"),l=e("EJUL"),u=e("7zfz"),d=e("U+s4"),p=e("G0w9"),b=e("ujBT"),c=e("arFO"),m=e("3Pt+"),g=e("7kUa"),h=e("jIHw"),f=e("xlun"),v=e("rEr+");function y(a,i){if(1&a&&(r.Qb(0,"th",21),r.Jc(1),r.Lb(2,"p-sortIcon",22),r.Pb()),2&a){var n=i.$implicit;r.Fc("width: ",n.width,""),r.jc("pSortableColumn",n.field),r.xb(1),r.Lc(" ",n.header," "),r.xb(1),r.jc("field",n.field)}}function P(a,i){if(1&a&&(r.Qb(0,"tr"),r.Lb(1,"th",19),r.Hc(2,y,3,6,"th",20),r.Pb()),2&a){var n=i.$implicit;r.xb(2),r.ic("ngForOf",n)}}function k(a,i){if(1&a&&(r.Qb(0,"td"),r.Jc(1),r.Pb()),2&a){var n=i.$implicit,t=r.bc().$implicit;r.Fc("width: ",n.width,""),r.xb(1),r.Lc(" ",t[n.field]," ")}}function w(a,i){if(1&a){var n=r.Sb();r.Qb(0,"tr"),r.Qb(1,"td",19),r.Qb(2,"button",23),r.Yb("click",function(){r.yc(n);var a=i.$implicit;return r.bc().hapusRow(a)}),r.Pb(),r.Pb(),r.Hc(3,k,2,4,"td",24),r.Pb()}if(2&a){var t=i.columns;r.xb(3),r.ic("ngForOf",t)}}var S,Q,C,M=function(){return[5,10,25,50]},j=[{path:"",component:(S=function(){function n(i,t,e,o,s,r,l,u){a(this,n),this.apiService=i,this.authService=t,this.messageService=e,this.cacheHelper=o,this.dateHelper=s,this.alertService=r,this.route=l,this.router=u,this.item={}}var t,e,o;return t=n,(e=[{key:"ngOnInit",value:function(){this.norecMap=void 0,this.loadCombo(),this.loadColumn()}},{key:"loadCombo",value:function(){var a=this;this.apiService.get("sysadmin/general/get-map-administrasi-combo").subscribe(function(i){a.listRuangan=i.ruangan,a.listJenisPelayanan=i.jenispelayanan})}},{key:"loadColumn",value:function(){this.column=[{field:"no",header:"No",width:"40px"},{field:"namaproduk",header:"Pelayanan",width:"150px"},{field:"jenispelayanan",header:"Jenis Pelayanan",width:"150px"}]}},{key:"getProduk",value:function(){var a=this;this.apiService.get("sysadmin/general/get-combo-administrasi?produk=1&objectruanganfk="+this.item.ruangan.id).subscribe(function(i){for(var n=i.listakomodasi.length-1;n>=0;n--)i.listakomodasi[n].no=n+1,i.listakomodasi[n].israwatgabungSS=1==i.listakomodasi[n].israwatgabung?"Yes":"No";a.listPelayanan=i.produk,a.dataSource=i.listakomodasi})}},{key:"getKomponenHarga",value:function(){var a=this;this.item.Harga=0,this.listKomponen=[],null!=this.item.pelayanan&&this.apiService.get("tindakan/get-komponenharga?idRuangan="+this.item.ruangan.id+"&idKelas=6&idProduk="+this.item.pelayanan.id+"&idJenisPelayanan="+this.item.jenispelayanan.id).subscribe(function(i){a.listKomponen=i.data,a.item.Harga=i.data2[0].hargasatuan,a.item.jumlah=1})}},{key:"batalInput",value:function(){this.item.Harga=0,this.listKomponen=[],this.item.pelayanan=void 0,this.item.jenispelayanan=void 0,this.item.ruangan=void 0}},{key:"hapusAll",value:function(){var a=this;if(null!=this.item.pelayanan)if(null!=this.item.ruangan){var i="";null!=this.norecMap&&(i=this.norecMap);var n=null;null!=this.item.rg&&(n=(this.item.rg.status="Yes")?1:null),this.apiService.post("sysadmin/general/save-map-administrasi-otomatis",{maid:i,pelayanan:this.item.pelayanan.id,rg:n,ruangan:this.item.ruangan.id,jenispelayanan:this.item.jenispelayanan.id,status:"HAPUS"}).subscribe(function(i){a.batalInput(),a.apiService.get("sysadmin/general/get-combo-administrasi?produk=1&objectruanganfk="+a.item.ruangan.id).subscribe(function(i){for(var n=i.data.listakomodasi.length-1;n>=0;n--)i.data.listakomodasi[n].no=n+1,i.data.listakomodasi[n].israwatgabungSS=1==i.data.listakomodasi[n].israwatgabung?"Yes":"No";a.dataSource=i.data.listakomodasi})})}else this.alertService.error("Info","Pilih Ruangan dulu");else this.alertService.error("Info","Pilih Pelayanan dulu")}},{key:"simpanMapping",value:function(){var a=this;if(null!=this.item.pelayanan)if(null!=this.item.ruangan){var i="";null!=this.norecMap&&(i=this.norecMap);var n="NO";null!=this.item.rg&&(n="Yes"==this.item.rg.status?"YES":"NO"),this.apiService.post("sysadmin/general/save-map-administrasi-otomatis",{maid:i,pelayanan:this.item.pelayanan.id,rg:n,ruangan:this.item.ruangan.id,jenispelayanan:this.item.jenispelayanan.id,status:"SIMPAN_JANG"}).subscribe(function(i){a.batalInput(),a.apiService.get("sysadmin/general/get-combo-administrasi?produk=1&objectruanganfk="+a.item.ruangan.id).subscribe(function(i){for(var n=i.data.listakomodasi.length-1;n>=0;n--)i.data.listakomodasi[n].no=n+1,i.data.listakomodasi[n].israwatgabungSS=1==i.data.listakomodasi[n].israwatgabung?"Yes":"No";a.dataSource=i.data.listakomodasi})})}else this.alertService.error("Info","Pilih Ruangan dulu");else this.alertService.error("Info","Pilih Pelayanan dulu")}},{key:"hapusRow",value:function(a){var i=this;this.apiService.post("sysadmin/general/save-map-administrasi-otomatis",{maid:a.maid,status:"HAPUS"}).subscribe(function(a){i.dataSource=[],i.apiService.get("sysadmin/general/get-combo-administrasi?produk=1&objectruanganfk="+i.item.ruangan.id).subscribe(function(a){for(var n=a.data.listakomodasi.length-1;n>=0;n--)a.data.listakomodasi[n].no=n+1,a.data.listakomodasi[n].israwatgabungSS=1==a.data.listakomodasi[n].israwatgabung?"Yes":"No";i.dataSource=a.data.listakomodasi})})}}])&&i(t.prototype,e),o&&i(t,o),n}(),S.\u0275fac=function(a){return new(a||S)(r.Jb(l.a),r.Jb(l.b),r.Jb(u.h),r.Jb(d.a),r.Jb(p.a),r.Jb(b.a),r.Jb(s.a),r.Jb(s.f))},S.\u0275cmp=r.Db({type:S,selectors:[["app-map-administrasi-otomatis"]],decls:37,vars:24,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-grid"],[1,"p-col-12","p-md-12"],[1,"p-col-12","p-md-9"],[1,"p-col-12","p-md-3"],["for","input",1,"label"],["placeholder","Ruangan","optionLabel","namaruangan",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["placeholder","jenis pelayanan","optionLabel","jenispelayanan",3,"options","ngModel","filter","showClear","ngModelChange"],["placeholder","pelayanan","optionLabel","namaproduk",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["type","text","pInputText","","placeholder","Harga","disabled","",3,"ngModel","ngModelChange"],[1,"p-col-12","p-md-4",2,"margin-top","16px"],["pButton","","type","button","icon","pi pi-plus","pTooltip","Simpan","label","Simpan",1,"p-button","p-mr-2",3,"disabled","click"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus","label","Hapus",1,"p-button","p-button-danger","p-mr-2",3,"click"],["pButton","","type","button","icon","pi pi-refresh","pTooltip","Batal","label","Batal",1,"p-button","p-button-warning","p-mr-2",3,"click"],[1,"p-col-12"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange"],["pTemplate","header"],["pTemplate","body"],[2,"width","50px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus ","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"]],template:function(a,i){1&a&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"h4"),r.Jc(3,"Setting Administrasi Ruangan Otomatis"),r.Pb(),r.Qb(4,"div",2),r.Qb(5,"div",3),r.Qb(6,"div",2),r.Qb(7,"div",4),r.Qb(8,"div",2),r.Qb(9,"div",5),r.Qb(10,"label",6),r.Jc(11,"Ruangan"),r.Pb(),r.Qb(12,"p-dropdown",7),r.Yb("ngModelChange",function(a){return i.item.ruangan=a})("onChange",function(){return i.getProduk()}),r.Pb(),r.Pb(),r.Qb(13,"div",5),r.Qb(14,"label",6),r.Jc(15,"Jenis Pelayanan"),r.Pb(),r.Qb(16,"p-dropdown",8),r.Yb("ngModelChange",function(a){return i.item.jenispelayanan=a}),r.Pb(),r.Pb(),r.Qb(17,"div",5),r.Qb(18,"label",6),r.Jc(19,"Pelayanan"),r.Pb(),r.Qb(20,"p-dropdown",9),r.Yb("ngModelChange",function(a){return i.item.pelayanan=a})("onChange",function(){return i.getKomponenHarga()}),r.Pb(),r.Pb(),r.Qb(21,"div",5),r.Qb(22,"label",6),r.Jc(23,"Harga"),r.Pb(),r.Qb(24,"input",10),r.Yb("ngModelChange",function(a){return i.item.Harga=a}),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(25,"div",5),r.Qb(26,"div",2),r.Qb(27,"div",11),r.Qb(28,"button",12),r.Yb("click",function(){return i.simpanMapping()}),r.Pb(),r.Pb(),r.Qb(29,"div",11),r.Qb(30,"button",13),r.Yb("click",function(){return i.hapusAll()}),r.Pb(),r.Pb(),r.Qb(31,"div",11),r.Qb(32,"button",14),r.Yb("click",function(){return i.batalInput()}),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(33,"div",15),r.Qb(34,"p-table",16),r.Yb("selectionChange",function(a){return i.selectedGrid=a}),r.Hc(35,P,3,1,"ng-template",17),r.Hc(36,w,4,1,"ng-template",18),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&a&&(r.xb(12),r.ic("options",i.listRuangan)("ngModel",i.item.ruangan)("filter",!0)("showClear",!0),r.xb(4),r.ic("options",i.listJenisPelayanan)("ngModel",i.item.jenispelayanan)("filter",!0)("showClear",!0),r.xb(4),r.ic("options",i.listPelayanan)("ngModel",i.item.pelayanan)("filter",!0)("showClear",!0),r.xb(4),r.ic("ngModel",i.item.Harga),r.xb(4),r.ic("disabled",i.isClosing),r.xb(6),r.ic("columns",i.column)("value",i.dataSource)("selection",i.selectedGrid)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",r.mc(23,M))("paginator",!0)("pageLinks",5))},directives:[c.a,m.g,m.h,m.a,g.a,h.b,f.a,v.h,u.k,o.k,v.g,v.f],styles:[""]}),S)}],H=((Q=function i(){a(this,i)}).\u0275mod=r.Hb({type:Q}),Q.\u0275inj=r.Gb({factory:function(a){return new(a||Q)},imports:[[s.j.forChild(j)],s.j]}),Q),J=e("PCNd"),x=((C=function i(){a(this,i)}).\u0275mod=r.Hb({type:C}),C.\u0275inj=r.Gb({factory:function(a){return new(a||C)},imports:[[o.b,H,J.a]]}),C)}}])}();