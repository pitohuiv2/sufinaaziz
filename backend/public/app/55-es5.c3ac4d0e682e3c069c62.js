!function(){function e(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function i(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{VW4B:function(t,n,a){"use strict";a.r(n),a.d(n,"SiklusMenuModule",function(){return N});var o=a("ofXK"),l=a("tyNb"),r=a("7zfz"),p=a("fXoL"),s=a("EJUL"),b=a("U+s4"),c=a("G0w9"),u=a("ujBT"),d=a("RTT/"),h=a("3Pt+"),f=a("7kUa"),g=a("arFO"),k=a("jIHw"),m=a("xlun"),v=a("rEr+"),P=a("/RsI"),y=a("7CaW"),Q=a("Q4Mo"),x=a("Ji6n"),w=a("hYoW"),C=a("PU9F");function M(e,i){if(1&e){var t=p.Sb();p.Qb(0,"div",37),p.Qb(1,"button",38),p.Yb("click",function(){return p.yc(t),p.bc().tambah()}),p.Pb(),p.Pb()}}function j(e,i){if(1&e&&(p.Qb(0,"th",41),p.Jc(1),p.Lb(2,"p-sortIcon",42),p.Pb()),2&e){var t=i.$implicit;p.Fc("width: ",t.width,""),p.jc("pSortableColumn",t.field),p.xb(1),p.Lc(" ",t.header," "),p.xb(1),p.jc("field",t.field)}}function S(e,i){if(1&e&&(p.Qb(0,"tr"),p.Lb(1,"th",39),p.Hc(2,j,3,6,"th",40),p.Pb()),2&e){var t=i.$implicit;p.xb(2),p.ic("ngForOf",t)}}function J(e,i){if(1&e&&(p.Qb(0,"span"),p.Jc(1),p.Pb()),2&e){var t=p.bc().$implicit,n=p.bc().$implicit,a=p.bc();p.xb(1),p.Lc(" ",a.formatRupiah(n[t.field],""),"")}}function D(e,i){if(1&e&&(p.Qb(0,"span"),p.Jc(1),p.Pb()),2&e){var t=p.bc().$implicit,n=p.bc().$implicit;p.xb(1),p.Lc(" ",n[t.field],"")}}function U(e,i){if(1&e&&(p.Qb(0,"td"),p.Hc(1,J,2,1,"span",45),p.Hc(2,D,2,1,"span",45),p.Pb()),2&e){var t=i.$implicit;p.Fc("width: ",t.width,""),p.xb(1),p.ic("ngIf",null!=t.isCurrency),p.xb(1),p.ic("ngIf",null==t.isCurrency)}}function T(e,i){if(1&e){var t=p.Sb();p.Qb(0,"tr"),p.Qb(1,"td",39),p.Qb(2,"button",43),p.Yb("click",function(e){p.yc(t);var n=i.$implicit;return p.bc().hapusData(e,n)}),p.Pb(),p.Pb(),p.Hc(3,U,3,5,"td",44),p.Pb()}if(2&e){var n=i.columns;p.xb(3),p.ic("ngForOf",n)}}function I(e,i){if(1&e){var t=p.Sb();p.Qb(0,"div",46),p.Qb(1,"p-checkbox",47),p.Yb("ngModelChange",function(e){p.yc(t);var n=i.$implicit;return p.bc().popUp.kelas[n.id]=e}),p.Pb(),p.Qb(2,"label",48),p.Jc(3),p.Pb(),p.Pb()}if(2&e){var n=i.$implicit,a=p.bc();p.xb(1),p.jc("inputId",n.id),p.ic("ngModel",a.popUp.kelas[n.id]),p.xb(1),p.jc("for",n.id),p.xb(1),p.Lc(" ",n.namakelas,"")}}function K(e,i){if(1&e){var t=p.Sb();p.Qb(0,"div",51),p.Qb(1,"p-checkbox",52),p.Yb("ngModelChange",function(e){p.yc(t);var n=i.$implicit;return p.bc(2).popUp.layanan[n.id]=e})("onChange",function(){return p.yc(t),p.bc(2).getSelected()}),p.Pb(),p.Qb(2,"label",48),p.Jc(3),p.Pb(),p.Pb()}if(2&e){var n=i.$implicit,a=p.bc(2);p.xb(1),p.jc("inputId",n.id),p.ic("ngModel",a.popUp.layanan[n.id]),p.xb(1),p.jc("for",n.id),p.xb(1),p.Lc(" ",n.namaproduk,"")}}function Y(e,i){if(1&e&&(p.Qb(0,"div",49),p.Hc(1,K,4,4,"div",50),p.cc(2,"filter"),p.Pb()),2&e){var t=p.bc();p.xb(1),p.ic("ngForOf",p.ec(2,1,t.listProdukCek,t.searchText))}}var F=function(){return{width:"100%"}};function H(e,i){if(1&e&&(p.Qb(0,"div",56),p.Lb(1,"p-tag",57),p.Pb()),2&e){var t=i.$implicit;p.xb(1),p.Ec(p.mc(3,F)),p.jc("value",t.namaproduk)}}function W(e,i){if(1&e){var t=p.Sb();p.Qb(0,"p-panel",53),p.Qb(1,"div",3),p.Hc(2,H,2,4,"div",54),p.Pb(),p.Qb(3,"div",3),p.Qb(4,"div",4),p.Qb(5,"button",55),p.Yb("click",function(){return p.yc(t),p.bc().clearSelection()}),p.Pb(),p.Pb(),p.Pb(),p.Pb()}if(2&e){var n=p.bc();p.ic("toggleable",!0),p.xb(2),p.ic("ngForOf",n.listChecked),p.xb(3),p.ic("disabled",n.isSimpan)}}function O(e,i){if(1&e){var t=p.Sb();p.Qb(0,"button",58),p.Yb("click",function(){return p.yc(t),p.bc().save()}),p.Pb(),p.Qb(1,"button",59),p.Yb("click",function(){return p.yc(t),p.bc().pop_Tambah=!1}),p.Pb()}if(2&e){var n=p.bc();p.ic("disabled",n.isSimpan)}}var L,R,z,$=function(){return[5,10,25,50]},B=function(){return{width:"900px",minWidth:"900px"}},G=[{path:"",component:(L=function(){function t(i,n,a,o,l,r,p,s){e(this,t),this.apiService=i,this.authService=n,this.cacheHelper=a,this.dateHelper=o,this.alertService=l,this.route=r,this.router=p,this.confirmationService=s,this.item={jmlRow:100},this.listProdukCek=[],this.produkDef=[],this.popUp={layanan:[],kelas:[]},this.listKelas=[],this.listChecked=[],this.searchText="",this.isSimpan=!1}var n,a,o;return n=t,(a=[{key:"ngOnInit",value:function(){this.column=[{field:"no",header:"No",width:"60px"},{field:"sikluske",header:"Siklus Ke",width:"80px"},{field:"jeniswaktu",header:"Jenis Waktu",width:"150px"},{field:"namaproduk",header:"Menu",width:"200px"},{field:"namakelas",header:"Kelas",width:"150px"},{field:"jenisdiet",header:"Jenis Diet",width:"150px"},{field:"kategorydiet",header:"Kategory Diet",width:"150px"}],this.loadCombo(),this.load()}},{key:"loadCombo",value:function(){var e=this;this.apiService.get("sysadmin/general/get-combo-gizi").subscribe(function(i){e.listJenisDiet=i.jenisdiet,e.listJenisWaktu=i.jeniswaktu,e.produkDef=i.produk,e.listProdukCek=i.produk,e.listKelas=i.kelas,e.listKategoriDiet=i.kategorydiet})}},{key:"cari",value:function(){this.load()}},{key:"load",value:function(){var e=this,i="";null!=this.item.kelas&&(i="&kelasId="+this.item.kelas.id);var t="";null!=this.item.jenisDiet&&(t="&jenisDietId="+this.item.jenisDiet.id);var n="";null!=this.item.jenisWaktu&&(n="&jenisWaktuId="+this.item.jenisWaktu.id);var a="";null!=this.item.namaProduk&&(a="&namaProduk="+this.item.namaProduk);var o="";null!=this.item.jmlRow&&(o="&jmlRow="+this.item.jmlRow);var l="";null!=this.item.siklusKe&&(l="&siklusKe="+this.item.siklusKe),this.apiService.get("sysadmin/general/get-siklus-gizi?"+l+i+t+n+a+o+l).subscribe(function(i){for(var t=0;t<i.data.length;t++)i.data[t].no=t+1;e.dataSource=i.data})}},{key:"onSort",value:function(){this.updateRowGroupMetaData()}},{key:"updateRowGroupMetaData",value:function(){if(this.rowGroupMetadata={},this.dataSource)for(var e=0;e<this.dataSource.length;e++){var i=this.dataSource[e].sikluske;0==e?this.rowGroupMetadata[i]={index:0,size:1}:i===this.dataSource[e-1].sikluske?this.rowGroupMetadata[i].size++:this.rowGroupMetadata[i]={index:e,size:1}}}},{key:"tambah",value:function(){this.pop_Tambah=!0,this.popUp={layanan:[],kelas:[]}}},{key:"clearFilter",value:function(){this.searchText=""}},{key:"clearSelection",value:function(){for(var e=Object.keys(this.popUp.layanan),i=0;i<e.length;i++)this.popUp.layanan[e[i]]=!1;this.getSelected()}},{key:"getSelected",value:function(){if(this.popUp.layanan.length>0)for(var e=Object.keys(this.popUp.layanan),i=0;i<e.length;i++){var t=e[i];if(1==this.popUp.layanan[parseInt(t)])for(var n=0;n<this.produkDef.length;n++){var a=this.produkDef[n];if(a.id==t){for(var o=0;o<this.listChecked.length;o++)this.listChecked[o].namaproduk==a.namaproduk&&this.listChecked.splice(o,1);this.listChecked.push({namaproduk:a.namaproduk})}}else for(n=0;n<this.produkDef.length;n++){var l=this.produkDef[n];if(l.id==t)for(o=0;o<this.listChecked.length;o++)this.listChecked[o].namaproduk==l.namaproduk&&this.listChecked.splice(o,1)}}}},{key:"save",value:function(){var e=this;if(null!=this.popUp.siklusKe)if(null!=this.popUp.jenisDiet)if(null!=this.popUp.jenisWaktu)if(0!=this.popUp.kelas.length)if(0!=this.popUp.layanan.length){for(var i=Object.keys(this.popUp.layanan),t=Object.keys(this.popUp.kelas),n=[],a=i.length-1;a>=0;a--)if(1==this.popUp.layanan[parseInt(i[a])])for(var o=t.length-1;o>=0;o--)1==this.popUp.kelas[parseInt(t[o])]&&n.push({produkfk:i[a],kelasfk:t[o]});var l={sikluske:this.popUp.siklusKe,objectjenisdietfk:this.popUp.jenisDiet.id,objectjeniswaktufk:this.popUp.jenisWaktu.id,objectkategoryprodukfk:null!=this.popUp.kategory?this.popUp.kategory.id:null,objectbentukprodukfk:null!=this.popUp.bentukProduk?this.popUp.bentukProduk.id:null,details:n};this.isSimpan=!0,this.apiService.post("sysadmin/general/save-siklus-gizi",l).subscribe(function(i){e.load(),e.popUp={layanan:[],kelas:[]},e.isSimpan=!1,e.pop_Tambah=!1})}else this.alertService.error("Info","Produk belum di pilih");else this.alertService.error("Info","Kelas belum di pilih");else this.alertService.error("Info","Jenis Waktu belum di pilih");else this.alertService.error("Info","Jenis Diet belum di pilih");else this.alertService.error("Info","Siklus Ke harus di isi")}},{key:"hapusData",value:function(e,i){var t=this;this.confirmationService.confirm({target:e.target,message:"Yakin mau hapus?",icon:"pi pi-exclamation-triangle",acceptLabel:"Ya",rejectLabel:"Tidak",accept:function(){t.apiService.post("sysadmin/general/delete-siklus-gizi",{id:i.id}).subscribe(function(e){t.load()})},reject:function(){}})}}])&&i(n.prototype,a),o&&i(n,o),t}(),L.\u0275fac=function(e){return new(e||L)(p.Jb(s.a),p.Jb(s.b),p.Jb(b.a),p.Jb(c.a),p.Jb(u.a),p.Jb(l.a),p.Jb(l.f),p.Jb(r.a))},L.\u0275cmp=p.Db({type:L,selectors:[["app-siklus-menu"]],features:[p.wb([r.a])],decls:75,vars:49,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[1,"p-grid"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["type","text","pInputText","","placeholder","Nama Menu",3,"ngModel","ngModelChange","keyup.enter"],["placeholder","Jenis Waktu","optionLabel","jeniswaktu",3,"options","ngModel","filter","showClear","ngModelChange"],["placeholder","Jenis Diet","optionLabel","jenisdiet",3,"options","ngModel","filter","showClear","ngModelChange"],["type","number","pInputText","","placeholder","Siklus Ke",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-1"],["type","text","pInputText","","placeholder","Siklus Ke",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-1",2,"margin-top","15px"],["pButton","","icon","pi pi-search","pTooltip","Cari",3,"click"],[1,"p-col-12"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","dataKey","norec","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Tambah Siklus",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"p-fluid","p-grid"],["header","Detail Siklus",3,"toggleable"],[1,"p-col-12","p-md-4"],["type","number","pInputText","","placeholder","Siklus Ke",3,"ngModel","ngModelChange"],["placeholder","Jenis Waktu","optionLabel","jenisdiet",3,"options","ngModel","filter","showClear","ngModelChange"],["placeholder","Kategori Diet","optionLabel","kategorydiet",3,"options","ngModel","filter","showClear","ngModelChange"],["header","Kelas",3,"toggleable"],["class","p-col-12 p-md-4 p-field-checkbox",4,"ngFor","ngForOf"],["header","Detail Menu",3,"toggleable"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Filter",3,"ngModel","ngModelChange"],["pButton","","type","button","icon","pi pi-times","pTooltip","Clear Filter",1,"p-button","p-button-danger","p-mr-2",3,"click"],["class","p-grid","style","overflow: auto; height: 250px",4,"ngIf"],["header","Detail Pemeriksaan Terpilih",3,"toggleable",4,"ngIf"],["pTemplate","footer"],[1,"p-d-flex"],["type","button","pButton","","pRipple","","icon","pi pi-plus","pTooltip","Tambah Siklus","tooltipPosition","bottom",1,"p-button-success","p-mr-2",3,"click"],[2,"width","80px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus Data","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"p-col-12","p-md-4","p-field-checkbox"],["binary","true",3,"ngModel","inputId","ngModelChange"],[3,"for"],[1,"p-grid",2,"overflow","auto","height","250px"],["class","p-col-12 p-md-3 p-field-checkbox",4,"ngFor","ngForOf"],[1,"p-col-12","p-md-3","p-field-checkbox"],["binary","true",3,"ngModel","inputId","ngModelChange","onChange"],["header","Detail Pemeriksaan Terpilih",3,"toggleable"],["class","p-col-12 p-md-3",4,"ngFor","ngForOf"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus Semua Data Terpilih","label","Clear",1,"p-button","p-button-danger","p-mr-2",3,"disabled","click"],[1,"p-col-12","p-md-3"],["styleClass","p-mr-2","severity","warning",3,"value"],["pButton","","icon","pi pi-save","label","Simpan",1,"p-button","p-button-success","p-mr-2",3,"disabled","click"],["pButton","","icon","fa fa-refresh","label","Batal",1,"p-button","p-mr-2",3,"click"]],template:function(e,i){1&e&&(p.Lb(0,"p-confirmPopup"),p.Qb(1,"div",0),p.Qb(2,"div",1),p.Qb(3,"h4"),p.Jc(4,"Master Siklus Gizi"),p.Pb(),p.Qb(5,"div",2),p.Qb(6,"div",3),p.Qb(7,"div",4),p.Qb(8,"label",5),p.Jc(9,"Nama Menu"),p.Pb(),p.Qb(10,"input",6),p.Yb("ngModelChange",function(e){return i.item.namaProduk=e})("keyup.enter",function(){return i.cari()}),p.Pb(),p.Pb(),p.Qb(11,"div",4),p.Qb(12,"label",5),p.Jc(13,"Jenis Waktu"),p.Pb(),p.Qb(14,"p-dropdown",7),p.Yb("ngModelChange",function(e){return i.item.jenisWaktu=e}),p.Pb(),p.Pb(),p.Qb(15,"div",4),p.Qb(16,"label",5),p.Jc(17,"Jenis Diet"),p.Pb(),p.Qb(18,"p-dropdown",8),p.Yb("ngModelChange",function(e){return i.item.jenisDiet=e}),p.Pb(),p.Pb(),p.Qb(19,"div",4),p.Qb(20,"label",5),p.Jc(21,"Siklus Ke"),p.Pb(),p.Qb(22,"input",9),p.Yb("ngModelChange",function(e){return i.item.siklusKe=e})("keyup.enter",function(){return i.cari()}),p.Pb(),p.Pb(),p.Qb(23,"div",10),p.Qb(24,"label",5),p.Jc(25,"Rows"),p.Pb(),p.Qb(26,"input",11),p.Yb("ngModelChange",function(e){return i.item.jmlRow=e})("keyup.enter",function(){return i.cari()}),p.Pb(),p.Pb(),p.Qb(27,"div",12),p.Qb(28,"button",13),p.Yb("click",function(){return i.cari()}),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Qb(29,"div",14),p.Qb(30,"div",3),p.Qb(31,"div",2),p.Qb(32,"p-table",15,16),p.Yb("selectionChange",function(e){return i.selectedData=e}),p.Hc(34,M,2,0,"ng-template",17),p.Hc(35,S,3,1,"ng-template",18),p.Hc(36,T,4,1,"ng-template",19),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Qb(37,"p-dialog",20),p.Yb("visibleChange",function(e){return i.pop_Tambah=e}),p.Qb(38,"div",21),p.Qb(39,"div",2),p.Qb(40,"p-panel",22),p.Qb(41,"div",3),p.Qb(42,"div",23),p.Qb(43,"label",5),p.Jc(44,"Siklus Ke"),p.Pb(),p.Qb(45,"input",24),p.Yb("ngModelChange",function(e){return i.popUp.siklusKe=e}),p.Pb(),p.Pb(),p.Qb(46,"div",23),p.Qb(47,"label",5),p.Jc(48,"Jenis Diet"),p.Pb(),p.Qb(49,"p-dropdown",25),p.Yb("ngModelChange",function(e){return i.popUp.jenisDiet=e}),p.Pb(),p.Pb(),p.Qb(50,"div",23),p.Qb(51,"label",5),p.Jc(52,"Jenis Waktu"),p.Pb(),p.Qb(53,"p-dropdown",7),p.Yb("ngModelChange",function(e){return i.popUp.jenisWaktu=e}),p.Pb(),p.Pb(),p.Qb(54,"div",23),p.Qb(55,"label",5),p.Jc(56,"Kategori Diet"),p.Pb(),p.Qb(57,"p-dropdown",26),p.Yb("ngModelChange",function(e){return i.popUp.kategory=e}),p.Pb(),p.Pb(),p.Qb(58,"div",2),p.Qb(59,"p-panel",27),p.Qb(60,"div",3),p.Hc(61,I,4,4,"div",28),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Pb(),p.Qb(62,"div",2),p.Qb(63,"p-panel",29),p.Qb(64,"div",3),p.Qb(65,"div",23),p.Qb(66,"span",30),p.Lb(67,"i",31),p.Qb(68,"input",32),p.Yb("ngModelChange",function(e){return i.searchText=e}),p.Pb(),p.Pb(),p.Pb(),p.Qb(69,"div",10),p.Qb(70,"button",33),p.Yb("click",function(){return i.clearFilter()}),p.Pb(),p.Pb(),p.Hc(71,Y,3,4,"div",34),p.Pb(),p.Pb(),p.Pb(),p.Qb(72,"div",14),p.Hc(73,W,6,3,"p-panel",35),p.Pb(),p.Pb(),p.Hc(74,O,2,1,"ng-template",36),p.Pb()),2&e&&(p.xb(10),p.ic("ngModel",i.item.namaProduk),p.xb(4),p.ic("options",i.listJenisWaktu)("ngModel",i.item.jenisWaktu)("filter",!0)("showClear",!0),p.xb(4),p.ic("options",i.listJenisDiet)("ngModel",i.item.jenisDiet)("filter",!0)("showClear",!0),p.xb(4),p.ic("ngModel",i.item.siklusKe),p.xb(4),p.ic("ngModel",i.item.jmlRow),p.xb(6),p.ic("columns",i.column)("value",i.dataSource)("selection",i.selectedData)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",p.mc(47,$))("paginator",!0)("pageLinks",5),p.xb(5),p.Ec(p.mc(48,B)),p.ic("visible",i.pop_Tambah)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!0),p.xb(3),p.ic("toggleable",!0),p.xb(5),p.ic("ngModel",i.popUp.siklusKe),p.xb(4),p.ic("options",i.listJenisDiet)("ngModel",i.popUp.jenisDiet)("filter",!0)("showClear",!0),p.xb(4),p.ic("options",i.listJenisWaktu)("ngModel",i.popUp.jenisWaktu)("filter",!0)("showClear",!0),p.xb(4),p.ic("options",i.listKategoriDiet)("ngModel",i.popUp.kategory)("filter",!0)("showClear",!0),p.xb(2),p.ic("toggleable",!0),p.xb(2),p.ic("ngForOf",i.listKelas),p.xb(2),p.ic("toggleable",!0),p.xb(5),p.ic("ngModel",i.searchText),p.xb(3),p.ic("ngIf",i.listProdukCek.length>0),p.xb(2),p.ic("ngIf",i.listChecked.length>0))},directives:[d.a,h.a,f.a,h.g,h.h,g.a,h.i,k.b,m.a,v.h,r.k,P.a,y.a,o.k,o.l,Q.a,v.g,v.f,x.a,w.a],pipes:[C.a],styles:[".p-field-checkbox[_ngcontent-%COMP%], .p-field-radiobutton[_ngcontent-%COMP%]{margin-bottom:0;display:flex;align-items:center}"]}),L)}],_=((R=function i(){e(this,i)}).\u0275mod=p.Hb({type:R}),R.\u0275inj=p.Gb({factory:function(e){return new(e||R)},imports:[[l.j.forChild(G)],l.j]}),R),E=a("PCNd"),N=((z=function i(){e(this,i)}).\u0275mod=p.Hb({type:z}),z.\u0275inj=p.Gb({factory:function(e){return new(e||z)},imports:[[o.b,_,E.a]]}),z)}}])}();