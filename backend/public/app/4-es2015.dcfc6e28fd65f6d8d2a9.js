(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{abSf:function(e,a,i){"use strict";i.d(a,"a",function(){return h});var t=i("fXoL"),n=i("7CaW"),s=i("SSqW"),l=i("ofXK"),o=i("3Pt+"),b=i("7kUa"),r=i("jeV5");function c(e,a){if(1&e){const e=t.Sb();t.Qb(0,"div",0),t.Qb(1,"div",1),t.Qb(2,"div",0),t.Qb(3,"div",1),t.Qb(4,"label",4),t.Jc(5,"No Registrasi "),t.Pb(),t.Qb(6,"input",5),t.Yb("ngModelChange",function(a){return t.yc(e),t.bc().item.pasien.noregistrasi=a}),t.Pb(),t.Pb(),t.Qb(7,"div",1),t.Qb(8,"label",4),t.Jc(9,"No Rekam Medis "),t.Pb(),t.Qb(10,"input",6),t.Yb("ngModelChange",function(a){return t.yc(e),t.bc().item.pasien.nocm=a}),t.Pb(),t.Pb(),t.Qb(11,"div",1),t.Qb(12,"label",4),t.Jc(13,"Nama Pasien "),t.Pb(),t.Qb(14,"input",7),t.Yb("ngModelChange",function(a){return t.yc(e),t.bc().item.pasien.namapasien=a}),t.Pb(),t.Pb(),t.Qb(15,"div",1),t.Qb(16,"label",4),t.Jc(17,"Tgl Registrasi "),t.Pb(),t.Qb(18,"input",8),t.Yb("ngModelChange",function(a){return t.yc(e),t.bc().item.pasien.tglregistrasi=a}),t.Pb(),t.Pb(),t.Qb(19,"div",1),t.Qb(20,"label",4),t.Jc(21,"Tipe Pasien "),t.Pb(),t.Qb(22,"input",8),t.Yb("ngModelChange",function(a){return t.yc(e),t.bc().item.pasien.kelompokpasien=a}),t.Pb(),t.Pb(),t.Qb(23,"div",1),t.Qb(24,"label",4),t.Jc(25,"Jenis Kelamin "),t.Pb(),t.Qb(26,"input",7),t.Yb("ngModelChange",function(a){return t.yc(e),t.bc().item.pasien.jeniskelamin=a}),t.Pb(),t.Pb(),t.Qb(27,"div",1),t.Qb(28,"label",4),t.Jc(29,"Tgl Lahir "),t.Pb(),t.Qb(30,"input",9),t.Yb("ngModelChange",function(a){return t.yc(e),t.bc().item.pasien.tgllahir=a}),t.Pb(),t.Pb(),t.Qb(31,"div",1),t.Qb(32,"label",4),t.Jc(33,"Umur "),t.Pb(),t.Qb(34,"input",8),t.Yb("ngModelChange",function(a){return t.yc(e),t.bc().item.pasien.umur=a}),t.Pb(),t.Pb(),t.Qb(35,"div",1),t.Qb(36,"label",4),t.Jc(37,"Alamat "),t.Pb(),t.Qb(38,"input",10),t.Yb("ngModelChange",function(a){return t.yc(e),t.bc().item.pasien.alamatlengkap=a}),t.Pb(),t.Pb(),t.Qb(39,"div",1),t.Qb(40,"label",4),t.Jc(41,"Kelas "),t.Pb(),t.Qb(42,"input",8),t.Yb("ngModelChange",function(a){return t.yc(e),t.bc().item.pasien.namakelas=a}),t.Pb(),t.Pb(),t.Qb(43,"div",1),t.Qb(44,"label",4),t.Jc(45,"Ruangan "),t.Pb(),t.Qb(46,"input",8),t.Yb("ngModelChange",function(a){return t.yc(e),t.bc().item.pasien.namaruangan=a}),t.Pb(),t.Pb(),t.Qb(47,"div",1),t.Qb(48,"label",4),t.Jc(49,"Pendidikan "),t.Pb(),t.Qb(50,"input",11),t.Yb("ngModelChange",function(a){return t.yc(e),t.bc().item.pasien.pendidikan=a}),t.Pb(),t.Pb(),t.Qb(51,"div",1),t.Qb(52,"label",4),t.Jc(53,"Jenis Pelayanan "),t.Pb(),t.Qb(54,"input",8),t.Yb("ngModelChange",function(a){return t.yc(e),t.bc().item.pasien.jenispelayanan=a}),t.Pb(),t.Pb(),t.Pb(),t.Pb(),t.Pb()}if(2&e){const e=t.bc();t.xb(6),t.ic("ngModel",e.item.pasien.noregistrasi),t.xb(4),t.ic("ngModel",e.item.pasien.nocm),t.xb(4),t.ic("ngModel",e.item.pasien.namapasien),t.xb(4),t.ic("ngModel",e.item.pasien.tglregistrasi),t.xb(4),t.ic("ngModel",e.item.pasien.kelompokpasien),t.xb(4),t.ic("ngModel",e.item.pasien.jeniskelamin),t.xb(4),t.ic("ngModel",e.item.pasien.tgllahir),t.xb(4),t.ic("ngModel",e.item.pasien.umur),t.xb(4),t.ic("ngModel",e.item.pasien.alamatlengkap),t.xb(4),t.ic("ngModel",e.item.pasien.namakelas),t.xb(4),t.ic("ngModel",e.item.pasien.namaruangan),t.xb(4),t.ic("ngModel",e.item.pasien.pendidikan),t.xb(4),t.ic("ngModel",e.item.pasien.jenispelayanan)}}function p(e,a){1&e&&(t.Qb(0,"div",1),t.Lb(1,"p-skeleton",13),t.Pb())}function u(e,a){if(1&e&&(t.Qb(0,"div",0),t.Hc(1,p,2,0,"div",12),t.Pb()),2&e){const e=t.bc();t.xb(1),t.ic("ngForOf",e.numberss)}}const d=function(){return{width:"100%",height:"70vh"}};let h=(()=>{class e{constructor(){this.item={pasien:{}},this.numberss=Array(15).map((e,a)=>a)}ngOnInit(){}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Db({type:e,selectors:[["app-head-pasien"]],decls:6,vars:6,consts:[[1,"p-grid"],[1,"p-col-12","p-md-12"],["header","Info Pasien",3,"toggleable"],["class","p-grid",4,"ngIf"],["for","input",1,"label"],["type","text","pInputText","","placeholder","Cari No Registrasi","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","No Rekam Medis","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Nama Pasien","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Tgl Lahir","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Alamat","disabled","",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","Pendidikan","disabled","",3,"ngModel","ngModelChange"],["class","p-col-12 p-md-12",4,"ngFor","ngForOf"],["height","2.4rem"]],template:function(e,a){1&e&&(t.Qb(0,"div",0),t.Qb(1,"div",1),t.Qb(2,"p-panel",2),t.Qb(3,"p-scrollPanel"),t.Hc(4,c,55,13,"div",3),t.Hc(5,u,2,1,"div",3),t.Pb(),t.Pb(),t.Pb(),t.Pb()),2&e&&(t.xb(2),t.ic("toggleable",!0),t.xb(1),t.Ec(t.mc(5,d)),t.xb(1),t.ic("ngIf",null!=a.item.pasien.nocm),t.xb(1),t.ic("ngIf",null==a.item.pasien.nocm))},directives:[n.a,s.a,l.l,o.a,b.a,o.g,o.h,l.k,r.a],styles:[""]}),e})()},cfze:function(e,a,i){"use strict";i.r(a),i.d(a,"InputTindakanModule",function(){return _});var t=i("ofXK"),n=i("tyNb"),s=i("7zfz"),l=i("1zoS"),o=i("wd/R"),b=i("abSf"),r=i("fXoL"),c=i("EJUL"),p=i("U+s4"),u=i("G0w9"),d=i("ujBT"),h=i("7CaW"),g=i("Ji6n"),m=i("3Pt+"),P=i("eO1q"),k=i("V5BG"),f=i("7kUa"),Q=i("Ks7X"),v=i("arFO"),y=i("lVkt"),w=i("jIHw"),j=i("xlun"),M=i("rEr+"),J=i("Q4Mo"),C=i("Wq6t");function x(e,a){1&e&&r.Lb(0,"app-head-pasien")}function T(e,a){if(1&e&&(r.Qb(0,"table",41),r.Qb(1,"tr"),r.Qb(2,"th"),r.Jc(3,"Deskripsi"),r.Pb(),r.Qb(4,"th"),r.Jc(5,"Harga"),r.Pb(),r.Pb(),r.Qb(6,"tr"),r.Qb(7,"td"),r.Jc(8),r.Pb(),r.Qb(9,"td"),r.Jc(10),r.Pb(),r.Pb(),r.Pb()),2&e){const e=a.$implicit;r.xb(8),r.Kc(e.namaproduk),r.xb(2),r.Kc(e.hargasatuan)}}function S(e,a){if(1&e){const e=r.Sb();r.Qb(0,"div",3),r.Qb(1,"div",2),r.Qb(2,"div",10),r.Qb(3,"label",11),r.Jc(4,"Jenis Pelaksana "),r.Pb(),r.Qb(5,"p-dropdown",22),r.Yb("ngModelChange",function(a){return r.yc(e),r.bc().item.jenisPelaksana1=a})("onChange",function(){r.yc(e);const a=r.bc();return a.getPegawaiByJenis(a.item.jenisPelaksana1)}),r.Pb(),r.Pb(),r.Qb(6,"div",13),r.Qb(7,"label",11),r.Jc(8,"Petugas Pelaksana "),r.Pb(),r.Qb(9,"p-multiSelect",23),r.Yb("ngModelChange",function(a){return r.yc(e),r.bc().item.petugasPelaksana1=a}),r.Pb(),r.Pb(),r.Qb(10,"div",24),r.Qb(11,"button",25),r.Yb("click",function(){return r.yc(e),r.bc().showKeun(2)}),r.Pb(),r.Qb(12,"button",42),r.Yb("click",function(){return r.yc(e),r.bc().hide(1)}),r.Pb(),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=r.bc();r.xb(5),r.ic("options",e.listJenisPelaksana)("ngModel",e.item.jenisPelaksana1)("filter",!0)("showClear",!0),r.xb(4),r.ic("options",e.listPegawai)("ngModel",e.item.petugasPelaksana1)}}function Y(e,a){if(1&e){const e=r.Sb();r.Qb(0,"div",3),r.Qb(1,"div",2),r.Qb(2,"div",10),r.Qb(3,"label",11),r.Jc(4,"Jenis Pelaksana "),r.Pb(),r.Qb(5,"p-dropdown",22),r.Yb("ngModelChange",function(a){return r.yc(e),r.bc().item.jenisPelaksana2=a})("onChange",function(){r.yc(e);const a=r.bc();return a.getPegawaiByJenis(a.item.jenisPelaksana2)}),r.Pb(),r.Pb(),r.Qb(6,"div",13),r.Qb(7,"label",11),r.Jc(8,"Petugas Pelaksana "),r.Pb(),r.Qb(9,"p-multiSelect",23),r.Yb("ngModelChange",function(a){return r.yc(e),r.bc().item.petugasPelaksana2=a}),r.Pb(),r.Pb(),r.Qb(10,"div",24),r.Qb(11,"button",25),r.Yb("click",function(){return r.yc(e),r.bc().showKeun(3)}),r.Pb(),r.Qb(12,"button",42),r.Yb("click",function(){return r.yc(e),r.bc().hide(2)}),r.Pb(),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=r.bc();r.xb(5),r.ic("options",e.listJenisPelaksana)("ngModel",e.item.jenisPelaksana2)("filter",!0)("showClear",!0),r.xb(4),r.ic("options",e.listPegawai)("ngModel",e.item.petugasPelaksana2)}}function I(e,a){if(1&e){const e=r.Sb();r.Qb(0,"div",3),r.Qb(1,"div",2),r.Qb(2,"div",10),r.Qb(3,"label",11),r.Jc(4,"Jenis Pelaksana "),r.Pb(),r.Qb(5,"p-dropdown",22),r.Yb("ngModelChange",function(a){return r.yc(e),r.bc().item.jenisPelaksana3=a})("onChange",function(){r.yc(e);const a=r.bc();return a.getPegawaiByJenis(a.item.jenisPelaksana3)}),r.Pb(),r.Pb(),r.Qb(6,"div",13),r.Qb(7,"label",11),r.Jc(8,"Petugas Pelaksana "),r.Pb(),r.Qb(9,"p-multiSelect",23),r.Yb("ngModelChange",function(a){return r.yc(e),r.bc().item.petugasPelaksana3=a}),r.Pb(),r.Pb(),r.Qb(10,"div",24),r.Qb(11,"button",25),r.Yb("click",function(){return r.yc(e),r.bc().showKeun(4)}),r.Pb(),r.Qb(12,"button",42),r.Yb("click",function(){return r.yc(e),r.bc().hide(3)}),r.Pb(),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=r.bc();r.xb(5),r.ic("options",e.listJenisPelaksana)("ngModel",e.item.jenisPelaksana3)("filter",!0)("showClear",!0),r.xb(4),r.ic("options",e.listPegawai)("ngModel",e.item.petugasPelaksana3)}}function H(e,a){if(1&e){const e=r.Sb();r.Qb(0,"div",3),r.Qb(1,"div",2),r.Qb(2,"div",10),r.Qb(3,"label",11),r.Jc(4,"Jenis Pelaksana "),r.Pb(),r.Qb(5,"p-dropdown",22),r.Yb("ngModelChange",function(a){return r.yc(e),r.bc().item.jenisPelaksana4=a})("onChange",function(){r.yc(e);const a=r.bc();return a.getPegawaiByJenis(a.item.jenisPelaksana4)}),r.Pb(),r.Pb(),r.Qb(6,"div",13),r.Qb(7,"label",11),r.Jc(8,"Petugas Pelaksana "),r.Pb(),r.Qb(9,"p-multiSelect",23),r.Yb("ngModelChange",function(a){return r.yc(e),r.bc().item.petugasPelaksana4=a}),r.Pb(),r.Pb(),r.Qb(10,"div",24),r.Qb(11,"button",25),r.Yb("click",function(){return r.yc(e),r.bc().showKeun(5)}),r.Pb(),r.Qb(12,"button",42),r.Yb("click",function(){return r.yc(e),r.bc().hide(4)}),r.Pb(),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=r.bc();r.xb(5),r.ic("options",e.listJenisPelaksana)("ngModel",e.item.jenisPelaksana4)("filter",!0)("showClear",!0),r.xb(4),r.ic("options",e.listPegawai)("ngModel",e.item.petugasPelaksana4)}}function N(e,a){if(1&e){const e=r.Sb();r.Qb(0,"div",3),r.Qb(1,"div",2),r.Qb(2,"div",10),r.Qb(3,"label",11),r.Jc(4,"Jenis Pelaksana "),r.Pb(),r.Qb(5,"p-dropdown",22),r.Yb("ngModelChange",function(a){return r.yc(e),r.bc().item.jenisPelaksana5=a})("onChange",function(){r.yc(e);const a=r.bc();return a.getPegawaiByJenis(a.item.jenisPelaksana5)}),r.Pb(),r.Pb(),r.Qb(6,"div",13),r.Qb(7,"label",11),r.Jc(8,"Petugas Pelaksana "),r.Pb(),r.Qb(9,"p-multiSelect",23),r.Yb("ngModelChange",function(a){return r.yc(e),r.bc().item.petugasPelaksana5=a}),r.Pb(),r.Pb(),r.Qb(10,"div",24),r.Qb(11,"button",42),r.Yb("click",function(){return r.yc(e),r.bc().hide(5)}),r.Pb(),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=r.bc();r.xb(5),r.ic("options",e.listJenisPelaksana)("ngModel",e.item.jenisPelaksana5)("filter",!0)("showClear",!0),r.xb(4),r.ic("options",e.listPegawai)("ngModel",e.item.petugasPelaksana5)}}function K(e,a){1&e&&(r.Qb(0,"tr"),r.Lb(1,"th",43),r.Qb(2,"th",43),r.Jc(3," Tgl Pelayanan"),r.Pb(),r.Qb(4,"th",44),r.Jc(5," Nama Pelayanan"),r.Pb(),r.Qb(6,"th",45),r.Jc(7," Harga"),r.Pb(),r.Qb(8,"th",43),r.Jc(9," Jumlah "),r.Pb(),r.Qb(10,"th",46),r.Jc(11," Sub Total"),r.Pb(),r.Qb(12,"th",43),r.Jc(13," Cito "),r.Pb(),r.Pb())}function D(e,a){if(1&e){const e=r.Sb();r.Qb(0,"tr"),r.Qb(1,"td",43),r.Lb(2,"button",47),r.Qb(3,"button",48),r.Yb("click",function(){r.yc(e);const i=a.$implicit;return r.bc().hapusItem(i)}),r.Pb(),r.Pb(),r.Qb(4,"td",43),r.Jc(5),r.Pb(),r.Qb(6,"td",44),r.Jc(7),r.Pb(),r.Qb(8,"td",45),r.Jc(9),r.Pb(),r.Qb(10,"td",43),r.Jc(11),r.Pb(),r.Qb(12,"td",46),r.Jc(13),r.Pb(),r.Qb(14,"td",43),r.Jc(15),r.Pb(),r.Pb()}if(2&e){const e=a.$implicit,i=a.expanded;r.xb(2),r.ic("pRowToggler",e)("icon",i?"pi pi-chevron-down":"pi pi-chevron-right"),r.xb(3),r.Kc(e.tglPelayanan),r.xb(2),r.Kc(e.produk.namaproduk),r.xb(2),r.Kc(e.hargaSatuan),r.xb(2),r.Kc(e.qty),r.xb(2),r.Kc(e.subTotal),r.xb(2),r.Kc(e.statuscito)}}function R(e,a){1&e&&(r.Qb(0,"tr"),r.Qb(1,"th"),r.Jc(2,"Jenis Pelaksana"),r.Pb(),r.Qb(3,"th"),r.Jc(4,"Nama Pelaksana"),r.Pb(),r.Pb())}function B(e,a){if(1&e&&(r.Qb(0,"tr"),r.Qb(1,"td"),r.Jc(2),r.Pb(),r.Qb(3,"td"),r.Jc(4),r.Pb(),r.Pb()),2&e){const e=a.$implicit;r.xb(2),r.Kc(e.jenisPetugas.jenisPelaksana),r.xb(2),r.Kc(e.namalengkap)}}function A(e,a){if(1&e&&(r.Qb(0,"tr"),r.Qb(1,"td",49),r.Qb(2,"div",50),r.Qb(3,"p-table",51),r.Hc(4,R,5,0,"ng-template",34),r.Hc(5,B,5,2,"ng-template",35),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&e){const e=a.$implicit;r.xb(3),r.ic("value",e.pelayananpetugas)}}function L(e,a){if(1&e&&(r.Qb(0,"tr"),r.Qb(1,"td",52),r.Jc(2,"Grand Total : "),r.Pb(),r.Qb(3,"td"),r.Jc(4),r.Pb(),r.Pb()),2&e){const e=r.bc();r.xb(4),r.Lc(" ",e.item.totalAlls,"")}}function F(e,a){if(1&e&&(r.Qb(0,"div",10),r.Lb(1,"p-splitButton",53),r.Pb()),2&e){const e=r.bc();r.xb(1),r.ic("model",e.listBtn)}}const q=function(){return[5,10,25,50]},E=[{path:"",component:(()=>{class e{constructor(e,a,i,t,n,s,o,b,r){this.apiService=e,this.authService=a,this.confirmationService=i,this.messageService=t,this.cacheHelper=n,this.dateHelper=s,this.alertService=o,this.route=b,this.router=r,this.params={},this.item={pasien:{},jumlah:1,tglPelayanan:new Date},this.maxDateValue=new Date,this.isClosing=!1,this.listProduk=[],this.listJenisPelaksana=[],this.listPegawai=[],this.dataTindakan=[],this.listKomponen=[],this.data2=[],this.hideEMR=!0,this.page=l.b.get().page,this.rows=l.b.get().rows}ngAfterViewInit(){this.route.params.subscribe(e=>{if(null==e.norec_rp){var a=this.cacheHelper.get("cacheEMR_qwertyuiop");null!=a?(a=JSON.parse(a),this.currentNorecPD=a.norec_pd,this.currentNorecAPD=a.norec,this.item.pasien=a,this.isClosing=!1,this.hideEMR=!1,1==a.isclosing&&(this.alertService.warn("Peringatan!","Pemeriksaan sudah ditutup tanggal "+o(new Date(a.tglclosing)).format("DD-MMM-YYYY HH:mm")),this.isClosing=!0)):window.history.back()}else this.currentNorecPD=e.norec_rp,this.currentNorecAPD=e.norec_dpr,this.loadHead()})}loadHead(){this.isClosing=!1,this.apiService.get("registrasi/get-pasien-bynorec?norec_pd="+this.currentNorecPD+"&norec_apd="+this.currentNorecAPD).subscribe(e=>{e.tgllahir=o(new Date(e.tgllahir)).format("YYYY-MM-DD"),e.umur=this.dateHelper.getUmur(new Date(e.tgllahir),new Date),this.h.item.pasien=e,this.item.pasien=e,this.apiService.get("sysadmin/general/get-status-close/"+this.item.pasien.noregistrasi).subscribe(e=>{1==e.status&&(this.alertService.warn("Peringatan!","Pemeriksaan sudah ditutup tanggal "+o(new Date(e.tglclosing)).format("DD-MMM-YYYY HH:mm")),this.isClosing=!0)})})}ngOnInit(){this.isClosing=!1,this.loadCombo()}loadCombo(){this.apiService.get("tindakan/get-combo").subscribe(e=>{this.listJenisPelaksana=e.jenispelaksana,this.item.jenisPelaksana=this.listJenisPelaksana[6],this.getPegawaiByJenis(this.item.jenisPelaksana),this.item.nilaiStatusCito=parseFloat(e.tarifcito)})}filterProduk(e){null!=this.item.pasien.objectruanganfk&&this.apiService.get("tindakan/get-tindakan?namaproduk="+e.query+"&idRuangan="+this.item.pasien.objectruanganfk+"&idKelas="+this.item.pasien.objectkelasfk+"&idJenisPelayanan="+this.item.pasien.objectjenispelayananfk).subscribe(e=>{for(let a=0;a<e.length;a++){const i=e[a];i.hargasatuan=this.formatRupiah(parseFloat(i.hargasatuan),"")}this.listProduk=e})}getPegawaiByJenis(e){this.apiService.get("tindakan/get-pegawaibyjenispetugas?idJenisPetugas="+e.id).subscribe(e=>{this.listPegawai=e.jenispelaksana})}getHargaTindakan(){this.item.hargaTindakan=0,this.item.jumlah=0,this.listKomponen=[],null!=this.item.namaProduk&&this.apiService.get("tindakan/get-komponenharga?idRuangan="+this.item.pasien.objectruanganfk+"&idKelas="+this.item.pasien.objectkelasfk+"&idProduk="+this.item.namaProduk.id+"&idJenisPelayanan="+this.item.pasien.objectjenispelayananfk).subscribe(e=>{this.listKomponen=e.data,this.item.hargaTindakan=e.data2[0].hargasatuan,this.item.jumlah=1})}multiSelectArrayToString(e){if(e.length>0)return e.map(function(e){return e.namalengkap}).join(", ")}multiSelectArrayToString2(e){if(e.length>0)return e.map(function(e){return e.produk.namaproduk}).join(", ")}hapusAll(){this.data2=[],this.dataTindakan=this.data2,this.item.StatusCito=void 0,this.item.JasaCito=0,this.item.NilaiCito=0,this.item.totalAlls=this.formatRupiah(0,"Rp.")}hapusItem(e){for(var a=this.data2.length-1;a>=0;a--)this.data2[a].rowNumber==e.rowNumber&&this.data2.splice(a,1);this.dataTindakan=this.data2;var i=0;for(a=this.data2.length-1;a>=0;a--)i+=parseFloat(this.data2[a].subTotal);this.item.totalAlls=this.formatRupiah(i,"Rp.")}tambahTindakan(){if(1!=this.isClosing)if(null!=this.item.namaProduk)if(0!=this.item.jumlah)if(null!=this.item.jenisPelaksana)if(null!=this.item.petugasPelaksana&&0!=this.item.petugasPelaksana.length){var e="";1==this.item.iscito?(e="\u2714",this.item.JasaCito=parseFloat(this.item.hargaTindakan)*this.item.nilaiStatusCito,this.item.NilaiCito=this.item.nilaiStatusCito):(e="",this.item.JasaCito=0,this.item.NilaiCito=0);var a={},i={idParent:(a={rowNumber:0==this.dataTindakan.length?1:this.data2.length+1,tglPelayanan:o(this.item.tglPelayanan).format("YYYY-MM-DD HH:mm:ss"),produk:this.item.namaProduk,qty:this.item.jumlah,hargaSatuan:this.item.hargaTindakan,hargadiskon:0,subTotal:this.item.hargaTindakan*this.item.jumlah,listKomponen:this.listKomponen,statuscito:e,cito:this.item.iscito,jasacito:this.item.JasaCito,isparamedis:this.item.paramedis,jenispelayananfk:this.item.pasien.objectjenispelayananfk,nilaicito:this.item.NilaiCito,pelayananpetugas:[]}).rowNumber,jenisPetugas:{id:this.item.jenisPelaksana.id,jenisPelaksana:this.item.jenisPelaksana.jenispetugaspe},objectjenispetugaspefk:this.item.jenisPelaksana.id,listpegawai:this.item.petugasPelaksana,namalengkap:this.multiSelectArrayToString(this.item.petugasPelaksana)};a.pelayananpetugas.push(i),null!=this.item.jenisPelaksana1&&null!=this.item.petugasPelaksana1&&this.item.petugasPelaksana1.length>0&&(i={idParent:a.rowNumber,jenisPetugas:{id:this.item.jenisPelaksana1.id,jenisPelaksana:this.item.jenisPelaksana1.jenispetugaspe},objectjenispetugaspefk:this.item.jenisPelaksana1.id,listpegawai:this.item.petugasPelaksana1,namalengkap:this.multiSelectArrayToString(this.item.petugasPelaksana1)},a.pelayananpetugas.push(i),this.show1=!1,delete this.item.jenisPelaksana1,delete this.item.petugasPelaksana1),null!=this.item.jenisPelaksana2&&null!=this.item.petugasPelaksana2&&this.item.petugasPelaksana2.length>0&&(i={idParent:a.rowNumber,jenisPetugas:{id:this.item.jenisPelaksana2.id,jenisPelaksana:this.item.jenisPelaksana2.jenispetugaspe},objectjenispetugaspefk:this.item.jenisPelaksana2.id,listpegawai:this.item.petugasPelaksana2,namalengkap:this.multiSelectArrayToString(this.item.petugasPelaksana2)},a.pelayananpetugas.push(i),this.show2=!1,delete this.item.jenisPelaksana2,delete this.item.petugasPelaksana2),null!=this.item.jenisPelaksana3&&null!=this.item.petugasPelaksana3&&this.item.petugasPelaksana3.length>0&&(i={idParent:a.rowNumber,jenisPetugas:{id:this.item.jenisPelaksana3.id,jenisPelaksana:this.item.jenisPelaksana3.jenispetugaspe},objectjenispetugaspefk:this.item.jenisPelaksana3.id,listpegawai:this.item.petugasPelaksana3,namalengkap:this.multiSelectArrayToString(this.item.petugasPelaksana3)},a.pelayananpetugas.push(i),this.show3=!1,delete this.item.jenisPelaksana3,delete this.item.petugasPelaksana3),null!=this.item.jenisPelaksana4&&null!=this.item.petugasPelaksana4&&this.item.petugasPelaksana4.length>0&&(i={idParent:a.rowNumber,jenisPetugas:{id:this.item.jenisPelaksana4.id,jenisPelaksana:this.item.jenisPelaksana4.jenispetugaspe},objectjenispetugaspefk:this.item.jenisPelaksana4.id,listpegawai:this.item.petugasPelaksana4,namalengkap:this.multiSelectArrayToString(this.item.petugasPelaksana4)},a.pelayananpetugas.push(i),this.show4=!1,delete this.item.jenisPelaksana4,delete this.item.petugasPelaksana4),null!=this.item.jenisPelaksana5&&null!=this.item.petugasPelaksana5&&this.item.petugasPelaksana5.length>0&&(i={idParent:a.rowNumber,jenisPetugas:{id:this.item.jenisPelaksana5.id,jenisPelaksana:this.item.jenisPelaksana5.jenispetugaspe},objectjenispetugaspefk:this.item.jenisPelaksana5.id,listpegawai:this.item.petugasPelaksana5,namalengkap:this.multiSelectArrayToString(this.item.petugasPelaksana5)},a.pelayananpetugas.push(i),this.show5=!1,delete this.item.jenisPelaksana5,delete this.item.petugasPelaksana5),this.data2.push(a),this.dataTindakan=this.data2;for(var t=0,n=this.data2.length-1;n>=0;n--)t+=parseFloat(this.data2[n].subTotal);this.item.totalAlls=this.formatRupiah(t,"Rp."),this.kosongkan(),this.item.Cito=void 0}else this.alertService.error("Info","Petugas Pelaksana harus di isi");else this.alertService.error("Info","Jenis Pelaksana harus di isi");else this.alertService.error("Info","Jumlah tidak boleh nol");else this.alertService.error("Info","Tindakan harus di isi");else this.alertService.error("Info","Data sudah di closing, tidak bisa input tindakan ")}kosongkan(){this.item.namaProduk=void 0,this.item.hargaTindakan=void 0,this.item.jumlah=void 0}save(){if(0!=this.dataTindakan.length){var e=[];for(let n=0;n<this.dataTindakan.length;n++){const s=this.dataTindakan[n];if(s.listKomponen.length<=0)return void this.alertService.error("Info","Tidak bisa Simpan, Komponen Tindakan tidak ada");var a=0;1==s.cito&&(a=1);var i=0,t=0;0!=s.jasacito&&(i=s.jasacito,t=s.nilaicito),e.push({noregistrasifk:this.currentNorecAPD,tglregistrasi:this.item.pasien.tglregistrasi,tglpelayanan:o(s.tglPelayanan).format("YYYY-MM-DD HH:mm:ss"),ruangan:s.ruangan,produkfk:s.produk.id,hargasatuan:s.hargaSatuan,diskon:s.hargadiskon,hargajual:s.hargaSatuan,harganetto:s.hargaSatuan,jumlah:s.qty,kelasfk:this.item.pasien.objectkelasfk,pelayananpetugas:s.pelayananpetugas,komponenharga:s.listKomponen,keterangan:!0===this.item.pemeriksaanKeluar?"Pemeriksaan Keluar":"-",iscito:a,jasacito:i,isparamedis:null!=s.isparamedis&&s.isparamedis,jenispelayananfk:s.jenispelayananfk,nilaicito:t})}var n=this.multiSelectArrayToString2(this.dataTindakan),s={pelayananpasien:e};this.isSimpan=!0,this.apiService.post("tindakan/save-tindakan",s).subscribe(e=>{this.apiService.postLog("Input Tindakan","norec PP",e.dataPP.norec,"Input Tindakan : ("+n+") pada No Registrasi "+this.item.pasien.noregistrasi+" di "+this.item.pasien.namaruangan).subscribe(e=>{}),this.hapusAll(),this.isSimpan=!1,0==this.hideEMR&&window.history.back()},function(e){this.isSimpan=!1})}else this.alertService.error("Info","Tindakan belum di isi")}cancel(){this.hapusAll(),window.history.back()}showKeun(e){1==e&&(this.show1=!0),2==e&&(this.show2=!0),3==e&&(this.show3=!0),4==e&&(this.show4=!0),5==e&&(this.show5=!0)}hide(e){1==e&&(this.show1=!1),2==e&&(this.show2=!1),3==e&&(this.show3=!1),4==e&&(this.show4=!1),5==e&&(this.show5=!1)}formatRupiah(e,a){return a+" "+parseFloat(e).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")}cekPaket(e){}}return e.\u0275fac=function(a){return new(a||e)(r.Jb(c.a),r.Jb(c.b),r.Jb(s.a),r.Jb(s.h),r.Jb(p.a),r.Jb(u.a),r.Jb(d.a),r.Jb(n.a),r.Jb(n.f))},e.\u0275cmp=r.Db({type:e,selectors:[["app-input-tindakan"]],viewQuery:function(e,a){if(1&e&&r.Nc(b.a,!0),2&e){let e;r.vc(e=r.Zb())&&(a.h=e.first)}},features:[r.wb([s.a])],decls:80,vars:43,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-grid"],[1,"p-col-12"],[4,"ngIf"],[1,"p-col-12","p-md-12"],["header","Detail Tindakan",3,"toggleable"],[1,"p-col-12","p-md-3"],["binary","true","inputId","item.paket",3,"ngModel","ngModelChange","onChange"],["for","item.paket",1,"label"],[1,"p-col-12","p-md-2"],["for","input",1,"label-required"],["yearRange","1980:2030","dateFormat","yy-mm-dd","placeholder","Tgl Pelayanan","hourFormat","24",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","maxDate","ngModelChange"],[1,"p-col-12","p-md-4"],["field","namaproduk","placeholder","Filter Pelayanan",3,"ngModel","suggestions","dropdown","ngModelChange","completeMethod","onSelect"],["pTemplate","item"],["type","text","pInputText","","placeholder","Harga Pelayanan","disabled","",3,"ngModel","ngModelChange"],["for","horizontal",1,"label-required"],["buttonLayout","horizontal","inputId","horizontal","spinnerMode","horizontal","decrementButtonClass","p-button-danger","incrementButtonClass","p-button-success","incrementButtonIcon","pi pi-plus","decrementButtonIcon","pi pi-minus",3,"ngModel","showButtons","step","ngModelChange"],[1,"p-col-12","p-md-1",2,"margin-top","15px"],["binary","true","inputId","item.iscito",3,"ngModel","ngModelChange"],["for","item.iscito",1,"label"],["placeholder","Jenis Pelaksana","optionLabel","jenispetugaspe",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["defaultLabel","Pilih Petugas Pelaksana","optionLabel","namalengkap","display","chip",3,"options","ngModel","ngModelChange"],[1,"p-col-12","p-md-2",2,"margin-top","15px"],["pButton","","type","button","icon","pi pi-plus-circle","pTooltip","Tambah Petugas Pelaksana","label","",1,"p-button","p-mr-2",3,"click"],[1,"p-col-12","p-md-3",2,"margin-top","15px"],["binary","true","inputId","item.paramedis",3,"ngModel","ngModelChange"],["for","item.paramedis",1,"label"],["class","p-col-12",4,"ngIf"],[1,"p-col-12","p-md-2","p-md-offset-8"],["pButton","","type","button","icon","pi pi-plus","pTooltip","Tambah Data Ke Table","label","Tambah",1,"p-button","p-mr-2",3,"disabled","click"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus Semua Tindakan","label","Hapus Semua",1,"p-button","p-button-warning","p-mr-2",3,"click"],["styleClass","p-datatable-customers","scrollable","true","dataKey","rowNumber",3,"value","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","summary"],["pButton","","type","button","icon","pi pi-save","pTooltip","Simpan","label","Simpan",1,"p-button","p-mr-2",3,"disabled","click"],["pButton","","type","button","icon","pi pi-arrow-left","pTooltip","Kembali","label","Batal",1,"p-button","p-button-danger","p-mr-2",3,"click"],["class","p-col-12 p-md-2",4,"ngIf"],[1,"country-item"],["pButton","","type","button","icon","pi pi-times-circle","pTooltip","Hapus Petugas Pelaksana","label","",1,"p-button","p-button-danger","p-mr-2",3,"click"],[2,"width","100px"],[2,"width","250px"],[2,"width","200px"],[2,"width","150px"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain","p-mr-1",3,"pRowToggler","icon"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus Data","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],["colspan","8"],[1,"p-p-3"],["dataKey","id",3,"value"],["rowspan","6"],["label","Action","styleClass","p-button-success","icon","pi pi-ellipsis-v",3,"model"]],template:function(e,a){1&e&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"h4"),r.Jc(3,"Tindakan"),r.Pb(),r.Qb(4,"div",2),r.Qb(5,"div",3),r.Hc(6,x,1,0,"app-head-pasien",4),r.Pb(),r.Qb(7,"div",3),r.Qb(8,"div",2),r.Qb(9,"div",5),r.Qb(10,"p-panel",6),r.Qb(11,"div",2),r.Qb(12,"div",7),r.Qb(13,"p-checkbox",8),r.Yb("ngModelChange",function(e){return a.item.paket=e})("onChange",function(){return a.cekPaket(a.item.paket)}),r.Pb(),r.Qb(14,"label",9),r.Jc(15," Paket"),r.Pb(),r.Pb(),r.Pb(),r.Qb(16,"div",2),r.Qb(17,"div",3),r.Qb(18,"div",2),r.Qb(19,"div",10),r.Qb(20,"label",11),r.Jc(21," Tgl Pelayanan "),r.Pb(),r.Qb(22,"p-calendar",12),r.Yb("ngModelChange",function(e){return a.item.tglPelayanan=e}),r.Pb(),r.Pb(),r.Qb(23,"div",13),r.Qb(24,"label",11),r.Jc(25," Pelayanan"),r.Pb(),r.Qb(26,"p-autoComplete",14),r.Yb("ngModelChange",function(e){return a.item.namaProduk=e})("completeMethod",function(e){return a.filterProduk(e)})("onSelect",function(){return a.getHargaTindakan()}),r.Hc(27,T,11,2,"ng-template",15),r.Pb(),r.Pb(),r.Qb(28,"div",7),r.Qb(29,"label",11),r.Jc(30," Harga"),r.Pb(),r.Qb(31,"input",16),r.Yb("ngModelChange",function(e){return a.item.hargaTindakan=e}),r.Pb(),r.Pb(),r.Qb(32,"div",10),r.Qb(33,"label",17),r.Jc(34,"Jumlah"),r.Pb(),r.Qb(35,"p-inputNumber",18),r.Yb("ngModelChange",function(e){return a.item.jumlah=e}),r.Pb(),r.Pb(),r.Qb(36,"div",19),r.Qb(37,"p-checkbox",20),r.Yb("ngModelChange",function(e){return a.item.iscito=e}),r.Pb(),r.Qb(38,"label",21),r.Jc(39," Cito"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(40,"div",3),r.Qb(41,"div",2),r.Qb(42,"div",10),r.Qb(43,"label",11),r.Jc(44,"Jenis Pelaksana "),r.Pb(),r.Qb(45,"p-dropdown",22),r.Yb("ngModelChange",function(e){return a.item.jenisPelaksana=e})("onChange",function(){return a.getPegawaiByJenis(a.item.jenisPelaksana)}),r.Pb(),r.Pb(),r.Qb(46,"div",13),r.Qb(47,"label",11),r.Jc(48,"Petugas Pelaksana "),r.Pb(),r.Qb(49,"p-multiSelect",23),r.Yb("ngModelChange",function(e){return a.item.petugasPelaksana=e}),r.Pb(),r.Pb(),r.Qb(50,"div",24),r.Qb(51,"button",25),r.Yb("click",function(){return a.showKeun(1)}),r.Pb(),r.Pb(),r.Qb(52,"div",26),r.Qb(53,"p-checkbox",27),r.Yb("ngModelChange",function(e){return a.item.paramedis=e}),r.Pb(),r.Qb(54,"label",28),r.Jc(55," Dilakukan Oleh Paramedis"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Hc(56,S,13,6,"div",29),r.Hc(57,Y,13,6,"div",29),r.Hc(58,I,13,6,"div",29),r.Hc(59,H,13,6,"div",29),r.Hc(60,N,12,6,"div",29),r.Pb(),r.Qb(61,"div",2),r.Qb(62,"div",30),r.Qb(63,"button",31),r.Yb("click",function(){return a.tambahTindakan()}),r.Pb(),r.Pb(),r.Qb(64,"div",10),r.Qb(65,"button",32),r.Yb("click",function(){return a.hapusAll()}),r.Pb(),r.Pb(),r.Pb(),r.Qb(66,"div",2),r.Qb(67,"div",3),r.Qb(68,"p-table",33),r.Hc(69,K,14,0,"ng-template",34),r.Hc(70,D,16,8,"ng-template",35),r.Hc(71,A,6,1,"ng-template",36),r.Hc(72,L,5,1,"ng-template",37),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(73,"div",5),r.Qb(74,"div",2),r.Qb(75,"div",30),r.Qb(76,"button",38),r.Yb("click",function(){return a.save()}),r.Pb(),r.Pb(),r.Qb(77,"div",10),r.Qb(78,"button",39),r.Yb("click",function(){return a.cancel()}),r.Pb(),r.Pb(),r.Hc(79,F,2,1,"div",40),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&e&&(r.xb(5),r.Bb("p-md-3",a.hideEMR),r.xb(1),r.ic("ngIf",a.hideEMR),r.xb(1),r.Bb("p-md-9",a.hideEMR),r.xb(3),r.ic("toggleable",!0),r.xb(3),r.ic("ngModel",a.item.paket),r.xb(9),r.ic("ngModel",a.item.tglPelayanan)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0)("maxDate",a.maxDateValue),r.xb(4),r.ic("ngModel",a.item.namaProduk)("suggestions",a.listProduk)("dropdown",!0),r.xb(5),r.ic("ngModel",a.item.hargaTindakan),r.xb(4),r.ic("ngModel",a.item.jumlah)("showButtons",!0)("step",1),r.xb(2),r.ic("ngModel",a.item.iscito),r.xb(8),r.ic("options",a.listJenisPelaksana)("ngModel",a.item.jenisPelaksana)("filter",!0)("showClear",!0),r.xb(4),r.ic("options",a.listPegawai)("ngModel",a.item.petugasPelaksana),r.xb(4),r.ic("ngModel",a.item.paramedis),r.xb(3),r.ic("ngIf",a.show1),r.xb(1),r.ic("ngIf",a.show2),r.xb(1),r.ic("ngIf",a.show3),r.xb(1),r.ic("ngIf",a.show4),r.xb(1),r.ic("ngIf",a.show5),r.xb(3),r.ic("disabled",a.isClosing),r.xb(5),r.ic("value",a.dataTindakan)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",r.mc(42,q))("paginator",!0)("pageLinks",5),r.xb(8),r.ic("disabled",a.isSimpan),r.xb(3),r.ic("ngIf",a.isNext))},directives:[t.l,h.a,g.a,m.g,m.h,P.a,k.a,s.k,m.a,f.a,Q.a,v.a,y.a,w.b,j.a,M.h,b.a,J.a,M.d,C.a],styles:[""]}),e})()}];let O=(()=>{class e{}return e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({factory:function(a){return new(a||e)},imports:[[n.j.forChild(E)],n.j]}),e})();var z=i("PCNd");let _=(()=>{class e{}return e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({factory:function(a){return new(a||e)},providers:[],imports:[[t.b,O,z.a]]}),e})()}}]);