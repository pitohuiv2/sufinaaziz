(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{Nb2V:function(t,e,i){"use strict";i.r(e),i.d(e,"OrderBedahModule",function(){return b});var a=i("ofXK"),n=i("tyNb"),o=i("tDzy"),c=i("fXoL");const l=[{path:"",component:o.a,children:[{path:"pengkajian-bedah-detail/:namaEMR/:nomorEMR",loadChildren:()=>i.e(39).then(i.bind(null,"XEgZ")).then(t=>t.PengkajianBedahDetailModule)}]}];let r=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},imports:[[n.j.forChild(l)],n.j]}),t})();var s=i("PCNd");let b=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},imports:[[a.b,r,s.a]]}),t})()},tDzy:function(t,e,i){"use strict";i.d(e,"a",function(){return Ct});var a=i("wd/R"),n=i("fXoL"),o=i("By0h"),c=i("EJUL"),l=i("7zfz"),r=i("U+s4"),s=i("G0w9"),b=i("ujBT"),d=i("tyNb"),p=i("dPl2"),u=i("ofXK"),h=i("rEr+"),g=i("jIHw"),m=i("xlun"),f=i("/RsI"),P=i("7CaW"),k=i("eO1q"),v=i("3Pt+"),y=i("7kUa"),Q=i("arFO"),x=i("hYoW"),w=i("jeV5"),S=i("lUkA"),R=i("Ji6n"),C=i("Q4Mo"),j=i("b1Ni"),T=i("PU9F");const M=function(){return{width:"100%"}};function H(t,e){if(1&t&&(n.Qb(0,"div",26),n.Lb(1,"p-tag",48),n.Pb()),2&t){const t=e.$implicit;n.xb(1),n.Ec(n.mc(3,M)),n.jc("value",t.namaproduk)}}function D(t,e){if(1&t){const t=n.Sb();n.Qb(0,"p-panel",45),n.Qb(1,"div",7),n.Hc(2,H,2,4,"div",46),n.Pb(),n.Qb(3,"div",7),n.Qb(4,"div",14),n.Qb(5,"button",47),n.Yb("click",function(){return n.yc(t),n.bc(2).clearSelection()}),n.Pb(),n.Pb(),n.Pb(),n.Pb()}if(2&t){const t=n.bc(2);n.ic("toggleable",!0),n.xb(2),n.ic("ngForOf",t.listChecked),n.xb(3),n.ic("disabled",t.isSimpan)}}function F(t,e){1&t&&n.Lb(0,"p-skeleton",52),2&t&&n.jc("styleClass",e.$implicit.class)}function I(t,e){if(1&t&&(n.Qb(0,"div"),n.Hc(1,F,1,1,"p-skeleton",51),n.Pb()),2&t){const t=e.$implicit;n.zb(t.class),n.xb(1),n.ic("ngForOf",t.details)}}function O(t,e){if(1&t&&(n.Qb(0,"div",7),n.Hc(1,I,2,4,"div",50),n.Pb()),2&t){const t=e.$implicit;n.xb(1),n.ic("ngForOf",t.details)}}function L(t,e){if(1&t&&(n.Qb(0,"div",2),n.Hc(1,O,2,1,"div",49),n.Pb()),2&t){const t=n.bc(2);n.xb(1),n.ic("ngForOf",t.skeleton)}}function $(t,e){if(1&t){const t=n.Sb();n.Qb(0,"div",59),n.Qb(1,"p-checkbox",60),n.Yb("ngModelChange",function(i){n.yc(t);const a=e.$implicit;return n.bc(4).item.layanan[a.id]=i})("onChange",function(){return n.yc(t),n.bc(4).getSelected()}),n.Pb(),n.Qb(2,"label",61),n.Jc(3),n.Pb(),n.Pb()}if(2&t){const t=e.$implicit,i=n.bc(4);n.xb(1),n.jc("inputId",t.id),n.ic("ngModel",i.item.layanan[t.id]),n.xb(1),n.jc("for",t.id),n.xb(1),n.Lc(" ",t.namaproduk,"")}}function J(t,e){if(1&t&&(n.Qb(0,"div",54),n.Qb(1,"div",7),n.Qb(2,"div",33),n.Qb(3,"p-divider",55),n.Qb(4,"div",56),n.Lb(5,"i",57),n.Qb(6,"b"),n.Jc(7),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Qb(8,"div",7),n.Hc(9,$,4,4,"div",58),n.cc(10,"filter"),n.Pb(),n.Pb()),2&t){const t=e.$implicit,i=n.bc(3);n.xb(7),n.Kc(t.detailjenisproduk),n.xb(2),n.ic("ngForOf",n.ec(10,2,t.details,i.searchText))}}function E(t,e){if(1&t&&(n.Qb(0,"div",7),n.Hc(1,J,11,5,"div",53),n.Pb()),2&t){const t=n.bc(2);n.xb(1),n.ic("ngForOf",t.listProdukCek)}}function Y(t,e){if(1&t){const t=n.Sb();n.Qb(0,"div",7),n.Qb(1,"div",2),n.Qb(2,"p-panel",25),n.Qb(3,"div",7),n.Qb(4,"div",26),n.Qb(5,"label",27),n.Jc(6,"Tgl Rencana Operasi "),n.Pb(),n.Qb(7,"p-calendar",28),n.Yb("ngModelChange",function(e){return n.yc(t),n.bc().item.tglPelayanan=e}),n.Pb(),n.Pb(),n.Qb(8,"div",26),n.Qb(9,"label",27),n.Jc(10,"Ruangan Asal "),n.Pb(),n.Qb(11,"input",29),n.Yb("ngModelChange",function(e){return n.yc(t),n.bc().item.ruanganAsal=e}),n.Pb(),n.Pb(),n.Qb(12,"div",26),n.Qb(13,"label",27),n.Jc(14,"Ruangan Tujuan "),n.Pb(),n.Qb(15,"p-dropdown",30),n.Yb("ngModelChange",function(e){return n.yc(t),n.bc().item.ruangantujuan=e})("onChange",function(){n.yc(t);const e=n.bc();return e.getProduk(e.item.ruangantujuan)}),n.Pb(),n.Pb(),n.Qb(16,"div",31),n.Qb(17,"label",27),n.Jc(18,"Keterangan "),n.Pb(),n.Qb(19,"input",32),n.Yb("ngModelChange",function(e){return n.yc(t),n.bc().item.keterangan=e}),n.Pb(),n.Pb(),n.Pb(),n.Qb(20,"div",7),n.Qb(21,"div",33),n.Hc(22,D,6,3,"p-panel",34),n.Pb(),n.Pb(),n.Qb(23,"div",7),n.Qb(24,"div",31),n.Qb(25,"span",35),n.Lb(26,"i",36),n.Qb(27,"input",37),n.Yb("ngModelChange",function(e){return n.yc(t),n.bc().searchText=e}),n.Pb(),n.Pb(),n.Pb(),n.Qb(28,"div",38),n.Qb(29,"button",39),n.Yb("click",function(){return n.yc(t),n.bc().clearFilter()}),n.Pb(),n.Pb(),n.Qb(30,"div",40),n.Qb(31,"button",41),n.Yb("click",function(){return n.yc(t),n.bc().save()}),n.Pb(),n.Pb(),n.Qb(32,"div",38),n.Qb(33,"button",42),n.Yb("click",function(){return n.yc(t),n.bc().batal()}),n.Pb(),n.Pb(),n.Qb(34,"div",38),n.Qb(35,"button",43),n.Yb("click",function(){return n.yc(t),n.bc().riwayat()}),n.Pb(),n.Pb(),n.Pb(),n.Qb(36,"div",7),n.Hc(37,L,2,1,"div",44),n.Hc(38,E,2,1,"div",5),n.Pb(),n.Pb(),n.Pb(),n.Pb()}if(2&t){const t=n.bc();n.xb(2),n.ic("toggleable",!0),n.xb(5),n.ic("ngModel",t.item.tglPelayanan)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0)("maxDate",t.maxDateValue),n.xb(4),n.ic("ngModel",t.item.ruanganAsal),n.xb(4),n.ic("options",t.listRuanganTujuan)("ngModel",t.item.ruangantujuan)("filter",!0)("showClear",!0),n.xb(4),n.ic("ngModel",t.item.keterangan),n.xb(3),n.ic("ngIf",t.listChecked.length>0),n.xb(5),n.ic("ngModel",t.searchText),n.xb(4),n.ic("disabled",t.isSimpan),n.xb(6),n.ic("ngIf",0==t.listProdukCek.length),n.xb(1),n.ic("ngIf",t.listProdukCek.length>0)}}function B(t,e){if(1&t){const t=n.Sb();n.Qb(0,"div",65),n.Qb(1,"div",66),n.Qb(2,"span",35),n.Lb(3,"i",36),n.Qb(4,"input",67),n.Yb("input",function(e){return n.yc(t),n.bc(),n.wc(6).filterGlobal(e.target.value,"contains")}),n.Pb(),n.Pb(),n.Pb(),n.Pb()}}function N(t,e){if(1&t&&(n.Qb(0,"th",70),n.Jc(1),n.Lb(2,"p-sortIcon",71),n.Pb()),2&t){const t=e.$implicit;n.Fc("width: ",t.width,""),n.jc("pSortableColumn",t.field),n.xb(1),n.Lc(" ",t.header," "),n.xb(1),n.jc("field",t.field)}}function K(t,e){if(1&t&&(n.Qb(0,"tr"),n.Lb(1,"th",68),n.Hc(2,N,3,6,"th",69),n.Pb()),2&t){const t=e.$implicit;n.xb(2),n.ic("ngForOf",t)}}function _(t,e){if(1&t&&(n.Qb(0,"span"),n.Jc(1),n.Pb()),2&t){const t=n.bc().$implicit,e=n.bc().$implicit,i=n.bc(2);n.xb(1),n.Lc(" ",i.formatRupiah(e[t.field],""),"")}}function z(t,e){if(1&t&&(n.Qb(0,"span"),n.Jc(1),n.Pb()),2&t){const t=n.bc().$implicit,e=n.bc().$implicit;n.xb(1),n.Lc(" ",e[t.field],"")}}function A(t,e){if(1&t&&(n.Qb(0,"td"),n.Hc(1,_,2,1,"span",75),n.Hc(2,z,2,1,"span",75),n.Pb()),2&t){const t=e.$implicit;n.Fc("width: ",t.width,""),n.xb(1),n.ic("ngIf",null!=t.isCurrency),n.xb(1),n.ic("ngIf",null==t.isCurrency)}}function V(t,e){if(1&t){const t=n.Sb();n.Qb(0,"tr"),n.Qb(1,"td",68),n.Lb(2,"button",72),n.Qb(3,"button",73),n.Yb("click",function(){n.yc(t);const i=e.$implicit;return n.bc(2).hapusD(i)}),n.Pb(),n.Pb(),n.Hc(4,A,3,5,"td",74),n.Pb()}if(2&t){const t=e.$implicit,i=e.columns,a=e.expanded;n.xb(2),n.ic("pRowToggler",t)("icon",a?"pi pi-chevron-down":"pi pi-chevron-right"),n.xb(2),n.ic("ngForOf",i)}}function G(t,e){1&t&&(n.Qb(0,"tr"),n.Qb(1,"th"),n.Jc(2,"Nama Layanan"),n.Pb(),n.Qb(3,"th"),n.Jc(4,"Jumlah"),n.Pb(),n.Pb())}function U(t,e){if(1&t&&(n.Qb(0,"tr"),n.Qb(1,"td"),n.Jc(2),n.Pb(),n.Qb(3,"td"),n.Jc(4),n.Pb(),n.Pb()),2&t){const t=e.$implicit;n.xb(2),n.Kc(t.namaproduk),n.xb(2),n.Kc(t.qtyproduk)}}function q(t,e){if(1&t&&(n.Qb(0,"tr"),n.Qb(1,"td",76),n.Qb(2,"div",77),n.Qb(3,"p-table",78),n.Hc(4,G,5,0,"ng-template",11),n.Hc(5,U,5,2,"ng-template",12),n.Pb(),n.Pb(),n.Pb(),n.Pb()),2&t){const t=e.$implicit;n.xb(3),n.ic("value",t.details)}}const X=function(){return[5,10,25,50]},W=function(){return["namaPelayanan"]};function Z(t,e){if(1&t){const t=n.Sb();n.Qb(0,"div",7),n.Qb(1,"div",2),n.Qb(2,"p-panel",62),n.Qb(3,"div",7),n.Qb(4,"div",2),n.Qb(5,"p-table",8,9),n.Yb("selectionChange",function(e){return n.yc(t),n.bc().selectedData=e}),n.Hc(7,B,5,0,"ng-template",10),n.Hc(8,K,3,1,"ng-template",11),n.Hc(9,V,5,3,"ng-template",12),n.Hc(10,q,6,1,"ng-template",13),n.Pb(),n.Pb(),n.Pb(),n.Qb(11,"div",7),n.Qb(12,"div",63),n.Qb(13,"button",64),n.Yb("click",function(){return n.yc(t),n.bc().order()}),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Pb()}if(2&t){const t=n.bc();n.xb(2),n.ic("toggleable",!0),n.xb(3),n.ic("columns",t.columnRiwayat)("value",t.dataSourceRiwayat)("selection",t.selectedData)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",n.mc(11,X))("paginator",!0)("pageLinks",5)("globalFilterFields",n.mc(12,W))}}function tt(t,e){if(1&t){const t=n.Sb();n.Qb(0,"div",65),n.Qb(1,"div",66),n.Qb(2,"span",35),n.Lb(3,"i",36),n.Qb(4,"input",67),n.Yb("input",function(e){return n.yc(t),n.bc(),n.wc(13).filterGlobal(e.target.value,"contains")}),n.Pb(),n.Pb(),n.Pb(),n.Pb()}}function et(t,e){if(1&t&&(n.Qb(0,"th",70),n.Jc(1),n.Lb(2,"p-sortIcon",71),n.Pb()),2&t){const t=e.$implicit;n.Fc("width: ",t.width,""),n.jc("pSortableColumn",t.field),n.xb(1),n.Lc(" ",t.header," "),n.xb(1),n.jc("field",t.field)}}function it(t,e){if(1&t&&(n.Qb(0,"tr"),n.Lb(1,"th",68),n.Hc(2,et,3,6,"th",69),n.Pb()),2&t){const t=e.$implicit;n.xb(2),n.ic("ngForOf",t)}}function at(t,e){if(1&t&&(n.Qb(0,"span"),n.Jc(1),n.Pb()),2&t){const t=n.bc().$implicit,e=n.bc().$implicit,i=n.bc();n.xb(1),n.Lc(" ",i.formatRupiah(e[t.field],""),"")}}function nt(t,e){if(1&t&&(n.Qb(0,"span"),n.Jc(1),n.Pb()),2&t){const t=n.bc().$implicit,e=n.bc().$implicit;n.xb(1),n.Lc(" ",e[t.field],"")}}function ot(t,e){if(1&t&&(n.Qb(0,"td"),n.Hc(1,at,2,1,"span",75),n.Hc(2,nt,2,1,"span",75),n.Pb()),2&t){const t=e.$implicit;n.Fc("width: ",t.width,""),n.xb(1),n.ic("ngIf",null!=t.isCurrency),n.xb(1),n.ic("ngIf",null==t.isCurrency)}}function ct(t,e){if(1&t){const t=n.Sb();n.Qb(0,"tr"),n.Qb(1,"td",68),n.Lb(2,"button",72),n.Qb(3,"button",79),n.Yb("click",function(){n.yc(t);const i=e.$implicit;return n.bc().hapusPengkajian(i)}),n.Pb(),n.Qb(4,"button",80),n.Yb("click",function(){n.yc(t);const i=e.$implicit;return n.bc().editD(i)}),n.Pb(),n.Pb(),n.Hc(5,ot,3,5,"td",74),n.Pb()}if(2&t){const t=e.$implicit,i=e.columns,a=e.expanded;n.xb(2),n.ic("pRowToggler",t)("icon",a?"pi pi-chevron-down":"pi pi-chevron-right"),n.xb(3),n.ic("ngForOf",i)}}function lt(t,e){1&t&&(n.Qb(0,"tr"),n.Qb(1,"th"),n.Jc(2,"Form Yang terisi"),n.Pb(),n.Pb())}function rt(t,e){if(1&t){const t=n.Sb();n.Qb(0,"span"),n.Jc(1),n.Qb(2,"button",79),n.Yb("click",function(){n.yc(t);const i=e.$implicit;return n.bc(3).hapusForm(i)}),n.Pb(),n.Qb(3,"button",83),n.Yb("click",function(){n.yc(t);const i=e.$implicit;return n.bc(3).asupKaForm(i)}),n.Pb(),n.Pb()}if(2&t){const t=e.$implicit;n.zb("order-badge order-instock"),n.xb(1),n.Lc(" ",t.namaform," ")}}function st(t,e){if(1&t&&(n.Qb(0,"tr"),n.Hc(1,rt,4,3,"span",50),n.Pb()),2&t){const t=e.$implicit;n.xb(1),n.ic("ngForOf",t.details)}}function bt(t,e){if(1&t&&(n.Qb(0,"tr"),n.Qb(1,"td",81),n.Qb(2,"div",77),n.Qb(3,"p-table",82),n.Hc(4,lt,3,0,"ng-template",11),n.Hc(5,st,2,1,"ng-template",12),n.Pb(),n.Pb(),n.Pb(),n.Pb()),2&t){const t=e.$implicit;n.xb(3),n.ic("value",t.details)}}function dt(t,e){1&t&&n.Lb(0,"p-skeleton",84)}const pt=function(){return{"overflow-x":"auto","overflow-y":"hidden",position:"static"}};function ut(t,e){if(1&t&&(n.Lb(0,"p-menubar",85),n.cc(1,"filter")),2&t){const t=n.bc();n.Ec(n.mc(6,pt)),n.ic("model",n.ec(1,3,t.treeSourceMenu,t.searchText))}}function ht(t,e){if(1&t){const t=n.Sb();n.Qb(0,"div",65),n.Qb(1,"div",2),n.Qb(2,"span",35),n.Lb(3,"i",36),n.Qb(4,"input",67),n.Yb("input",function(e){return n.yc(t),n.bc(),n.wc(35).filterGlobal(e.target.value,"contains")}),n.Pb(),n.Pb(),n.Pb(),n.Pb()}}function gt(t,e){if(1&t&&(n.Qb(0,"th",70),n.Jc(1),n.Lb(2,"p-sortIcon",71),n.Pb()),2&t){const t=e.$implicit;n.Fc("width: ",t.width,""),n.jc("pSortableColumn",t.field),n.xb(1),n.Lc(" ",t.header," "),n.xb(1),n.jc("field",t.field)}}function mt(t,e){if(1&t&&(n.Qb(0,"tr"),n.Lb(1,"th",68),n.Hc(2,gt,3,6,"th",69),n.Pb()),2&t){const t=e.$implicit;n.xb(2),n.ic("ngForOf",t)}}function ft(t,e){if(1&t&&(n.Qb(0,"span"),n.Jc(1),n.Pb()),2&t){const t=n.bc().$implicit,e=n.bc().$implicit,i=n.bc();n.xb(1),n.Lc(" ",i.formatRupiah(e[t.field],""),"")}}function Pt(t,e){if(1&t&&(n.Qb(0,"span"),n.Jc(1),n.Pb()),2&t){const t=n.bc().$implicit,e=n.bc().$implicit;n.xb(1),n.Lc(" ",e[t.field],"")}}function kt(t,e){if(1&t&&(n.Qb(0,"td"),n.Hc(1,ft,2,1,"span",75),n.Hc(2,Pt,2,1,"span",75),n.Pb()),2&t){const t=e.$implicit;n.Fc("width: ",t.width,""),n.xb(1),n.ic("ngIf",null!=t.isCurrency),n.xb(1),n.ic("ngIf",null==t.isCurrency)}}function vt(t,e){if(1&t){const t=n.Sb();n.Qb(0,"tr"),n.Qb(1,"td",68),n.Lb(2,"button",72),n.Qb(3,"button",86),n.Yb("click",function(){n.yc(t);const i=e.$implicit;return n.bc().addPaket(i)}),n.Pb(),n.Pb(),n.Hc(4,kt,3,5,"td",74),n.Pb()}if(2&t){const t=e.$implicit,i=e.columns,a=e.expanded;n.xb(2),n.ic("pRowToggler",t)("icon",a?"pi pi-chevron-down":"pi pi-chevron-right"),n.xb(2),n.ic("ngForOf",i)}}function yt(t,e){1&t&&(n.Qb(0,"tr"),n.Qb(1,"th"),n.Jc(2,"Nama Layanan"),n.Pb(),n.Pb())}function Qt(t,e){if(1&t&&(n.Qb(0,"tr"),n.Qb(1,"td"),n.Jc(2),n.Pb(),n.Pb()),2&t){const t=e.$implicit;n.xb(2),n.Kc(t.namaproduk)}}function xt(t,e){if(1&t&&(n.Qb(0,"tr"),n.Qb(1,"td",87),n.Qb(2,"div",77),n.Qb(3,"p-table",78),n.Hc(4,yt,3,0,"ng-template",11),n.Hc(5,Qt,3,1,"ng-template",12),n.Pb(),n.Pb(),n.Pb(),n.Pb()),2&t){const t=e.$implicit;n.xb(3),n.ic("value",t.details)}}function wt(t,e){if(1&t){const t=n.Sb();n.Qb(0,"p-button",88),n.Yb("click",function(){return n.yc(t),n.bc().closePaket()}),n.Pb()}}const St=function(){return{width:"600px",minWidth:"600px"}},Rt=function(){return["namapaket"]};let Ct=(()=>{class t{constructor(t,e,i,a,n,o,c,l,r){this.rekamMedis=t,this.apiService=e,this.authService=i,this.confirmationService=a,this.cacheHelper=n,this.dateHelper=o,this.alertService=c,this.activeRoute=l,this.router=r,this.item={tglPelayanan:new Date,layanan:[]},this.listProdukCek=[],this.produkDef=[],this.listRuanganTujuan=[],this.skeleton=[],this.searchText="",this.selected_count=0,this.selected_games=[],this.listChecked=[],this.dataSourceRiwayat=[],this.treeSourceMenu=[],this.headData={},this.nomorERM="-"}ngAfterViewInit(){}ngOnInit(){if(null==this.rekamMedis.header.norec){var t=this.cacheHelper.get("cacheEMR_qwertyuiop");null!=t&&(t=JSON.parse(t),this.headData=t)}else this.headData=this.rekamMedis.header;null==this.headData.norec&&window.history.back(),this.skeleton=this.loadSkeleton(),this.item.idPegawaiLogin=this.authService.getDataLoginUser().pegawai.id,this.apiService.get("emr/get-combo-penunjang?departemenfk=kdDepartemenOK").subscribe(t=>{this.item.ruanganAsal=this.headData.namaruangan,this.item.namaRuangan=this.headData.namaruangan,this.listRuanganTujuan=t.ruangantujuan,this.item.ruangantujuan={id:t.ruangantujuan[0].id,namaruangan:t.ruangantujuan[0].namaruangan,instalasiidfk:t.ruangantujuan[0].instalasiidfk},this.getProduk(this.item.ruangantujuan)}),this.columnRiwayat=[{field:"noregistrasi",header:"No Registrasi",width:"100px"},{field:"tglorder",header:"Tgl Order",width:"120px"},{field:"tglrencana",header:"Tgl Rencana",width:"120px"},{field:"noorder",header:"No Order",width:"100px"},{field:"dokter",header:"Dokter",width:"150px"},{field:"namaruanganasal",header:"Ruangan Asal",width:"150px"},{field:"namaruangantujuan",header:"Ruangan",width:"150px"},{field:"keteranganlainnya",header:"Keterangan",width:"150px"},{field:"statusorder",header:"Status",width:"70px"}],this.columnPaket=[{field:"namapaket",header:"Nama Paket",width:"120px"},{field:"jml",header:"Jumlah",width:"80px"}],this.columnRiwayatPengkajian=[{field:"tglemr",header:"Tgl EMR",width:"100px"},{field:"noemr",header:"No EMR",width:"100px"},{field:"noregistrasi",header:"No Registrasi",width:"100px"},{field:"namaruangan",header:"Ruangan",width:"150px"}]}getProduk(t){this.listProdukCek=[],this.item.layanan=[],this.produkDef=[],null!=t&&this.apiService.get("sysadmin/general/get-tindakan-with-details?idRuangan="+t.id+"&idKelas="+this.headData.objectkelasfk+"&idJenisPelayanan="+this.headData.jenispelayanan+"&isLabRad=true").subscribe(t=>{this.listProdukCek=t.details,this.produkDef=t.data})}getSelected(){if(this.item.layanan.length>0)for(var t=Object.keys(this.item.layanan),e=0;e<t.length;e++){const n=t[e];if(1==this.item.layanan[parseInt(n)])for(var i=0;i<this.produkDef.length;i++){const t=this.produkDef[i];if(t.id==n){for(var a=0;a<this.listChecked.length;a++)this.listChecked[a].namaproduk==t.namaproduk&&this.listChecked.splice(a,1);this.listChecked.push({namaproduk:t.namaproduk})}}else for(i=0;i<this.produkDef.length;i++){const t=this.produkDef[i];if(t.id==n)for(a=0;a<this.listChecked.length;a++)this.listChecked[a].namaproduk==t.namaproduk&&this.listChecked.splice(a,1)}}}clearFilter(){this.searchText=""}save(){if(null!=this.item.ruangantujuan)if(null!=this.item.tglPelayanan)if(null!=this.item.layanan&&0!=this.item.layanan.length){for(var t=Object.keys(this.item.layanan),e=[],i=t.length-1;i>=0;i--)1==this.item.layanan[parseInt(t[i])]&&e.push({no:i+1,produkfk:t[i],namaproduk:t[i],qtyproduk:1,objectruanganfk:this.headData.objectruanganfk,objectruangantujuanfk:this.item.ruangantujuan.id,pemeriksaanluar:1==this.item.pemeriksaanKeluar?1:0,iscito:null!=this.item.iscito&&1==this.item.iscito&&this.item.iscito,objectkelasfk:this.headData.objectkelasfk,nourut:null});if(0!=e.length){var n={tglrencana:a(this.item.tglPelayanan).format("YYYY-MM-DD HH:mm:ss"),norec_so:"",norec_apd:this.headData.norec_apd,norec_pd:this.headData.norec_pd,qtyproduk:e.length,objectruanganfk:this.headData.objectruanganfk,objectruangantujuanfk:this.item.ruangantujuan.id,departemenfk:this.item.ruangantujuan.instalasiidfk,pegawaiorderfk:this.item.idPegawaiLogin,keterangan:null!=this.item.keterangan?this.item.keterangan:null,iscito:null!=this.item.iscito&&1==this.item.iscito&&this.item.iscito,details:e};this.isSimpan=!0,this.apiService.post("emr/save-order-pelayanan",n).subscribe(t=>{this.item.layanan=[],this.isSimpan=!1,this.apiService.postLog("Order Bedah","Norec strukorder_t",t.strukorder.norec,"Order Laboratorium No Order - "+t.strukorder.noorder+" dengan No Registrasi "+this.headData.noregistrasi).subscribe(t=>{}),this.batal()},t=>{this.isSimpan=!1})}else this.alertService.warn("Info","Pilih Pelayanan dulu")}else this.alertService.warn("Info","Pilih layanan terlebih dahulu!!");else this.alertService.warn("Info","Pilih Tgl Order  terlebih dahulu!!");else this.alertService.warn("Info","Pilih Ruangan Tujuan terlebih dahulu!!")}batal(){for(var t=Object.keys(this.item.layanan),e=t.length-1;e>=0;e--)this.item.layanan[parseInt(t[e])]=!1;this.listChecked=[],delete this.item.keterangan}onRowSelect(t){}hapusD(t){"SELESAI"!=t.status?this.apiService.post("emr/delete-order-pelayanan",{norec_order:t.norec}).subscribe(t=>{this.loadRiwayat("noregistrasi="+this.headData.noregistrasi)}):this.alertService.warn("Info","Status Sudah Selesai tidak bisa di hapus")}order(){this.isRiwayat=!1,this.batal(),this.getProduk(this.item.ruangantujuan)}riwayat(){this.isRiwayat=!0,this.loadRiwayat("noregistrasi="+this.headData.noregistrasi)}loadRiwayat(t){this.apiService.get("emr/get-riwayat-order-penunjang?"+t+"&setting=kdDepartemenOK").subscribe(t=>{for(var e=t.daftar.length-1;e>=0;e--)t.daftar[e].no=e+1,t.daftar[e].cito=1==t.daftar[e].cito?"\u2714":"\u2718";this.dataSourceRiwayat=t.daftar})}hapus(){null!=this.selectedData?"SELESAI"!=this.selectedData.status?this.apiService.post("emr/delete-order-pelayanan",{norec_order:this.selectedData.norec}).subscribe(t=>{this.loadRiwayat("noregistrasi="+this.headData.noregistrasi)}):this.alertService.warn("Info","Status Sudah Selesai tidak bisa di hapus"):this.alertService.info("Info","Pilih data dulu")}cekPaket(t){if(1==t){if(null==this.item.ruangantujuan)return void this.alertService.warn("Info","Pilih ruangan dulu");this.pop_paket=!0,this.apiService.get("general/get-paket-tindakan").subscribe(t=>{this.dataSourcePaket=t})}}addPaket(t){for(var e=t.details,i=Object.keys(this.item.layanan),a=0;a<e.length;a++){const t=e[a];if(i.length>0)for(let e=0;e<i.length;e++)t.objectprodukfk!=i[e]&&(this.item.layanan[t.objectprodukfk]=!0);else this.item.layanan[t.objectprodukfk]=!0}this.getSelected()}clearSelection(){var t=Object.keys(this.item.layanan);for(let e=0;e<t.length;e++)this.item.layanan[t[e]]=!1;this.getSelected()}closePaket(){this.pop_paket=!1,this.item.paket=!1}handleChangeTab(t){this.indexTab=t.index,0==t.index||(1==t.index?(this.loadRiwayatEMR(),console.log(this.activeRoute)):this.loadTreeView())}buatBaru(){this.indexTab=2,this.handleChangeTab({index:this.indexTab}),this.router.navigate(["pengkajian-bedah-detail",2,"-"],{relativeTo:this.activeRoute}),this.nomorERM="-"}editD(t){this.nomorERM=t.noemr,this.indexTab=2,this.handleChangeTab({index:this.indexTab}),this.router.navigate(["pengkajian-bedah-detail",2,t.noemr],{relativeTo:this.activeRoute})}hapusPengkajian(t){this.nomorERM="-",this.apiService.post("emr/hapus-emr-transaksi-norec",{norec:t.norec}).subscribe(t=>{this.loadRiwayatEMR(),this.apiService.postLog("Hapus EMR","norec emrpasien_t",t.norec,"Hapus No EMR - "+t.emrpasienfk+" pada No Registrasi  "+this.headData.noregistrasi+" - Pasien : "+this.headData.namapasien).subscribe(t=>{})})}asupKaForm(t){this.nomorERM=t.emrpasienfk,this.indexTab=2,this.handleChangeTab({index:this.indexTab}),this.router.navigate(["pengkajian-bedah-detail",t.emrfk,t.emrpasienfk],{relativeTo:this.activeRoute})}hapusForm(t){var e={noemr:t.noemr,reportdisplay:t.reportdisplay,idemr:t.emrfk,norec:t.norec,idpegawai:this.authService.getPegawaiId()};this.apiService.post("emr/disable-emr-details",e).subscribe(e=>{this.apiService.postLog("Hapus EMR","norec emrpasien_t",t.norec,"Hapus Satu Form EMR ( "+t.namaform+" ) No EMR - "+t.noemr+" pada No Registrasi  "+this.headData.noregistrasi+" - Pasien : "+this.headData.namapasien).subscribe(t=>{})})}loadTreeView(){this.treeSourceMenu=[],this.isLoadingNav=!0,this.apiService.get("emr/get-menu-rekam-medis-dynamic?namaemr=bedah").subscribe(t=>{this.isLoadingNav=!1;for(let e=0;e<t.data.length;e++){const i=t.data[e];if(i.name=i.label,null==i.items)i.command=t=>{t.node=t.item,this.nodeSelect(t)};else for(let t=0;t<i.items.length;t++){const e=i.items[t];if(e.name=e.label,null==e.items)e.command=t=>{t.node=t.item,this.nodeSelect(t)};else for(let t=0;t<e.items.length;t++){const i=e.items[t];if(i.name=i.label,null==i.items)i.command=t=>{t.node=t.item,this.nodeSelect(t)};else for(let t=0;t<i.items.length;t++){const e=i.items[t];if(e.name=e.label,null==e.items)e.command=t=>{t.node=t.item,this.nodeSelect(t)};else for(let t=0;t<e.items.length;t++){const i=e.items[t];i.name=i.label,null==i.items&&(i.command=t=>{t.node=t.item,this.nodeSelect(t)})}}}}i.icon="pi pi-fw pi-bars"}this.treeSourceMenu=t.data})}nodeSelect(t){let e=t.node.reportdisplay;this.router.navigate(null==e?["pengkajian-bedah-detail",t.node.id,this.nomorERM]:[e],{relativeTo:this.activeRoute})}loadRiwayatEMR(){this.apiService.get("emr/get-emr-transaksi-detail-form?noregistrasi="+this.headData.noregistrasi+"&jenisEmr=bedah").subscribe(t=>{this.dataSourcePengkajian=t.data})}loadSkeleton(){return[{id:1,details:[{class:"p-col-2",details:[{class:"p-mb-0"}]}]},{id:2,details:[{class:"p-col-4",details:[{class:"p-mb-2"},{class:"p-mb-2"},{class:"p-mb-2"},{class:"p-mb-2"}]},{class:"p-col-4",details:[{class:"p-mb-2"},{class:"p-mb-2"},{class:"p-mb-2"},{class:"p-mb-2"}]},{class:"p-col-4",details:[{class:"p-mb-2"},{class:"p-mb-2"},{class:"p-mb-2"},{class:"p-mb-2"}]}]},{id:3,details:[{class:"p-col-2",details:[{class:"p-mb-0"}]}]},{id:4,details:[{class:"p-col-4",details:[{class:"p-mb-2"},{class:"p-mb-2"},{class:"p-mb-2"},{class:"p-mb-2"}]},{class:"p-col-4",details:[{class:"p-mb-2"},{class:"p-mb-2"},{class:"p-mb-2"},{class:"p-mb-2"}]},{class:"p-col-4",details:[{class:"p-mb-2"},{class:"p-mb-2"},{class:"p-mb-2"},{class:"p-mb-2"}]}]}]}}return t.\u0275fac=function(e){return new(e||t)(n.Jb(o.a),n.Jb(c.a),n.Jb(c.b),n.Jb(l.a),n.Jb(r.a),n.Jb(s.a),n.Jb(b.a),n.Jb(d.a),n.Jb(d.f))},t.\u0275cmp=n.Db({type:t,selectors:[["app-order-bedah"]],decls:41,vars:37,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[3,"activeIndex","onChange","activeIndexChange"],["header","Order Jadwal Bedah","leftIcon","fa fa-stethoscope"],["class","p-grid",4,"ngIf"],["header","Riwayat EMR Bedah","leftIcon","fa fa-list"],[1,"p-grid"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","dataKey","norec","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","globalFilterFields","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[1,"p-col-12","p-md-1","p-md-offset-11"],["pButton","","type","button","icon","pi pi-plus","pTooltip","Buat Pengkajian Baru ","label","Tambah",1,"p-button","p-mr-2",3,"click"],["header","Input EMR Bedah","leftIcon","pi pi-th-large"],["height","3rem",4,"ngIf"],["appendTo","p-grid",3,"model","style",4,"ngIf"],["header","Paket",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"p-fluid","p-grid"],["header","Detail Paket",3,"toggleable"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","dataKey","norec","selectionMode","single",3,"columns","value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","globalFilterFields"],["dt2",""],["pTemplate","footer"],["header","Detail Pemeriksaan",3,"toggleable"],[1,"p-col-12","p-md-4"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd","placeholder","Tgl Pelayanan","hourFormat","24",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","maxDate","ngModelChange"],["type","text","pInputText","","placeholder","Ruangan ","disabled","",3,"ngModel","ngModelChange"],["placeholder","Ruangan Tujuan","optionLabel","namaruangan","dataKey","id",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],[1,"p-col-12","p-md-5"],["type","text","pInputText","","placeholder","Keterangan ",3,"ngModel","ngModelChange"],[1,"p-col-12"],["header","Detail Pemeriksaan Terpilih",3,"toggleable",4,"ngIf"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Filter",3,"ngModel","ngModelChange"],[1,"p-col-12","p-md-1"],["pButton","","type","button","icon","pi pi-times","pTooltip","Clear Filter",1,"p-button","p-button","p-mr-2",3,"click"],[1,"p-col-12","p-md-1","p-md-offset-3"],["pButton","","type","button","icon","pi pi-save","pTooltip","Simpan","label","Simpan",1,"p-button","p-mr-2",3,"disabled","click"],["pButton","","type","button","icon","pi pi-arrow-right","pTooltip","Batal ","label","Batal",1,"p-button","p-button-danger","p-mr-2",3,"click"],["pButton","","type","button","icon","pi pi-list","pTooltip","Riwayat Order","label","Riwayat",1,"p-button","p-mr-2",3,"click"],["class","p-col-12 p-md-12",4,"ngIf"],["header","Detail Pemeriksaan Terpilih",3,"toggleable"],["class","p-col-12 p-md-4",4,"ngFor","ngForOf"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus Semua Data Terpilih","label","Clear",1,"p-button","p-button-danger","p-mr-2",3,"disabled","click"],["styleClass","p-mr-2","severity","warning",3,"value"],["class","p-grid",4,"ngFor","ngForOf"],[3,"class",4,"ngFor","ngForOf"],[3,"styleClass",4,"ngFor","ngForOf"],[3,"styleClass"],["class","p-col-12 p-md-12","style","padding: 10px;",4,"ngFor","ngForOf"],[1,"p-col-12","p-md-12",2,"padding","10px"],["align","left"],[1,"p-d-inline-flex","p-ai-center"],[1,"fa","fa-stethoscope","p-mr-2"],["class","p-col-12 p-md-4 p-field-checkbox",4,"ngFor","ngForOf"],[1,"p-col-12","p-md-4","p-field-checkbox"],["binary","true",3,"ngModel","inputId","ngModelChange","onChange"],[3,"for"],["header","Detail Order",3,"toggleable"],[1,"p-col-12","p-md-1","p-md-offset-10"],["pButton","","type","button","icon","pi pi-plus","pTooltip","Order Baru ","label","Order",1,"p-button","p-mr-2",3,"click"],[1,"table-header","p-grid"],[1,"p-col-12","p-md-3"],["pInputText","","type","text","placeholder","Filter",3,"input"],[2,"width","80px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain","p-mr-2",3,"pRowToggler","icon"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus Order","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"],[4,"ngIf"],["colspan","10"],[1,"p-p-3"],["dataKey","id",3,"value"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus Data","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],["pButton","","type","button","icon","pi pi-check-circle","pTooltip","Edit Data","label","",1,"p-button-rounded","p-button-success","p-mr-2",3,"click"],["colspan","5"],["dataKey","norec",3,"value"],["pButton","","type","button","icon","pi pi-check-circle","pTooltip","Masuk Ke Form (Edit)","label","",1,"p-button-rounded","p-button-success","p-mr-2",3,"click"],["height","3rem"],["appendTo","p-grid",3,"model"],["pButton","","type","button","icon","pi pi-plus","pTooltip","Tambah Paket","label","",1,"p-button-rounded","p-button-success","p-mr-2",3,"click"],["colspan","3"],["icon","pi pi-close","label","Tutup","styleClass","p-button-text",3,"click"]],template:function(t,e){1&t&&(n.Qb(0,"div",0),n.Qb(1,"div",1),n.Qb(2,"h4"),n.Jc(3,"Bedah"),n.Pb(),n.Qb(4,"div",2),n.Qb(5,"p-tabView",3),n.Yb("onChange",function(t){return e.handleChangeTab(t)})("activeIndexChange",function(t){return e.indexTab=t}),n.Qb(6,"p-tabPanel",4),n.Hc(7,Y,39,18,"div",5),n.Hc(8,Z,14,13,"div",5),n.Pb(),n.Qb(9,"p-tabPanel",6),n.Qb(10,"div",7),n.Qb(11,"div",2),n.Qb(12,"p-table",8,9),n.Yb("selectionChange",function(t){return e.selectedData=t}),n.Hc(14,tt,5,0,"ng-template",10),n.Hc(15,it,3,1,"ng-template",11),n.Hc(16,ct,6,3,"ng-template",12),n.Hc(17,bt,6,1,"ng-template",13),n.Pb(),n.Pb(),n.Pb(),n.Qb(18,"div",7),n.Qb(19,"div",14),n.Qb(20,"button",15),n.Yb("click",function(){return e.buatBaru()}),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Qb(21,"p-tabPanel",16),n.Qb(22,"div",7),n.Qb(23,"div",2),n.Hc(24,dt,1,0,"p-skeleton",17),n.Hc(25,ut,2,7,"p-menubar",18),n.Pb(),n.Qb(26,"div",2),n.Lb(27,"router-outlet"),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Qb(28,"p-dialog",19),n.Yb("visibleChange",function(t){return e.pop_paket=t}),n.Qb(29,"div",20),n.Qb(30,"div",2),n.Qb(31,"p-panel",21),n.Qb(32,"div",7),n.Qb(33,"div",2),n.Qb(34,"p-table",22,23),n.Hc(36,ht,5,0,"ng-template",10),n.Hc(37,mt,3,1,"ng-template",11),n.Hc(38,vt,5,3,"ng-template",12),n.Hc(39,xt,6,1,"ng-template",13),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Pb(),n.Hc(40,wt,1,0,"ng-template",24),n.Pb(),n.Pb(),n.Pb()),2&t&&(n.xb(5),n.ic("activeIndex",e.indexTab),n.xb(2),n.ic("ngIf",!e.isRiwayat),n.xb(1),n.ic("ngIf",e.isRiwayat),n.xb(4),n.ic("columns",e.columnRiwayatPengkajian)("value",e.dataSourcePengkajian)("selection",e.selectedData)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",n.mc(32,X))("paginator",!0)("pageLinks",5)("globalFilterFields",n.mc(33,W)),n.xb(12),n.ic("ngIf",0==e.treeSourceMenu.length),n.xb(1),n.ic("ngIf",e.treeSourceMenu.length>0),n.xb(3),n.Ec(n.mc(34,St)),n.ic("visible",e.pop_paket)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!0),n.xb(3),n.ic("toggleable",!0),n.xb(3),n.ic("columns",e.columnPaket)("value",e.dataSourcePaket)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",n.mc(35,X))("paginator",!0)("pageLinks",5)("globalFilterFields",n.mc(36,Rt)))},directives:[p.b,p.a,u.l,h.h,l.k,g.b,m.a,d.k,f.a,P.a,k.a,v.g,v.h,v.a,y.a,Q.a,u.k,x.a,w.a,S.a,R.a,h.g,h.f,C.a,h.d,j.a,g.a],pipes:[T.a],styles:[".p-field-checkbox[_ngcontent-%COMP%], .p-field-radiobutton[_ngcontent-%COMP%]{margin-bottom:0;display:flex;align-items:center}.order-badge.order-instock[_ngcontent-%COMP%]{background:#c8e6c9;color:#256029;margin-right:2px;color:#000;border-radius:15px;border:1px solid;padding:2px 7px;font-family:inherit;line-height:1.72em;text-align:center;text-decoration:none;background-color:#fff;display:inline-block;min-width:78px;vertical-align:middle;margin-top:5px}"]}),t})()}}]);