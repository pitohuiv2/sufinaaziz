!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{ADik:function(a,n,i){"use strict";i.r(n),i.d(n,"DaftarResepNonlayananModule",function(){return F});var o=i("ofXK"),l=i("tyNb"),r=i("7zfz"),s=i("1zoS"),c=i("wd/R"),b=i("fXoL"),p=i("EJUL"),u=i("U+s4"),d=i("G0w9"),h=i("ujBT"),m=i("Nf9I"),f=i("eO1q"),g=i("3Pt+"),w=i("arFO"),v=i("7kUa"),P=i("jIHw"),y=i("xlun"),k=i("5EWq"),R=i("rEr+"),Q=i("Wq6t"),D=i("Q4Mo");function x(e,t){if(1&e){var a=b.Sb();b.Qb(0,"button",24),b.Yb("click",function(){return b.yc(a),b.bc().inputResepBaru()}),b.Pb(),b.Lb(1,"p-splitButton",25)}if(2&e){var n=b.bc();b.xb(1),b.ic("model",n.listBtnCetak)}}function C(e,t){if(1&e&&(b.Qb(0,"th",29),b.Jc(1),b.Lb(2,"p-sortIcon",30),b.Pb()),2&e){var a=t.$implicit;b.Fc("width: ",a.width,""),b.jc("pSortableColumn",a.field),b.xb(1),b.Lc(" ",a.header," "),b.xb(1),b.jc("field",a.field)}}function J(e,t){if(1&e&&(b.Qb(0,"tr"),b.Qb(1,"th",26),b.Jc(2," Aksi "),b.Pb(),b.Lb(3,"th",27),b.Hc(4,C,3,6,"th",28),b.Pb()),2&e){var a=t.$implicit;b.xb(4),b.ic("ngForOf",a)}}function M(e,t){if(1&e&&(b.Qb(0,"td"),b.Jc(1),b.Pb()),2&e){var a=t.$implicit,n=b.bc().$implicit;b.Fc("width: ",a.width,""),b.xb(1),b.Lc(" ",n[a.field]," ")}}var L=function(){return{display:"inline-flex"}};function S(e,t){if(1&e){var a=b.Sb();b.Qb(0,"tr",31),b.Qb(1,"td",26),b.Qb(2,"p-splitButton",32),b.Yb("onDropdownClick",function(){b.yc(a);var e=t.$implicit;return b.bc().selectData(e)}),b.Pb(),b.Pb(),b.Qb(3,"td",27),b.Lb(4,"button",33),b.Pb(),b.Hc(5,M,2,4,"td",34),b.Pb()}if(2&e){var n=t.$implicit,i=t.columns,o=t.rowIndex,l=t.expanded,r=b.bc();b.ic("pSelectableRow",n)("pSelectableRowIndex",o),b.xb(2),b.Ec(b.mc(8,L)),b.ic("model",r.listBtn),b.xb(2),b.ic("pRowToggler",n)("icon",l?"pi pi-chevron-down":"pi pi-chevron-right"),b.xb(1),b.ic("ngForOf",i)}}function Y(e,t){1&e&&(b.Qb(0,"tr"),b.Qb(1,"th"),b.Jc(2,"Rke"),b.Pb(),b.Qb(3,"th"),b.Jc(4,"Kemasan"),b.Pb(),b.Qb(5,"th"),b.Jc(6,"namaproduk"),b.Pb(),b.Qb(7,"th"),b.Jc(8,"Satuan"),b.Pb(),b.Qb(9,"th"),b.Jc(10,"Qty"),b.Pb(),b.Qb(11,"th"),b.Jc(12,"Harga"),b.Pb(),b.Qb(13,"th"),b.Jc(14,"Diskon"),b.Pb(),b.Qb(15,"th"),b.Jc(16,"Jasa"),b.Pb(),b.Qb(17,"th"),b.Jc(18,"Total"),b.Pb(),b.Qb(19,"th"),b.Jc(20,"Tgl Exp"),b.Pb(),b.Pb())}function N(e,t){if(1&e&&(b.Qb(0,"tr"),b.Qb(1,"td"),b.Jc(2),b.Pb(),b.Qb(3,"td"),b.Jc(4),b.Pb(),b.Qb(5,"td"),b.Jc(6),b.Pb(),b.Qb(7,"td"),b.Jc(8),b.Pb(),b.Qb(9,"td"),b.Jc(10),b.Pb(),b.Qb(11,"td"),b.Jc(12),b.Pb(),b.Qb(13,"td"),b.Jc(14),b.Pb(),b.Qb(15,"td"),b.Jc(16),b.Pb(),b.Qb(17,"td"),b.Jc(18),b.Pb(),b.Qb(19,"td"),b.Jc(20),b.Pb(),b.Pb()),2&e){var a=t.$implicit;b.xb(2),b.Kc(a.resepke),b.xb(2),b.Kc(a.jeniskemasan),b.xb(2),b.Kc(a.namaproduk),b.xb(2),b.Kc(a.satuanstandar),b.xb(2),b.Kc(a.qtyproduk),b.xb(2),b.Kc(a.hargasatuan),b.xb(2),b.Kc(a.hargadiscount),b.xb(2),b.Kc(a.hargatambahan),b.xb(2),b.Kc(a.total),b.xb(2),b.Kc(a.tglkadaluarsa)}}function H(e,t){if(1&e&&(b.Qb(0,"tr"),b.Qb(1,"td",35),b.Qb(2,"div",36),b.Qb(3,"p-table",37),b.Hc(4,Y,21,0,"ng-template",21),b.Hc(5,N,21,10,"ng-template",22),b.Pb(),b.Pb(),b.Pb(),b.Pb()),2&e){var a=t.$implicit;b.xb(3),b.ic("value",a.details)}}var I,T,B,j=function(){return[5,10,25,50]},A=[{path:"",component:(I=function(){function a(t,n,i,o,l,r,c,b,p){e(this,a),this.apiService=t,this.authService=n,this.confirmationService=i,this.messageService=o,this.cacheHelper=l,this.dateHelper=r,this.alertService=c,this.route=b,this.router=p,this.item={},this.page=s.b.get().page,this.rows=s.b.get().rows}var n,i,o;return n=a,(i=[{key:"ngOnInit",value:function(){this.dataLogin=this.authService.getDataLoginUser(),this.kelUser=this.dataLogin.kelompokUser.kelompokUser,this.dateNow=new Date,this.item.tglAwal=c(this.dateNow).format("YYYY-MM-DD 00:00"),this.item.tglAkhir=c(this.dateNow).format("YYYY-MM-DD 23:59"),this.item.jmlRows=50,this.getDataList(),this.getDataCombo()}},{key:"getDataList",value:function(){var e=this;this.listBtnCetak=[{label:"Cetak Label Identitas",icon:"fa fa-print",command:function(){e.ctkLabelIdentitas()}},{label:"Cetak Label Resep",icon:"fa fa-print",command:function(){e.ctkLabelResep()}},{label:"Cetak Resep Obat",icon:"fa fa-print",command:function(){e.ctkResepObat()}}],this.listBtn=[{label:"Ubah Resep",icon:"fa fa-medkit",command:function(){e.ubahResep()}},{label:"Hapus Resep",icon:"fa fa-trash",command:function(){e.hapusResep()}},{label:"Retur Resep ",icon:"fa fa-retweet",command:function(){e.returResep()}}],this.column=[{field:"no",header:"No",width:"65px"},{field:"tglstruk",header:"Tgl Resep",width:"140px"},{field:"noresep",header:"No Resep",width:"140px"},{field:"norm",header:"No RM",width:"120px"},{field:"namapasien",header:"Nama Pasien",width:"180px"},{field:"notelp",header:"No Telp",width:"140px"},{field:"namaruangan",header:"Depo",width:"180px"},{field:"dokter",header:"Dokter",width:"180px"},{field:"nosbm",header:"No Bukti Bayar",width:"180px"}]}},{key:"getDataCombo",value:function(){var e=this;this.apiService.get("farmasi/get-combo-farmasi").subscribe(function(t){e.listRuanganDepo=null!=e.dataLogin.mapLoginUserToRuangan?e.dataLogin.mapLoginUserToRuangan:t.ruangfarmasi,e.LoadCache()})}},{key:"LoadCache",value:function(){var e=this.cacheHelper.get("DaftarResepNonLayananCache");null!=e?(this.item.tglAwal=new Date(e[0]),this.item.tglAkhir=new Date(e[1]),null!=e[2]&&""!=e[2]&&(this.item.namaPasien=e[2]),null!=e[3]&&""!=e[3]&&(this.item.noResep=e[3]),null!=e[4]&&""!=e[4]&&(this.listRuanganDepo=[e[4]],this.item.dataRuanganDepo=e[4]),this.loadData()):this.loadData()}},{key:"loadData",value:function(){var e=this,t=c(this.item.tglAwal).format("YYYY-MM-DD HH:mm"),a=c(this.item.tglAkhir).format("YYYY-MM-DD HH:mm"),n="",i=void 0;null!=this.item.instalasi&&(n=this.item.dataRuanganDepo.id,i={id:this.item.dataRuanganDepo.id,namaruangan:this.item.dataRuanganDepo.namaruangan});var o="";null!=this.item.namaPasien&&(o=this.item.namaPasien);var l="";null!=this.item.noResep&&(l=this.item.noResep);var r="";null!=this.item.jmlRows&&(r=this.item.jmlRows),this.cacheHelper.set("DaftarResepNonLayananCache",{0:t,1:a,2:o,3:l,4:i}),this.apiService.get("farmasi/get-daftar-resep-nonlayanan?namaPasien="+o+"&depoId="+n+"&tglAwal="+t+"&tglAkhir="+a+"&noResep="+l+"&jmlRows="+r).subscribe(function(t){for(var a=t.daftar,n=0;n<a.length;n++){var i=a[n];i.no=n+1;var o=c(e.dateNow).format("YYYY-MM-DD"),l=c(new Date(i.tgllahir)).format("YYYY-MM-DD"),r=e.dateHelper.CountAge(new Date(l),new Date(o));i.umur=r.year+" thn "+r.month+" bln "+r.day+" hari"}e.dataTable=a})}},{key:"cari",value:function(){this.loadData()}},{key:"onRowSelect",value:function(e){null!=e.data&&(this.selected=e.data)}},{key:"inputResepBaru",value:function(){this.router.navigate(["input-resep-nonlayanan","-"])}},{key:"selectData",value:function(e){this.selected=e}},{key:"ubahResep",value:function(){null!=this.selected?null==this.selected.nosbm?this.router.navigate(["input-resep-nonlayanan",this.selected.norec_resep]):this.alertService.warn("Info","Data Sudah Dibayar!"):this.alertService.warn("Info","Data Belum Dipilih!")}},{key:"hapusResep",value:function(){var e=this;null!=this.selected?null==this.selected.nosbm?this.apiService.post("farmasi/save-hapus-resep-nonlayanan",{norec_sp:this.selected.norec}).subscribe(function(t){e.apiService.postLog("Hapus Pelayanan Resep Non Layanan","Norec strukpelayanan",e.selected.norec,"Hapus Pelayanan Resep Non Layanan Dengan Noresep - "+e.selected.noresep+" atas Nama Pasien - "+e.selected.namapasien).subscribe(function(e){}),e.loadData()}):this.alertService.warn("Info","Data Sudah Dibayar!"):this.alertService.warn("Info","Data Belum Dipilih!")}},{key:"returResep",value:function(){null!=this.selected?null==this.selected.nosbm?this.router.navigate(["retur-resep-nonlayanan",this.selected.norec_resep]):this.alertService.warn("Info","Data Sudah Dibayar!"):this.alertService.warn("Info","Data Belum Dipilih!")}},{key:"ctkLabelIdentitas",value:function(){throw new Error("Method not implemented.")}},{key:"ctkLabelResep",value:function(){throw new Error("Method not implemented.")}},{key:"ctkResepObat",value:function(){throw new Error("Method not implemented.")}}])&&t(n.prototype,i),o&&t(n,o),a}(),I.\u0275fac=function(e){return new(e||I)(b.Jb(p.a),b.Jb(p.b),b.Jb(r.a),b.Jb(r.h),b.Jb(u.a),b.Jb(d.a),b.Jb(h.a),b.Jb(l.a),b.Jb(l.f))},I.\u0275cmp=b.Db({type:I,selectors:[["app-daftar-resep-nonlayanan"]],features:[b.wb([r.a])],decls:45,vars:27,consts:[["header","Confirmation","icon","fa fa-question-circle"],[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[1,"p-grid"],[1,"p-col-12","p-md-10"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","ngModelChange"],[1,"p-col-12","p-md-3"],["placeholder","Ruangan","optionLabel","namaruangan",3,"options","ngModel","filter","showClear","ngModelChange"],["type","text","pInputText","","placeholder","Nomor Resep",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Nama Pasien",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-6"],["type","text","pInputText","","placeholder","Jml Rows",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-6",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",3,"click"],["styleClass","p-mb-4"],["pTemplate","left"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single","dataKey","norec_resep",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange","onRowSelect"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pButton","","type","submit","icon","fa fa-medkit","pTooltip","Input Resep Nonlayanan","label","Input Resep Baru",1,"p-mr-2",3,"click"],["label","Cetak","styleClass","p-button-help","icon","pi pi-print",3,"model"],["width","100px"],[2,"width","80px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],["label","","styleClass","p-button-help p-ml-auto","icon","pi pi-ellipsis-v","appendTo","body",3,"model","onDropdownClick"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain","p-mr-2",3,"pRowToggler","icon"],[3,"style",4,"ngFor","ngForOf"],["colspan","10"],[1,"p-p-3"],["dataKey","norec_resep",3,"value"]],template:function(e,t){1&e&&(b.Lb(0,"p-confirmDialog",0),b.Qb(1,"div",1),b.Qb(2,"div",2),b.Qb(3,"h4"),b.Jc(4,"Pelayanan Resep Bebas"),b.Pb(),b.Qb(5,"div",3),b.Qb(6,"div",4),b.Qb(7,"div",5),b.Qb(8,"div",4),b.Qb(9,"div",6),b.Qb(10,"label",7),b.Jc(11,"Periode Awal"),b.Pb(),b.Qb(12,"p-calendar",8),b.Yb("ngModelChange",function(e){return t.item.tglAwal=e}),b.Pb(),b.Pb(),b.Qb(13,"div",6),b.Qb(14,"label",7),b.Jc(15,"Periode Akhir"),b.Pb(),b.Qb(16,"p-calendar",8),b.Yb("ngModelChange",function(e){return t.item.tglAkhir=e}),b.Pb(),b.Pb(),b.Qb(17,"div",9),b.Qb(18,"label",7),b.Jc(19,"Depo"),b.Pb(),b.Qb(20,"p-dropdown",10),b.Yb("ngModelChange",function(e){return t.item.dataRuanganDepo=e}),b.Pb(),b.Pb(),b.Qb(21,"div",6),b.Qb(22,"label",7),b.Jc(23,"No Resep"),b.Pb(),b.Qb(24,"input",11),b.Yb("ngModelChange",function(e){return t.item.noResep=e})("keyup.enter",function(){return t.cari()}),b.Pb(),b.Pb(),b.Qb(25,"div",9),b.Qb(26,"label",7),b.Jc(27,"Nama Pasien "),b.Pb(),b.Qb(28,"input",12),b.Yb("ngModelChange",function(e){return t.item.namaPasien=e})("keyup.enter",function(){return t.cari()}),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(29,"div",6),b.Qb(30,"div",4),b.Qb(31,"div",13),b.Qb(32,"label",7),b.Jc(33,"jml Rows"),b.Pb(),b.Qb(34,"input",14),b.Yb("ngModelChange",function(e){return t.item.jmlRows=e})("keyup.enter",function(){return t.cari()}),b.Pb(),b.Pb(),b.Qb(35,"div",15),b.Qb(36,"button",16),b.Yb("click",function(){return t.cari()}),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(37,"div",3),b.Qb(38,"p-toolbar",17),b.Hc(39,x,2,1,"ng-template",18),b.Pb(),b.Qb(40,"p-table",19,20),b.Yb("selectionChange",function(e){return t.selected=e})("onRowSelect",function(e){return t.onRowSelect(e)}),b.Hc(42,J,5,1,"ng-template",21),b.Hc(43,S,6,9,"ng-template",22),b.Hc(44,H,6,1,"ng-template",23),b.Pb(),b.Pb(),b.Pb(),b.Pb()),2&e&&(b.xb(12),b.ic("ngModel",t.item.tglAwal)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),b.xb(4),b.ic("ngModel",t.item.tglAkhir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),b.xb(4),b.ic("options",t.listRuanganDepo)("ngModel",t.item.dataRuanganDepo)("filter",!0)("showClear",!0),b.xb(4),b.ic("ngModel",t.item.noResep),b.xb(4),b.ic("ngModel",t.item.namaPasien),b.xb(6),b.ic("ngModel",t.item.jmlRows),b.xb(6),b.ic("columns",t.column)("value",t.dataTable)("selection",t.selected)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",b.mc(26,j))("paginator",!0)("pageLinks",5))},directives:[m.a,f.a,g.g,g.h,w.a,g.a,v.a,P.b,y.a,k.a,r.k,R.h,Q.a,o.k,R.g,R.f,R.e,D.a,R.d],styles:[""]}),I)}],K=((T=function t(){e(this,t)}).\u0275mod=b.Hb({type:T}),T.\u0275inj=b.Gb({factory:function(e){return new(e||T)},imports:[[l.j.forChild(A)],l.j]}),T),O=i("PCNd"),F=((B=function t(){e(this,t)}).\u0275mod=b.Hb({type:B}),B.\u0275inj=b.Gb({factory:function(e){return new(e||B)},imports:[[o.b,K,O.a]]}),B)}}])}();