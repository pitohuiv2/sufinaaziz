!function(){function a(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function n(a,n){for(var i=0;i<n.length;i++){var e=n[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(a,e.key,e)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[129],{"D/0i":function(i,e,t){"use strict";t.r(e),t.d(e,"MapAkomodasiOtomatisModule",function(){return x});var o=t("ofXK"),l=t("tyNb"),r=t("fXoL"),s=t("EJUL"),u=t("7zfz"),p=t("U+s4"),b=t("G0w9"),c=t("ujBT"),d=t("arFO"),h=t("3Pt+"),m=t("7kUa"),g=t("jIHw"),f=t("xlun"),v=t("rEr+");function y(a,n){if(1&a&&(r.Qb(0,"th",21),r.Jc(1),r.Lb(2,"p-sortIcon",22),r.Pb()),2&a){var i=n.$implicit;r.Fc("width: ",i.width,""),r.jc("pSortableColumn",i.field),r.xb(1),r.Lc(" ",i.header," "),r.xb(1),r.jc("field",i.field)}}function P(a,n){if(1&a&&(r.Qb(0,"tr"),r.Lb(1,"th",19),r.Hc(2,y,3,6,"th",20),r.Pb()),2&a){var i=n.$implicit;r.xb(2),r.ic("ngForOf",i)}}function k(a,n){if(1&a&&(r.Qb(0,"td"),r.Jc(1),r.Pb()),2&a){var i=n.$implicit,e=r.bc().$implicit;r.Fc("width: ",i.width,""),r.xb(1),r.Lc(" ",e[i.field]," ")}}function w(a,n){if(1&a){var i=r.Sb();r.Qb(0,"tr"),r.Qb(1,"td",19),r.Qb(2,"button",23),r.Yb("click",function(){r.yc(i);var a=n.$implicit;return r.bc().hapusRow(a)}),r.Pb(),r.Pb(),r.Hc(3,k,2,4,"td",24),r.Pb()}if(2&a){var e=n.columns;r.xb(3),r.ic("ngForOf",e)}}var C,Q,S,M=function(){return[5,10,25,50]},j=[{path:"",component:(C=function(){function i(n,e,t,o,l,r,s,u){a(this,i),this.apiService=n,this.authService=e,this.messageService=t,this.cacheHelper=o,this.dateHelper=l,this.alertService=r,this.route=s,this.router=u,this.item={}}var e,t,o;return e=i,(t=[{key:"ngOnInit",value:function(){this.norecMap=void 0,this.loadCombo(),this.loadColumn(),this.load()}},{key:"loadCombo",value:function(){var a=this;this.apiService.get("sysadmin/general/get-map-administrasi-combo").subscribe(function(n){a.listRuangan=n.ruangan,a.listJenisPelayanan=n.jenispelayanan})}},{key:"loadColumn",value:function(){this.column=[{field:"no",header:"No",width:"40px"},{field:"namaruangan",header:"Ruang",width:"200px"},{field:"namaproduk",header:"Pelayanan",width:"150px"},{field:"jenispelayanan",header:"Jenis Pelayanan",width:"150px"}]}},{key:"getProduk",value:function(){var a=this;this.apiService.get("sysadmin/general/get-combo-akomodasi?produk=1&objectruanganfk="+this.item.ruangan.id).subscribe(function(n){a.listPelayanan=n.produk}),this.load()}},{key:"getKomponenHarga",value:function(){var a=this;this.item.Harga=0,this.listKomponen=[],null!=this.item.pelayanan&&this.apiService.get("tindakan/get-komponenharga?idRuangan="+this.item.ruangan.id+"&idKelas=6&idProduk="+this.item.pelayanan.id+"&idJenisPelayanan="+this.item.jenispelayanan.id).subscribe(function(n){a.listKomponen=n.data,a.item.Harga=n.data2[0].hargasatuan,a.item.jumlah=1})}},{key:"batalInput",value:function(){this.item.Harga=0,this.listKomponen=[],this.item.pelayanan=void 0,this.item.jenispelayanan=void 0,this.item.ruangan=void 0}},{key:"hapusAll",value:function(){var a=this;if(null!=this.item.pelayanan)if(null!=this.item.ruangan){var n="";null!=this.norecMap&&(n=this.norecMap);var i=null;null!=this.item.rg&&(i=(this.item.rg.status="Yes")?1:null),this.apiService.post("sysadmin/general/save-map-akomodasi-otomatis",{maid:n,pelayanan:this.item.pelayanan.id,rg:i,ruangan:this.item.ruangan.id,jenispelayanan:this.item.jenispelayanan.id,status:"HAPUS"}).subscribe(function(n){a.batalInput(),a.load()})}else this.alertService.error("Info","Pilih Ruangan dulu");else this.alertService.error("Info","Pilih Pelayanan dulu")}},{key:"simpanMapping",value:function(){var a=this;if(null!=this.item.pelayanan)if(null!=this.item.ruangan){var n="";null!=this.norecMap&&(n=this.norecMap);var i="NO";null!=this.item.rg&&(i="Yes"==this.item.rg.status?"YES":"NO"),this.apiService.post("sysadmin/general/save-map-akomodasi-otomatis",{maid:n,pelayanan:this.item.pelayanan.id,rg:i,ruangan:this.item.ruangan.id,jenispelayanan:this.item.jenispelayanan.id,status:"SIMPAN_JANG"}).subscribe(function(n){a.batalInput(),a.load()})}else this.alertService.error("Info","Pilih Ruangan dulu");else this.alertService.error("Info","Pilih Pelayanan dulu")}},{key:"load",value:function(){var a=this,n="";this.item.ruangan&&(n=this.item.ruangan.id),this.dataSource=[],this.apiService.get("sysadmin/general/get-akomodasi?objectruanganfk="+n).subscribe(function(n){for(var i=n.listakomodasi.length-1;i>=0;i--)n.listakomodasi[i].no=i+1,n.listakomodasi[i].israwatgabungSS=1==n.listakomodasi[i].israwatgabung?"Yes":"No";a.dataSource=n.listakomodasi})}},{key:"hapusRow",value:function(a){var n=this;this.apiService.post("sysadmin/general/save-map-akomodasi-otomatis",{maid:a.maid,status:"HAPUS"}).subscribe(function(a){n.dataSource=[],n.load()})}}])&&n(e.prototype,t),o&&n(e,o),i}(),C.\u0275fac=function(a){return new(a||C)(r.Jb(s.a),r.Jb(s.b),r.Jb(u.h),r.Jb(p.a),r.Jb(b.a),r.Jb(c.a),r.Jb(l.a),r.Jb(l.f))},C.\u0275cmp=r.Db({type:C,selectors:[["app-map-akomodasi-otomatis"]],decls:37,vars:24,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-grid"],[1,"p-col-12","p-md-12"],[1,"p-col-12","p-md-9"],[1,"p-col-12","p-md-3"],["for","input",1,"label"],["placeholder","Ruangan","optionLabel","namaruangan",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["placeholder","jenis pelayanan","optionLabel","jenispelayanan",3,"options","ngModel","filter","showClear","ngModelChange"],["placeholder","pelayanan","optionLabel","namaproduk",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["type","text","pInputText","","placeholder","Harga","disabled","",3,"ngModel","ngModelChange"],[1,"p-col-12","p-md-4",2,"margin-top","16px"],["pButton","","type","button","icon","pi pi-plus","pTooltip","Simpan","label","Simpan",1,"p-button","p-mr-2",3,"disabled","click"],["pButton","","type","button","icon","pi pi-refresh","pTooltip","Batal","label","Batal",1,"p-button","p-button-warning","p-mr-2",3,"click"],["pButton","","type","button","icon","pi pi-search","pTooltip","Cari","label","Cari",1,"p-button","p-button-help","p-mr-2",3,"click"],[1,"p-col-12"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange"],["pTemplate","header"],["pTemplate","body"],[2,"width","50px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus ","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"]],template:function(a,n){1&a&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"h4"),r.Jc(3,"Setting Akomodasi Kamar Otomatis"),r.Pb(),r.Qb(4,"div",2),r.Qb(5,"div",3),r.Qb(6,"div",2),r.Qb(7,"div",4),r.Qb(8,"div",2),r.Qb(9,"div",5),r.Qb(10,"label",6),r.Jc(11,"Ruangan"),r.Pb(),r.Qb(12,"p-dropdown",7),r.Yb("ngModelChange",function(a){return n.item.ruangan=a})("onChange",function(){return n.getProduk()}),r.Pb(),r.Pb(),r.Qb(13,"div",5),r.Qb(14,"label",6),r.Jc(15,"Jenis Pelayanan"),r.Pb(),r.Qb(16,"p-dropdown",8),r.Yb("ngModelChange",function(a){return n.item.jenispelayanan=a}),r.Pb(),r.Pb(),r.Qb(17,"div",5),r.Qb(18,"label",6),r.Jc(19,"Pelayanan"),r.Pb(),r.Qb(20,"p-dropdown",9),r.Yb("ngModelChange",function(a){return n.item.pelayanan=a})("onChange",function(){return n.getKomponenHarga()}),r.Pb(),r.Pb(),r.Qb(21,"div",5),r.Qb(22,"label",6),r.Jc(23,"Harga"),r.Pb(),r.Qb(24,"input",10),r.Yb("ngModelChange",function(a){return n.item.Harga=a}),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(25,"div",5),r.Qb(26,"div",2),r.Qb(27,"div",11),r.Qb(28,"button",12),r.Yb("click",function(){return n.simpanMapping()}),r.Pb(),r.Pb(),r.Qb(29,"div",11),r.Qb(30,"button",13),r.Yb("click",function(){return n.batalInput()}),r.Pb(),r.Pb(),r.Qb(31,"div",11),r.Qb(32,"button",14),r.Yb("click",function(){return n.load()}),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Qb(33,"div",15),r.Qb(34,"p-table",16),r.Yb("selectionChange",function(a){return n.selectedGrid=a}),r.Hc(35,P,3,1,"ng-template",17),r.Hc(36,w,4,1,"ng-template",18),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&a&&(r.xb(12),r.ic("options",n.listRuangan)("ngModel",n.item.ruangan)("filter",!0)("showClear",!0),r.xb(4),r.ic("options",n.listJenisPelayanan)("ngModel",n.item.jenispelayanan)("filter",!0)("showClear",!0),r.xb(4),r.ic("options",n.listPelayanan)("ngModel",n.item.pelayanan)("filter",!0)("showClear",!0),r.xb(4),r.ic("ngModel",n.item.Harga),r.xb(4),r.ic("disabled",n.isClosing),r.xb(6),r.ic("columns",n.column)("value",n.dataSource)("selection",n.selectedGrid)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",r.mc(23,M))("paginator",!0)("pageLinks",5))},directives:[d.a,h.g,h.h,h.a,m.a,g.b,f.a,v.h,u.k,o.k,v.g,v.f],styles:[""]}),C)}],J=((Q=function n(){a(this,n)}).\u0275mod=r.Hb({type:Q}),Q.\u0275inj=r.Gb({factory:function(a){return new(a||Q)},imports:[[l.j.forChild(j)],l.j]}),Q),H=t("PCNd"),x=((S=function n(){a(this,n)}).\u0275mod=r.Hb({type:S}),S.\u0275inj=r.Gb({factory:function(a){return new(a||S)},imports:[[o.b,J,H.a]]}),S)}}])}();