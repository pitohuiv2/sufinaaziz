(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"Z5Z+":function(e,t,n){"use strict";n.r(t),n.d(t,"KonsultasiDokterModule",function(){return B});var i=n("ofXK"),a=n("tyNb"),o=n("fXoL"),r=n("By0h"),s=n("EJUL"),l=n("7zfz"),c=n("U+s4"),u=n("G0w9"),b=n("ujBT"),p=n("7CaW"),d=n("5EWq"),h=n("rEr+"),g=n("Nf9I"),m=n("/RsI"),f=n("jIHw"),k=n("Q4Mo"),w=n("xlun"),v=n("7kUa"),P=n("3Pt+"),Q=n("arFO"),y=n("V5BG"),x=n("zFJ7");function C(e,t){if(1&e){const e=o.Sb();o.Qb(0,"button",15),o.Yb("click",function(){return o.yc(e),o.bc().openNew()}),o.Pb()}}function K(e,t){if(1&e){const e=o.Sb();o.Qb(0,"div",16),o.Qb(1,"div",17),o.Qb(2,"span",18),o.Lb(3,"i",19),o.Qb(4,"input",20),o.Yb("input",function(t){return o.yc(e),o.bc(),o.wc(12).filterGlobal(t.target.value,"contains")}),o.Pb(),o.Pb(),o.Pb(),o.Pb()}}function S(e,t){if(1&e&&(o.Qb(0,"th",23),o.Jc(1),o.Lb(2,"p-sortIcon",24),o.Pb()),2&e){const e=t.$implicit;o.Fc("width: ",e.width,""),o.jc("pSortableColumn",e.field),o.xb(1),o.Lc(" ",e.header," "),o.xb(1),o.jc("field",e.field)}}function j(e,t){if(1&e&&(o.Qb(0,"tr"),o.Lb(1,"th",21),o.Hc(2,S,3,6,"th",22),o.Pb()),2&e){const e=t.$implicit;o.xb(2),o.ic("ngForOf",e)}}function T(e,t){if(1&e&&(o.Qb(0,"span"),o.Jc(1),o.Pb()),2&e){const e=o.bc().$implicit,t=o.bc().$implicit,n=o.bc();o.xb(1),o.Lc(" ",n.formatRupiah(t[e.field],""),"")}}function M(e,t){if(1&e&&(o.Qb(0,"span"),o.Jc(1),o.Pb()),2&e){const e=o.bc().$implicit,t=o.bc().$implicit;o.xb(1),o.Lc(" ",t[e.field],"")}}function J(e,t){if(1&e&&(o.Qb(0,"td"),o.Hc(1,T,2,1,"span",28),o.Hc(2,M,2,1,"span",28),o.Pb()),2&e){const e=t.$implicit;o.Fc("width: ",e.width,""),o.xb(1),o.ic("ngIf",null!=e.isCurrency),o.xb(1),o.ic("ngIf",null==e.isCurrency)}}function D(e,t){if(1&e){const e=o.Sb();o.Qb(0,"tr"),o.Qb(1,"td",21),o.Qb(2,"button",25),o.Yb("click",function(){o.yc(e);const n=t.$implicit;return o.bc().edit(n)}),o.Pb(),o.Qb(3,"button",26),o.Yb("click",function(){o.yc(e);const n=t.$implicit;return o.bc().hapusD(n)}),o.Pb(),o.Pb(),o.Hc(4,J,3,5,"td",27),o.Pb()}if(2&e){const e=t.columns;o.xb(4),o.ic("ngForOf",e)}}function R(e,t){if(1&e){const e=o.Sb();o.Qb(0,"div",29),o.Qb(1,"label",30),o.Jc(2,"Ruangan Asal"),o.Pb(),o.Qb(3,"input",31),o.Yb("ngModelChange",function(t){return o.yc(e),o.bc().item.ruanganAsal=t}),o.Pb(),o.Pb(),o.Qb(4,"div",29),o.Qb(5,"label",30),o.Jc(6,"Ruangan Tujuan"),o.Pb(),o.Qb(7,"p-dropdown",32),o.Yb("ngModelChange",function(t){return o.yc(e),o.bc().item.ruanganTujuan=t}),o.Pb(),o.Pb(),o.Qb(8,"div",29),o.Qb(9,"label",30),o.Jc(10,"Dokter"),o.Pb(),o.Qb(11,"p-autoComplete",33),o.Yb("ngModelChange",function(t){return o.yc(e),o.bc().item.dokter=t})("completeMethod",function(t){return o.yc(e),o.bc().filterDokter(t)}),o.Pb(),o.Pb(),o.Qb(12,"div",29),o.Qb(13,"label",30),o.Jc(14,"Keterangan"),o.Pb(),o.Qb(15,"textarea",34),o.Yb("ngModelChange",function(t){return o.yc(e),o.bc().item.keterangan=t}),o.Pb(),o.Pb()}if(2&e){const e=o.bc();o.xb(3),o.ic("ngModel",e.item.ruanganAsal),o.xb(4),o.ic("options",e.listRuangan)("ngModel",e.item.ruanganTujuan)("filter",!0)("showClear",!0),o.xb(4),o.ic("ngModel",e.item.dokter)("suggestions",e.listDokter)("dropdown",!0),o.xb(4),o.ic("ngModel",e.item.keterangan)}}function H(e,t){if(1&e){const e=o.Sb();o.Qb(0,"button",35),o.Yb("click",function(){return o.yc(e),o.bc().save()}),o.Pb(),o.Qb(1,"button",36),o.Yb("click",function(){return o.yc(e),o.bc().hideDialog()}),o.Pb()}}const I=function(){return[5,10,25,50]},F=function(){return["ruanganasal","ruangantujuan","namalengkap","keteranganorder","tglorder"]},L=function(){return{width:"450px"}},O=[{path:"",component:(()=>{class e{constructor(e,t,n,i,a,o,r,s,l){this.rekamMedis=e,this.apiService=t,this.authService=n,this.confirmationService=i,this.cacheHelper=a,this.dateHelper=o,this.alertService=r,this.activeRoute=s,this.router=l,this.columnKonsul=[],this.item={},this.product={},this.listRuangan=[]}ngOnInit(){var e=this.cacheHelper.get("cacheEMR_qwertyuiop");null!=e?(e=JSON.parse(e),this.item=e,this.item.ruanganAsal=this.item.namaruangan,this.loadGrid(),this.loadCombo()):window.history.back(),this.columnKonsul=[{field:"no",header:"No",width:"50px"},{field:"tglorder",header:"Tgl Order",width:"100px"},{field:"ruanganasal",header:"Ruangan Asal",width:"150px"},{field:"ruangantujuan",header:"Ruangan Tujuan",width:"150px"},{field:"namalengkap",header:"Dokter",width:"200px"},{field:"keteranganorder",header:"Keterangan",width:"150px"},{field:"status",header:"Verifikasi",width:"90px"}]}loadCombo(){this.apiService.get("emr/get-ruangan-konsul").subscribe(e=>{this.listRuangan=e})}openNew(){this.clear(),this.pop_Konsul=!0}hideDialog(){this.clear(),this.pop_Konsul=!1}clear(){delete this.item.norec,delete this.item.ruanganTujuan,delete this.item.keterangan,delete this.item.dokter,delete this.item.jawaban,delete this.item.norecKonsul}save(){null!=this.item.ruanganTujuan?null!=this.item.dokter?this.apiService.post("emr/post-konsultasi",{norec_so:null!=this.item.norecKonsul?this.item.norecKonsul:"",norec_pd:this.item.norec_pd,pegawaifk:this.item.dokter.id,objectruanganasalfk:this.item.objectruanganfk,objectruangantujuanfk:this.item.ruanganTujuan.id,keterangan:null!=this.item.keterangan?this.item.keterangan:"",method:"save"}).subscribe(e=>{this.clear(),this.loadGrid(),this.apiService.postLog("Konsultasi","Norec strukorder_t",e.strukorder.norec,"Order Konsul ke Ruangan "+this.item.namaruangan+" pada noregistrasi "+this.item.noregistrasi).subscribe(e=>{}),this.pop_Konsul=!1}):this.alertService.error("Info","Pilih Dokter terlebih dahulu!"):this.alertService.error("Info","Pilih Ruangan Tujuan terlebih dahulu!")}loadGrid(){this.apiService.get("emr/get-order-konsul?noregistrasi="+this.item.noregistrasi).subscribe(e=>{for(let t=0;t<e.data.length;t++){const n=e.data[t];n.no=t+1,n.status=1==n.statusorder?"\u2714":"\u2718"}this.dataSourceKonsul=e.data})}filterDokter(e){this.apiService.get("registrasi/get-dokter-part?namalengkap="+e.query).subscribe(e=>{this.listDokter=e})}edit(e){if(1!=e.statusorder){var t=new Date,n=new Date(e.tglorder);Math.round(Math.abs((t.getTime()-n.getTime())/864e5))>=1?this.alertService.warn("Info","data tidak bisa di edit"):(this.item.norecKonsul=e.norec,this.item.ruanganAsal=e.ruanganasal,this.item.ruanganTujuan={id:e.objectruangantujuanfk,namaruangan:e.ruangantujuan},this.item.dokter={id:e.pegawaifk,namalengkap:e.namalengkap},this.item.keterangan=e.keteranganorder,this.pop_Konsul=!0)}else this.alertService.warn("Info","data sudah di verif tidak bisa di edit")}hapusD(e){1!=e.statusorder?this.apiService.post("emr/post-konsultasi",{norec_so:e.norec,method:"delete"}).subscribe(e=>{this.loadGrid(),this.apiService.postLog("Konsultasi","Norec strukorder_t",this.item.norec,"Hapus Konsul ke Ruangan "+this.item.namaruangan+" pada noregistrasi "+this.item.noregistrasi).subscribe(e=>{})}):this.alertService.warn("Info","data sudah di verif tidak bisa di edit")}}return e.\u0275fac=function(t){return new(t||e)(o.Jb(r.a),o.Jb(s.a),o.Jb(s.b),o.Jb(l.a),o.Jb(c.a),o.Jb(u.a),o.Jb(b.a),o.Jb(a.a),o.Jb(a.f))},e.\u0275cmp=o.Db({type:e,selectors:[["app-konsultasi-dokter"]],decls:20,vars:21,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-grid"],[1,"p-col-12"],["header","Detail Konsultasi",3,"toggleable"],["styleClass","p-mb-4"],["pTemplate","left"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","dataKey","norec","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","globalFilterFields","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Detail Konsul","styleClass","p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["pButton","","pRipple","","label","Tambah","icon","pi pi-plus","pTooltip","Tambah Konsultasi",1,"p-button-success","p-mr-2",3,"click"],[1,"table-header","p-grid"],[1,"p-col-12","p-md-3"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Filter",3,"input"],[2,"width","80px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],["pButton","","type","button","icon","pi pi-check-square","pTooltip","Edit Order","label","",1,"p-button-rounded","p-button","p-mr-2",3,"click"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus Order","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"p-field"],[1,"label"],["type","text","pInputText","","placeholder","Ruangan Asal","disabled","",3,"ngModel","ngModelChange"],["placeholder","Ruangan Asal","optionLabel","namaruangan",3,"options","ngModel","filter","showClear","ngModelChange"],["field","namalengkap","placeholder","Dokter",3,"ngModel","suggestions","dropdown","ngModelChange","completeMethod"],["pInputTextarea","","placeholder","Keterangan","rows","3","cols","20",3,"ngModel","ngModelChange"],["pButton","","pRipple","","label","Simpan","icon","pi pi-save",1,"p-button",3,"click"],["pButton","","pRipple","","label","Batal","icon","pi pi-times",1,"p-button-text",3,"click"]],template:function(e,t){1&e&&(o.Qb(0,"div",0),o.Qb(1,"div",1),o.Qb(2,"h4"),o.Jc(3,"Konsultasi"),o.Pb(),o.Qb(4,"div",2),o.Qb(5,"div",3),o.Qb(6,"p-panel",4),o.Qb(7,"div",2),o.Qb(8,"div",3),o.Qb(9,"p-toolbar",5),o.Hc(10,C,1,0,"ng-template",6),o.Pb(),o.Qb(11,"p-table",7,8),o.Yb("selectionChange",function(e){return t.selectedData=e}),o.Hc(13,K,5,0,"ng-template",9),o.Hc(14,j,3,1,"ng-template",10),o.Hc(15,D,5,1,"ng-template",11),o.Pb(),o.Pb(),o.Lb(16,"p-confirmDialog"),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Qb(17,"p-dialog",12),o.Yb("visibleChange",function(e){return t.pop_Konsul=e}),o.Hc(18,R,16,9,"ng-template",13),o.Hc(19,H,2,0,"ng-template",14),o.Pb()),2&e&&(o.xb(6),o.ic("toggleable",!0),o.xb(5),o.ic("columns",t.columnKonsul)("value",t.dataSourceKonsul)("selection",t.selectedData)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",o.mc(17,I))("paginator",!0)("pageLinks",5)("globalFilterFields",o.mc(18,F)),o.xb(5),o.Ec(o.mc(19,L)),o.xb(1),o.Ec(o.mc(20,L)),o.ic("visible",t.pop_Konsul)("modal",!0))},directives:[p.a,d.a,l.k,h.h,g.a,m.a,f.b,k.a,w.a,v.a,i.k,h.g,h.f,i.l,P.a,P.g,P.h,Q.a,y.a,x.a],styles:[""]}),e})()}];let _=(()=>{class e{}return e.\u0275mod=o.Hb({type:e}),e.\u0275inj=o.Gb({factory:function(t){return new(t||e)},imports:[[a.j.forChild(O)],a.j]}),e})();var Y=n("PCNd");let B=(()=>{class e{}return e.\u0275mod=o.Hb({type:e}),e.\u0275inj=o.Gb({factory:function(t){return new(t||e)},imports:[[i.b,_,Y.a]]}),e})()}}]);