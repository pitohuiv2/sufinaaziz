(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{LnK3:function(e,t,a){"use strict";a.r(t),a.d(t,"DaftarResepPasienModule",function(){return A});var i=a("ofXK"),n=a("tyNb"),o=a("7zfz"),l=a("1zoS"),r=a("wd/R"),s=a("fXoL"),p=a("EJUL"),d=a("U+s4"),b=a("G0w9"),c=a("ujBT"),h=a("Nf9I"),u=a("eO1q"),g=a("3Pt+"),m=a("7kUa"),f=a("jIHw"),P=a("xlun"),w=a("rEr+"),v=a("/RsI"),R=a("arFO");function k(e,t){if(1&e&&(s.Qb(0,"th",34),s.Jc(1),s.Lb(2,"p-sortIcon",35),s.Pb()),2&e){const e=t.$implicit;s.Fc("width: ",e.width,""),s.jc("pSortableColumn",e.field),s.xb(1),s.Lc(" ",e.header," "),s.xb(1),s.jc("field",e.field)}}function M(e,t){if(1&e&&(s.Qb(0,"tr"),s.Qb(1,"th",32),s.Jc(2,"Aksi"),s.Pb(),s.Hc(3,k,3,6,"th",33),s.Pb()),2&e){const e=t.$implicit;s.xb(3),s.ic("ngForOf",e)}}function D(e,t){if(1&e&&(s.Qb(0,"td"),s.Jc(1),s.Pb()),2&e){const e=t.$implicit,a=s.bc().$implicit;s.Fc("width: ",e.width,""),s.xb(1),s.Lc(" ",a[e.field]," ")}}function Q(e,t){if(1&e){const e=s.Sb();s.Qb(0,"tr",36),s.Qb(1,"td",32),s.Qb(2,"button",37),s.Yb("click",function(){s.yc(e);const a=t.$implicit;return s.bc().transaksiLayanan2(a)}),s.Pb(),s.Qb(3,"button",38),s.Yb("click",function(){s.yc(e);const a=t.$implicit;return s.bc().popUpInputObat2(a)}),s.Pb(),s.Pb(),s.Hc(4,D,2,4,"td",39),s.Pb()}if(2&e){const e=t.columns,a=t.rowIndex;s.ic("pSelectableRow",t.$implicit)("pSelectableRowIndex",a),s.xb(4),s.ic("ngForOf",e)}}function C(e,t){if(1&e){const e=s.Sb();s.Qb(0,"p-button",40),s.Yb("click",function(){return s.yc(e),s.bc().cariFilter()}),s.Pb(),s.Qb(1,"p-button",41),s.Yb("click",function(){return s.yc(e),s.bc().clearFilter()}),s.Pb()}}const y=function(){return[5,10,25,50]},x=function(){return{width:"450px",minWidth:"450px"}},Y=function(){return{width:"50vw"}},I=[{path:"",component:(()=>{class e{constructor(e,t,a,i,n,o,r,s,p){this.apiService=e,this.authService=t,this.confirmationService=a,this.messageService=i,this.cacheHelper=n,this.dateHelper=o,this.alertService=r,this.route=s,this.router=p,this.item={},this.page=l.b.get().page,this.rows=l.b.get().rows}ngOnInit(){this.dateNow=new Date,this.item.tglAwal=r(this.dateNow).format("YYYY-MM-DD 00:00"),this.item.tglAkhir=r(this.dateNow).format("YYYY-MM-DD 23:59"),this.item.jmlRows=50,this.column=[{field:"no",header:"No",width:"65px"},{field:"tglresep",header:"Tgl Resep",width:"140px"},{field:"tglregistrasi",header:"Tgl Registrasi",width:"140px"},{field:"noresep",header:"No Resep",width:"110px"},{field:"norm",header:"No RM",width:"100px"},{field:"noregistrasi",header:"Noregistrasi",width:"125px"},{field:"namapasien",header:"Nama Pasien",width:"250px"},{field:"namaruangan",header:"Ruangan",width:"180px"},{field:"namaruanganapotik",header:"Depo",width:"180px"},{field:"kelompokpasien",header:"Tipe Pasien",width:"120px"},{field:"tglpulang",header:"Tgl Pulang",width:"140px"}],this.getDataCombo()}getDataCombo(){this.apiService.get("farmasi/get-combo-farmasi").subscribe(e=>{var t=e;this.listDepartemen=t.departemen,this.listKelompokPasien=t.kelompokpasien,this.listRuanganDepo=t.ruangfarmasi,this.LoadCache()})}isiRuangan(){null!=this.item.dataDepartemen&&(this.listRuangan=this.item.dataDepartemen.ruangan)}LoadCache(){var e=this.cacheHelper.get("DaftarPasienPulangCtrl");null!=e?(this.item.tglAwal=new Date(e[0]),this.item.tglAkhir=new Date(e[1]),this.item.status=e[2],this.item.namaOrReg=e[3],null!=e[6]&&(this.listDepartemen=[e[6]],this.item.dataDepartemen=e[6]),null!=e[5]&&(this.listRuangan=[e[5]],this.item.dataRuangan=e[5]),null!=e[4]&&""!=e[4]&&(this.item.noReg=e[4]),null!=e[7]&&""!=e[7]&&(this.item.noRm=e[7]),null!=e[8]&&""!=e[8]&&(this.listRuanganDepo=[e[8]],this.item.dataRuanganDepo=e[8]),this.getData()):this.getData()}getData(){var e=r(this.item.tglAwal).format("YYYY-MM-DD HH:mm"),t=r(this.item.tglAkhir).format("YYYY-MM-DD HH:mm"),a="",i=void 0;null!=this.item.ruangan&&(a=this.item.dataRuangan.id,i={id:this.item.dataRuangan.id,ruangan:this.item.dataRuangan.ruangan});var n="",o=void 0;null!=this.item.dataRuanganDepo&&(n=this.item.dataRuanganDepo.id,o={id:this.item.dataRuanganDepo.id,namaruangan:this.item.dataRuanganDepo.namaruangan});var l="",s=void 0;null!=this.item.dataDepartemen&&(l=this.item.dataDepartemen.id,s={id:this.item.dataDepartemen.id,departemen:this.item.dataDepartemen.departemen});var p="";null!=this.item.dataKelPasien&&(p=this.item.dataKelPasien.id);var d="";null!=this.item.noRM&&(d=this.item.noRM);var b="";null!=this.item.Noregistrasi&&(b=this.item.Noregistrasi);var c="";null!=this.item.namaPasien&&(c=this.item.namaPasien);var h="";null!=this.item.noResep&&(h=this.item.noResep);var u="";null!=this.item.jmlRows&&(u=this.item.jmlRows),this.cacheHelper.set("DaftarPasienPulangCtrl",{0:e,1:t,2:void 0,3:c,4:b,5:i,6:s,7:d,8:o}),this.apiService.get("farmasi/get-daftar-resep?namaPasien="+c+"&ruanganId="+a+"&depoId="+n+"&status=&tglAwal="+e+"&tglAkhir="+t+"&noReg="+b+"&instalasiId="+l+"&noRm="+d+"&noResep="+h+"&jmlRows="+u+"&kelompokPasienId="+p).subscribe(e=>{var t=e.daftar;for(let o=0;o<t.length;o++){const e=t[o];e.no=o+1;var a=r(new Date(e.tglregistrasi)).format("YYYY-MM-DD"),i=r(new Date(e.tgllahir)).format("YYYY-MM-DD"),n=this.dateHelper.CountAge(new Date(i),new Date(a));e.umur=n.year+" thn "+n.month+" bln "+n.day+" hari"}this.dataTable=t})}cari(){this.getData()}onRowSelect(e){null!=e.data&&this.apiService.get("general/get-data-closing-pasien/"+this.selected.noregistrasi).subscribe(t=>{t.length>0?this.alertService.error("Peringatan!","Registrasi Ini Telah Diclosing"):this.selected=e.data})}transaksiLayanan(){null!=this.selected?(this.cacheHelper.set("rincianPelayananFarmasiCache",{0:this.selected.norec,1:""}),this.router.navigate(["transaksi-pelayanan-apotik",this.selected.norec_pd,"resep"])):this.alertService.warn("Info,","Data Belum Dipilih!")}popUpInputObat2(e){this.selected=e,this.popUpInputObat()}transaksiLayanan2(e){this.selected=e,this.transaksiLayanan()}popUpInputObat(){null!=this.selected?(this.item.norec_dpr="",this.apiService.get("general/get-data-closing-pasien/"+this.selected.noregistrasi).subscribe(e=>{e.length>0?this.alertService.error("Peringatan!","Registrasi Ini Telah Diclosing"):this.apiService.get("registrasi/get-data-antrian-pasien?noregistrasi="+this.selected.noregistrasi).subscribe(e=>{var t=e;this.listRuanganApd=t.ruangan,null!=t.ruangan&&(this.item.dataRuanganApd=t.ruangan[0],this.item.norec_dpr=t.ruangan[0].norec_apd,this.pop_inputTindakan=!0)})})):this.alertService.warn("Info","Data Belum Dipilih!")}inputObat(){null!=this.item.dataRuanganApd?(this.cacheHelper.set("InputResepPasienCtrl",{0:this.selected.norm,1:this.selected.namapasien,2:this.selected.jeniskelamin,3:this.selected.noregistrasi,4:this.selected.umur,5:this.selected.klid,6:this.selected.namakelas,7:this.selected.tglregistrasi,8:this.item.dataRuanganApd.norec_apd,9:"",10:this.selected.kelompokpasien,11:this.selected.namaruangan,12:this.selected.alamatlengkap,13:"",14:"",15:"",16:""}),this.router.navigate(["input-resep-apotik",this.selected.norec_pd,this.item.dataRuanganApd.norec_apd])):this.alertService.warn("Info","Ruang Antrian Belum Dipilih!")}filter(){this.popFilter=!0}cariFilter(){this.popFilter=!1,this.getData()}clearFilter(){this.popFilter=!1,this.item={},this.dateNow=new Date,this.item.tglAwal=r(this.dateNow).format("YYYY-MM-DD 00:00"),this.item.tglAkhir=r(this.dateNow).format("YYYY-MM-DD 23:59"),this.item.jmlRows=50,this.getData()}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(p.a),s.Jb(p.b),s.Jb(o.a),s.Jb(o.h),s.Jb(d.a),s.Jb(b.a),s.Jb(c.a),s.Jb(n.a),s.Jb(n.f))},e.\u0275cmp=s.Db({type:e,selectors:[["app-daftar-resep-pasien"]],features:[s.wb([o.a])],decls:77,vars:61,consts:[["header","Confirmation","icon","fa fa-question-circle"],[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[1,"p-grid"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","ngModelChange"],["type","text","pInputText","","placeholder","Nomor Resep",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-1"],["type","text","pInputText","","placeholder","No RM",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Noregistrasi",3,"ngModel","ngModelChange","keyup.enter"],["type","text","pInputText","","placeholder","Nama Pasien",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-1",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",1,"p-mr-1",3,"click"],["pButton","","type","button","icon","pi pi-filter","pTooltip","Filter Detail",1,"p-button-success",3,"click"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange","onRowSelect"],["dt",""],["pTemplate","header"],["pTemplate","body"],["header","Pilih Ruang Antrian",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"p-col-12","p-md-6"],["placeholder","Ruangan","optionLabel","ruangan","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange"],[1,"p-col-12","p-md-6",2,"margin-top","15px"],["pButton","","type","submit","icon","fa fa-medkit","pTooltip","Input Obat/Alkes","label","Input Obat/Alkes",3,"click"],["header","Filter",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"p-col-12","p-md-3"],["placeholder","Instalasi","optionLabel","departemen","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["placeholder","Ruangan","optionLabel","namaruangan","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange"],["placeholder","Tipe Pasien","optionLabel","kelompokpasien","appendTo","body",3,"options","ngModel","filter","showClear","ngModelChange"],["type","text","pInputText","","placeholder","Jml Rows",3,"ngModel","ngModelChange","keyup.enter"],["pTemplate","footer"],[2,"width","130px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],["pButton","","type","button","icon","fa fa-medkit","pTooltip","Rincian Pelayanan","label","",1,"p-button-rounded","p-button-primary","p-mr-2",3,"click"],["pButton","","type","button","icon","fa fa-stethoscope","pTooltip","Input Obat/Alkes","label","",1,"p-button-rounded","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"],["icon","pi pi-filter","label","Filter",1,"p-button-success",3,"click"],["icon","pi pi-close","label","Clear","styleClass","p-button-text",3,"click"]],template:function(e,t){1&e&&(s.Lb(0,"p-confirmDialog",0),s.Qb(1,"div",1),s.Qb(2,"div",2),s.Qb(3,"h4"),s.Jc(4,"Pelayanan Resep"),s.Pb(),s.Qb(5,"div",3),s.Qb(6,"div",4),s.Qb(7,"div",3),s.Qb(8,"div",4),s.Qb(9,"div",5),s.Qb(10,"label",6),s.Jc(11,"Periode Awal"),s.Pb(),s.Qb(12,"p-calendar",7),s.Yb("ngModelChange",function(e){return t.item.tglAwal=e}),s.Pb(),s.Pb(),s.Qb(13,"div",5),s.Qb(14,"label",6),s.Jc(15,"Periode Akhir"),s.Pb(),s.Qb(16,"p-calendar",7),s.Yb("ngModelChange",function(e){return t.item.tglAkhir=e}),s.Pb(),s.Pb(),s.Qb(17,"div",5),s.Qb(18,"label",6),s.Jc(19,"No Resep"),s.Pb(),s.Qb(20,"input",8),s.Yb("ngModelChange",function(e){return t.item.noResep=e})("keyup.enter",function(){return t.cari()}),s.Pb(),s.Pb(),s.Qb(21,"div",9),s.Qb(22,"label",6),s.Jc(23,"No RM "),s.Pb(),s.Qb(24,"input",10),s.Yb("ngModelChange",function(e){return t.item.noRM=e})("keyup.enter",function(){return t.cari()}),s.Pb(),s.Pb(),s.Qb(25,"div",5),s.Qb(26,"label",6),s.Jc(27,"Noregistrasi"),s.Pb(),s.Qb(28,"input",11),s.Yb("ngModelChange",function(e){return t.item.Noregistrasi=e})("keyup.enter",function(){return t.cari()}),s.Pb(),s.Pb(),s.Qb(29,"div",5),s.Qb(30,"label",6),s.Jc(31,"Nama Pasien "),s.Pb(),s.Qb(32,"input",12),s.Yb("ngModelChange",function(e){return t.item.namaPasien=e})("keyup.enter",function(){return t.cari()}),s.Pb(),s.Pb(),s.Qb(33,"div",13),s.Qb(34,"button",14),s.Yb("click",function(){return t.cari()}),s.Pb(),s.Qb(35,"button",15),s.Yb("click",function(){return t.filter()}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(36,"div",3),s.Qb(37,"p-table",16,17),s.Yb("selectionChange",function(e){return t.selected=e})("onRowSelect",function(e){return t.onRowSelect(e)}),s.Hc(39,M,4,1,"ng-template",18),s.Hc(40,Q,5,3,"ng-template",19),s.Pb(),s.Pb(),s.Qb(41,"div",3),s.Lb(42,"div",4),s.Pb(),s.Lb(43,"div",3),s.Pb(),s.Pb(),s.Qb(44,"p-dialog",20),s.Yb("visibleChange",function(e){return t.pop_inputTindakan=e}),s.Qb(45,"div",1),s.Qb(46,"div",4),s.Qb(47,"div",21),s.Qb(48,"label",6),s.Jc(49,"Ruangan"),s.Pb(),s.Qb(50,"p-dropdown",22),s.Yb("ngModelChange",function(e){return t.item.dataRuanganApd=e}),s.Pb(),s.Pb(),s.Qb(51,"div",23),s.Qb(52,"button",24),s.Yb("click",function(){return t.inputObat()}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Qb(53,"p-dialog",25),s.Yb("visibleChange",function(e){return t.popFilter=e}),s.Qb(54,"div",1),s.Qb(55,"div",4),s.Qb(56,"div",26),s.Qb(57,"label",6),s.Jc(58,"Instalasi"),s.Pb(),s.Qb(59,"p-dropdown",27),s.Yb("ngModelChange",function(e){return t.item.dataDepartemen=e})("onChange",function(){return t.isiRuangan()}),s.Pb(),s.Pb(),s.Qb(60,"div",26),s.Qb(61,"label",6),s.Jc(62,"Ruangan"),s.Pb(),s.Qb(63,"p-dropdown",22),s.Yb("ngModelChange",function(e){return t.item.dataRuangan=e}),s.Pb(),s.Pb(),s.Qb(64,"div",26),s.Qb(65,"label",6),s.Jc(66,"Depo"),s.Pb(),s.Qb(67,"p-dropdown",28),s.Yb("ngModelChange",function(e){return t.item.dataRuanganDepo=e}),s.Pb(),s.Pb(),s.Qb(68,"div",26),s.Qb(69,"label",6),s.Jc(70,"Tipe Pasien"),s.Pb(),s.Qb(71,"p-dropdown",29),s.Yb("ngModelChange",function(e){return t.item.dataKelPasien=e}),s.Pb(),s.Pb(),s.Qb(72,"div",5),s.Qb(73,"label",6),s.Jc(74,"jml Rows"),s.Pb(),s.Qb(75,"input",30),s.Yb("ngModelChange",function(e){return t.item.jmlRows=e})("keyup.enter",function(){return t.cari()}),s.Pb(),s.Pb(),s.Pb(),s.Pb(),s.Hc(76,C,2,0,"ng-template",31),s.Pb()),2&e&&(s.xb(12),s.ic("ngModel",t.item.tglAwal)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),s.xb(4),s.ic("ngModel",t.item.tglAkhir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!0),s.xb(4),s.ic("ngModel",t.item.noResep),s.xb(4),s.ic("ngModel",t.item.noRM),s.xb(4),s.ic("ngModel",t.item.Noregistrasi),s.xb(4),s.ic("ngModel",t.item.namaPasien),s.xb(5),s.ic("columns",t.column)("value",t.dataTable)("selection",t.selected)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",s.mc(58,y))("paginator",!0)("pageLinks",5),s.xb(7),s.Ec(s.mc(59,x)),s.ic("visible",t.pop_inputTindakan)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!0),s.xb(6),s.ic("options",t.listRuanganApd)("ngModel",t.item.dataRuanganApd)("filter",!0)("showClear",!0),s.xb(3),s.Ec(s.mc(60,Y)),s.ic("visible",t.popFilter)("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!0),s.xb(6),s.ic("options",t.listDepartemen)("ngModel",t.item.dataDepartemen)("filter",!0)("showClear",!0),s.xb(4),s.ic("options",t.listRuangan)("ngModel",t.item.dataRuangan)("filter",!0)("showClear",!0),s.xb(4),s.ic("options",t.listRuanganDepo)("ngModel",t.item.dataRuanganDepo)("filter",!0)("showClear",!0),s.xb(4),s.ic("options",t.listKelompokPasien)("ngModel",t.item.dataKelPasien)("filter",!0)("showClear",!0),s.xb(4),s.ic("ngModel",t.item.jmlRows))},directives:[h.a,u.a,g.g,g.h,g.a,m.a,f.b,P.a,w.h,o.k,v.a,R.a,i.k,w.g,w.f,w.e,f.a],styles:[""]}),e})()}];let T=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[n.j.forChild(I)],n.j]}),e})();var N=a("PCNd");let A=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[i.b,T,N.a]]}),e})()}}]);