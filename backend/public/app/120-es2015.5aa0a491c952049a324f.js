(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{gKbL:function(e,a,t){"use strict";t.r(a),t.d(a,"RujukanBpjsModule",function(){return X});var i=t("ofXK"),n=t("tyNb"),o=t("wd/R"),u=t("fXoL"),r=t("EJUL"),s=t("ujBT"),l=t("G0w9"),b=t("dPl2"),p=t("eO1q"),c=t("3Pt+"),d=t("7kUa"),h=t("jIHw"),g=t("xlun"),m=t("rEr+"),k=t("7zfz"),P=t("/RsI"),j=t("V5BG"),f=t("LuMj"),Q=t("7CaW"),v=t("Q4Mo");function w(e,a){if(1&e&&(u.Qb(0,"th",32),u.Jc(1),u.Lb(2,"p-sortIcon",33),u.Pb()),2&e){const e=a.$implicit;u.Fc("width: ",e.width,""),u.jc("pSortableColumn",e.field),u.xb(1),u.Lc(" ",e.header," "),u.xb(1),u.jc("field",e.field)}}function R(e,a){if(1&e&&(u.Qb(0,"tr"),u.Qb(1,"th",30),u.Jc(2,"Aksi"),u.Pb(),u.Hc(3,w,3,6,"th",31),u.Pb()),2&e){const e=a.$implicit;u.xb(3),u.ic("ngForOf",e)}}function S(e,a){if(1&e&&(u.Qb(0,"td"),u.Qb(1,"span",39),u.Jc(2),u.Pb(),u.Jc(3),u.Pb()),2&e){const e=a.$implicit,t=u.bc().$implicit;u.Fc("width: ",e.width,""),u.xb(2),u.Lc(" ",e.header," "),u.xb(1),u.Lc(" ",t[e.field]," ")}}function x(e,a){if(1&e){const e=u.Sb();u.Qb(0,"tr",34),u.Qb(1,"td",30),u.Qb(2,"button",35),u.Yb("click",function(){u.yc(e);const t=a.$implicit;return u.bc().editRujukan(t)}),u.Pb(),u.Qb(3,"button",36),u.Yb("click",function(){u.yc(e);const t=a.$implicit;return u.bc().hapusRuj(t)}),u.Pb(),u.Qb(4,"button",37),u.Yb("click",function(){u.yc(e);const t=a.$implicit;return u.bc().cetak(t)}),u.Pb(),u.Pb(),u.Hc(5,S,4,5,"td",38),u.Pb()}if(2&e){const e=a.columns,t=a.rowIndex;u.ic("pSelectableRow",a.$implicit)("pSelectableRowIndex",t),u.xb(5),u.ic("ngForOf",e)}}function y(e,a){if(1&e){const e=u.Sb();u.Qb(0,"div",47),u.Qb(1,"span",48),u.Lb(2,"i",49),u.Qb(3,"input",50),u.Yb("ngModelChange",function(a){return u.yc(e),u.bc(2).daftar.cari=a})("input",function(a){return u.yc(e),u.bc(),u.wc(23).filterGlobal(a.target.value,"contains")}),u.Pb(),u.Pb(),u.Pb()}if(2&e){const e=u.bc(2);u.xb(3),u.ic("ngModel",e.daftar.cari)}}function M(e,a){if(1&e&&(u.Qb(0,"th",32),u.Jc(1),u.Lb(2,"p-sortIcon",33),u.Pb()),2&e){const e=a.$implicit;u.Fc("width: ",e.width,""),u.jc("pSortableColumn",e.field),u.xb(1),u.Lc(" ",e.header," "),u.xb(1),u.jc("field",e.field)}}function C(e,a){if(1&e&&(u.Qb(0,"tr"),u.Qb(1,"th",30),u.Jc(2,"No SEP"),u.Pb(),u.Hc(3,M,3,6,"th",31),u.Pb()),2&e){const e=a.$implicit;u.xb(3),u.ic("ngForOf",e)}}function D(e,a){if(1&e&&(u.Qb(0,"td"),u.Qb(1,"span",39),u.Jc(2),u.Pb(),u.Jc(3),u.Pb()),2&e){const e=a.$implicit,t=u.bc().$implicit;u.Fc("width: ",e.width,""),u.xb(2),u.Lc(" ",e.header," "),u.xb(1),u.Lc(" ",t[e.field]," ")}}function V(e,a){if(1&e){const e=u.Sb();u.Qb(0,"tr",34),u.Qb(1,"td",30),u.Qb(2,"button",51),u.Yb("click",function(){u.yc(e);const t=a.$implicit;return u.bc(2).setSEP(t)}),u.Pb(),u.Pb(),u.Hc(3,D,4,5,"td",38),u.Pb()}if(2&e){const e=a.$implicit,t=a.columns,i=a.rowIndex;u.ic("pSelectableRow",e)("pSelectableRowIndex",i),u.xb(2),u.jc("label",e.noSep),u.xb(1),u.ic("ngForOf",t)}}const Y=function(){return[5,10,25,50]};function J(e,a){if(1&e){const e=u.Sb();u.Qb(0,"div",2),u.Qb(1,"div",3),u.Qb(2,"div",2),u.Qb(3,"div",6),u.Qb(4,"label",7),u.Jc(5,"Tgl SEP"),u.Pb(),u.Qb(6,"p-calendar",8),u.Yb("ngModelChange",function(a){return u.yc(e),u.bc().daftar.tglSep=a}),u.Pb(),u.Pb(),u.Qb(7,"div",24),u.Qb(8,"label",7),u.Jc(9,"Jenis Pelayanan"),u.Pb(),u.Qb(10,"div",2),u.Qb(11,"div",40),u.Qb(12,"p-radioButton",41),u.Yb("ngModelChange",function(a){return u.yc(e),u.bc().daftar.tipe=a}),u.Pb(),u.Qb(13,"label",42),u.Jc(14," Rawat Inap"),u.Pb(),u.Pb(),u.Qb(15,"div",40),u.Qb(16,"p-radioButton",43),u.Yb("ngModelChange",function(a){return u.yc(e),u.bc().daftar.tipe=a}),u.Pb(),u.Qb(17,"label",44),u.Jc(18," Rawat Jalan"),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(19,"div",11),u.Qb(20,"button",12),u.Yb("click",function(){return u.yc(e),u.bc().cariHistory()}),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(21,"div",13),u.Qb(22,"p-table",14,45),u.Hc(24,y,4,1,"ng-template",46),u.Hc(25,C,4,1,"ng-template",16),u.Hc(26,V,4,4,"ng-template",17),u.Pb(),u.Pb(),u.Pb()}if(2&e){const e=u.bc();u.xb(6),u.ic("ngModel",e.daftar.tglSep)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!1),u.xb(6),u.ic("value",1)("ngModel",e.daftar.tipe),u.xb(4),u.ic("value",2)("ngModel",e.daftar.tipe),u.xb(6),u.ic("columns",e.column2)("value",e.dataSource2)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",u.mc(17,Y))("paginator",!0)("pageLinks",5)}}function I(e,a){if(1&e){const e=u.Sb();u.Qb(0,"div",6),u.Qb(1,"button",88),u.Yb("click",function(){return u.yc(e),u.bc(2).cariFaskes()}),u.Pb(),u.Pb()}}function T(e,a){if(1&e){const e=u.Sb();u.Qb(0,"div",40),u.Qb(1,"label",7),u.Jc(2,"Spesialis/SubSpesialis "),u.Pb(),u.Qb(3,"input",89),u.Yb("ngModelChange",function(a){return u.yc(e),u.bc(2).itemV2.poliRujukan=a}),u.Pb(),u.Pb()}if(2&e){const e=u.bc(2);u.xb(3),u.ic("ngModel",e.itemV2.poliRujukan)("disabled",!0)}}function K(e,a){if(1&e){const e=u.Sb();u.Qb(0,"div",2),u.Qb(1,"div",22),u.Qb(2,"div",2),u.Qb(3,"div",3),u.Qb(4,"p-panel",52),u.Qb(5,"div",53),u.Qb(6,"ul"),u.Qb(7,"li",54),u.Lb(8,"i",55),u.Qb(9,"div",56),u.Qb(10,"span"),u.Jc(11,"No SEP"),u.Pb(),u.Qb(12,"span",57),u.Jc(13),u.Pb(),u.Pb(),u.Pb(),u.Qb(14,"li",58),u.Lb(15,"i",55),u.Qb(16,"div",56),u.Qb(17,"span"),u.Jc(18,"Tgl SEP"),u.Pb(),u.Qb(19,"span",57),u.Jc(20),u.Pb(),u.Pb(),u.Pb(),u.Qb(21,"li",59),u.Lb(22,"i",55),u.Qb(23,"div",56),u.Qb(24,"span"),u.Jc(25,"Jenis Pelayanan"),u.Pb(),u.Qb(26,"span",57),u.Jc(27),u.Pb(),u.Pb(),u.Pb(),u.Qb(28,"li",60),u.Lb(29,"i",55),u.Qb(30,"div",56),u.Qb(31,"span"),u.Jc(32,"Diagnosa"),u.Pb(),u.Qb(33,"span",57),u.Jc(34),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(35,"div",3),u.Qb(36,"p-panel",61),u.Qb(37,"div",53),u.Qb(38,"ul"),u.Qb(39,"li",54),u.Lb(40,"i",55),u.Qb(41,"div",56),u.Qb(42,"span"),u.Jc(43,"No Kartu"),u.Pb(),u.Qb(44,"span",57),u.Jc(45),u.Pb(),u.Pb(),u.Pb(),u.Qb(46,"li",58),u.Lb(47,"i",55),u.Qb(48,"div",56),u.Qb(49,"span"),u.Jc(50,"Nama"),u.Pb(),u.Qb(51,"span",57),u.Jc(52),u.Pb(),u.Pb(),u.Pb(),u.Qb(53,"li",59),u.Lb(54,"i",55),u.Qb(55,"div",56),u.Qb(56,"span"),u.Jc(57,"Tgl Lahir"),u.Pb(),u.Qb(58,"span",57),u.Jc(59),u.Pb(),u.Pb(),u.Pb(),u.Qb(60,"li",60),u.Lb(61,"i",55),u.Qb(62,"div",56),u.Qb(63,"span"),u.Jc(64,"JK"),u.Pb(),u.Qb(65,"span",57),u.Jc(66),u.Pb(),u.Pb(),u.Pb(),u.Qb(67,"li",62),u.Lb(68,"i",55),u.Qb(69,"div",56),u.Qb(70,"span"),u.Jc(71,"Kelas"),u.Pb(),u.Qb(72,"span",57),u.Jc(73),u.Pb(),u.Pb(),u.Pb(),u.Qb(74,"li",63),u.Lb(75,"i",55),u.Qb(76,"div",56),u.Qb(77,"span"),u.Jc(78,"Faskes"),u.Pb(),u.Qb(79,"span",57),u.Jc(80),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(81,"div",64),u.Qb(82,"div",2),u.Qb(83,"div",3),u.Qb(84,"p-panel",65),u.Qb(85,"div",2),u.Qb(86,"div",24),u.Qb(87,"label",7),u.Jc(88,"Tgl Rujukan "),u.Pb(),u.Qb(89,"p-calendar",66),u.Yb("ngModelChange",function(a){return u.yc(e),u.bc().itemV2.tglRujukan=a}),u.Pb(),u.Pb(),u.Qb(90,"div",22),u.Qb(91,"label",7),u.Jc(92,"Pelayanan "),u.Pb(),u.Qb(93,"div",2),u.Qb(94,"div",40),u.Qb(95,"p-radioButton",67),u.Yb("ngModelChange",function(a){return u.yc(e),u.bc().itemV2.jnsPelayanan=a}),u.Pb(),u.Qb(96,"label",68),u.Jc(97," Rawat Inap"),u.Pb(),u.Pb(),u.Qb(98,"div",40),u.Qb(99,"p-radioButton",69),u.Yb("ngModelChange",function(a){return u.yc(e),u.bc().itemV2.jnsPelayanan=a}),u.Pb(),u.Qb(100,"label",70),u.Jc(101," Rawat Jalan"),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(102,"div",71),u.Qb(103,"label",7),u.Jc(104,"Tipe "),u.Pb(),u.Qb(105,"div",2),u.Qb(106,"div",22),u.Qb(107,"p-radioButton",72),u.Yb("ngModelChange",function(a){return u.yc(e),u.bc().itemV2.tipeRujukan=a})("onClick",function(){return u.yc(e),u.bc().cekTipe(0)}),u.Pb(),u.Qb(108,"label",73),u.Jc(109," Penuh"),u.Pb(),u.Pb(),u.Qb(110,"div",22),u.Qb(111,"p-radioButton",74),u.Yb("ngModelChange",function(a){return u.yc(e),u.bc().itemV2.tipeRujukan=a})("onClick",function(){return u.yc(e),u.bc().cekTipe(1)}),u.Pb(),u.Qb(112,"label",75),u.Jc(113," Partial"),u.Pb(),u.Pb(),u.Qb(114,"div",22),u.Qb(115,"p-radioButton",76),u.Yb("ngModelChange",function(a){return u.yc(e),u.bc().itemV2.tipeRujukan=a})("onClick",function(){return u.yc(e),u.bc().cekTipe(2)}),u.Pb(),u.Qb(116,"label",77),u.Jc(117," Rujuk Balik"),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(118,"div",40),u.Qb(119,"label",7),u.Jc(120,"Diagnosa Rujukan "),u.Pb(),u.Qb(121,"p-autoComplete",78),u.Yb("ngModelChange",function(a){return u.yc(e),u.bc().itemV2.diagRujukan=a})("completeMethod",function(a){return u.yc(e),u.bc().filterAutoComDiag(a)}),u.Pb(),u.Pb(),u.Qb(122,"div",40),u.Qb(123,"label",7),u.Jc(124,"Di Rujuk Ke "),u.Pb(),u.Qb(125,"div",2),u.Qb(126,"div",79),u.Qb(127,"input",80),u.Yb("ngModelChange",function(a){return u.yc(e),u.bc().itemV2.ppkDirujuk=a}),u.Pb(),u.Pb(),u.Hc(128,I,2,0,"div",81),u.Pb(),u.Pb(),u.Hc(129,T,4,2,"div",82),u.Qb(130,"div",40),u.Qb(131,"label",7),u.Jc(132,"Catatan "),u.Pb(),u.Qb(133,"input",83),u.Yb("ngModelChange",function(a){return u.yc(e),u.bc().itemV2.catatan=a}),u.Pb(),u.Pb(),u.Pb(),u.Qb(134,"div",3),u.Qb(135,"div",2),u.Qb(136,"div",84),u.Qb(137,"button",85),u.Yb("click",function(){return u.yc(e),u.bc().save()}),u.Pb(),u.Pb(),u.Qb(138,"div",6),u.Qb(139,"button",86),u.Yb("click",function(){return u.yc(e),u.bc().cancel()}),u.Pb(),u.Pb(),u.Qb(140,"div",6),u.Qb(141,"button",87),u.Yb("click",function(){return u.yc(e),u.bc().cetakAfter()}),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb()}if(2&e){const e=u.bc();u.xb(4),u.ic("toggleable",!0),u.xb(9),u.Kc(e.sep.noSep),u.xb(7),u.Kc(e.sep.tglSep),u.xb(7),u.Kc(e.sep.jnsPelayanan),u.xb(7),u.Kc(e.sep.diagnosa),u.xb(2),u.ic("toggleable",!0),u.xb(9),u.Kc(e.sep.peserta.noKartu),u.xb(7),u.Kc(e.sep.peserta.nama),u.xb(7),u.Kc(e.sep.peserta.tglLahir),u.xb(7),u.Kc(e.sep.peserta.sex),u.xb(7),u.Kc(e.sep.peserta.hakKelas.keterangan),u.xb(7),u.Kc(e.sep.peserta.provUmum.kdProvider+"~"+e.sep.peserta.provUmum.nmProvider),u.xb(4),u.ic("toggleable",!0),u.xb(5),u.ic("ngModel",e.itemV2.tglRujukan)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!1),u.xb(6),u.ic("value",1)("ngModel",e.itemV2.jnsPelayanan),u.xb(4),u.ic("value",2)("ngModel",e.itemV2.jnsPelayanan),u.xb(8),u.ic("value",0)("ngModel",e.itemV2.tipeRujukan),u.xb(4),u.ic("value",1)("ngModel",e.itemV2.tipeRujukan),u.xb(4),u.ic("value",2)("ngModel",e.itemV2.tipeRujukan),u.xb(6),u.ic("ngModel",e.itemV2.diagRujukan)("suggestions",e.listDiagnosa)("dropdown",!1),u.xb(6),u.ic("ngModel",e.itemV2.ppkDirujuk)("disabled",!0),u.xb(1),u.ic("ngIf",0==e.itemV2.tipeRujukan||1==e.itemV2.tipeRujukan),u.xb(1),u.ic("ngIf",0==e.itemV2.tipeRujukan),u.xb(4),u.ic("ngModel",e.itemV2.catatan),u.xb(4),u.ic("disabled",e.isSimpan),u.xb(4),u.ic("disabled",e.disabledCetak)}}function N(e,a){if(1&e&&(u.Qb(0,"th",32),u.Jc(1),u.Lb(2,"p-sortIcon",33),u.Pb()),2&e){const e=a.$implicit;u.Fc("width: ",e.width,""),u.jc("pSortableColumn",e.field),u.xb(1),u.Lc(" ",e.header," "),u.xb(1),u.jc("field",e.field)}}function L(e,a){if(1&e&&(u.Qb(0,"tr"),u.Qb(1,"th",90),u.Jc(2,"Aksi"),u.Pb(),u.Hc(3,N,3,6,"th",31),u.Pb()),2&e){const e=a.$implicit;u.xb(3),u.ic("ngForOf",e)}}function H(e,a){if(1&e&&(u.Qb(0,"td"),u.Qb(1,"span",39),u.Jc(2),u.Pb(),u.Jc(3),u.Pb()),2&e){const e=a.$implicit,t=u.bc().$implicit;u.Fc("width: ",e.width,""),u.xb(2),u.Lc(" ",e.header," "),u.xb(1),u.Lc(" ",t[e.field]," ")}}function F(e,a){if(1&e){const e=u.Sb();u.Qb(0,"tr",34),u.Qb(1,"td",90),u.Qb(2,"button",91),u.Yb("click",function(){u.yc(e);const t=a.$implicit;return u.bc().pakeSub(t)}),u.Pb(),u.Pb(),u.Hc(3,H,4,5,"td",38),u.Pb()}if(2&e){const e=a.columns,t=a.rowIndex;u.ic("pSelectableRow",a.$implicit)("pSelectableRowIndex",t),u.xb(3),u.ic("ngForOf",e)}}function B(e,a){if(1&e&&(u.Qb(0,"th",32),u.Jc(1),u.Lb(2,"p-sortIcon",33),u.Pb()),2&e){const e=a.$implicit;u.Fc("width: ",e.width,""),u.jc("pSortableColumn",e.field),u.xb(1),u.Lc(" ",e.header," "),u.xb(1),u.jc("field",e.field)}}function E(e,a){if(1&e&&(u.Qb(0,"tr"),u.Hc(1,B,3,6,"th",31),u.Pb()),2&e){const e=a.$implicit;u.xb(1),u.ic("ngForOf",e)}}function $(e,a){if(1&e&&(u.Qb(0,"td"),u.Qb(1,"span",39),u.Jc(2),u.Pb(),u.Jc(3),u.Pb()),2&e){const e=a.$implicit,t=u.bc().$implicit;u.Fc("width: ",e.width,""),u.xb(2),u.Lc(" ",e.header," "),u.xb(1),u.Lc(" ",t[e.field]," ")}}function A(e,a){if(1&e&&(u.Qb(0,"tr"),u.Hc(1,$,4,5,"td",38),u.Pb()),2&e){const e=a.columns;u.xb(1),u.ic("ngForOf",e)}}const G=function(){return{width:"70vw"}},O=[{path:"",component:(()=>{class e{constructor(e,a,t){this.apiService=e,this.alertService=a,this.helper=t,this.daftar={periodeAwal:new Date,periodeAkhir:new Date,tglSep:new Date,tipe:"2"},this.resCetak={},this.item={now:o(new Date).format("YYYY-MM-DD")},this.itemV2={tipeRujukan:"0",jnsPelayanan:"1",tglRujukan:new Date,tglRencanaKunjungan:new Date},this.listFaskes=[],this.activeState=!1,this.showInput=!1,this.listPel=[{kode:1,nama:"Rawat Inap"},{kode:2,nama:"Rawat Jalan"}],this.rujukan={},this.sep={peserta:{hakKelas:{},provUmum:{kdProvider:"",nmProvider:""}}},this.jadwal={tglRencanaKunjungan:new Date},this.popJadwal=!1,this.columnSarana=[],this.dataSourceSub=[],this.columnSub=[],this.disabledCetak=!0}ngOnInit(){this.resCetak.namaPPKRujukan="",this.apiService.get("registrasi/get-setting-asuransi").subscribe(e=>{this.resCetak.namaPPKRujukan=e.namaPPKRujukan}),this.item.tipe="1",this.column=[{field:"tglrujukan",header:"Tgl Rujukan",width:"100px"},{field:"norujukan",header:"No Rujukan",width:"150px",filter:!0},{field:"nocm",header:"No RM",width:"70px",filter:!0},{field:"nama",header:"Nama Pasien",width:"150px",filter:!0},{field:"nosep",header:"No SEP",width:"150px"},{field:"nokartu",header:"No Kartu",width:"90px"},{field:"jenispelayanannama",header:"Pelayanan",width:"80px"},{field:"tiperujukannama",header:"Tipe",width:"80px"},{field:"namaruangan",header:"Poli",width:"150px"},{field:"ppkdirujuk",header:"Dirujuk Ke",width:"150px"},{field:"diagnosarujukan",header:"Diagnosa",width:"200px"}],this.column2=[{field:"tglSep",header:"Tgl SEP",width:"100px"},{field:"tglPlgSep",header:"Tgl Pulang",width:"100px"},{field:"jnsPelayanan",header:"Pelayanan",width:"100px"},{field:"kelasRawat",header:"Kelas",width:"100px"},{field:"noKartu",header:"No Kartu",width:"100px"},{field:"nama",header:"Nama",width:"200px"},{field:"poli",header:"Poli",width:"200px"},{field:"diagnosa",header:"Diagnosa",width:"200px"},{field:"noRujukan",header:"No Rujukan",width:"100px"}],this.columnSub=[{field:"namaSpesialis",header:"Nama Spesialis/Sub",width:"200px"},{field:"kapasitas",header:"Kapasitas",width:"100px"},{field:"jumlahRujukan",header:"Jml Rujukan",width:"100px"},{field:"persentase",header:"Presentase",width:"100px"}],this.columnSarana=[{field:"namaSarana",header:"Sarana",width:"200px"},{field:"kodeSarana",header:"Kode",width:"100px"}],this.getGridData()}handleChangeTab(e){this.index=e.index,0==e.index?this.getGridData():1==e.index&&this.cariHistory()}cekTipe(e){this.itemV2.ppkDirujuk=2==e?this.sep.peserta.provUmum.kdProvider+"-"+this.sep.peserta.provUmum.nmProvider:""}cancel(){this.showInput=!1}setSEP(e){this.itemV2.noSep=e.noSep,this.apiService.postNonMessage("bridging/bpjs/tools",{url:"SEP/"+e.noSep,method:"GET",data:null}).subscribe(e=>{if(this.showInput=!0,200==e.metaData.code){for(let a=0;a<this.listPel.length;a++){const t=this.listPel[a];if(t.nama==e.response.jnsPelayanan){this.itemV2.jnsPelayanan=t.kode;break}}e.response.peserta.provUmum={},this.sep=e.response;var a={url:"Peserta/nokartu/"+e.response.peserta.noKartu+"/tglSEP/"+o(new Date).format("YYYY-MM-DD"),method:"GET",data:null};this.apiService.postNonMessage("bridging/bpjs/tools",a).subscribe(e=>{200==e.metaData.code&&(this.sep.peserta=e.response.peserta,this.rujukan.rujukFaskes=e.response.peserta.provUmum.kdProvider+"~"+e.response.peserta.provUmum.nmProvider)})}else this.alertService.info("Info",e.metaData.message)})}cariHistory(){let e={url:"Monitoring/Kunjungan/Tanggal/"+o(this.daftar.tglSep).format("YYYY-MM-DD")+"/JnsPelayanan/"+this.daftar.tipe,method:"GET",data:null};this.dataSource2=[],this.apiService.postNonMessage("bridging/bpjs/tools",e).subscribe(e=>{"200"==e.metaData.code?this.alertService.success("Info",e.metaData.message):this.alertService.error("Info",e.metaData.message),this.dataSource2=e.response.sep})}editRujukan(e){this.index=1,this.showInput=!0,this.dataSelected=e,this.itemV2.tipe=this.dataSelected.tiperujukan,this.setSEP({noSep:this.dataSelected.nosep}),this.itemV2.noSep=this.dataSelected.nosep,this.itemV2.noRujukan=this.dataSelected.norujukan,this.itemV2.tglRencanaKunjungan=new Date(this.dataSelected.tglrencanakunjungan),this.itemV2.tglRujukan=new Date(this.dataSelected.tglrujukan),this.itemV2.ppkDirujuk=this.dataSelected.kdppkdirujuk+"~"+this.dataSelected.ppkdirujuk,this.itemV2.poliRujukan=this.dataSelected.polirujukan,this.itemV2.catatan=this.dataSelected.catatan,this.itemV2.diagRujukan={kode:this.dataSelected.diagnosarujukan.split(" - ")[0],nama:this.dataSelected.diagnosarujukan}}hapusRuj(e){this.apiService.postNonMessage("bridging/bpjs/tools",{url:"Rujukan/delete",method:"DELETE",data:{request:{t_rujukan:{noRujukan:e.norujukan,user:"Xoxo"}}}}).subscribe(a=>{"200"===a.metaData.code?(this.apiService.post("bridging/bpjs/save-rujukan",{tipe:"delete",norujukan:e.norujukan}).subscribe(e=>{this.getGridData()}),this.alertService.success("Info",a.metaData.message)):this.alertService.error("Info",a.metaData.message)})}clear(){this.itemV2={tipe:"1"}}getGridData(){var e=o(this.daftar.periodeAwal).format("YYYY-MM-DD"),a=o(this.daftar.periodeAkhir).format("YYYY-MM-DD"),t="";null!=this.daftar.noRujukan&&(t="&norujukan="+this.daftar.noRujukan);var i="";null!=this.daftar.nocm&&(i="&nocm="+this.daftar.nocm),this.apiService.get("bridging/bpjs/get-daftar-rujukan?tglAwal="+e+"&tglAkhir="+a+t+i).subscribe(e=>{for(var a=e.data,t=0;t<a.length;t++)a[t].jenispelayanannama=1==a[t].jenispelayanan&&null!=a[t].jenispelayanan?"Rawat Inap":"Rawat Jalan","0"==a[t].tiperujukan?a[t].tiperujukannama="Penuh":"1"==a[t].tiperujukan?a[t].tiperujukannama="Partial":"2"==a[t].tiperujukan&&(a[t].tiperujukannama="Rujuk Balik");this.dataSource=a})}filterAutoComDiag(e){if(""==e.query)return;if(e.query.length<3)return;let a={url:"referensi/diagnosa/"+encodeURIComponent(e.query),method:"GET",data:null};this.apiService.postNonMessage("bridging/bpjs/tools",a).subscribe(e=>{"200"==e.metaData.code?(this.listDiagnosa=e.response.diagnosa,this.alertService.success("Info",e.metaData.message)):this.alertService.error("Info",e.metaData.message)})}filterAutoCom(e){if(""==e.query)return;if(e.query.length<3)return;let a={url:"referensi/faskes/"+encodeURIComponent(e.query)+"/2",method:"GET",data:null};this.apiService.postNonMessage("bridging/bpjs/tools",a).subscribe(e=>{"200"==e.metaData.code?(this.listFaskes=e.response.faskes,this.alertService.success("Info",e.metaData.message)):this.alertService.error("Info",e.metaData.message)})}cariFaskes(){this.popJadwal=!0,delete this.itemV2.ppkDirujuk,delete this.itemV2.poliRujukan}pakeSub(e){this.itemV2.ppkDirujuk=this.jadwal.ppkDirujuk.kode+"~"+this.jadwal.ppkDirujuk.nama,this.itemV2.poliRujukan=e.kodeSpesialis+"~"+e.namaSpesialis,this.popJadwal=!1}cariJadwal(){if(this.jadwal.ppkDirujuk){this.dataSourceSarana=[],this.apiService.postNonMessage("bridging/bpjs/tools",{url:"Rujukan/ListSarana/PPKRujukan/"+this.jadwal.ppkDirujuk.kode,method:"GET",data:null}).subscribe(e=>{"200"==e.metaData.code?this.dataSourceSarana=e.response.list:this.alertService.error("Sarana",e.metaData.message)}),this.dataSourceSub=[];var e={url:"Rujukan/ListSpesialistik/PPKRujukan/"+this.jadwal.ppkDirujuk.kode+"/TglRujukan/"+o(this.itemV2.tglRencanaKunjungan).format("YYYY-MM-DD"),method:"GET",data:null};this.apiService.postNonMessage("bridging/bpjs/tools",e).subscribe(e=>{"200"==e.metaData.code?this.dataSourceSub=e.response.list:this.alertService.error("Spesialis/Sub",e.metaData.message)})}else this.alertService.warn("Info","Pilih PPK Dirujuk")}cetak(e){this.helper.cetakRujukan(e.norujukan,e.tglrujukan,e.nokartu,e.nama,e.tgllahir,e.ppkdirujuk,this.resCetak.namaPPKRujukan,e.namaruangan,e.sex,e.diagnosarujukan,e.catatan,e.tiperujukan,e.jenispelayanan,e.diagnosarujukan,e.tglrencanakunjungan)}cetakAfter(){this.helper.cetakRujukan(this.resCetak.norujukan,this.resCetak.tglrujukan,this.resCetak.nokartu,this.resCetak.nama,this.resCetak.tgllahir,this.resCetak.ppkdirujuk,this.resCetak.namaPPKRujukan,this.resCetak.namaruangan,this.resCetak.sex,this.resCetak.diagnosarujukan,this.resCetak.catatan,this.resCetak.tiperujukan,this.resCetak.jenispelayanan,this.resCetak.diagnosarujukan,this.resCetak.tglrencanakunjungan)}save(){var e={},a="",t="";null==this.itemV2.noRujukan?(a="Rujukan/2.0/insert",t="POST",e={request:{t_rujukan:{noSep:this.itemV2.noSep,tglRujukan:o(this.itemV2.tglRujukan).format("YYYY-MM-DD"),tglRencanaKunjungan:o(this.itemV2.tglRencanaKunjungan).format("YYYY-MM-DD"),ppkDirujuk:this.itemV2.ppkDirujuk?this.itemV2.ppkDirujuk.split("~")[0]:"",jnsPelayanan:this.itemV2.jnsPelayanan,catatan:this.itemV2.catatan?this.itemV2.catatan:"",diagRujukan:this.itemV2.diagRujukan.kode,tipeRujukan:this.itemV2.tipeRujukan,poliRujukan:this.itemV2.poliRujukan?this.itemV2.poliRujukan.split("~")[0]:"",user:"XoxoXoxo"}}}):(a="Rujukan/2.0/Update",t="PUT",e={request:{t_rujukan:{noRujukan:this.itemV2.noRujukan,tglRujukan:o(this.itemV2.tglRujukan).format("YYYY-MM-DD"),tglRencanaKunjungan:o(this.itemV2.tglRencanaKunjungan).format("YYYY-MM-DD"),ppkDirujuk:this.itemV2.ppkDirujuk?this.itemV2.ppkDirujuk.split("~")[0]:"",jnsPelayanan:this.itemV2.jnsPelayanan,catatan:this.itemV2.catatan?this.itemV2.catatan:"",diagRujukan:this.itemV2.diagRujukan.kode,tipeRujukan:this.itemV2.tipeRujukan,poliRujukan:this.itemV2.poliRujukan?this.itemV2.poliRujukan.split("~")[0]:"",user:"XoxoXoxo"}}});let i={url:a,method:t,data:e};this.disabledCetak=!0,this.apiService.postNonMessage("bridging/bpjs/tools",i).subscribe(e=>{if("200"==e.metaData.code){this.disabledCetak=!1;var a={};this.alertService.success("Info",e.metaData.message);let t=e.response.rujukan;null!=t?(this.resCetak.norujukan=t.noRujukan,this.resCetak.tglrujukan=t.tglRujukan,this.resCetak.nokartu=t.peserta.noKartu,this.resCetak.nama=t.peserta.nama,this.resCetak.tgllahir=t.peserta.tglLahir,this.resCetak.ppkdirujuk=this.itemV2.ppkDirujuk?this.itemV2.ppkDirujuk.split("~")[1]:"",this.resCetak.namaruangan=t.poliTujuan.nama,this.resCetak.sex=t.peserta.kelamin,this.resCetak.diagnosarujukan=t.diagnosa.nama,this.resCetak.catatan=this.itemV2.catatan,this.resCetak.tiperujukan=this.itemV2.tipeRujukan,this.resCetak.jenispelayanan=this.itemV2.jnsPelayanan,this.resCetak.tglrencanakunjungan=t.tglRencanaKunjungan,a={tipe:this.itemV2.noRujukan?"update":"save",nosep:this.itemV2.noSep?this.itemV2.noSep:null,tglrujukan:t.tglRujukan,jenispelayanan:this.itemV2.jnsPelayanan,ppkdirujuk:t.tujuanRujukan.nama,kdppkdirujuk:this.itemV2.ppkDirujuk?this.itemV2.ppkDirujuk.split("~")[0]:"",catatan:this.itemV2.catatan,diagnosarujukan:t.diagnosa.nama,polirujukan:t.poliTujuan.nama,tiperujukan:this.itemV2.tipeRujukan,nama:t.peserta.nama,nokartu:t.peserta.noKartu,tglsep:null,sex:t.peserta.kelamin,norujukan:t.noRujukan,nocm:t.peserta.noMr,tglBerlakuKunjungan:t.tglBerlakuKunjungan,tglRencanaKunjungan:t.tglRencanaKunjungan}):(a={tipe:this.itemV2.noRujukan?"update":"save",nosep:this.itemV2.noSep?this.itemV2.noSep:null,tglrujukan:o(this.itemV2.tglRujukan).format("YYYY-MM-DD"),jenispelayanan:this.itemV2.jnsPelayanan,ppkdirujuk:this.itemV2.ppkDirujuk?this.itemV2.ppkDirujuk.split("~")[1]:"",kdppkdirujuk:this.itemV2.ppkDirujuk?this.itemV2.ppkDirujuk.split("~")[0]:"",catatan:this.itemV2.catatan,diagnosarujukan:this.itemV2.diagRujukan.kode,polirujukan:this.itemV2.poliRujukan?this.itemV2.poliRujukan.split("~")[0]:"",tiperujukan:this.itemV2.tipeRujukan,norujukan:this.itemV2.noRujukan,tglRencanaKunjungan:o(this.itemV2.tglRencanaKunjungan).format("YYYY-MM-DD")},this.index=0),this.apiService.post("bridging/bpjs/save-rujukan",a).subscribe(e=>{})}else this.alertService.error("Info",e.metaData.message)})}}return e.\u0275fac=function(a){return new(a||e)(u.Jb(r.a),u.Jb(s.a),u.Jb(l.a))},e.\u0275cmp=u.Db({type:e,selectors:[["app-rujukan-bpjs"]],decls:66,vars:58,consts:[[1,"p-fluid","p-formgrid","p-mt-3"],[1,"card","card-w-title"],[1,"p-grid"],[1,"p-col-12","p-md-12"],[3,"activeIndex","onChange","activeIndexChange"],["header","List Rujukan","leftIcon","fa fa-th-list"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","ngModelChange"],["type","text","pInputText","","placeholder","No RM",3,"ngModel","ngModelChange"],["type","text","pInputText","","placeholder","No Rujukan",3,"ngModel","ngModelChange"],[1,"p-col-12","p-md-1",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",1,"p-button-success","p-mr-1",3,"click"],[1,"p-col-12"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks"],["dt",""],["pTemplate","header"],["pTemplate","body"],["header","Buat Baru","leftIcon","fa fa-edit"],["class","p-grid",4,"ngIf"],["header","Jadwal Praktek dan Sarana Rumah Sakit Rujukan",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"p-fluid","p-formgrid"],[1,"p-col-12","p-md-4"],["field","nama","placeholder","Ketik minimal 3 karakter","appendTo","body",3,"ngModel","suggestions","dropdown","ngModelChange","completeMethod"],[1,"p-col-12","p-md-3"],["appendTo","body","yearRange","1980:2030","dateFormat","yy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","ngModelChange"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",1,"p-button-primary","p-mr-1",3,"click"],["header","Spesialis/SubSpesialis","leftIcon","fa fa-th-list"],["dtx",""],["header","Sarana","leftIcon","fa fa-briefcase"],[2,"width","180px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],[3,"pSelectableRow","pSelectableRowIndex"],["pButton","","type","button","icon","fa fa-edit","pTooltip","Edit","label","",1,"p-button-rounded","p-button-success","p-mr-2",3,"click"],["pButton","","type","button","icon","fa fa-trash","pTooltip","Hapus","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],["pButton","","type","button","icon","fa fa-print","pTooltip","Cetak","label","",1,"p-button-rounded","p-button-info","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"],[1,"p-column-title"],[1,"p-col-12","p-md-6"],["inputId","ri","name","pelayanan",3,"value","ngModel","ngModelChange"],["for","ri"],["inputId","rj","name","pelayanan",3,"value","ngModel","ngModelChange"],["for","rj"],["dt2",""],["pTemplate","caption"],[1,"p-d-flex"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","width","50","placeholder","Pencarian ",3,"ngModel","ngModelChange","input"],["pButton","","type","button","icon","","pTooltip","Buat Rujukan",1,"p-button-rounded","p-button-help","p-mr-2",3,"label","click"],["header","SEP",3,"toggleable"],[1,"p-col-12","p-md-12","timeline"],[1,"satu"],[1,"pi","pi-circle-on"],[1,"event-content"],[1,"event-title"],[1,"dua"],[1,"tiga"],[1,"lima"],["header","Peserta",3,"toggleable"],[1,"enam"],[1,"tujuh"],[1,"p-col-12","p-md-8"],["header","Rujukan",3,"toggleable"],["yearRange","1980:2030","dateFormat","yy-mm-dd","placeholder","yyyy-mm-dd",3,"ngModel","showIcon","monthNavigator","yearNavigator","showTime","ngModelChange"],["inputId","ri2","name","pelayanan2",3,"value","ngModel","ngModelChange"],["for","ri2"],["inputId","rj2","name","pelayanan2",3,"value","ngModel","ngModelChange"],["for","rj2"],[1,"p-col-12","p-md-5"],["inputId","ri22","name","pelayanan22",3,"value","ngModel","ngModelChange","onClick"],["for","ri22"],["inputId","rj23","name","pelayanan22",3,"value","ngModel","ngModelChange","onClick"],["for","rj23"],["inputId","rj22","name","pelayanan22",3,"value","ngModel","ngModelChange","onClick"],["for","rj22"],["field","nama","placeholder","Ketik minimal 3 karakter",3,"ngModel","suggestions","dropdown","ngModelChange","completeMethod"],[1,"p-col-12","p-md-10"],["type","text","pInputText","","placeholder","Nama Faskes",3,"ngModel","disabled","ngModelChange"],["class","p-col-12 p-md-2",4,"ngIf"],["class","p-col-12 p-md-6",4,"ngIf"],["type","text","pInputText","","placeholder","Catatan",3,"ngModel","ngModelChange"],[1,"p-col-12","p-md-2","p-md-offset-6"],["pButton","","type","button","icon","pi pi-save","pTooltip","Simpan","label","Simpan",1,"p-button","p-mr-2",3,"disabled","click"],["pButton","","type","button","icon","pi pi-arrow-left","pTooltip","","label","Batal",1,"p-button","p-button-danger","p-mr-2",3,"click"],["pButton","","pRipple","","label","Cetak","icon","pi pi-print",1,"p-button-warning",3,"disabled","click"],["pButton","","type","submit","icon","pi pi-briefcase","pTooltip","Cari Faskes",1,"p-button-help","p-mr-1",3,"click"],["type","text","pInputText","","placeholder","Spesialis/SubSpesialis",3,"ngModel","disabled","ngModelChange"],[2,"width","80px"],["pButton","","type","button","icon","fa fa-check","pTooltip","Gunakan","label","",1,"p-button-rounded","p-button-help","p-mr-2",3,"click"]],template:function(e,a){1&e&&(u.Qb(0,"div",0),u.Qb(1,"div",1),u.Qb(2,"h4"),u.Jc(3,"Pembuatan Rujukan"),u.Pb(),u.Qb(4,"div",2),u.Qb(5,"div",3),u.Qb(6,"p-tabView",4),u.Yb("onChange",function(e){return a.handleChangeTab(e)})("activeIndexChange",function(e){return a.index=e}),u.Qb(7,"p-tabPanel",5),u.Qb(8,"div",2),u.Qb(9,"div",3),u.Qb(10,"div",2),u.Qb(11,"div",6),u.Qb(12,"label",7),u.Jc(13,"Periode Awal"),u.Pb(),u.Qb(14,"p-calendar",8),u.Yb("ngModelChange",function(e){return a.daftar.periodeAwal=e}),u.Pb(),u.Pb(),u.Qb(15,"div",6),u.Qb(16,"label",7),u.Jc(17,"Periode Akhir"),u.Pb(),u.Qb(18,"p-calendar",8),u.Yb("ngModelChange",function(e){return a.daftar.periodeAkhir=e}),u.Pb(),u.Pb(),u.Qb(19,"div",6),u.Qb(20,"label",7),u.Jc(21,"No RM "),u.Pb(),u.Qb(22,"input",9),u.Yb("ngModelChange",function(e){return a.daftar.nocm=e}),u.Pb(),u.Pb(),u.Qb(23,"div",6),u.Qb(24,"label",7),u.Jc(25,"No Rujukan"),u.Pb(),u.Qb(26,"input",10),u.Yb("ngModelChange",function(e){return a.daftar.noRujukan=e}),u.Pb(),u.Pb(),u.Qb(27,"div",11),u.Qb(28,"button",12),u.Yb("click",function(){return a.getGridData()}),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(29,"div",13),u.Qb(30,"p-table",14,15),u.Hc(32,R,4,1,"ng-template",16),u.Hc(33,x,6,3,"ng-template",17),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(34,"p-tabPanel",18),u.Hc(35,J,27,18,"div",19),u.Hc(36,K,142,38,"div",19),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(37,"p-dialog",20),u.Yb("visibleChange",function(e){return a.popJadwal=e}),u.Qb(38,"div",21),u.Qb(39,"div",2),u.Qb(40,"div",3),u.Qb(41,"div",2),u.Qb(42,"div",22),u.Qb(43,"label",7),u.Jc(44,"PPK Rujuk"),u.Pb(),u.Qb(45,"p-autoComplete",23),u.Yb("ngModelChange",function(e){return a.jadwal.ppkDirujuk=e})("completeMethod",function(e){return a.filterAutoCom(e)}),u.Pb(),u.Pb(),u.Qb(46,"div",24),u.Qb(47,"label",7),u.Jc(48,"Tgl.Rencana Rujukan"),u.Pb(),u.Qb(49,"p-calendar",25),u.Yb("ngModelChange",function(e){return a.itemV2.tglRencanaKunjungan=e}),u.Pb(),u.Pb(),u.Qb(50,"div",11),u.Qb(51,"button",26),u.Yb("click",function(){return a.cariJadwal()}),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(52,"div",13),u.Qb(53,"p-tabView"),u.Qb(54,"p-tabPanel",27),u.Qb(55,"div",13),u.Qb(56,"p-table",14,28),u.Hc(58,L,4,1,"ng-template",16),u.Hc(59,F,4,3,"ng-template",17),u.Pb(),u.Pb(),u.Pb(),u.Qb(60,"p-tabPanel",29),u.Qb(61,"div",13),u.Qb(62,"p-table",14,28),u.Hc(64,E,2,1,"ng-template",16),u.Hc(65,A,2,1,"ng-template",17),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Pb()),2&e&&(u.xb(6),u.ic("activeIndex",a.index),u.xb(8),u.ic("ngModel",a.daftar.periodeAwal)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!1),u.xb(4),u.ic("ngModel",a.daftar.periodeAkhir)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!1),u.xb(4),u.ic("ngModel",a.daftar.nocm),u.xb(4),u.ic("ngModel",a.daftar.noRujukan),u.xb(4),u.ic("columns",a.column)("value",a.dataSource)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",u.mc(54,Y))("paginator",!0)("pageLinks",5),u.xb(5),u.ic("ngIf",!a.showInput),u.xb(1),u.ic("ngIf",a.showInput),u.xb(1),u.Ec(u.mc(55,G)),u.ic("visible",a.popJadwal)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!0),u.xb(8),u.ic("ngModel",a.jadwal.ppkDirujuk)("suggestions",a.listFaskes)("dropdown",!0),u.xb(4),u.ic("ngModel",a.itemV2.tglRencanaKunjungan)("showIcon",!0)("monthNavigator",!0)("yearNavigator",!0)("showTime",!1),u.xb(7),u.ic("columns",a.columnSub)("value",a.dataSourceSub)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",u.mc(56,Y))("paginator",!0)("pageLinks",5),u.xb(6),u.ic("columns",a.columnSarana)("value",a.dataSourceSarana)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",u.mc(57,Y))("paginator",!0)("pageLinks",5))},directives:[b.b,b.a,p.a,c.g,c.h,c.a,d.a,h.b,g.a,m.h,k.k,i.l,P.a,j.a,i.k,m.g,m.f,m.e,f.a,Q.a,v.a],styles:[""]}),e})()}];let U=(()=>{class e{}return e.\u0275mod=u.Hb({type:e}),e.\u0275inj=u.Gb({factory:function(a){return new(a||e)},imports:[[n.j.forChild(O)],n.j]}),e})();var q=t("PCNd");let X=(()=>{class e{}return e.\u0275mod=u.Hb({type:e}),e.\u0275inj=u.Gb({factory:function(a){return new(a||e)},imports:[[i.b,U,q.a]]}),e})()}}]);