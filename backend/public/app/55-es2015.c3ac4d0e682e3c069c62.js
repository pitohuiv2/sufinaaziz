(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{VW4B:function(e,i,t){"use strict";t.r(i),t.d(i,"SiklusMenuModule",function(){return $});var n=t("ofXK"),o=t("tyNb"),a=t("7zfz"),l=t("fXoL"),s=t("EJUL"),p=t("U+s4"),r=t("G0w9"),c=t("ujBT"),b=t("RTT/"),d=t("3Pt+"),u=t("7kUa"),h=t("arFO"),g=t("jIHw"),f=t("xlun"),k=t("rEr+"),m=t("/RsI"),P=t("7CaW"),v=t("Q4Mo"),Q=t("Ji6n"),x=t("hYoW"),y=t("PU9F");function C(e,i){if(1&e){const e=l.Sb();l.Qb(0,"div",37),l.Qb(1,"button",38),l.Yb("click",function(){return l.yc(e),l.bc().tambah()}),l.Pb(),l.Pb()}}function w(e,i){if(1&e&&(l.Qb(0,"th",41),l.Jc(1),l.Lb(2,"p-sortIcon",42),l.Pb()),2&e){const e=i.$implicit;l.Fc("width: ",e.width,""),l.jc("pSortableColumn",e.field),l.xb(1),l.Lc(" ",e.header," "),l.xb(1),l.jc("field",e.field)}}function M(e,i){if(1&e&&(l.Qb(0,"tr"),l.Lb(1,"th",39),l.Hc(2,w,3,6,"th",40),l.Pb()),2&e){const e=i.$implicit;l.xb(2),l.ic("ngForOf",e)}}function j(e,i){if(1&e&&(l.Qb(0,"span"),l.Jc(1),l.Pb()),2&e){const e=l.bc().$implicit,i=l.bc().$implicit,t=l.bc();l.xb(1),l.Lc(" ",t.formatRupiah(i[e.field],""),"")}}function S(e,i){if(1&e&&(l.Qb(0,"span"),l.Jc(1),l.Pb()),2&e){const e=l.bc().$implicit,i=l.bc().$implicit;l.xb(1),l.Lc(" ",i[e.field],"")}}function J(e,i){if(1&e&&(l.Qb(0,"td"),l.Hc(1,j,2,1,"span",45),l.Hc(2,S,2,1,"span",45),l.Pb()),2&e){const e=i.$implicit;l.Fc("width: ",e.width,""),l.xb(1),l.ic("ngIf",null!=e.isCurrency),l.xb(1),l.ic("ngIf",null==e.isCurrency)}}function D(e,i){if(1&e){const e=l.Sb();l.Qb(0,"tr"),l.Qb(1,"td",39),l.Qb(2,"button",43),l.Yb("click",function(t){l.yc(e);const n=i.$implicit;return l.bc().hapusData(t,n)}),l.Pb(),l.Pb(),l.Hc(3,J,3,5,"td",44),l.Pb()}if(2&e){const e=i.columns;l.xb(3),l.ic("ngForOf",e)}}function U(e,i){if(1&e){const e=l.Sb();l.Qb(0,"div",46),l.Qb(1,"p-checkbox",47),l.Yb("ngModelChange",function(t){l.yc(e);const n=i.$implicit;return l.bc().popUp.kelas[n.id]=t}),l.Pb(),l.Qb(2,"label",48),l.Jc(3),l.Pb(),l.Pb()}if(2&e){const e=i.$implicit,t=l.bc();l.xb(1),l.jc("inputId",e.id),l.ic("ngModel",t.popUp.kelas[e.id]),l.xb(1),l.jc("for",e.id),l.xb(1),l.Lc(" ",e.namakelas,"")}}function T(e,i){if(1&e){const e=l.Sb();l.Qb(0,"div",51),l.Qb(1,"p-checkbox",52),l.Yb("ngModelChange",function(t){l.yc(e);const n=i.$implicit;return l.bc(2).popUp.layanan[n.id]=t})("onChange",function(){return l.yc(e),l.bc(2).getSelected()}),l.Pb(),l.Qb(2,"label",48),l.Jc(3),l.Pb(),l.Pb()}if(2&e){const e=i.$implicit,t=l.bc(2);l.xb(1),l.jc("inputId",e.id),l.ic("ngModel",t.popUp.layanan[e.id]),l.xb(1),l.jc("for",e.id),l.xb(1),l.Lc(" ",e.namaproduk,"")}}function I(e,i){if(1&e&&(l.Qb(0,"div",49),l.Hc(1,T,4,4,"div",50),l.cc(2,"filter"),l.Pb()),2&e){const e=l.bc();l.xb(1),l.ic("ngForOf",l.ec(2,1,e.listProdukCek,e.searchText))}}const K=function(){return{width:"100%"}};function Y(e,i){if(1&e&&(l.Qb(0,"div",56),l.Lb(1,"p-tag",57),l.Pb()),2&e){const e=i.$implicit;l.xb(1),l.Ec(l.mc(3,K)),l.jc("value",e.namaproduk)}}function F(e,i){if(1&e){const e=l.Sb();l.Qb(0,"p-panel",53),l.Qb(1,"div",3),l.Hc(2,Y,2,4,"div",54),l.Pb(),l.Qb(3,"div",3),l.Qb(4,"div",4),l.Qb(5,"button",55),l.Yb("click",function(){return l.yc(e),l.bc().clearSelection()}),l.Pb(),l.Pb(),l.Pb(),l.Pb()}if(2&e){const e=l.bc();l.ic("toggleable",!0),l.xb(2),l.ic("ngForOf",e.listChecked),l.xb(3),l.ic("disabled",e.isSimpan)}}function H(e,i){if(1&e){const e=l.Sb();l.Qb(0,"button",58),l.Yb("click",function(){return l.yc(e),l.bc().save()}),l.Pb(),l.Qb(1,"button",59),l.Yb("click",function(){return l.yc(e),l.bc().pop_Tambah=!1}),l.Pb()}if(2&e){const e=l.bc();l.ic("disabled",e.isSimpan)}}const W=function(){return[5,10,25,50]},L=function(){return{width:"900px",minWidth:"900px"}},O=[{path:"",component:(()=>{class e{constructor(e,i,t,n,o,a,l,s){this.apiService=e,this.authService=i,this.cacheHelper=t,this.dateHelper=n,this.alertService=o,this.route=a,this.router=l,this.confirmationService=s,this.item={jmlRow:100},this.listProdukCek=[],this.produkDef=[],this.popUp={layanan:[],kelas:[]},this.listKelas=[],this.listChecked=[],this.searchText="",this.isSimpan=!1}ngOnInit(){this.column=[{field:"no",header:"No",width:"60px"},{field:"sikluske",header:"Siklus Ke",width:"80px"},{field:"jeniswaktu",header:"Jenis Waktu",width:"150px"},{field:"namaproduk",header:"Menu",width:"200px"},{field:"namakelas",header:"Kelas",width:"150px"},{field:"jenisdiet",header:"Jenis Diet",width:"150px"},{field:"kategorydiet",header:"Kategory Diet",width:"150px"}],this.loadCombo(),this.load()}loadCombo(){this.apiService.get("sysadmin/general/get-combo-gizi").subscribe(e=>{this.listJenisDiet=e.jenisdiet,this.listJenisWaktu=e.jeniswaktu,this.produkDef=e.produk,this.listProdukCek=e.produk,this.listKelas=e.kelas,this.listKategoriDiet=e.kategorydiet})}cari(){this.load()}load(){var e="";null!=this.item.kelas&&(e="&kelasId="+this.item.kelas.id);var i="";null!=this.item.jenisDiet&&(i="&jenisDietId="+this.item.jenisDiet.id);var t="";null!=this.item.jenisWaktu&&(t="&jenisWaktuId="+this.item.jenisWaktu.id);var n="";null!=this.item.namaProduk&&(n="&namaProduk="+this.item.namaProduk);var o="";null!=this.item.jmlRow&&(o="&jmlRow="+this.item.jmlRow);var a="";null!=this.item.siklusKe&&(a="&siklusKe="+this.item.siklusKe),this.apiService.get("sysadmin/general/get-siklus-gizi?"+a+e+i+t+n+o+a).subscribe(e=>{for(var i=0;i<e.data.length;i++)e.data[i].no=i+1;this.dataSource=e.data})}onSort(){this.updateRowGroupMetaData()}updateRowGroupMetaData(){if(this.rowGroupMetadata={},this.dataSource)for(let e=0;e<this.dataSource.length;e++){let i=this.dataSource[e].sikluske;0==e?this.rowGroupMetadata[i]={index:0,size:1}:i===this.dataSource[e-1].sikluske?this.rowGroupMetadata[i].size++:this.rowGroupMetadata[i]={index:e,size:1}}}tambah(){this.pop_Tambah=!0,this.popUp={layanan:[],kelas:[]}}clearFilter(){this.searchText=""}clearSelection(){var e=Object.keys(this.popUp.layanan);for(let i=0;i<e.length;i++)this.popUp.layanan[e[i]]=!1;this.getSelected()}getSelected(){if(this.popUp.layanan.length>0)for(var e=Object.keys(this.popUp.layanan),i=0;i<e.length;i++){const o=e[i];if(1==this.popUp.layanan[parseInt(o)])for(var t=0;t<this.produkDef.length;t++){const e=this.produkDef[t];if(e.id==o){for(var n=0;n<this.listChecked.length;n++)this.listChecked[n].namaproduk==e.namaproduk&&this.listChecked.splice(n,1);this.listChecked.push({namaproduk:e.namaproduk})}}else for(t=0;t<this.produkDef.length;t++){const e=this.produkDef[t];if(e.id==o)for(n=0;n<this.listChecked.length;n++)this.listChecked[n].namaproduk==e.namaproduk&&this.listChecked.splice(n,1)}}}save(){if(null!=this.popUp.siklusKe)if(null!=this.popUp.jenisDiet)if(null!=this.popUp.jenisWaktu)if(0!=this.popUp.kelas.length)if(0!=this.popUp.layanan.length){for(var e=Object.keys(this.popUp.layanan),i=Object.keys(this.popUp.kelas),t=[],n=e.length-1;n>=0;n--)if(1==this.popUp.layanan[parseInt(e[n])])for(var o=i.length-1;o>=0;o--)1==this.popUp.kelas[parseInt(i[o])]&&t.push({produkfk:e[n],kelasfk:i[o]});var a={sikluske:this.popUp.siklusKe,objectjenisdietfk:this.popUp.jenisDiet.id,objectjeniswaktufk:this.popUp.jenisWaktu.id,objectkategoryprodukfk:null!=this.popUp.kategory?this.popUp.kategory.id:null,objectbentukprodukfk:null!=this.popUp.bentukProduk?this.popUp.bentukProduk.id:null,details:t};this.isSimpan=!0,this.apiService.post("sysadmin/general/save-siklus-gizi",a).subscribe(e=>{this.load(),this.popUp={layanan:[],kelas:[]},this.isSimpan=!1,this.pop_Tambah=!1})}else this.alertService.error("Info","Produk belum di pilih");else this.alertService.error("Info","Kelas belum di pilih");else this.alertService.error("Info","Jenis Waktu belum di pilih");else this.alertService.error("Info","Jenis Diet belum di pilih");else this.alertService.error("Info","Siklus Ke harus di isi")}hapusData(e,i){this.confirmationService.confirm({target:e.target,message:"Yakin mau hapus?",icon:"pi pi-exclamation-triangle",acceptLabel:"Ya",rejectLabel:"Tidak",accept:()=>{this.apiService.post("sysadmin/general/delete-siklus-gizi",{id:i.id}).subscribe(e=>{this.load()})},reject:()=>{}})}}return e.\u0275fac=function(i){return new(i||e)(l.Jb(s.a),l.Jb(s.b),l.Jb(p.a),l.Jb(r.a),l.Jb(c.a),l.Jb(o.a),l.Jb(o.f),l.Jb(a.a))},e.\u0275cmp=l.Db({type:e,selectors:[["app-siklus-menu"]],features:[l.wb([a.a])],decls:75,vars:49,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-col-12","p-md-12"],[1,"p-grid"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["type","text","pInputText","","placeholder","Nama Menu",3,"ngModel","ngModelChange","keyup.enter"],["placeholder","Jenis Waktu","optionLabel","jeniswaktu",3,"options","ngModel","filter","showClear","ngModelChange"],["placeholder","Jenis Diet","optionLabel","jenisdiet",3,"options","ngModel","filter","showClear","ngModelChange"],["type","number","pInputText","","placeholder","Siklus Ke",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-1"],["type","text","pInputText","","placeholder","Siklus Ke",3,"ngModel","ngModelChange","keyup.enter"],[1,"p-col-12","p-md-1",2,"margin-top","15px"],["pButton","","icon","pi pi-search","pTooltip","Cari",3,"click"],[1,"p-col-12"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","dataKey","norec","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["header","Tambah Siklus",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],[1,"p-fluid","p-grid"],["header","Detail Siklus",3,"toggleable"],[1,"p-col-12","p-md-4"],["type","number","pInputText","","placeholder","Siklus Ke",3,"ngModel","ngModelChange"],["placeholder","Jenis Waktu","optionLabel","jenisdiet",3,"options","ngModel","filter","showClear","ngModelChange"],["placeholder","Kategori Diet","optionLabel","kategorydiet",3,"options","ngModel","filter","showClear","ngModelChange"],["header","Kelas",3,"toggleable"],["class","p-col-12 p-md-4 p-field-checkbox",4,"ngFor","ngForOf"],["header","Detail Menu",3,"toggleable"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Filter",3,"ngModel","ngModelChange"],["pButton","","type","button","icon","pi pi-times","pTooltip","Clear Filter",1,"p-button","p-button-danger","p-mr-2",3,"click"],["class","p-grid","style","overflow: auto; height: 250px",4,"ngIf"],["header","Detail Pemeriksaan Terpilih",3,"toggleable",4,"ngIf"],["pTemplate","footer"],[1,"p-d-flex"],["type","button","pButton","","pRipple","","icon","pi pi-plus","pTooltip","Tambah Siklus","tooltipPosition","bottom",1,"p-button-success","p-mr-2",3,"click"],[2,"width","80px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus Data","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"p-col-12","p-md-4","p-field-checkbox"],["binary","true",3,"ngModel","inputId","ngModelChange"],[3,"for"],[1,"p-grid",2,"overflow","auto","height","250px"],["class","p-col-12 p-md-3 p-field-checkbox",4,"ngFor","ngForOf"],[1,"p-col-12","p-md-3","p-field-checkbox"],["binary","true",3,"ngModel","inputId","ngModelChange","onChange"],["header","Detail Pemeriksaan Terpilih",3,"toggleable"],["class","p-col-12 p-md-3",4,"ngFor","ngForOf"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus Semua Data Terpilih","label","Clear",1,"p-button","p-button-danger","p-mr-2",3,"disabled","click"],[1,"p-col-12","p-md-3"],["styleClass","p-mr-2","severity","warning",3,"value"],["pButton","","icon","pi pi-save","label","Simpan",1,"p-button","p-button-success","p-mr-2",3,"disabled","click"],["pButton","","icon","fa fa-refresh","label","Batal",1,"p-button","p-mr-2",3,"click"]],template:function(e,i){1&e&&(l.Lb(0,"p-confirmPopup"),l.Qb(1,"div",0),l.Qb(2,"div",1),l.Qb(3,"h4"),l.Jc(4,"Master Siklus Gizi"),l.Pb(),l.Qb(5,"div",2),l.Qb(6,"div",3),l.Qb(7,"div",4),l.Qb(8,"label",5),l.Jc(9,"Nama Menu"),l.Pb(),l.Qb(10,"input",6),l.Yb("ngModelChange",function(e){return i.item.namaProduk=e})("keyup.enter",function(){return i.cari()}),l.Pb(),l.Pb(),l.Qb(11,"div",4),l.Qb(12,"label",5),l.Jc(13,"Jenis Waktu"),l.Pb(),l.Qb(14,"p-dropdown",7),l.Yb("ngModelChange",function(e){return i.item.jenisWaktu=e}),l.Pb(),l.Pb(),l.Qb(15,"div",4),l.Qb(16,"label",5),l.Jc(17,"Jenis Diet"),l.Pb(),l.Qb(18,"p-dropdown",8),l.Yb("ngModelChange",function(e){return i.item.jenisDiet=e}),l.Pb(),l.Pb(),l.Qb(19,"div",4),l.Qb(20,"label",5),l.Jc(21,"Siklus Ke"),l.Pb(),l.Qb(22,"input",9),l.Yb("ngModelChange",function(e){return i.item.siklusKe=e})("keyup.enter",function(){return i.cari()}),l.Pb(),l.Pb(),l.Qb(23,"div",10),l.Qb(24,"label",5),l.Jc(25,"Rows"),l.Pb(),l.Qb(26,"input",11),l.Yb("ngModelChange",function(e){return i.item.jmlRow=e})("keyup.enter",function(){return i.cari()}),l.Pb(),l.Pb(),l.Qb(27,"div",12),l.Qb(28,"button",13),l.Yb("click",function(){return i.cari()}),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(29,"div",14),l.Qb(30,"div",3),l.Qb(31,"div",2),l.Qb(32,"p-table",15,16),l.Yb("selectionChange",function(e){return i.selectedData=e}),l.Hc(34,C,2,0,"ng-template",17),l.Hc(35,M,3,1,"ng-template",18),l.Hc(36,D,4,1,"ng-template",19),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(37,"p-dialog",20),l.Yb("visibleChange",function(e){return i.pop_Tambah=e}),l.Qb(38,"div",21),l.Qb(39,"div",2),l.Qb(40,"p-panel",22),l.Qb(41,"div",3),l.Qb(42,"div",23),l.Qb(43,"label",5),l.Jc(44,"Siklus Ke"),l.Pb(),l.Qb(45,"input",24),l.Yb("ngModelChange",function(e){return i.popUp.siklusKe=e}),l.Pb(),l.Pb(),l.Qb(46,"div",23),l.Qb(47,"label",5),l.Jc(48,"Jenis Diet"),l.Pb(),l.Qb(49,"p-dropdown",25),l.Yb("ngModelChange",function(e){return i.popUp.jenisDiet=e}),l.Pb(),l.Pb(),l.Qb(50,"div",23),l.Qb(51,"label",5),l.Jc(52,"Jenis Waktu"),l.Pb(),l.Qb(53,"p-dropdown",7),l.Yb("ngModelChange",function(e){return i.popUp.jenisWaktu=e}),l.Pb(),l.Pb(),l.Qb(54,"div",23),l.Qb(55,"label",5),l.Jc(56,"Kategori Diet"),l.Pb(),l.Qb(57,"p-dropdown",26),l.Yb("ngModelChange",function(e){return i.popUp.kategory=e}),l.Pb(),l.Pb(),l.Qb(58,"div",2),l.Qb(59,"p-panel",27),l.Qb(60,"div",3),l.Hc(61,U,4,4,"div",28),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(62,"div",2),l.Qb(63,"p-panel",29),l.Qb(64,"div",3),l.Qb(65,"div",23),l.Qb(66,"span",30),l.Lb(67,"i",31),l.Qb(68,"input",32),l.Yb("ngModelChange",function(e){return i.searchText=e}),l.Pb(),l.Pb(),l.Pb(),l.Qb(69,"div",10),l.Qb(70,"button",33),l.Yb("click",function(){return i.clearFilter()}),l.Pb(),l.Pb(),l.Hc(71,I,3,4,"div",34),l.Pb(),l.Pb(),l.Pb(),l.Qb(72,"div",14),l.Hc(73,F,6,3,"p-panel",35),l.Pb(),l.Pb(),l.Hc(74,H,2,1,"ng-template",36),l.Pb()),2&e&&(l.xb(10),l.ic("ngModel",i.item.namaProduk),l.xb(4),l.ic("options",i.listJenisWaktu)("ngModel",i.item.jenisWaktu)("filter",!0)("showClear",!0),l.xb(4),l.ic("options",i.listJenisDiet)("ngModel",i.item.jenisDiet)("filter",!0)("showClear",!0),l.xb(4),l.ic("ngModel",i.item.siklusKe),l.xb(4),l.ic("ngModel",i.item.jmlRow),l.xb(6),l.ic("columns",i.column)("value",i.dataSource)("selection",i.selectedData)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",l.mc(47,W))("paginator",!0)("pageLinks",5),l.xb(5),l.Ec(l.mc(48,L)),l.ic("visible",i.pop_Tambah)("modal",!0)("maximizable",!0)("draggable",!0)("resizable",!0),l.xb(3),l.ic("toggleable",!0),l.xb(5),l.ic("ngModel",i.popUp.siklusKe),l.xb(4),l.ic("options",i.listJenisDiet)("ngModel",i.popUp.jenisDiet)("filter",!0)("showClear",!0),l.xb(4),l.ic("options",i.listJenisWaktu)("ngModel",i.popUp.jenisWaktu)("filter",!0)("showClear",!0),l.xb(4),l.ic("options",i.listKategoriDiet)("ngModel",i.popUp.kategory)("filter",!0)("showClear",!0),l.xb(2),l.ic("toggleable",!0),l.xb(2),l.ic("ngForOf",i.listKelas),l.xb(2),l.ic("toggleable",!0),l.xb(5),l.ic("ngModel",i.searchText),l.xb(3),l.ic("ngIf",i.listProdukCek.length>0),l.xb(2),l.ic("ngIf",i.listChecked.length>0))},directives:[b.a,d.a,u.a,d.g,d.h,h.a,d.i,g.b,f.a,k.h,a.k,m.a,P.a,n.k,n.l,v.a,k.g,k.f,Q.a,x.a],pipes:[y.a],styles:[".p-field-checkbox[_ngcontent-%COMP%], .p-field-radiobutton[_ngcontent-%COMP%]{margin-bottom:0;display:flex;align-items:center}"]}),e})()}];let R=(()=>{class e{}return e.\u0275mod=l.Hb({type:e}),e.\u0275inj=l.Gb({factory:function(i){return new(i||e)},imports:[[o.j.forChild(O)],o.j]}),e})();var z=t("PCNd");let $=(()=>{class e{}return e.\u0275mod=l.Hb({type:e}),e.\u0275inj=l.Gb({factory:function(i){return new(i||e)},imports:[[n.b,R,z.a]]}),e})()}}]);