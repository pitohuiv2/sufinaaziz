(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{VvNW:function(e,t,n){"use strict";n.r(t),n.d(t,"MapRuanganToProdukModule",function(){return O});var i=n("ofXK"),a=n("tyNb"),o=n("fXoL"),l=n("EJUL"),r=n("7zfz"),s=n("U+s4"),c=n("G0w9"),d=n("ujBT"),p=n("dPl2"),b=n("arFO"),u=n("3Pt+"),h=n("7kUa"),g=n("jIHw"),m=n("xlun"),f=n("rEr+"),P=n("7CaW"),k=n("Ji6n"),C=n("hYoW"),v=n("PU9F");function Q(e,t){if(1&e&&(o.Qb(0,"th",36),o.Jc(1),o.Lb(2,"p-sortIcon",37),o.Pb()),2&e){const e=t.$implicit;o.Fc("width: ",e.width,""),o.jc("pSortableColumn",e.field),o.xb(1),o.Lc(" ",e.header," "),o.xb(1),o.jc("field",e.field)}}function y(e,t){if(1&e&&(o.Qb(0,"tr"),o.Lb(1,"th",34),o.Hc(2,Q,3,6,"th",35),o.Pb()),2&e){const e=t.$implicit;o.xb(2),o.ic("ngForOf",e)}}function x(e,t){if(1&e&&(o.Qb(0,"td"),o.Jc(1),o.Pb()),2&e){const e=t.$implicit,n=o.bc().$implicit;o.Fc("width: ",e.width,""),o.xb(1),o.Lc(" ",n[e.field]," ")}}function w(e,t){if(1&e){const e=o.Sb();o.Qb(0,"tr"),o.Qb(1,"td",34),o.Qb(2,"button",38),o.Yb("click",function(){o.yc(e);const n=t.$implicit;return o.bc().hapusRow(n)}),o.Pb(),o.Pb(),o.Hc(3,x,2,4,"td",39),o.Pb()}if(2&e){const e=t.columns;o.xb(3),o.ic("ngForOf",e)}}function M(e,t){if(1&e){const e=o.Sb();o.Qb(0,"div",42),o.Qb(1,"p-checkbox",43),o.Yb("ngModelChange",function(n){o.yc(e);const i=t.$implicit;return o.bc(2).item.layanan[i.id]=n})("onChange",function(){return o.yc(e),o.bc(2).getSelected()}),o.Pb(),o.Qb(2,"label",44),o.Jc(3),o.Pb(),o.Pb()}if(2&e){const e=t.$implicit,n=o.bc(2);o.xb(1),o.jc("inputId",e.id),o.ic("ngModel",n.item.layanan[e.id]),o.xb(1),o.jc("for",e.id),o.xb(1),o.Lc(" ",e.namaproduk,"")}}function S(e,t){if(1&e&&(o.Qb(0,"div",40),o.Hc(1,M,4,4,"div",41),o.cc(2,"filter"),o.Pb()),2&e){const e=o.bc();o.xb(1),o.ic("ngForOf",o.ec(2,1,e.listProdukCek,e.searchText))}}const R=function(){return{width:"100%"}};function D(e,t){if(1&e&&(o.Qb(0,"div",6),o.Lb(1,"p-tag",47),o.Pb()),2&e){const e=t.$implicit;o.xb(1),o.Ec(o.mc(3,R)),o.jc("value",e.namaproduk)}}function I(e,t){if(1&e&&(o.Qb(0,"p-panel",45),o.Qb(1,"div",2),o.Hc(2,D,2,4,"div",46),o.Pb(),o.Pb()),2&e){const e=o.bc();o.kc("header","Detail Pelayanan Terpilih : ",e.countSelected,""),o.ic("toggleable",!0),o.xb(2),o.ic("ngForOf",e.listChecked)}}const T=function(){return[5,10,25,50]},J=[{path:"",component:(()=>{class e{constructor(e,t,n,i,a,o,l,r){this.apiService=e,this.authService=t,this.messageService=n,this.cacheHelper=i,this.dateHelper=a,this.alertService=o,this.route=l,this.router=r,this.item={layanan:[],limit:200},this.pop_User=!1,this.isSimpan=!1,this.indexTab=0,this.searchText="",this.searchText2="",this.listModul=[],this.listRuangan=[],this.ruanganDef=[],this.produkDef=[],this.d_Ruangan2=[],this.listProdukCek=[],this.listChecked=[],this.countSelected=0}ngOnInit(){this.loadColumn(),this.loadCombo(),this.loadData()}loadCombo(){this.apiService.get("sysadmin/general/get-map-ruangan-combo").subscribe(e=>{this.d_Departemen=e.departemen,this.listProdukCek=e.produk,this.produkDef=e.produk})}cari(){this.loadData()}loadData(){let e="",t="",n="",i="";null!=this.item.qDept&&(e=this.item.qDept.id),null!=this.item.qRuangn&&(t=this.item.qRuangn.id),null!=this.item.qProduk&&(n=this.item.qProduk),null!=this.item.limit&&(i=this.item.limit),this.apiService.get("sysadmin/general/get-map-ruangan-produk?instId="+e+"&ruangId="+t+"&produk="+n+"&limit="+i).subscribe(e=>{for(let t=0;t<e.length;t++)e[t].no=t+1;this.dataSource=e})}loadColumn(){this.column=[{field:"no",header:"No",width:"40px"},{field:"namadepartemen",header:"Instalasi",width:"150px"},{field:"namaruangan",header:"Ruangan",width:"150px"},{field:"namaproduk",header:"Nama Pelayanan",width:"200px"}]}isiRuangan(){null!=this.item.qDept&&(this.d_Ruangan=this.item.qDept.ruangan)}isiRuangan2(){null!=this.item.instalasi&&(this.d_Ruangan2=this.item.instalasi.ruangan)}hapusRow(e){this.apiService.post("sysadmin/general/delete-map-ruangan-produk",{id:e.id}).subscribe(e=>{this.loadData()})}handleChangeTab(e){this.indexTab=e.index,0==e.index&&this.loadData()}clearFilter(){this.searchText=""}saveMap(){if(null!=this.item.ruangan)if(0!=this.item.layanan.length){for(var e=Object.keys(this.item.layanan),t=[],n=e.length-1;n>=0;n--)1==this.item.layanan[e[n]]&&t.push({produkidfk:parseInt(e[n])});this.apiService.post("sysadmin/general/save-map-ruangan-produk",{ruanganidfk:this.item.ruangan.id,details:t}).subscribe(e=>{})}else this.alertService.warn("Info","Belum ada Pelayanan yang dipilih");else this.alertService.warn("Info","Ruangan belum dipilih")}changeMap(e){this.item.layanan=[],this.getSelected(),null!=e.value&&this.apiService.get("sysadmin/general/get-map-ruangan-produk?ruangId="+e.value.id).subscribe(e=>{this.item.layanan=[];for(let t=0;t<e.length;t++)this.item.layanan[e[t].produkidfk]=!0;this.getSelected()})}cekAll(){for(let e=0;e<this.listProdukCek.length;e++)this.item.layanan[this.listProdukCek[e].id]=!0;this.getSelected()}clearSelection(){var e=Object.keys(this.item.layanan);for(let t=0;t<e.length;t++)this.item.layanan[e[t]]=!1;this.getSelected()}getSelected(){if(this.item.layanan.length>0){for(var e=Object.keys(this.item.layanan),t=0;t<e.length;t++){const a=e[t];if(1==this.item.layanan[parseInt(a)])for(var n=0;n<this.produkDef.length;n++){const e=this.produkDef[n];if(e.id==a){for(var i=0;i<this.listChecked.length;i++)this.listChecked[i].namaproduk==e.namaproduk&&this.listChecked.splice(i,1);this.listChecked.push({namaproduk:e.namaproduk})}}else for(n=0;n<this.produkDef.length;n++){const e=this.produkDef[n];if(e.id==a)for(i=0;i<this.listChecked.length;i++)this.listChecked[i].namaproduk==e.namaproduk&&this.listChecked.splice(i,1)}}this.countSelected=this.listChecked.length}else this.listChecked=[]}}return e.\u0275fac=function(t){return new(t||e)(o.Jb(l.a),o.Jb(l.b),o.Jb(r.h),o.Jb(s.a),o.Jb(c.a),o.Jb(d.a),o.Jb(a.a),o.Jb(a.f))},e.\u0275cmp=o.Db({type:e,selectors:[["app-map-ruangan-to-produk"]],decls:62,vars:32,consts:[[1,"p-fluid","p-formgrid"],[1,"card","card-w-title"],[1,"p-grid"],[1,"p-col-12","p-md-12"],[3,"onChange"],["header","Daftar Mapping","leftIcon","fa fa-users"],[1,"p-col-12","p-md-2"],["for","input",1,"label"],["placeholder","Instalasi","optionLabel","departemen",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["placeholder","Ruangan","optionLabel","ruangan",3,"options","ngModel","filter","showClear","ngModelChange"],[1,"p-col-12","p-md-3"],["type","text","pInputText","","placeholder","Nama Pelayanan ",3,"ngModel","ngModelChange"],[1,"p-col-12","p-md-1"],["type","text","pInputText","","placeholder","Rows ",3,"ngModel","ngModelChange"],[1,"p-col-12","p-md-1",2,"margin-top","16px"],["pButton","","type","submit","icon","pi pi-search","pTooltip","Cari",3,"click"],[1,"p-col-12"],["styleClass","p-datatable-customers","scrollable","true","sortMode","multiple","selectionMode","single",3,"columns","value","selection","rowHover","rows","showCurrentPageReport","rowsPerPageOptions","paginator","pageLinks","selectionChange"],["pTemplate","header"],["pTemplate","body"],["header","Mapping Pelayanan","leftIcon","pi pi-sitemap"],["placeholder","Ruangan","optionLabel","ruangan",3,"options","ngModel","filter","showClear","ngModelChange","onChange"],["header","Detail Pelayanan",3,"toggleable"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Filter",3,"ngModel","ngModelChange"],["pButton","","type","button","icon","pi pi-times","pTooltip","Clear Filter",1,"p-button","p-button-danger","p-mr-2",3,"click"],["pButton","","type","button","icon","pi pi-check","label","Cek Semua",1,"p-button-success","p-mr-2",3,"click"],["pButton","","type","button","icon","pi pi-refresh","label","Hapus Terpilih",1,"p-button-warning","p-mr-2",3,"click"],["class","p-grid","style","overflow: auto; height: 350px;padding: 20px;",4,"ngIf"],[1,"p-grid",2,"margin-top","10px"],[1,"p-col-12","p-md-1","p-md-offset-11"],["pButton","","type","button","icon","pi pi-save","label","Simpan",1,"p-button","p-mr-2",3,"click"],[3,"header","toggleable",4,"ngIf"],[2,"width","50px"],[3,"pSortableColumn","style",4,"ngFor","ngForOf"],[3,"pSortableColumn"],[3,"field"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Hapus ","label","",1,"p-button-rounded","p-button-danger","p-mr-2",3,"click"],[3,"style",4,"ngFor","ngForOf"],[1,"p-grid",2,"overflow","auto","height","350px","padding","20px"],["class","p-col-12 p-md-2 p-field-checkbox",4,"ngFor","ngForOf"],[1,"p-col-12","p-md-2","p-field-checkbox"],["binary","true","name","group1",3,"ngModel","inputId","ngModelChange","onChange"],[3,"for"],[3,"header","toggleable"],["class","p-col-12 p-md-2",4,"ngFor","ngForOf"],["styleClass","p-mr-2","severity","warning",3,"value"]],template:function(e,t){1&e&&(o.Qb(0,"div",0),o.Qb(1,"div",1),o.Qb(2,"h4"),o.Jc(3,"Map Ruangan To Pelayanan"),o.Pb(),o.Qb(4,"div",2),o.Qb(5,"div",3),o.Qb(6,"p-tabView",4),o.Yb("onChange",function(e){return t.handleChangeTab(e)}),o.Qb(7,"p-tabPanel",5),o.Qb(8,"div",2),o.Qb(9,"div",6),o.Qb(10,"label",7),o.Jc(11,"Instalasi"),o.Pb(),o.Qb(12,"p-dropdown",8),o.Yb("ngModelChange",function(e){return t.item.qDept=e})("onChange",function(){return t.isiRuangan()}),o.Pb(),o.Pb(),o.Qb(13,"div",6),o.Qb(14,"label",7),o.Jc(15,"Ruangan"),o.Pb(),o.Qb(16,"p-dropdown",9),o.Yb("ngModelChange",function(e){return t.item.qRuangn=e}),o.Pb(),o.Pb(),o.Qb(17,"div",10),o.Qb(18,"label",7),o.Jc(19,"Nama Pelayanan "),o.Pb(),o.Qb(20,"input",11),o.Yb("ngModelChange",function(e){return t.item.qProduk=e}),o.Pb(),o.Pb(),o.Qb(21,"div",12),o.Qb(22,"label",7),o.Jc(23,"Rows "),o.Pb(),o.Qb(24,"input",13),o.Yb("ngModelChange",function(e){return t.item.limit=e}),o.Pb(),o.Pb(),o.Qb(25,"div",14),o.Qb(26,"button",15),o.Yb("click",function(){return t.cari()}),o.Pb(),o.Pb(),o.Qb(27,"div",16),o.Qb(28,"p-table",17),o.Yb("selectionChange",function(e){return t.selectedGrid=e}),o.Hc(29,y,3,1,"ng-template",18),o.Hc(30,w,4,1,"ng-template",19),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Qb(31,"p-tabPanel",20),o.Qb(32,"div",2),o.Qb(33,"div",3),o.Qb(34,"div",2),o.Qb(35,"div",6),o.Qb(36,"label",7),o.Jc(37,"Instalasi"),o.Pb(),o.Qb(38,"p-dropdown",8),o.Yb("ngModelChange",function(e){return t.item.instalasi=e})("onChange",function(){return t.isiRuangan2()}),o.Pb(),o.Pb(),o.Qb(39,"div",6),o.Qb(40,"label",7),o.Jc(41,"Ruangan"),o.Pb(),o.Qb(42,"p-dropdown",21),o.Yb("ngModelChange",function(e){return t.item.ruangan=e})("onChange",function(e){return t.changeMap(e)}),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Qb(43,"div",3),o.Qb(44,"p-panel",22),o.Qb(45,"div",2),o.Qb(46,"div",6),o.Qb(47,"span",23),o.Lb(48,"i",24),o.Qb(49,"input",25),o.Yb("ngModelChange",function(e){return t.searchText=e}),o.Pb(),o.Pb(),o.Pb(),o.Qb(50,"div",12),o.Qb(51,"button",26),o.Yb("click",function(){return t.clearFilter()}),o.Pb(),o.Pb(),o.Qb(52,"div",12),o.Qb(53,"button",27),o.Yb("click",function(){return t.cekAll()}),o.Pb(),o.Pb(),o.Qb(54,"div",12),o.Qb(55,"button",28),o.Yb("click",function(){return t.clearSelection()}),o.Pb(),o.Pb(),o.Hc(56,S,3,4,"div",29),o.Pb(),o.Qb(57,"div",30),o.Qb(58,"div",31),o.Qb(59,"button",32),o.Yb("click",function(){return t.saveMap()}),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Qb(60,"div",3),o.Hc(61,I,3,3,"p-panel",33),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb(),o.Pb()),2&e&&(o.xb(12),o.ic("options",t.d_Departemen)("ngModel",t.item.qDept)("filter",!0)("showClear",!0),o.xb(4),o.ic("options",t.d_Ruangan)("ngModel",t.item.qRuangn)("filter",!0)("showClear",!0),o.xb(4),o.ic("ngModel",t.item.qProduk),o.xb(4),o.ic("ngModel",t.item.limit),o.xb(4),o.ic("columns",t.column)("value",t.dataSource)("selection",t.selectedGrid)("rowHover",!0)("rows",20)("showCurrentPageReport",!0)("rowsPerPageOptions",o.mc(31,T))("paginator",!0)("pageLinks",5),o.xb(10),o.ic("options",t.d_Departemen)("ngModel",t.item.instalasi)("filter",!0)("showClear",!0),o.xb(4),o.ic("options",t.d_Ruangan2)("ngModel",t.item.ruangan)("filter",!0)("showClear",!0),o.xb(2),o.ic("toggleable",!0),o.xb(5),o.ic("ngModel",t.searchText),o.xb(7),o.ic("ngIf",t.listProdukCek.length>0),o.xb(5),o.ic("ngIf",t.listChecked.length>0))},directives:[p.b,p.a,b.a,u.g,u.h,u.a,h.a,g.b,m.a,f.h,r.k,P.a,i.l,i.k,f.g,f.f,k.a,C.a],pipes:[v.a],styles:[".p-field-checkbox[_ngcontent-%COMP%], .p-field-radiobutton[_ngcontent-%COMP%]{margin-bottom:0;display:flex;align-items:center}"]}),e})()}];let F=(()=>{class e{}return e.\u0275mod=o.Hb({type:e}),e.\u0275inj=o.Gb({factory:function(t){return new(t||e)},imports:[[a.j.forChild(J)],a.j]}),e})();var H=n("PCNd");let O=(()=>{class e{}return e.\u0275mod=o.Hb({type:e}),e.\u0275inj=o.Gb({factory:function(t){return new(t||e)},imports:[[i.b,F,H.a]]}),e})()}}]);