<div class="p-fluid p-formgrid ">
    <div class="card card-w-title">
        <h4>Lembar Pengajuan Klaim</h4>
        <div class="p-grid">
            <div class="p-col-12 p-md-12">
                <p-accordion>
                    <p-accordionTab header="Pembuatan LPK">
                        <div class="p-grid">
                            <div class="p-col-12 p-md-6">

                                <div class="p-grid">
                                    <div class="p-col-12 p-md-6">
                                        <p-radioButton inputId="ri" name="pelayanan" [value]="1"
                                            [(ngModel)]="item.tipe">
                                        </p-radioButton>
                                        <label for="ri"> Insert</label>
                                    </div>
                                    <div class="p-col-12 p-md-6">
                                        <p-radioButton inputId="rj" name="pelayanan" [value]="2"
                                            [(ngModel)]="item.tipe">
                                        </p-radioButton>
                                        <label for="rj"> Update</label>
                                    </div>
                                </div>
                            </div>
                            <div class="p-col-12 p-md-12">
                                <div class="p-grid">
                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">No SEP </label>
                                        <input type="text" [(ngModel)]="t_lpk.noSep" pInputText placeholder="No SEP " />
                                    </div>
                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">Tgl Masuk </label>
                                        <p-calendar [(ngModel)]="t_lpk.tglMasuk" [showIcon]="true"
                                            [monthNavigator]="true" [yearNavigator]="true" yearRange="1980:2030"
                                            [showTime]="false" dateFormat="yy-mm-dd" placeholder="yyyy-mm-dd">
                                        </p-calendar>
                                    </div>
                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">Tgl Keluar </label>
                                        <p-calendar [(ngModel)]="t_lpk.tglKeluar" [showIcon]="true"
                                            [monthNavigator]="true" [yearNavigator]="true" yearRange="1980:2030"
                                            [showTime]="false" dateFormat="yy-mm-dd" placeholder="yyyy-mm-dd">
                                        </p-calendar>
                                    </div>
                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">Jaminan </label>
                                        <input type="text" [(ngModel)]="t_lpk.jaminan" pInputText placeholder="Jaminan "
                                            [disabled]="true" />
                                    </div>
                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">Poli </label>
                                        <p-autoComplete [(ngModel)]="t_lpk.poli" [suggestions]="listPoli"
                                            (completeMethod)="filterAutoCom($event,'listPoli','referensi/poli/' + $event.query,'poli')"
                                            field="nama" [dropdown]="true" placeholder="Ketik minimal 3 karakter">
                                        </p-autoComplete>
                                    </div>
                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">Ruang Rawat</label>
                                        <p-dropdown [options]="listRuangn" [(ngModel)]="t_lpk.ruangRawat"
                                            [filter]="true" [showClear]="true" placeholder="Ruang Rawat"
                                            optionLabel="nama" appendTo="body">
                                        </p-dropdown>
                                    </div>
                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">Kelas Rawat</label>
                                        <p-dropdown [options]="listKelas" [(ngModel)]="t_lpk.kelasRawat" [filter]="true"
                                            [showClear]="true" placeholder="Kelas Rawat" optionLabel="nama"
                                            appendTo="body">
                                        </p-dropdown>
                                    </div>

                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">Spesialistik</label>
                                        <p-dropdown [options]="listSpesialis" [(ngModel)]="t_lpk.spesialistik"
                                            [filter]="true" [showClear]="true" placeholder="Spesialistik"
                                            optionLabel="nama" appendTo="body">
                                        </p-dropdown>
                                    </div>

                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">Cara Keluar </label>
                                        <p-dropdown [options]="listCaraKeluar" [(ngModel)]="t_lpk.caraKeluar"
                                            [filter]="true" [showClear]="true" placeholder="Cara Keluar "
                                            optionLabel="nama" appendTo="body">
                                        </p-dropdown>
                                    </div>
                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">Kondisi Pulang </label>
                                        <p-dropdown [options]="listPasca" [(ngModel)]="t_lpk.kondisiPulang"
                                            [filter]="true" [showClear]="true" placeholder="Kondisi Pulang  "
                                            optionLabel="nama" appendTo="body">
                                        </p-dropdown>
                                    </div>
                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">Rencana Tindak Lanjut </label>
                                        <p-dropdown [options]="listRencana" [(ngModel)]="t_lpk.tindakLanjut"
                                            [filter]="true" [showClear]="true" placeholder="Rencana " optionLabel="nama"
                                            appendTo="body">
                                        </p-dropdown>
                                    </div>

                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">Dirujuk Ke Faskes </label>
                                        <p-autoComplete [(ngModel)]="t_lpk.dirujukKe" [suggestions]="listFaskes"
                                            (completeMethod)="filterAutoCom($event,'listFaskes','referensi/faskes/' + $event.query + '/2','faskes')"
                                            field="nama" [dropdown]="true" placeholder="Ketik minimal 3 karakter">
                                        </p-autoComplete>
                                    </div>
                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">Tgl Kontrol </label>
                                        <p-calendar [(ngModel)]="t_lpk.tglKontrol" [showIcon]="true"
                                            [monthNavigator]="true" [yearNavigator]="true" yearRange="1980:2030"
                                            [showTime]="false" dateFormat="yy-mm-dd" placeholder="yyyy-mm-dd">
                                        </p-calendar>
                                    </div>
                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">Kontrol Kembali Ke Poli </label>
                                        <p-autoComplete [(ngModel)]="t_lpk.poli" [suggestions]="listPoli"
                                            (completeMethod)="filterAutoCom($event,'listPoli','referensi/poli/' + $event.query,'poli')"
                                            field="nama" [dropdown]="true" placeholder="Ketik minimal 3 karakter">
                                        </p-autoComplete>
                                    </div>
                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">Dokter </label>
                                        <p-autoComplete [(ngModel)]="t_lpk.DPJP" [suggestions]="listDJ2P"
                                            [minLength]="3" (completeMethod)="filter2($event)" field="nama"
                                            [dropdown]="true" placeholder="Dokter">
                                        </p-autoComplete>
                                    </div>
                                </div>

                                <div class="p-grid">
                                    <div class="p-col-12 p-md-2" style="margin-top: 15px;">
                                        <p-checkbox [(ngModel)]="item.diagnosaUtama" binary="true"
                                            inputId="item.diagnosaUtama">
                                        </p-checkbox>
                                        <label class="label" for="item.diagnosaUtama" pTooltip="Diagnosa Utama">
                                            Utama
                                        </label>
                                    </div>
                                    <div class="p-col-12 p-md-7">
                                        <label class="label" for="input">Diagnosa</label>
                                        <p-autoComplete [(ngModel)]="item.diagnosa" [suggestions]="listDiagnosa"
                                            (completeMethod)="filterAutoCom($event,'listDiagnosa','referensi/diagnosa/' + $event.query ,'diagnosa')"
                                            field="nama" [dropdown]="true" placeholder="Ketik minimal 3 karakter">
                                        </p-autoComplete>
                                    </div>
                                    <div class="p-col-12 p-md-1" style="margin-top: 16px;">
                                        <button pButton type="submit" class="p-button-primary p-mr-1" icon="pi pi-plus"
                                            (click)="tambah()"></button>

                                    </div>
                                </div>
                                <div class="p-grid">
                                    <div class="p-col-12">
                                        <p-table [columns]="column2" [value]="dataSource2"
                                            styleClass="p-datatable-customers" [rowHover]="true" [rows]="20"
                                            [rowsPerPageOptions]="[5,10,25,50]" [paginator]="false" scrollable="true"
                                            [pageLinks]="5">
                                            <ng-template pTemplate="header" let-columns>
                                                <tr>
                                                    <th style="width: 40px">Aksi</th>
                                                    <th *ngFor="let column of columns" style="width: {{column.width}}">
                                                        {{column.header}}
                                                    </th>
                                                </tr>
                                            </ng-template>

                                            <ng-template pTemplate="body" let-rowData let-columns="columns"
                                                let-rowIndex="rowIndex">
                                                <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                                                    <td style="width: 40px">
                                                        <button pButton type="button" icon="fa fa-trash"
                                                            class="p-button-rounded p-button-danger p-mr-2"
                                                            (click)="removeData(rowData)" pTooltip="Hapus"
                                                            label=""></button>

                                                    </td>
                                                    <td *ngFor="let column of columns" style="width: {{column.width}}">
                                                        <span class="p-column-title"> {{column.header}} </span>
                                                        {{rowData[column.field]}}
                                                    </td>
                                                </tr>
                                            </ng-template>
                                        </p-table>
                                    </div>
                                </div>
                                <div class="p-grid">
                                    <div class="p-col-12 p-md-12">
                                        <div class="p-grid">

                                            <div class="p-col-12 p-md-9">
                                                <label class="label" for="input">Procedure</label>
                                                <p-autoComplete [(ngModel)]="item.diagnosaTindakan"
                                                    [suggestions]="listDiagnosa2"
                                                    (completeMethod)="filterAutoCom($event,'listDiagnosa2','referensi/procedure/' + $event.query ,'procedure')"
                                                    field="nama" [dropdown]="true"
                                                    placeholder="Ketik minimal 3 karakter">
                                                </p-autoComplete>
                                            </div>

                                            <div class="p-col-12 p-md-1" style="margin-top: 16px;">
                                                <button pButton type="submit" class="p-button-primary p-mr-1"
                                                    icon="pi pi-plus" (click)="tambah2()"></button>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-col-12">
                                        <p-table [columns]="column3" [value]="dataSource3"
                                            styleClass="p-datatable-customers" [rowHover]="true" [rows]="20"
                                            [rowsPerPageOptions]="[5,10,25,50]" [paginator]="false" scrollable="true"
                                            [pageLinks]="5">
                                            <ng-template pTemplate="header" let-columns>
                                                <tr>
                                                    <th style="width: 40px">Aksi</th>
                                                    <th *ngFor="let column of columns" style="width: {{column.width}}">
                                                        {{column.header}}
                                                    </th>
                                                </tr>
                                            </ng-template>

                                            <ng-template pTemplate="body" let-rowData let-columns="columns"
                                                let-rowIndex="rowIndex">
                                                <tr [pSelectableRow]="rowData" [pSelectableRowIndex]="rowIndex">
                                                    <td style="width: 40px">
                                                        <button pButton type="button" icon="fa fa-trash"
                                                            class="p-button-rounded p-button-danger p-mr-2"
                                                            (click)="removeData2(rowData)" pTooltip="Hapus"
                                                            label=""></button>

                                                    </td>
                                                    <td *ngFor="let column of columns" style="width: {{column.width}}">
                                                        <span class="p-column-title"> {{column.header}} </span>
                                                        {{rowData[column.field]}}
                                                    </td>
                                                </tr>
                                            </ng-template>
                                        </p-table>
                                    </div>
                                </div>
                                <div class="p-grid">
                                    <div class="p-col-12 p-md-1 p-md-offset-10" style="margin-top: 16px;">
                                        <button pButton pRipple type="button" class="p-button-success p-mr-1"
                                            label="Simpan" icon="pi pi-save" (click)="saveLPK('jsonResult5')"></button>

                                    </div>
                                    <div class="p-col-12 p-md-1" style="margin-top: 16px;">
                                        <button pButton pRipple type="button" class="p-button-danger p-mr-1"
                                            label="Batal" icon="pi pi-refresh" (click)="ClearForm()"></button>

                                    </div>
                                    <div class="p-col-12 p-md-12">
                                        <pre style="height:300px">
                                    <code [innerHtml]="jsonResult5"  class="language-json" pCode></code>
                                </pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </p-accordionTab>
                    <p-accordionTab header="Delete LPK">
                        <div class="p-grid">
                            <div class="p-col-12 p-md-12">
                                <div class="p-grid">

                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">No SEP </label>
                                        <input type="text" [(ngModel)]="item.sep" pInputText placeholder="No SEP" />
                                    </div>

                                    <div class="p-col-12 p-md-1" style="margin-top: 16px;">
                                        <button pButton type="button" class="p-button-primary p-mr-1" icon="pi pi-trash"
                                            (click)="post('LPK/delete','lpkDelete', 'jsonResult2')"></button>


                                    </div>
                                </div>
                            </div>
                            <div class="p-col-12 p-md-12">
                                <pre style="height:300px">
                                <code [innerHtml]="jsonResult2"  class="language-json" pCode></code>
                            </pre>
                            </div>
                        </div>
                    </p-accordionTab>
                    <p-accordionTab header="Data Lembar Pengajuan Klaim">
                        <div class="p-grid">
                            <div class="p-col-12 p-md-12">
                                <div class="p-grid">

                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">Tgl Masuk </label>
                                        <p-calendar [(ngModel)]="item.tglSep" [showIcon]="true" [monthNavigator]="true"
                                            [yearNavigator]="true" yearRange="1980:2030" [showTime]="false"
                                            dateFormat="yy-mm-dd" placeholder="yyyy-mm-dd">
                                        </p-calendar>
                                    </div>
                                    <div class="p-col-12 p-md-3">
                                        <label class="label" for="input">Jenis Pelayanan</label>
                                        <div class="p-grid">
                                            <div class="p-col-12 p-md-6">
                                                <p-radioButton inputId="ri" name="pelayanan" [value]="1"
                                                    [(ngModel)]="item.tipe">
                                                </p-radioButton>
                                                <label for="ri"> Rawat Inap</label>
                                            </div>
                                            <div class="p-col-12 p-md-6">
                                                <p-radioButton inputId="rj" name="pelayanan" [value]="2"
                                                    [(ngModel)]="item.tipe">
                                                </p-radioButton>
                                                <label for="rj"> Rawat Jalan</label>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="p-col-12 p-md-1" style="margin-top: 16px;">
                                        <button pButton type="button" class="p-button-primary p-mr-1"
                                            icon="pi pi-search"
                                            (click)="cari('LPK/TglMasuk/date~'+item.tglSep+'date~'+'/JnsPelayanan/'+item.tipe,'jsonResult1')"></button>

                                    </div>
                                </div>
                            </div>
                            <div class="p-col-12 p-md-12">
                                <pre style="height:300px">
                                <code [innerHtml]="jsonResult1"  class="language-json" pCode></code>
                            </pre>
                            </div>
                        </div>
                    </p-accordionTab>
                </p-accordion>
            </div>
        </div>
    </div>
</div>